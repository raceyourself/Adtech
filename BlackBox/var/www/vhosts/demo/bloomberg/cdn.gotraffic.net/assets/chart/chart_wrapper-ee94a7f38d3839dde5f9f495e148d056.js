/**
 * @license Highcharts JS v3.0.2 (2013-06-05)
 *
 * (c) 2009-2013 Torstein HÃ¸nsi
 *
 * License: www.highcharts.com/license
 */
!function(){function e(e,t){var n;e||(e={});for(n in t)e[n]=t[n];return e}function t(){var e,t=arguments.length,n={},i=function(e,t){var n,r;for(r in t)t.hasOwnProperty(r)&&(n=t[r],"object"!=typeof e&&(e={}),e[r]=n&&"object"==typeof n&&"[object Array]"!==Object.prototype.toString.call(n)&&"number"!=typeof n.nodeType?i(e[r]||{},n):t[r]);return e};for(e=0;t>e;e++)n=i(n,arguments[e]);return n}function n(){for(var e=0,t=arguments,n=t.length,i={};n>e;e++)i[t[e++]]=t[e];return i}function i(e,t){return parseInt(e,t||10)}function r(e){return"string"==typeof e}function o(e){return"object"==typeof e}function a(e){return"[object Array]"===Object.prototype.toString.call(e)}function s(e){return"number"==typeof e}function l(e){return gt.log(e)/gt.LN10}function u(e){return gt.pow(10,e)}function c(e,t){for(var n=e.length;n--;)if(e[n]===t){e.splice(n,1);break}}function d(e){return e!==G&&null!==e}function h(e,t,n){var i,a,s="setAttribute";if(r(t))d(n)?e[s](t,n):e&&e.getAttribute&&(a=e.getAttribute(t));else if(d(t)&&o(t))for(i in t)e[s](i,t[i]);return a}function f(e){return a(e)?e:[e]}function p(){var e,t,n=arguments,i=n.length;for(e=0;i>e;e++)if(t=n[e],"undefined"!=typeof t&&null!==t)return t}function g(t,n){At&&n&&n.opacity!==G&&(n.filter="alpha(opacity="+100*n.opacity+")"),e(t.style,n)}function m(t,n,i,r,o){var a=ft.createElement(t);return n&&e(a,n),o&&g(a,{padding:0,border:Jt,margin:0}),i&&g(a,i),r&&r.appendChild(a),a}function v(t,n){var i=function(){};return i.prototype=new t,e(i.prototype,n),i}function y(e,t,n,r){var o=K.lang,a=e,s=-1===t?((a||0).toString().split(".")[1]||"").length:isNaN(t=xt(t))?2:t,l=void 0===n?o.decimalPoint:n,u=void 0===r?o.thousandsSep:r,c=0>a?"-":"",d=String(i(a=xt(+a||0).toFixed(s))),h=d.length>3?d.length%3:0;return c+(h?d.substr(0,h)+u:"")+d.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+u)+(s?l+xt(a-d).toFixed(s).slice(2):"")}function b(e,t){return new Array((t||2)+1-String(e).length).join(0)+e}function _(e,t,n){var i=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(i),n.apply(this,e)}}function x(e,t){var n,i=/f$/,r=/\.([0-9])/,o=K.lang;return i.test(e)?(n=e.match(r),n=n?n[1]:-1,t=y(t,n,o.decimalPoint,e.indexOf(",")>-1?o.thousandsSep:"")):t=J(e,t),t}function w(e,t){for(var n,i,r,o,a,s,l,u="{",c=!1,d=[];-1!==(l=e.indexOf(u));){if(n=e.slice(0,l),c){for(i=n.split(":"),r=i.shift().split("."),a=r.length,s=t,o=0;a>o;o++)s=s[r[o]];i.length&&(s=x(i.join(":"),s)),d.push(s)}else d.push(n);e=e.slice(l+1),c=!c,u=c?"}":"{"}return d.push(e),d.join("")}function C(e,t,n,i){var r,o;for(n=p(n,1),r=e/n,t||(t=[1,2,2.5,5,10],i&&i.allowDecimals===!1&&(1===n?t=[1,2,5,10]:.1>=n&&(t=[1/n]))),o=0;o<t.length&&(e=t[o],!(r<=(t[o]+(t[o+1]||t[o]))/2));o++);return e*=n}function T(e,t){var n,i,r=t||[[on,[1,2,5,10,20,25,50,100,200,500]],[an,[1,2,5,10,15,30]],[sn,[1,2,5,10,15,30]],[ln,[1,2,3,4,6,8,12]],[un,[1,2]],[cn,[1,2]],[dn,[1,2,3,4,6]],[hn,null]],o=r[r.length-1],a=et[o[0]],s=o[1];for(i=0;i<r.length;i++)if(o=r[i],a=et[o[0]],s=o[1],r[i+1]){var l=(a*s[s.length-1]+et[r[i+1][0]])/2;if(l>=e)break}return a===et[hn]&&5*a>e&&(s=[1,2,5]),a===et[hn]&&5*a>e&&(s=[1,2,5]),n=C(e/a,s),{unitRange:a,count:n,unitName:o[0]}}function E(t,n,i,r){var o,a,s=[],l={},u=K.global.useUTC,c=new Date(n),h=t.unitRange,f=t.count;if(d(n)){h>=et[an]&&(c.setMilliseconds(0),c.setSeconds(h>=et[sn]?0:f*vt(c.getSeconds()/f))),h>=et[sn]&&c[lt](h>=et[ln]?0:f*vt(c[nt]()/f)),h>=et[ln]&&c[ut](h>=et[un]?0:f*vt(c[it]()/f)),h>=et[un]&&c[ct](h>=et[dn]?1:f*vt(c[ot]()/f)),h>=et[dn]&&(c[dt](h>=et[hn]?0:f*vt(c[at]()/f)),a=c[st]()),h>=et[hn]&&(a-=a%f,c[ht](a)),h===et[cn]&&c[ct](c[ot]()-c[rt]()+p(r,1)),o=1,a=c[st]();for(var g=c.getTime(),m=c[at](),v=c[ot](),y=u?0:(864e5+1e3*60*c.getTimezoneOffset())%864e5;i>g;)s.push(g),h===et[hn]?g=tt(a+o*f,0):h===et[dn]?g=tt(a,m+o*f):u||h!==et[un]&&h!==et[cn]?g+=h*f:g=tt(a,m,v+o*f*(h===et[un]?1:7)),o++;s.push(g),_n(xn(s,function(e){return h<=et[ln]&&e%et[un]===y}),function(e){l[e]=un})}return s.info=e(t,{higherRanks:l,totalRange:h*f}),s}function S(){this.color=0,this.symbol=0}function k(e,t){var n,i,r=e.length;for(i=0;r>i;i++)e[i].ss_i=i;for(e.sort(function(e,i){return n=t(e,i),0===n?e.ss_i-i.ss_i:n}),i=0;r>i;i++)delete e[i].ss_i}function A(e){for(var t=e.length,n=e[0];t--;)e[t]<n&&(n=e[t]);return n}function M(e){for(var t=e.length,n=e[0];t--;)e[t]>n&&(n=e[t]);return n}function N(e,t){var n;for(n in e)e[n]&&e[n]!==t&&e[n].destroy&&e[n].destroy(),delete e[n]}function D(e){Y||(Y=m(Ut)),e&&Y.appendChild(e),Y.innerHTML=""}function P(e,t){var n="Highcharts error #"+e+": www.highcharts.com/errors/"+e;if(t)throw n;pt.console&&console.log(n)}function I(e){return parseFloat(e.toPrecision(14))}function O(e,t){Q=p(e,t.animation)}function R(){var e=K.global.useUTC,t=e?"getUTC":"get",n=e?"setUTC":"set";tt=e?Date.UTC:function(e,t,n,i,r,o){return new Date(e,t,p(n,1),p(i,0),p(r,0),p(o,0)).getTime()},nt=t+"Minutes",it=t+"Hours",rt=t+"Day",ot=t+"Date",at=t+"Month",st=t+"FullYear",lt=n+"Minutes",ut=n+"Hours",ct=n+"Date",dt=n+"Month",ht=n+"FullYear"}function L(e){return K=t(K,e),R(),K}function B(){return K}function F(){}function j(e,t,n,i){this.axis=e,this.pos=t,this.type=n||"",this.isNew=!0,n||i||this.addLabel()}function H(e,t){this.axis=e,t&&(this.options=t,this.id=t.id)}function V(e,t,n,i,r,o){var a=e.chart.inverted;this.axis=e,this.isNegative=n,this.options=t,this.x=i,this.stack=r,this.percent="percent"===o,this.alignOptions={align:t.align||(a?n?"left":"right":"center"),verticalAlign:t.verticalAlign||(a?"middle":n?"bottom":"top"),y:p(t.y,a?4:n?14:-6),x:p(t.x,a?n?-6:6:0)},this.textAlign=t.textAlign||(a?n?"right":"left":"center")}function z(){this.init.apply(this,arguments)}function $(){this.init.apply(this,arguments)}function U(e,t){this.init(e,t)}function W(e,t){this.init(e,t)}function q(){this.init.apply(this,arguments)}var G,X,Y,K,J,Q,Z,et,tt,nt,it,rt,ot,at,st,lt,ut,ct,dt,ht,ft=document,pt=window,gt=Math,mt=gt.round,vt=gt.floor,yt=gt.ceil,bt=gt.max,_t=gt.min,xt=gt.abs,wt=gt.cos,Ct=gt.sin,Tt=gt.PI,Et=2*Tt/360,St=navigator.userAgent,kt=pt.opera,At=/msie/i.test(St)&&!kt,Mt=8===ft.documentMode,Nt=/AppleWebKit/.test(St),Dt=/Firefox/.test(St),Pt=/(Mobile|Android|Windows Phone)/.test(St),It="http://www.w3.org/2000/svg",Ot=!!ft.createElementNS&&!!ft.createElementNS(It,"svg").createSVGRect,Rt=Dt&&parseInt(St.split("Firefox/")[1],10)<4,Lt=!Ot&&!At&&!!ft.createElement("canvas").getContext,Bt=ft.documentElement.ontouchstart!==G,Ft={},jt=0,Ht=function(){},Vt=[],zt="Highcharts",$t="3.0.2",Ut="div",Wt="absolute",qt="relative",Gt="hidden",Xt="highcharts-",Yt="visible",Kt="px",Jt="none",Qt="M",Zt="L",en="rgba(192,192,192,"+(Ot?1e-4:.002)+")",tn="",nn="hover",rn="select",on="millisecond",an="second",sn="minute",ln="hour",un="day",cn="week",dn="month",hn="year",fn="stroke-width",pn={};pt.Highcharts=pt.Highcharts?P(16,!0):{},J=function(t,n,i){if(!d(n)||isNaN(n))return"Invalid date";t=p(t,"%Y-%m-%d %H:%M:%S");var r,o=new Date(n),a=o[it](),s=o[rt](),l=o[ot](),u=o[at](),c=o[st](),h=K.lang,f=h.weekdays,g=e({a:f[s].substr(0,3),A:f[s],d:b(l),e:l,b:h.shortMonths[u],B:h.months[u],m:b(u+1),y:c.toString().substr(2,2),Y:c,H:b(a),I:b(a%12||12),l:a%12||12,M:b(o[nt]()),p:12>a?"AM":"PM",P:12>a?"am":"pm",S:b(o.getSeconds()),L:b(mt(n%1e3),3)},Highcharts.dateFormats);for(r in g)for(;-1!==t.indexOf("%"+r);)t=t.replace("%"+r,"function"==typeof g[r]?g[r](n):g[r]);return i?t.substr(0,1).toUpperCase()+t.substr(1):t},S.prototype={wrapColor:function(e){this.color>=e&&(this.color=0)},wrapSymbol:function(e){this.symbol>=e&&(this.symbol=0)}},et=n(on,1,an,1e3,sn,6e4,ln,36e5,un,864e5,cn,6048e5,dn,26784e5,hn,31556952e3),Z={init:function(e,t,n){t=t||"";var i,r,o,a,s,l=e.shift,u=t.indexOf("C")>-1,c=u?7:3,d=t.split(" "),h=[].concat(n),f=function(e){for(o=e.length;o--;)e[o]===Qt&&e.splice(o+1,0,e[o+1],e[o+2],e[o+1],e[o+2])};if(u&&(f(d),f(h)),e.isArea&&(a=d.splice(d.length-6,6),s=h.splice(h.length-6,6)),l<=h.length/c)for(;l--;)h=[].concat(h).splice(0,c).concat(h);if(e.shift=0,d.length)for(i=h.length;d.length<i;)r=[].concat(d).splice(d.length-c,c),u&&(r[c-6]=r[c-2],r[c-5]=r[c-1]),d=d.concat(r);return a&&(d=d.concat(a),h=h.concat(s)),[d,h]},step:function(e,t,n,i){var r,o=[],a=e.length;if(1===n)o=i;else if(a===t.length&&1>n)for(;a--;)r=parseFloat(e[a]),o[a]=isNaN(r)?e[a]:n*parseFloat(t[a]-r)+r;else o=t;return o}},function(t){pt.HighchartsAdapter=pt.HighchartsAdapter||t&&{init:function(e){var n,i=t.fx,o=i.step,a=t.Tween,s=a&&a.propHooks,l=t.cssHooks.opacity;t.extend(t.easing,{easeOutQuad:function(e,t,n,i,r){return-i*(t/=r)*(t-2)+n}}),t.each(["cur","_default","width","height","opacity"],function(e,t){var n,r,l=o;"cur"===t?l=i.prototype:"_default"===t&&a&&(l=s[t],t="set"),n=l[t],n&&(l[t]=function(i){return i=e?i:this,r=i.elem,r.attr?r.attr(i.prop,"cur"===t?G:i.now):n.apply(this,arguments)})}),_(l,"get",function(e,t,n){return t.attr?t.opacity||0:e.call(this,t,n)}),n=function(t){var n,i=t.elem;t.started||(n=e.init(i,i.d,i.toD),t.start=n[0],t.end=n[1],t.started=!0),i.attr("d",e.step(t.start,t.end,t.pos,i.toD))},a?s.d={set:n}:o.d=n,this.each=Array.prototype.forEach?function(e,t){return Array.prototype.forEach.call(e,t)}:function(e,t){for(var n=0,i=e.length;i>n;n++)if(t.call(e[n],e[n],n,e)===!1)return n},t.fn.highcharts=function(){var e,t,n,i="Chart",o=arguments;return r(o[0])&&(i=o[0],o=Array.prototype.slice.call(o,1)),e=o[0],e!==G&&(e.chart=e.chart||{},e.chart.renderTo=this[0],n=new Highcharts[i](e,o[1]),t=this),e===G&&(t=Vt[h(this[0],"data-highcharts-chart")]),t}},getScript:t.getScript,inArray:t.inArray,adapterRun:function(e,n){return t(e)[n]()},grep:t.grep,map:function(e,t){for(var n=[],i=0,r=e.length;r>i;i++)n[i]=t.call(e[i],e[i],i,e);return n},offset:function(e){return t(e).offset()},addEvent:function(e,n,i){t(e).bind(n,i)},removeEvent:function(e,n,i){var r=ft.removeEventListener?"removeEventListener":"detachEvent";ft[r]&&e&&!e[r]&&(e[r]=function(){}),t(e).unbind(n,i)},fireEvent:function(n,i,r,o){var a,s=t.Event(i),l="detached"+i;!At&&r&&(delete r.layerX,delete r.layerY),e(s,r),n[i]&&(n[l]=n[i],n[i]=null),t.each(["preventDefault","stopPropagation"],function(e,t){var n=s[t];s[t]=function(){try{n.call(s)}catch(e){"preventDefault"===t&&(a=!0)}}}),t(n).trigger(s),n[l]&&(n[i]=n[l],n[l]=null),!o||s.isDefaultPrevented()||a||o(s)},washMouseEvent:function(e){var t=e.originalEvent||e;return t.pageX===G&&(t.pageX=e.pageX,t.pageY=e.pageY),t},animate:function(e,n,i){var r=t(e);e.style||(e.style={}),n.d&&(e.toD=n.d,n.d=1),r.stop(),r.animate(n,i)},stop:function(e){t(e).stop()}}}(pt.jQuery);var gn=pt.HighchartsAdapter,mn=gn||{};gn&&gn.init.call(gn,Z);var vn=mn.adapterRun,yn=mn.getScript,bn=mn.inArray,_n=mn.each,xn=mn.grep,wn=mn.offset,Cn=mn.map,Tn=mn.addEvent,En=mn.removeEvent,Sn=mn.fireEvent,kn=mn.washMouseEvent,An=mn.animate,Mn=mn.stop,Nn={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"}};K={colors:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/3.0.2/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/3.0.2/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#274b6d",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#4d759e"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:t(Nn,{enabled:!1,formatter:function(){return y(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0}},labels:{style:{position:Wt,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#274b6d",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:Wt,width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:qt,top:"1em"},style:{position:Wt,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:Ot,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,snap:Pt?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var Dn=K.plotOptions,Pn=Dn.line;R();var In=function(e){function n(e){e&&e.stops?u=Cn(e.stops,function(e){return In(e[1])}):(l=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(e),l?c=[i(l[1]),i(l[2]),i(l[3]),parseFloat(l[4],10)]:(l=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e),l?c=[i(l[1],16),i(l[2],16),i(l[3],16),1]:(l=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e),l&&(c=[i(l[1]),i(l[2]),i(l[3]),1]))))}function r(n){var i;return u?(i=t(e),i.stops=[].concat(i.stops),_n(u,function(e,t){i.stops[t]=[i.stops[t][0],e.get(n)]})):i=c&&!isNaN(c[0])?"rgb"===n?"rgb("+c[0]+","+c[1]+","+c[2]+")":"a"===n?c[3]:"rgba("+c.join(",")+")":e,i}function o(e){if(u)_n(u,function(t){t.brighten(e)});else if(s(e)&&0!==e){var t;for(t=0;3>t;t++)c[t]+=i(255*e),c[t]<0&&(c[t]=0),c[t]>255&&(c[t]=255)}return this}function a(e){return c[3]=e,this}var l,u,c=[];return n(e),{get:r,brighten:o,rgba:c,setOpacity:a}};F.prototype={init:function(e,t){var n=this;n.element="span"===t?m(t):ft.createElementNS(It,t),n.renderer=e,n.attrSetters={}},opacity:1,animate:function(e,n,i){var r=p(n,Q,!0);Mn(this),r?(r=t(r),i&&(r.complete=i),An(this,e,r)):(this.attr(e),i&&i())},attr:function(e,t){var n,o,a,s,l,u,c,f,p,g=this,m=g.element,v=m.nodeName.toLowerCase(),y=g.renderer,b=g.attrSetters,_=g.shadows,x=g;if(r(e)&&d(t)&&(n=e,e={},e[n]=t),r(e))n=e,"circle"===v?n={x:"cx",y:"cy"}[n]||n:"strokeWidth"===n&&(n="stroke-width"),x=h(m,n)||g[n]||0,"d"!==n&&"visibility"!==n&&(x=parseFloat(x));else{for(n in e)if(u=!1,o=e[n],a=b[n]&&b[n].call(g,o,n),a!==!1){if(a!==G&&(o=a),"d"===n)o&&o.join&&(o=o.join(" ")),/(NaN| {2}|^$)/.test(o)&&(o="M 0 0");else if("x"===n&&"text"===v)for(s=0;s<m.childNodes.length;s++)l=m.childNodes[s],h(l,"x")===h(m,"x")&&h(l,"x",o);else if(!g.rotation||"x"!==n&&"y"!==n)if("fill"===n)o=y.color(o,m,n);else if("circle"!==v||"x"!==n&&"y"!==n)if("rect"===v&&"r"===n)h(m,{rx:o,ry:o}),u=!0;else if("translateX"===n||"translateY"===n||"rotation"===n||"verticalAlign"===n||"scaleX"===n||"scaleY"===n)p=!0,u=!0;else if("stroke"===n)o=y.color(o,m,n);else if("dashstyle"===n){if(n="stroke-dasharray",o=o&&o.toLowerCase(),"solid"===o)o=Jt;else if(o){for(o=o.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),s=o.length;s--;)o[s]=i(o[s])*e["stroke-width"];o=o.join(",")}}else"width"===n?o=i(o):"align"===n?(n="text-anchor",o={left:"start",center:"middle",right:"end"}[o]):"title"===n&&(c=m.getElementsByTagName("title")[0],c||(c=ft.createElementNS(It,"title"),m.appendChild(c)),c.textContent=o);else n={x:"cx",y:"cy"}[n]||n;else p=!0;if("strokeWidth"===n&&(n="stroke-width"),("stroke-width"===n||"stroke"===n)&&(g[n]=o,g.stroke&&g["stroke-width"]?(h(m,"stroke",g.stroke),h(m,"stroke-width",g["stroke-width"]),g.hasStroke=!0):"stroke-width"===n&&0===o&&g.hasStroke&&(m.removeAttribute("stroke"),g.hasStroke=!1),u=!0),g.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(n)&&(f||(g.symbolAttr(e),f=!0),u=!0),_&&/^(width|height|visibility|x|y|d|transform)$/.test(n))for(s=_.length;s--;)h(_[s],n,"height"===n?bt(o-(_[s].cutHeight||0),0):o);("width"===n||"height"===n)&&"rect"===v&&0>o&&(o=0),g[n]=o,"text"===n?(o!==g.textStr&&delete g.bBox,g.textStr=o,g.added&&y.buildText(g)):u||h(m,n,o)}p&&g.updateTransform()}return x},addClass:function(e){return h(this.element,"class",h(this.element,"class")+" "+e),this},symbolAttr:function(e){var t=this;_n(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(n){t[n]=p(e[n],t[n])}),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},clip:function(e){return this.attr("clip-path",e?"url("+this.renderer.url+"#"+e.id+")":Jt)},crisp:function(e,t,n,i,r){var o,a,s=this,l={},u={};e=e||s.strokeWidth||s.attr&&s.attr("stroke-width")||0,a=mt(e)%2/2,u.x=vt(t||s.x||0)+a,u.y=vt(n||s.y||0)+a,u.width=vt((i||s.width||0)-2*a),u.height=vt((r||s.height||0)-2*a),u.strokeWidth=e;for(o in u)s[o]!==u[o]&&(s[o]=l[o]=u[o]);return l},css:function(t){var n,i=this,r=i.element,o=t&&t.width&&"text"===r.nodeName.toLowerCase(),a="",s=function(e,t){return"-"+t.toLowerCase()};if(t&&t.color&&(t.fill=t.color),t=e(i.styles,t),i.styles=t,Lt&&o&&delete t.width,At&&!Ot)o&&delete t.width,g(i.element,t);else{for(n in t)a+=n.replace(/([A-Z])/g,s)+":"+t[n]+";";h(r,"style",a)}return o&&i.added&&i.renderer.buildText(i),i},on:function(e,t){return Bt&&"click"===e&&(this.element.ontouchstart=function(e){e.preventDefault(),t()}),this.element["on"+e]=t,this},setRadialReference:function(e){return this.element.radialReference=e,this},translate:function(e,t){return this.attr({translateX:e,translateY:t})},invert:function(){var e=this;return e.inverted=!0,e.updateTransform(),e},htmlCss:function(t){var n=this,i=n.element,r=t&&"SPAN"===i.tagName&&t.width;return r&&(delete t.width,n.textWidth=r,n.updateTransform()),n.styles=e(n.styles,t),g(n.element,t),n},htmlGetBBox:function(){var e=this,t=e.element,n=e.bBox;return n||("text"===t.nodeName&&(t.style.position=Wt),n=e.bBox={x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}),n},htmlUpdateTransform:function(){if(!this.added)return this.alignOnAdd=!0,void 0;var e=this,t=e.renderer,n=e.element,r=e.translateX||0,o=e.translateY||0,a=e.x||0,s=e.y||0,l=e.textAlign||"left",u={left:0,center:.5,right:1}[l],c=l&&"left"!==l,h=e.shadows;if(g(n,{marginLeft:r,marginTop:o}),h&&_n(h,function(e){g(e,{marginLeft:r+1,marginTop:o+1})}),e.inverted&&_n(n.childNodes,function(e){t.invertChild(e,n)}),"SPAN"===n.tagName){var f,m,v,y,b,_=e.rotation,x=0,w=1,C=0,T=i(e.textWidth),E=e.xCorr||0,S=e.yCorr||0,k=[_,l,n.innerHTML,e.textWidth].join(","),A={};k!==e.cTT&&(d(_)&&(t.isSVG?(b=At?"-ms-transform":Nt?"-webkit-transform":Dt?"MozTransform":kt?"-o-transform":"",A[b]=A.transform="rotate("+_+"deg)"):(x=_*Et,w=wt(x),C=Ct(x),A.filter=_?["progid:DXImageTransform.Microsoft.Matrix(M11=",w,", M12=",-C,", M21=",C,", M22=",w,", sizingMethod='auto expand')"].join(""):Jt),g(n,A)),f=p(e.elemWidth,n.offsetWidth),m=p(e.elemHeight,n.offsetHeight),f>T&&/[ \-]/.test(n.textContent||n.innerText)&&(g(n,{width:T+Kt,display:"block",whiteSpace:"normal"}),f=T),v=t.fontMetrics(n.style.fontSize).b,E=0>w&&-f,S=0>C&&-m,y=0>w*C,E+=C*v*(y?1-u:u),S-=w*v*(_?y?u:1-u:1),c&&(E-=f*u*(0>w?-1:1),_&&(S-=m*u*(0>C?-1:1)),g(n,{textAlign:l})),e.xCorr=E,e.yCorr=S),g(n,{left:a+E+Kt,top:s+S+Kt}),Nt&&(m=n.offsetHeight),e.cTT=k}},updateTransform:function(){var e,t=this,n=t.translateX||0,i=t.translateY||0,r=t.scaleX,o=t.scaleY,a=t.inverted,s=t.rotation;a&&(n+=t.attr("width"),i+=t.attr("height")),e=["translate("+n+","+i+")"],a?e.push("rotate(90) scale(-1,1)"):s&&e.push("rotate("+s+" "+(t.x||0)+" "+(t.y||0)+")"),(d(r)||d(o))&&e.push("scale("+p(r,1)+" "+p(o,1)+")"),e.length&&h(t.element,"transform",e.join(" "))},toFront:function(){var e=this.element;return e.parentNode.appendChild(e),this},align:function(e,t,n){var i,o,a,s,l,u={},d=this.renderer,h=d.alignedObjects;return e?(this.alignOptions=e,this.alignByTranslate=t,(!n||r(n))&&(this.alignTo=l=n||"renderer",c(h,this),h.push(this),n=null)):(e=this.alignOptions,t=this.alignByTranslate,l=this.alignTo),n=p(n,d[l],d),i=e.align,o=e.verticalAlign,a=(n.x||0)+(e.x||0),s=(n.y||0)+(e.y||0),("right"===i||"center"===i)&&(a+=(n.width-(e.width||0))/{right:1,center:2}[i]),u[t?"translateX":"x"]=mt(a),("bottom"===o||"middle"===o)&&(s+=(n.height-(e.height||0))/({bottom:1,middle:2}[o]||1)),u[t?"translateY":"y"]=mt(s),this[this.placed?"animate":"attr"](u),this.placed=!0,this.alignAttr=u,this},getBBox:function(){var t,n,i=this,r=i.bBox,o=i.renderer,a=i.rotation,s=i.element,l=i.styles,u=a*Et;if(!r){if(s.namespaceURI===It||o.forExport){try{r=s.getBBox?e({},s.getBBox()):{width:s.offsetWidth,height:s.offsetHeight}}catch(c){}(!r||r.width<0)&&(r={width:0,height:0})}else r=i.htmlGetBBox();o.isSVG&&(t=r.width,n=r.height,At&&l&&"11px"===l.fontSize&&"22.7"===n.toPrecision(3)&&(r.height=n=14),a&&(r.width=xt(n*Ct(u))+xt(t*wt(u)),r.height=xt(n*wt(u))+xt(t*Ct(u)))),i.bBox=r}return r},show:function(){return this.attr({visibility:Yt})},hide:function(){return this.attr({visibility:Gt})},fadeOut:function(e){var t=this;t.animate({opacity:0},{duration:e||150,complete:function(){t.hide()}})},add:function(e){var t,n,r,o,a=this.renderer,s=e||a,l=s.element||a.box,u=l.childNodes,c=this.element,f=h(c,"zIndex");if(e&&(this.parentGroup=e),this.parentInverted=e&&e.inverted,void 0!==this.textStr&&a.buildText(this),f&&(s.handleZ=!0,f=i(f)),s.handleZ)for(r=0;r<u.length;r++)if(t=u[r],n=h(t,"zIndex"),t!==c&&(i(n)>f||!d(f)&&d(n))){l.insertBefore(c,t),o=!0;break}return o||l.appendChild(c),this.added=!0,Sn(this,"add"),this},safeRemoveChild:function(e){var t=e.parentNode;t&&t.removeChild(e)},destroy:function(){var e,t,n=this,i=n.element||{},r=n.shadows;if(i.onclick=i.onmouseout=i.onmouseover=i.onmousemove=i.point=null,Mn(n),n.clipPath&&(n.clipPath=n.clipPath.destroy()),n.stops){for(t=0;t<n.stops.length;t++)n.stops[t]=n.stops[t].destroy();n.stops=null}n.safeRemoveChild(i),r&&_n(r,function(e){n.safeRemoveChild(e)}),n.alignTo&&c(n.renderer.alignedObjects,n);for(e in n)delete n[e];return null},shadow:function(e,t,n){var i,r,o,a,s,l,u=[],c=this.element;if(e){for(a=p(e.width,3),s=(e.opacity||.15)/a,l=this.parentInverted?"(-1,-1)":"("+p(e.offsetX,1)+", "+p(e.offsetY,1)+")",i=1;a>=i;i++)r=c.cloneNode(0),o=2*a+1-2*i,h(r,{isShadow:"true",stroke:e.color||"black","stroke-opacity":s*i,"stroke-width":o,transform:"translate"+l,fill:Jt}),n&&(h(r,"height",bt(h(r,"height")-o,0)),r.cutHeight=o),t?t.element.appendChild(r):c.parentNode.insertBefore(r,c),u.push(r);this.shadows=u}return this}};var On=function(){this.init.apply(this,arguments)};On.prototype={Element:F,init:function(e,t,n,i){var r,o,a=this,s=location;r=a.createElement("svg").attr({xmlns:It,version:"1.1"}),e.appendChild(r.element),a.isSVG=!0,a.box=r.element,a.boxWrapper=r,a.alignedObjects=[],a.url=(Dt||Nt)&&ft.getElementsByTagName("base").length?s.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",o=this.createElement("desc").add(),o.element.appendChild(ft.createTextNode("Created with "+zt+" "+$t)),a.defs=this.createElement("defs").add(),a.forExport=i,a.gradients={},a.setSize(t,n,!1);var l,u;Dt&&e.getBoundingClientRect&&(a.subPixelFix=l=function(){g(e,{left:0,top:0}),u=e.getBoundingClientRect(),g(e,{left:yt(u.left)-u.left+Kt,top:yt(u.top)-u.top+Kt})},l(),Tn(pt,"resize",l))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this,t=e.defs;return e.box=null,e.boxWrapper=e.boxWrapper.destroy(),N(e.gradients||{}),e.gradients=null,t&&(e.defs=t.destroy()),e.subPixelFix&&En(pt,"resize",e.subPixelFix),e.alignedObjects=null,null},createElement:function(e){var t=new this.Element;return t.init(this,e),t},draw:function(){},buildText:function(e){for(var t=e.element,n=this,r=n.forExport,o=p(e.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),a=t.childNodes,s=/style="([^"]+)"/,l=/href="([^"]+)"/,u=h(t,"x"),c=e.styles,d=c&&c.width&&i(c.width),f=c&&c.lineHeight,m=a.length;m--;)t.removeChild(a[m]);d&&!e.added&&this.box.appendChild(t),""===o[o.length-1]&&o.pop(),_n(o,function(i,o){var a,p=0;i=i.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),a=i.split("|||"),_n(a,function(i){if(""!==i||1===a.length){var m,v={},y=ft.createElementNS(It,"tspan");if(s.test(i)&&(m=i.match(s)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),h(y,"style",m)),l.test(i)&&!r&&(h(y,"onclick",'location.href="'+i.match(l)[1]+'"'),g(y,{cursor:"pointer"})),i=(i.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">"),y.appendChild(ft.createTextNode(i)),p?v.dx=0:v.x=u,h(y,v),!p&&o&&(!Ot&&r&&g(y,{display:"block"}),h(y,"dy",f||n.fontMetrics(/px$/.test(y.style.fontSize)?y.style.fontSize:c.fontSize).h,Nt&&y.offsetHeight)),t.appendChild(y),p++,d)for(var b,_,x=i.replace(/([^\^])-/g,"$1- ").split(" "),w=[];x.length||w.length;)delete e.bBox,_=e.getBBox().width,b=_>d,b&&1!==x.length?(y.removeChild(y.firstChild),w.unshift(x.pop())):(x=w,w=[],x.length&&(y=ft.createElementNS(It,"tspan"),h(y,{dy:f||16,x:u}),m&&h(y,"style",m),t.appendChild(y),_>d&&(d=_))),x.length&&y.appendChild(ft.createTextNode(x.join(" ").replace(/- /g,"-")))}})})},button:function(n,i,r,o,a,s,l){var u,c,d,h,f,p=this.label(n,i,r,null,null,null,null,null,"button"),g=0,m="style",v={x1:0,y1:0,x2:0,y2:1};return a=t({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:v,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},a),d=a[m],delete a[m],s=t(a,{stroke:"#68A",fill:{linearGradient:v,stops:[[0,"#FFF"],[1,"#ACF"]]}},s),h=s[m],delete s[m],l=t(a,{stroke:"#68A",fill:{linearGradient:v,stops:[[0,"#9BD"],[1,"#CDF"]]}},l),f=l[m],delete l[m],Tn(p.element,"mouseenter",function(){p.attr(s).css(h)}),Tn(p.element,"mouseleave",function(){u=[a,s,l][g],c=[d,h,f][g],p.attr(u).css(c)}),p.setState=function(e){g=e,e?2===e&&p.attr(l).css(f):p.attr(a).css(d)},p.on("click",function(){o.call(p)}).attr(a).css(e({cursor:"default"},d))},crispLine:function(e,t){return e[1]===e[4]&&(e[1]=e[4]=mt(e[1])-t%2/2),e[2]===e[5]&&(e[2]=e[5]=mt(e[2])+t%2/2),e},path:function(t){var n={fill:Jt};return a(t)?n.d=t:o(t)&&e(n,t),this.createElement("path").attr(n)},circle:function(e,t,n){var i=o(e)?e:{x:e,y:t,r:n};return this.createElement("circle").attr(i)},arc:function(e,t,n,i,r,a){return o(e)&&(t=e.y,n=e.r,i=e.innerR,r=e.start,a=e.end,e=e.x),this.symbol("arc",e||0,t||0,n||0,n||0,{innerR:i||0,start:r||0,end:a||0})},rect:function(e,t,n,i,r,a){r=o(e)?e.r:r;var s=this.createElement("rect").attr({rx:r,ry:r,fill:Jt});return s.attr(o(e)?e:s.crisp(a,e,t,bt(n,0),bt(i,0)))},setSize:function(e,t,n){var i=this,r=i.alignedObjects,o=r.length;for(i.width=e,i.height=t,i.boxWrapper[p(n,!0)?"animate":"attr"]({width:e,height:t});o--;)r[o].align()},g:function(e){var t=this.createElement("g");return d(e)?t.attr({"class":Xt+e}):t},image:function(t,n,i,r,o){var a,s={preserveAspectRatio:Jt};return arguments.length>1&&e(s,{x:n,y:i,width:r,height:o}),a=this.createElement("image").attr(s),a.element.setAttributeNS?a.element.setAttributeNS("http://www.w3.org/1999/xlink","href",t):a.element.setAttribute("hc-svg-href",t),a},symbol:function(t,n,i,r,o,a){var s,l,u,c,d,h=this.symbols[t],f=h&&h(mt(n),mt(i),r,o,a),p=/^url\((.*?)\)$/;return f?(s=this.path(f),e(s,{symbolName:t,x:n,y:i,width:r,height:o}),a&&e(s,a)):p.test(t)&&(d=function(e,t){e.element&&(e.attr({width:t[0],height:t[1]}),e.alignByTranslate||e.translate(mt((r-t[0])/2),mt((o-t[1])/2)))},u=t.match(p)[1],c=Ft[u],s=this.image(u).attr({x:n,y:i}),s.isImg=!0,c?d(s,c):(s.attr({width:0,height:0}),l=m("img",{onload:function(){d(s,Ft[u]=[this.width,this.height])},src:u}))),s},symbols:{circle:function(e,t,n,i){var r=.166*n;return[Qt,e+n/2,t,"C",e+n+r,t,e+n+r,t+i,e+n/2,t+i,"C",e-r,t+i,e-r,t,e+n/2,t,"Z"]},square:function(e,t,n,i){return[Qt,e,t,Zt,e+n,t,e+n,t+i,e,t+i,"Z"]},triangle:function(e,t,n,i){return[Qt,e+n/2,t,Zt,e+n,t+i,e,t+i,"Z"]},"triangle-down":function(e,t,n,i){return[Qt,e,t,Zt,e+n,t,e+n/2,t+i,"Z"]},diamond:function(e,t,n,i){return[Qt,e+n/2,t,Zt,e+n,t+i/2,e+n/2,t+i,e,t+i/2,"Z"]},arc:function(e,t,n,i,r){var o=r.start,a=r.r||n||i,s=r.end-.001,l=r.innerR,u=r.open,c=wt(o),d=Ct(o),h=wt(s),f=Ct(s),p=r.end-o<Tt?0:1;return[Qt,e+a*c,t+a*d,"A",a,a,0,p,1,e+a*h,t+a*f,u?Qt:Zt,e+l*h,t+l*f,"A",l,l,0,p,0,e+l*c,t+l*d,u?"":"Z"]}},clipRect:function(e,t,n,i){var r,o=Xt+jt++,a=this.createElement("clipPath").attr({id:o}).add(this.defs);return r=this.rect(e,t,n,i,0).add(a),r.id=o,r.clipPath=a,r},color:function(e,n,i){var r,o,s,l,u,c,f,p,g,m,v,y=this,b=/^rgba/,_=[];if(e&&e.linearGradient?o="linearGradient":e&&e.radialGradient&&(o="radialGradient"),o){s=e[o],l=y.gradients,c=e.stops,g=n.radialReference,a(s)&&(e[o]=s={x1:s[0],y1:s[1],x2:s[2],y2:s[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===o&&g&&!d(s.gradientUnits)&&(s=t(s,{cx:g[0]-g[2]/2+s.cx*g[2],cy:g[1]-g[2]/2+s.cy*g[2],r:s.r*g[2],gradientUnits:"userSpaceOnUse"}));for(m in s)"id"!==m&&_.push(m,s[m]);for(m in c)_.push(c[m]);return _=_.join(","),l[_]?v=l[_].id:(s.id=v=Xt+jt++,l[_]=u=y.createElement(o).attr(s).add(y.defs),u.stops=[],_n(c,function(e){var t;b.test(e[1])?(r=In(e[1]),f=r.get("rgb"),p=r.get("a")):(f=e[1],p=1),t=y.createElement("stop").attr({offset:e[0],"stop-color":f,"stop-opacity":p}).add(u),u.stops.push(t)})),"url("+y.url+"#"+v+")"}return b.test(e)?(r=In(e),h(n,i+"-opacity",r.get("a")),r.get("rgb")):(n.removeAttribute(i+"-opacity"),e)},text:function(e,t,n,i){var r,o=this,a=K.chart.style,s=Lt||!Ot&&o.forExport;return i&&!o.forExport?o.html(e,t,n):(t=mt(p(t,0)),n=mt(p(n,0)),r=o.createElement("text").attr({x:t,y:n,text:e}).css({fontFamily:a.fontFamily,fontSize:a.fontSize}),s&&r.css({position:Wt}),r.x=t,r.y=n,r)},html:function(t,n,i){var r=K.chart.style,o=this.createElement("span"),a=o.attrSetters,s=o.element,l=o.renderer;return a.text=function(e){return e!==s.innerHTML&&delete this.bBox,s.innerHTML=e,!1},a.x=a.y=a.align=function(e,t){return"align"===t&&(t="textAlign"),o[t]=e,o.htmlUpdateTransform(),!1},o.attr({text:t,x:mt(n),y:mt(i)}).css({position:Wt,whiteSpace:"nowrap",fontFamily:r.fontFamily,fontSize:r.fontSize}),o.css=o.htmlCss,l.isSVG&&(o.add=function(t){var n,i,r=l.box.parentNode,a=[];if(t){if(n=t.div,!n){for(i=t;i;)a.push(i),i=i.parentGroup;_n(a.reverse(),function(t){var i;n=t.div=t.div||m(Ut,{className:h(t.element,"class")},{position:Wt,left:(t.translateX||0)+Kt,top:(t.translateY||0)+Kt},n||r),i=n.style,e(t.attrSetters,{translateX:function(e){i.left=e+Kt},translateY:function(e){i.top=e+Kt},visibility:function(e,t){i[t]=e}})})}}else n=r;return n.appendChild(s),o.added=!0,o.alignOnAdd&&o.htmlUpdateTransform(),o}),o},fontMetrics:function(e){e=i(e||11);var t=24>e?e+4:mt(1.2*e),n=mt(.8*t);return{h:t,b:n}},label:function(n,i,r,o,a,s,l,u,c){function h(){var e,n,i=S.element.style;v=(void 0===y||void 0===b||E.styles.textAlign)&&S.getBBox(),E.width=(y||v.width||0)+2*A+M,E.height=(b||v.height||0)+2*A,w=A+T.fontMetrics(i&&i.fontSize).b,C&&(m||(e=mt(-k*A),n=u?-w:0,E.box=m=o?T.symbol(o,e,n,E.width,E.height):T.rect(e,n,E.width,E.height,0,D[fn]),m.add(E)),m.isImg||m.attr(t({width:E.width,height:E.height},D)),D=null)}function f(){var e,t=E.styles,n=t&&t.textAlign,i=M+A*(1-k);e=u?0:w,!d(y)||"center"!==n&&"right"!==n||(i+={center:.5,right:1}[n]*(y-v.width)),(i!==S.x||e!==S.y)&&S.attr({x:i,y:e}),S.x=i,S.y=e}function p(e,t){m?m.attr(e,t):D[e]=t
}function g(){S.add(E),E.attr({text:n,x:i,y:r}),m&&d(a)&&E.attr({anchorX:a,anchorY:s})}var m,v,y,b,_,x,w,C,T=this,E=T.g(c),S=T.text("",0,0,l).attr({zIndex:1}),k=0,A=3,M=0,N=0,D={},P=E.attrSetters;Tn(E,"add",g),P.width=function(e){return y=e,!1},P.height=function(e){return b=e,!1},P.padding=function(e){return d(e)&&e!==A&&(A=e,f()),!1},P.paddingLeft=function(e){return d(e)&&e!==M&&(M=e,f()),!1},P.align=function(e){return k={left:0,center:.5,right:1}[e],!1},P.text=function(e,t){return S.attr(t,e),h(),f(),!1},P[fn]=function(e,t){return C=!0,N=e%2/2,p(t,e),!1},P.stroke=P.fill=P.r=function(e,t){return"fill"===t&&(C=!0),p(t,e),!1},P.anchorX=function(e,t){return a=e,p(t,e+N-_),!1},P.anchorY=function(e,t){return s=e,p(t,e-x),!1},P.x=function(e){return E.x=e,e-=k*((y||v.width)+A),_=mt(e),E.attr("translateX",_),!1},P.y=function(e){return x=E.y=mt(e),E.attr("translateY",x),!1};var I=E.css;return e(E,{css:function(e){if(e){var n={};e=t(e),_n(["fontSize","fontWeight","fontFamily","color","lineHeight","width","textDecoration"],function(t){e[t]!==G&&(n[t]=e[t],delete e[t])}),S.css(n)}return I.call(E,e)},getBBox:function(){return{width:v.width+2*A,height:v.height+2*A,x:v.x-A,y:v.y-A}},shadow:function(e){return m&&m.shadow(e),E},destroy:function(){En(E,"add",g),En(E.element,"mouseenter"),En(E.element,"mouseleave"),S&&(S=S.destroy()),m&&(m=m.destroy()),F.prototype.destroy.call(E),E=T=h=f=p=g=null}})}},X=On;var Rn,Ln;if(!Ot&&!Lt){Highcharts.VMLElement=Ln={init:function(e,t){var n=this,i=["<",t,' filled="f" stroked="f"'],r=["position: ",Wt,";"],o=t===Ut;("shape"===t||o)&&r.push("left:0;top:0;width:1px;height:1px;"),r.push("visibility: ",o?Gt:Yt),i.push(' style="',r.join(""),'"/>'),t&&(i=o||"span"===t||"img"===t?i.join(""):e.prepVML(i),n.element=m(i)),n.renderer=e,n.attrSetters={}},add:function(e){var t=this,n=t.renderer,i=t.element,r=n.box,o=e&&e.inverted,a=e?e.element||e:r;return o&&n.invertChild(i,a),a.appendChild(i),t.added=!0,t.alignOnAdd&&!t.deferUpdateTransform&&t.updateTransform(),Sn(t,"add"),t},updateTransform:F.prototype.htmlUpdateTransform,attr:function(e,t){var n,i,o,a,l,u,c=this,f=c.element||{},p=f.style,g=f.nodeName,v=c.renderer,y=c.symbolName,b=c.shadows,_=c.attrSetters,x=c;if(r(e)&&d(t)&&(n=e,e={},e[n]=t),r(e))n=e,x="strokeWidth"===n||"stroke-width"===n?c.strokeweight:c[n];else for(n in e)if(i=e[n],u=!1,a=_[n]&&_[n].call(c,i,n),a!==!1&&null!==i){if(a!==G&&(i=a),y&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(n))l||(c.symbolAttr(e),l=!0),u=!0;else if("d"===n){i=i||[],c.d=i.join(" "),o=i.length;for(var w,C=[];o--;)s(i[o])?C[o]=mt(10*i[o])-5:"Z"===i[o]?C[o]="x":(C[o]=i[o],!i.isArc||"wa"!==i[o]&&"at"!==i[o]||(w="wa"===i[o]?1:-1,C[o+5]===C[o+7]&&(C[o+7]-=w),C[o+6]===C[o+8]&&(C[o+8]-=w)));if(i=C.join(" ")||"x",f.path=i,b)for(o=b.length;o--;)b[o].path=b[o].cutOff?this.cutOffPath(i,b[o].cutOff):i;u=!0}else if("visibility"===n){if(b)for(o=b.length;o--;)b[o].style[n]=i;"DIV"===g&&(i=i===Gt?"-999em":0,Mt||(p[n]=i?Yt:Gt),n="top"),p[n]=i,u=!0}else if("zIndex"===n)i&&(p[n]=i),u=!0;else if(-1!==bn(n,["x","y","width","height"]))c[n]=i,"x"===n||"y"===n?n={x:"left",y:"top"}[n]:i=bt(0,i),c.updateClipping?(c[n]=i,c.updateClipping()):p[n]=i,u=!0;else if("class"===n&&"DIV"===g)f.className=i;else if("stroke"===n)i=v.color(i,f,n),n="strokecolor";else if("stroke-width"===n||"strokeWidth"===n)f.stroked=i?!0:!1,n="strokeweight",c[n]=i,s(i)&&(i+=Kt);else if("dashstyle"===n){var T=f.getElementsByTagName("stroke")[0]||m(v.prepVML(["<stroke/>"]),null,null,f);T[n]=i||"solid",c.dashstyle=i,u=!0}else"fill"===n?"SPAN"===g?p.color=i:"IMG"!==g&&(f.filled=i!==Jt?!0:!1,i=v.color(i,f,n,c),n="fillcolor"):"opacity"===n?u=!0:"shape"===g&&"rotation"===n?(c[n]=i,f.style.left=-mt(Ct(i*Et)+1)+Kt,f.style.top=mt(wt(i*Et))+Kt):"translateX"===n||"translateY"===n||"rotation"===n?(c[n]=i,c.updateTransform(),u=!0):"text"===n&&(this.bBox=null,f.innerHTML=i,u=!0);u||(Mt?f[n]=i:h(f,n,i))}return x},clip:function(e){var t,n,i=this;return e?(t=e.members,c(t,i),t.push(i),i.destroyClip=function(){c(t,i)},n=e.getCSS(i)):(i.destroyClip&&i.destroyClip(),n={clip:Mt?"inherit":"rect(auto)"}),i.css(n)},css:F.prototype.htmlCss,safeRemoveChild:function(e){e.parentNode&&D(e)},destroy:function(){return this.destroyClip&&this.destroyClip(),F.prototype.destroy.apply(this)},on:function(e,t){return this.element["on"+e]=function(){var e=pt.event;e.target=e.srcElement,t(e)},this},cutOffPath:function(e,t){var n;return e=e.split(/[ ,]/),n=e.length,(9===n||11===n)&&(e[n-4]=e[n-2]=i(e[n-2])-10*t),e.join(" ")},shadow:function(e,t,n){var r,o,a,s,l,u,c,d=[],h=this.element,f=this.renderer,g=h.style,v=h.path;if(v&&"string"!=typeof v.value&&(v="x"),l=v,e){for(u=p(e.width,3),c=(e.opacity||.15)/u,r=1;3>=r;r++)s=2*u+1-2*r,n&&(l=this.cutOffPath(v.value,s+.5)),a=['<shape isShadow="true" strokeweight="',s,'" filled="false" path="',l,'" coordsize="10 10" style="',h.style.cssText,'" />'],o=m(f.prepVML(a),null,{left:i(g.left)+p(e.offsetX,1),top:i(g.top)+p(e.offsetY,1)}),n&&(o.cutOff=s+1),a=['<stroke color="',e.color||"black",'" opacity="',c*r,'"/>'],m(f.prepVML(a),null,null,o),t?t.element.appendChild(o):h.parentNode.insertBefore(o,h),d.push(o);this.shadows=d}return this}},Ln=v(F,Ln);var Bn={Element:Ln,isIE8:St.indexOf("MSIE 8.0")>-1,init:function(e,t,n){var i,r,o=this;o.alignedObjects=[],i=o.createElement(Ut),r=i.element,r.style.position=qt,e.appendChild(i.element),o.isVML=!0,o.box=r,o.boxWrapper=i,o.setSize(t,n,!1),ft.namespaces.hcv||(ft.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),ft.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},isHidden:function(){return!this.box.offsetWidth},clipRect:function(t,n,i,r){var a=this.createElement(),s=o(t);return e(a,{members:[],left:s?t.x:t,top:s?t.y:n,width:s?t.width:i,height:s?t.height:r,getCSS:function(t){var n=t.element,i=n.nodeName,r="shape"===i,o=t.inverted,a=this,s=a.top-(r?n.offsetTop:0),l=a.left,u=l+a.width,c=s+a.height,d={clip:"rect("+mt(o?l:s)+"px,"+mt(o?c:u)+"px,"+mt(o?u:c)+"px,"+mt(o?s:l)+"px)"};return!o&&Mt&&"DIV"===i&&e(d,{width:u+Kt,height:c+Kt}),d},updateClipping:function(){_n(a.members,function(e){e.css(a.getCSS(e))})}})},color:function(e,t,n,i){var r,o,a,s=this,l=/^rgba/,u=Jt;if(e&&e.linearGradient?a="gradient":e&&e.radialGradient&&(a="pattern"),a){var c,d,h,f,p,g,v,y,b,_,x,w,C=e.linearGradient||e.radialGradient,T="",E=e.stops,S=[],k=function(){o=['<fill colors="'+S.join(",")+'" opacity="',y,'" o:opacity2="',v,'" type="',a,'" ',T,'focus="100%" method="any" />'],m(s.prepVML(o),null,null,t)};if(x=E[0],w=E[E.length-1],x[0]>0&&E.unshift([0,x[1]]),w[0]<1&&E.push([1,w[1]]),_n(E,function(e,t){l.test(e[1])?(r=In(e[1]),c=r.get("rgb"),d=r.get("a")):(c=e[1],d=1),S.push(100*e[0]+"% "+c),t?(y=d,b=c):(v=d,_=c)}),"fill"===n)if("gradient"===a)h=C.x1||C[0]||0,f=C.y1||C[1]||0,p=C.x2||C[2]||0,g=C.y2||C[3]||0,T='angle="'+(90-180*gt.atan((g-f)/(p-h))/Tt)+'"',k();else{var A,M=C.r,N=2*M,D=2*M,P=C.cx,I=C.cy,O=t.radialReference,R=function(){O&&(A=i.getBBox(),P+=(O[0]-A.x)/A.width-.5,I+=(O[1]-A.y)/A.height-.5,N*=O[2]/A.width,D*=O[2]/A.height),T='src="'+K.global.VMLRadialGradientURL+'" '+'size="'+N+","+D+'" '+'origin="0.5,0.5" '+'position="'+P+","+I+'" '+'color2="'+_+'" ',k()};i.added?R():Tn(i,"add",R),u=b}else u=c}else if(l.test(e)&&"IMG"!==t.tagName)r=In(e),o=["<",n,' opacity="',r.get("a"),'"/>'],m(this.prepVML(o),null,null,t),u=r.get("rgb");else{var L=t.getElementsByTagName(n);L.length&&(L[0].opacity=1,L[0].type="solid"),u=e}return u},prepVML:function(e){var t="display:inline-block;behavior:url(#default#VML);",n=this.isIE8;return e=e.join(""),n?(e=e.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),e=-1===e.indexOf('style="')?e.replace("/>",' style="'+t+'" />'):e.replace('style="','style="'+t)):e=e.replace("<","<hcv:"),e},text:On.prototype.html,path:function(t){var n={coordsize:"10 10"};return a(t)?n.d=t:o(t)&&e(n,t),this.createElement("shape").attr(n)},circle:function(e,t,n){var i=this.symbol("circle");return o(e)&&(n=e.r,t=e.y,e=e.x),i.isCircle=!0,i.attr({x:e,y:t,width:2*n,height:2*n})},g:function(e){var t,n;return e&&(n={className:Xt+e,"class":Xt+e}),t=this.createElement(Ut).attr(n)},image:function(e,t,n,i,r){var o=this.createElement("img").attr({src:e});return arguments.length>1&&o.attr({x:t,y:n,width:i,height:r}),o},rect:function(e,t,n,i,r,a){o(e)&&(t=e.y,n=e.width,i=e.height,a=e.strokeWidth,e=e.x);var s=this.symbol("rect");return s.r=r,s.attr(s.crisp(a,e,t,bt(n,0),bt(i,0)))},invertChild:function(e,t){var n=t.style;g(e,{flip:"x",left:i(n.width)-1,top:i(n.height)-1,rotation:-90})},symbols:{arc:function(e,t,n,i,r){var o,a=r.start,s=r.end,l=r.r||n||i,u=r.innerR,c=wt(a),d=Ct(a),h=wt(s),f=Ct(s);return 0===s-a?["x"]:(o=["wa",e-l,t-l,e+l,t+l,e+l*c,t+l*d,e+l*h,t+l*f],r.open&&!u&&o.push("e",Qt,e,t),o.push("at",e-u,t-u,e+u,t+u,e+u*h,t+u*f,e+u*c,t+u*d,"x","e"),o.isArc=!0,o)},circle:function(e,t,n,i,r){return r&&r.isCircle&&(e-=n/2,t-=i/2),["wa",e,t,e+n,t+i,e+n,t+i/2,e+n,t+i/2,"e"]},rect:function(e,t,n,i,r){var o,a,s=e+n,l=t+i;return d(r)&&r.r?(a=_t(r.r,n,i),o=[Qt,e+a,t,Zt,s-a,t,"wa",s-2*a,t,s,t+2*a,s-a,t,s,t+a,Zt,s,l-a,"wa",s-2*a,l-2*a,s,l,s,l-a,s-a,l,Zt,e+a,l,"wa",e,l-2*a,e+2*a,l,e+a,l,e,l-a,Zt,e,t+a,"wa",e,t,e+2*a,t+2*a,e,t+a,e+a,t,"x","e"]):o=On.prototype.symbols.square.apply(0,arguments),o}}};Highcharts.VMLRenderer=Rn=function(){this.init.apply(this,arguments)},Rn.prototype=t(On.prototype,Bn),X=Rn}var Fn,jn;Lt&&(Highcharts.CanVGRenderer=Fn=function(){It="http://www.w3.org/1999/xhtml"},Fn.prototype.symbols={},jn=function(){function e(){var e,n=t.length;for(e=0;n>e;e++)t[e]();t=[]}var t=[];return{push:function(n,i){0===t.length&&yn(i,e),t.push(n)}}}(),X=Fn),j.prototype={addLabel:function(){var t,n,i,r,o=this,a=o.axis,l=a.options,c=a.chart,h=a.horiz,f=a.categories,g=a.series[0]&&a.series[0].names,m=o.pos,v=l.labels,y=a.tickPositions,b=h&&f&&!v.step&&!v.staggerLines&&!v.rotation&&c.plotWidth/y.length||!h&&(c.optionsMarginLeft||c.plotWidth/2),_=m===y[0],x=m===y[y.length-1],w=f?p(f[m],g&&g[m],m):m,C=o.label,T=y.info;a.isDatetimeAxis&&T&&(r=l.dateTimeLabelFormats[T.higherRanks[m]||T.unitName]),o.isFirst=_,o.isLast=x,t=a.labelFormatter.call({axis:a,chart:c,isFirst:_,isLast:x,dateTimeLabelFormat:r,value:a.isLog?I(u(w)):w}),n=b&&{width:bt(1,mt(b-2*(v.padding||10)))+Kt},n=e(n,v.style),d(C)?C&&C.attr({text:t}).css(n):(i={align:v.align},s(v.rotation)&&(i.rotation=v.rotation),o.label=d(t)&&v.enabled?c.renderer.text(t,0,0,v.useHTML).attr(i).css(n).add(a.labelGroup):null)},getLabelSize:function(){var e=this.label,t=this.axis;return e?(this.labelBBox=e.getBBox())[t.horiz?"height":"width"]:0},getLabelSides:function(){var e=this.labelBBox,t=this.axis,n=t.options,i=n.labels,r=e.width,o=r*{left:0,center:.5,right:1}[i.align]-i.x;return[-o,r-o]},handleOverflow:function(e,t){var n=!0,i=this.axis,r=i.chart,o=this.isFirst,a=this.isLast,s=t.x,l=i.reversed,u=i.tickPositions;if(o||a){var c=this.getLabelSides(),d=c[0],h=c[1],f=r.plotLeft,p=f+i.len,g=i.ticks[u[e+(o?1:-1)]],m=g&&g.label.xy&&g.label.xy.x+g.getLabelSides()[o?0:1];o&&!l||a&&l?f>s+d&&(s=f-d,g&&s+h>m&&(n=!1)):s+h>p&&(s=p-h,g&&m>s+d&&(n=!1)),t.x=s}return n},getPosition:function(e,t,n,i){var r=this.axis,o=r.chart,a=i&&o.oldChartHeight||o.chartHeight;return{x:e?r.translate(t+n,null,null,i)+r.transB:r.left+r.offset+(r.opposite?(i&&o.oldChartWidth||o.chartWidth)-r.right-r.left:0),y:e?a-r.bottom+r.offset-(r.opposite?r.height:0):a-r.translate(t+n,null,null,i)-r.transB}},getLabelPosition:function(e,t,n,r,o,a,s,l){var u=this.axis,c=u.transA,h=u.reversed,f=u.staggerLines;return e=e+o.x-(a&&r?a*c*(h?-1:1):0),t=t+o.y-(a&&!r?a*c*(h?1:-1):0),d(o.y)||(t+=.9*i(n.styles.lineHeight)-n.getBBox().height/2),f&&(t+=16*(s/(l||1)%f)),{x:e,y:t}},getMarkPath:function(e,t,n,i,r,o){return o.crispLine([Qt,e,t,Zt,e+(r?0:-n),t+(r?n:0)],i)},render:function(e,t,n){var i,r,o,a=this,s=a.axis,l=s.options,u=s.chart,c=u.renderer,d=s.horiz,h=a.type,f=a.label,g=a.pos,m=l.labels,v=a.gridLine,y=h?h+"Grid":"grid",b=h?h+"Tick":"tick",_=l[y+"LineWidth"],x=l[y+"LineColor"],w=l[y+"LineDashStyle"],C=l[b+"Length"],T=l[b+"Width"]||0,E=l[b+"Color"],S=l[b+"Position"],k=a.mark,A=m.step,M=!0,N=s.tickmarkOffset,D=a.getPosition(d,g,N,t),P=D.x,I=D.y,O=d&&P===s.pos||!d&&I===s.pos+s.len?-1:1,R=s.staggerLines;this.isActive=!0,_&&(i=s.getPlotLinePath(g+N,_*O,t,!0),v===G&&(o={stroke:x,"stroke-width":_},w&&(o.dashstyle=w),h||(o.zIndex=1),t&&(o.opacity=0),a.gridLine=v=_?c.path(i).attr(o).add(s.gridGroup):null),!t&&v&&i&&v[a.isNew?"attr":"animate"]({d:i,opacity:n})),T&&C&&("inside"===S&&(C=-C),s.opposite&&(C=-C),r=a.getMarkPath(P,I,C,T*O,d,c),k?k.animate({d:r,opacity:n}):a.mark=c.path(r).attr({stroke:E,"stroke-width":T,opacity:n}).add(s.axisGroup)),f&&!isNaN(P)&&(f.xy=D=a.getLabelPosition(P,I,f,d,m,N,e,A),a.isFirst&&!p(l.showFirstLabel,1)||a.isLast&&!p(l.showLastLabel,1)?M=!1:R||!d||"justify"!==m.overflow||a.handleOverflow(e,D)||(M=!1),A&&e%A&&(M=!1),M&&!isNaN(D.y)?(D.opacity=n,f[a.isNew?"attr":"animate"](D),a.isNew=!1):f.attr("y",-9999))},destroy:function(){N(this,this.axis)}},H.prototype={render:function(){var e,n,i,r,o,a,s,u=this,c=u.axis,h=c.horiz,f=(c.pointRange||0)/2,g=u.options,m=g.label,v=u.label,y=g.width,b=g.to,_=g.from,x=d(_)&&d(b),w=g.value,C=g.dashStyle,T=u.svgElem,E=[],S=g.color,k=g.zIndex,N=g.events,D=c.chart.renderer;if(c.isLog&&(_=l(_),b=l(b),w=l(w)),y)E=c.getPlotLinePath(w,y),s={stroke:S,"stroke-width":y},C&&(s.dashstyle=C);else{if(!x)return;_=bt(_,c.min-f),b=_t(b,c.max+f),E=c.getPlotBandPath(_,b,g),s={fill:S},g.borderWidth&&(s.stroke=g.borderColor,s["stroke-width"]=g.borderWidth)}if(d(k)&&(s.zIndex=k),T)E?T.animate({d:E},null,T.onGetPath):(T.hide(),T.onGetPath=function(){T.show()});else if(E&&E.length&&(u.svgElem=T=D.path(E).attr(s).add(),N)){e=function(e){T.on(e,function(t){N[e].apply(u,[t])})};for(n in N)e(n)}return m&&d(m.text)&&E&&E.length&&c.width>0&&c.height>0?(m=t({align:h&&x&&"center",x:h?!x&&4:10,verticalAlign:!h&&x&&"middle",y:h?x?16:10:x?6:-4,rotation:h&&!x&&90},m),v||(u.label=v=D.text(m.text,0,0).attr({align:m.textAlign||m.align,rotation:m.rotation,zIndex:k}).css(m.style).add()),i=[E[1],E[4],p(E[6],E[1])],r=[E[2],E[5],p(E[7],E[2])],o=A(i),a=A(r),v.align(m,!1,{x:o,y:a,width:M(i)-o,height:M(r)-a}),v.show()):v&&v.hide(),u},destroy:function(){var e=this,t=e.axis;c(t.plotLinesAndBands,e),N(e,this.axis)}},V.prototype={destroy:function(){N(this,this.axis)},setTotal:function(e){this.total=e,this.cum=e},render:function(e){var t=this.options,n=t.format,i=n?w(n,this):t.formatter.call(this);this.label?this.label.attr({text:i,visibility:Gt}):this.label=this.axis.chart.renderer.text(i,0,0,t.useHTML).css(t.style).attr({align:this.textAlign,rotation:t.rotation,visibility:Gt}).add(e)},setOffset:function(e,t){var n,i=this,r=i.axis,o=r.chart,a=o.inverted,s=this.isNegative,l=r.translate(this.percent?100:this.total,0,0,0,1),u=r.translate(0),c=xt(l-u),d=o.xAxis[0].translate(this.x)+e,h=o.plotHeight,f={x:a?s?l:l-c:d,y:a?h-d-t:s?h-l-c:h-l,width:a?c:t,height:a?t:c},p=this.label;p&&(p.align(this.alignOptions,null,f),n=p.alignAttr,p.attr({visibility:this.options.crop===!1||o.isInsidePlot(n.x,n.y)?Ot?"inherit":Yt:Gt}))}},z.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:Nn,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#4d759e",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return y(this.total,-1)},style:Nn.style}},defaultLeftAxisOptions:{labels:{align:"right",x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{align:"left",x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{align:"center",x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{align:"center",x:0,y:-5},title:{rotation:0}},init:function(e,t){var n=t.isX,i=this;i.horiz=e.inverted?!n:n,i.isXAxis=n,i.xOrY=n?"x":"y",i.opposite=t.opposite,i.side=i.horiz?i.opposite?0:2:i.opposite?1:3,i.setOptions(t);var r=this.options,o=r.type,a="datetime"===o;i.labelFormatter=r.labels.formatter||i.defaultLabelFormatter,i.staggerLines=i.horiz&&r.labels.staggerLines,i.userOptions=t,i.minPixelPadding=0,i.chart=e,i.reversed=r.reversed,i.zoomEnabled=r.zoomEnabled!==!1,i.categories=r.categories||"category"===o,i.isLog="logarithmic"===o,i.isDatetimeAxis=a,i.isLinked=d(r.linkedTo),i.tickmarkOffset=i.categories&&"between"===r.tickmarkPlacement?.5:0,i.ticks={},i.minorTicks={},i.plotLinesAndBands=[],i.alternateBands={},i.len=0,i.minRange=i.userMinRange=r.minRange||r.maxZoom,i.range=r.range,i.offset=r.offset||0,i.stacks={},i._stacksTouched=0,i.max=null,i.min=null;var s,c=i.options.events;-1===bn(i,e.axes)&&(e.axes.push(i),e[n?"xAxis":"yAxis"].push(i)),i.series=i.series||[],e.inverted&&n&&i.reversed===G&&(i.reversed=!0),i.removePlotBand=i.removePlotBandOrLine,i.removePlotLine=i.removePlotBandOrLine;for(s in c)Tn(i,s,c[s]);i.isLog&&(i.val2lin=l,i.lin2val=u)},setOptions:function(e){this.options=t(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],t(K[this.isXAxis?"xAxis":"yAxis"],e))},update:function(e,n){var i=this.chart;e=i.options[this.xOrY+"Axis"][this.options.index]=t(this.userOptions,e),this.destroy(),this._addedPlotLB=!1,this.init(i,e),i.isDirtyBox=!0,p(n,!0)&&i.redraw()},remove:function(e){var t=this.chart,n=this.xOrY+"Axis";_n(this.series,function(e){e.remove(!1)}),c(t.axes,this),c(t[n],this),t.options[n].splice(this.options.index,1),_n(t[n],function(e,t){e.options.index=t}),this.destroy(),t.isDirtyBox=!0,p(e,!0)&&t.redraw()},defaultLabelFormatter:function(){var e,t,n=this.axis,i=this.value,r=n.categories,o=this.dateTimeLabelFormat,a=K.lang.numericSymbols,s=a&&a.length,l=n.options.labels.format,u=n.isLog?i:n.tickInterval;if(l)t=w(l,this);else if(r)t=i;else if(o)t=J(o,i);else if(s&&u>=1e3)for(;s--&&t===G;)e=Math.pow(1e3,s+1),u>=e&&null!==a[s]&&(t=y(i/e,-1)+a[s]);return t===G&&(t=i>=1e3?y(i,0):y(i,-1)),t},getSeriesExtremes:function(){var e,t,n=this,i=n.chart,r=n.stacks,o=[],a=[],s=n._stacksTouched=n._stacksTouched+1;n.hasVisibleSeries=!1,n.dataMin=n.dataMax=null,_n(n.series,function(e){if(e.visible||!i.options.chart.ignoreHiddenSeries){var l,u,c,h,f,g,m,v,y,b,_,x,w,C=e.options,T=C.threshold,E=[],S=0;if(n.hasVisibleSeries=!0,n.isLog&&0>=T&&(T=C.threshold=null),n.isXAxis)m=e.xData,m.length&&(n.dataMin=_t(p(n.dataMin,m[0]),A(m)),n.dataMax=bt(p(n.dataMax,m[0]),M(m)));else{var k,N,D,P,O=e.cropped,R=e.xAxis.getExtremes(),L=!!e.modifyValue;for(l=C.stacking,n.usePercentage="percent"===l,l&&(f=C.stack,h=e.type+p(f,""),g="-"+h,e.stackKey=h,u=o[h]||[],o[h]=u,c=a[g]||[],a[g]=c),n.usePercentage&&(n.dataMin=0,n.dataMax=99),m=e.processedXData,v=e.processedYData,_=v.length,t=0;_>t;t++)if(y=m[t],b=v[t],l&&(k=T>b,N=k?c:u,D=k?g:h,d(N[y])?(N[y]=I(N[y]+b),b=[b,N[y]]):N[y]=b,r[D]||(r[D]={}),r[D][y]||(r[D][y]=new V(n,n.options.stackLabels,k,y,f,l)),r[D][y].setTotal(N[y]),r[D][y].touched=s),null!==b&&b!==G&&(!n.isLog||b.length||b>0)&&(L&&(b=e.modifyValue(b)),e.getExtremesFromAll||O||(m[t+1]||y)>=R.min&&(m[t-1]||y)<=R.max))if(P=b.length)for(;P--;)null!==b[P]&&(E[S++]=b[P]);else E[S++]=b;!n.usePercentage&&E.length&&(e.dataMin=x=A(E),e.dataMax=w=M(E),n.dataMin=_t(p(n.dataMin,x),x),n.dataMax=bt(p(n.dataMax,w),w)),d(T)&&(n.dataMin>=T?(n.dataMin=T,n.ignoreMinPadding=!0):n.dataMax<T&&(n.dataMax=T,n.ignoreMaxPadding=!0))}}});for(e in r)for(t in r[e])r[e][t].touched<s&&(r[e][t].destroy(),delete r[e][t])},translate:function(e,t,n,i,r,o){var a,s=this,l=s.len,u=1,c=0,d=i?s.oldTransA:s.transA,h=i?s.oldMin:s.min,f=s.minPixelPadding,p=(s.options.ordinal||s.isLog&&r)&&s.lin2val;return d||(d=s.transA),n&&(u*=-1,c=l),s.reversed&&(u*=-1,c-=u*l),t?(e=e*u+c,e-=f,a=e/d+h,p&&(a=s.lin2val(a))):(p&&(e=s.val2lin(e)),a=u*(e-h)*d+c+u*f+(o?d*s.pointRange/2:0)),a},toPixels:function(e,t){return this.translate(e,!1,!this.horiz,null,!0)+(t?0:this.pos)},toValue:function(e,t){return this.translate(e-(t?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(e,t,n,i){var r,o,a,s,l,u=this,c=u.chart,d=u.left,h=u.top,f=u.translate(e,null,null,n),p=n&&c.oldChartHeight||c.chartHeight,g=n&&c.oldChartWidth||c.chartWidth,m=u.transB;return r=a=mt(f+m),o=s=mt(p-f-m),isNaN(f)?l=!0:u.horiz?(o=h,s=p-u.bottom,(d>r||r>d+u.width)&&(l=!0)):(r=d,a=g-u.right,(h>o||o>h+u.height)&&(l=!0)),l&&!i?null:c.renderer.crispLine([Qt,r,o,Zt,a,s],t||0)},getPlotBandPath:function(e,t){var n=this.getPlotLinePath(t),i=this.getPlotLinePath(e);return i&&n?i.push(n[4],n[5],n[1],n[2]):i=null,i},getLinearTickPositions:function(e,t,n){var i,r,o=I(vt(t/e)*e),a=I(yt(n/e)*e),s=[];for(i=o;a>=i&&(s.push(i),i=I(i+e),i!==r);)r=i;return s},getLogTickPositions:function(e,t,n,i){var r=this,o=r.options,a=r.len,s=[];if(i||(r._minorAutoInterval=null),e>=.5)e=mt(e),s=r.getLinearTickPositions(e,t,n);else if(e>=.08){var c,d,h,f,g,m,v,y=vt(t);for(c=e>.3?[1,2,4]:e>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],d=y;n+1>d&&!v;d++)for(f=c.length,h=0;f>h&&!v;h++)g=l(u(d)*c[h]),g>t&&(!i||n>=m)&&s.push(m),m>n&&(v=!0),m=g}else{var b=u(t),_=u(n),x=o[i?"minorTickInterval":"tickInterval"],w="auto"===x?null:x,T=o.tickPixelInterval/(i?5:1),E=i?a/r.tickPositions.length:a;e=p(w,r._minorAutoInterval,(_-b)*T/(E||1)),e=C(e,null,gt.pow(10,vt(gt.log(e)/gt.LN10))),s=Cn(r.getLinearTickPositions(e,b,_),l),i||(r._minorAutoInterval=e/5)}return i||(r.tickInterval=e),s},getMinorTickPositions:function(){var e,t,n,i=this,r=i.options,o=i.tickPositions,a=i.minorTickInterval,s=[];if(i.isLog)for(n=o.length,t=1;n>t;t++)s=s.concat(i.getLogTickPositions(a,o[t-1],o[t],!0));else if(i.isDatetimeAxis&&"auto"===r.minorTickInterval)s=s.concat(E(T(a),i.min,i.max,r.startOfWeek)),s[0]<i.min&&s.shift();else for(e=i.min+(o[0]-i.min)%a;e<=i.max;e+=a)s.push(e);return s},adjustForMinRange:function(){var e,t,n,i,r,o,a,s,l=this,u=l.options,c=l.min,h=l.max,f=l.dataMax-l.dataMin>=l.minRange;if(l.isXAxis&&l.minRange===G&&!l.isLog&&(d(u.min)||d(u.max)?l.minRange=null:(_n(l.series,function(e){for(r=e.xData,o=e.xIncrement?1:r.length-1,n=o;n>0;n--)i=r[n]-r[n-1],(t===G||t>i)&&(t=i)}),l.minRange=_t(5*t,l.dataMax-l.dataMin))),h-c<l.minRange){var g=l.minRange;e=(g-h+c)/2,a=[c-e,p(u.min,c-e)],f&&(a[2]=l.dataMin),c=M(a),s=[c+g,p(u.max,c+g)],f&&(s[2]=l.dataMax),h=A(s),g>h-c&&(a[0]=h-g,a[1]=p(u.min,h-g),c=M(a))}l.min=c,l.max=h},setAxisTranslation:function(e){var t,n,i=this,r=i.max-i.min,o=0,a=0,s=0,l=i.linkedParent,u=i.transA;i.isXAxis&&(l?(a=l.minPointOffset,s=l.pointRangePadding):_n(i.series,function(e){var n=e.pointRange,i=e.options.pointPlacement,l=e.closestPointRange;n>r&&(n=0),o=bt(o,n),a=bt(a,i?0:n/2),s=bt(s,"on"===i?0:n),!e.noSharedTooltip&&d(l)&&(t=d(t)?_t(t,l):l)}),n=i.ordinalSlope&&t?i.ordinalSlope/t:1,i.minPointOffset=a*=n,i.pointRangePadding=s*=n,i.pointRange=_t(o,r),i.closestPointRange=t),e&&(i.oldTransA=u),i.translationSlope=i.transA=u=i.len/(r+s||1),i.transB=i.horiz?i.left:i.bottom,i.minPixelPadding=u*a},setTickPositions:function(e){var t,n,i,r,o=this,a=o.chart,s=o.options,u=o.isLog,c=o.isDatetimeAxis,h=o.isXAxis,f=o.isLinked,g=o.options.tickPositioner,m=s.maxPadding,v=s.minPadding,y=s.tickInterval,b=s.minTickInterval,_=s.tickPixelInterval,x=o.categories;if(f?(o.linkedParent=a[h?"xAxis":"yAxis"][s.linkedTo],i=o.linkedParent.getExtremes(),o.min=p(i.min,i.dataMin),o.max=p(i.max,i.dataMax),s.type!==o.linkedParent.options.type&&P(11,1)):(o.min=p(o.userMin,s.min,o.dataMin),o.max=p(o.userMax,s.max,o.dataMax)),u&&(!e&&_t(o.min,p(o.dataMin,o.min))<=0&&P(10,1),o.min=I(l(o.min)),o.max=I(l(o.max))),o.range&&(o.userMin=o.min=bt(o.min,o.max-o.range),o.userMax=o.max,e&&(o.range=null)),o.beforePadding&&o.beforePadding(),o.adjustForMinRange(),x||o.usePercentage||f||!d(o.min)||!d(o.max)||(n=o.max-o.min,n&&(d(s.min)||d(o.userMin)||!v||!(o.dataMin<0)&&o.ignoreMinPadding||(o.min-=n*v),d(s.max)||d(o.userMax)||!m||!(o.dataMax>0)&&o.ignoreMaxPadding||(o.max+=n*m))),o.tickInterval=o.min===o.max||void 0===o.min||void 0===o.max?1:f&&!y&&_===o.linkedParent.options.tickPixelInterval?o.linkedParent.tickInterval:p(y,x?1:(o.max-o.min)*_/(o.len||1)),h&&!e&&_n(o.series,function(e){e.processData(o.min!==o.oldMin||o.max!==o.oldMax)}),o.setAxisTranslation(!0),o.beforeSetTickPositions&&o.beforeSetTickPositions(),o.postProcessTickInterval&&(o.tickInterval=o.postProcessTickInterval(o.tickInterval)),!y&&o.tickInterval<b&&(o.tickInterval=b),c||u||(t=gt.pow(10,vt(gt.log(o.tickInterval)/gt.LN10)),y||(o.tickInterval=C(o.tickInterval,null,t,s))),o.minorTickInterval="auto"===s.minorTickInterval&&o.tickInterval?o.tickInterval/5:s.minorTickInterval,o.tickPositions=r=s.tickPositions?[].concat(s.tickPositions):g&&g.apply(o,[o.min,o.max]),r||(r=c?(o.getNonLinearTimeTicks||E)(T(o.tickInterval,s.units),o.min,o.max,s.startOfWeek,o.ordinalPositions,o.closestPointRange,!0):u?o.getLogTickPositions(o.tickInterval,o.min,o.max):o.getLinearTickPositions(o.tickInterval,o.min,o.max),o.tickPositions=r),!f){var w,S=r[0],k=r[r.length-1],A=o.minPointOffset||0;s.startOnTick?o.min=S:o.min-A>S&&r.shift(),s.endOnTick?o.max=k:o.max+A<k&&r.pop(),1===r.length&&(w=.001,o.min-=w,o.max+=w)}},setMaxTicks:function(){var e=this.chart,t=e.maxTicks||{},n=this.tickPositions,i=this._maxTicksKey=[this.xOrY,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&n&&n.length>(t[i]||0)&&this.options.alignTicks!==!1&&(t[i]=n.length),e.maxTicks=t},adjustTickAmount:function(){var e=this,t=e.chart,n=e._maxTicksKey,i=e.tickPositions,r=t.maxTicks;if(r&&r[n]&&!e.isDatetimeAxis&&!e.categories&&!e.isLinked&&e.options.alignTicks!==!1){var o,a=e.tickAmount,s=i.length;if(e.tickAmount=o=r[n],o>s){for(;i.length<o;)i.push(I(i[i.length-1]+e.tickInterval));e.transA*=(s-1)/(o-1),e.max=i[i.length-1]}d(a)&&o!==a&&(e.isDirty=!0)}},setScale:function(){var e,t,n,i,r=this,o=r.stacks;if(r.oldMin=r.min,r.oldMax=r.max,r.oldAxisLength=r.len,r.setAxisSize(),i=r.len!==r.oldAxisLength,_n(r.series,function(e){(e.isDirtyData||e.isDirty||e.xAxis.isDirty)&&(n=!0)}),(i||n||r.isLinked||r.forceRedraw||r.userMin!==r.oldUserMin||r.userMax!==r.oldUserMax)&&(r.forceRedraw=!1,r.getSeriesExtremes(),r.setTickPositions(),r.oldUserMin=r.userMin,r.oldUserMax=r.userMax,r.isDirty||(r.isDirty=i||r.min!==r.oldMin||r.max!==r.oldMax)),!r.isXAxis)for(e in o)for(t in o[e])o[e][t].cum=o[e][t].total;r.setMaxTicks()},setExtremes:function(t,n,i,r,o){var a=this,s=a.chart;i=p(i,!0),o=e(o,{min:t,max:n}),Sn(a,"setExtremes",o,function(){a.userMin=t,a.userMax=n,a.isDirtyExtremes=!0,i&&s.redraw(r)})},zoom:function(e,t){return this.allowZoomOutside||(e<=this.dataMin&&(e=G),t>=this.dataMax&&(t=G)),this.displayBtn=e!==G||t!==G,this.setExtremes(e,t,!1,G,{trigger:"zoom"}),!0},setAxisSize:function(){var e,t,n,i,r=this.chart,o=this.options,a=o.offsetLeft||0,s=o.offsetRight||0,l=this.horiz;this.left=i=p(o.left,r.plotLeft+a),this.top=n=p(o.top,r.plotTop),this.width=e=p(o.width,r.plotWidth-a+s),this.height=t=p(o.height,r.plotHeight),this.bottom=r.chartHeight-t-n,this.right=r.chartWidth-e-i,this.len=bt(l?e:t,0),this.pos=l?i:n},getExtremes:function(){var e=this,t=e.isLog;return{min:t?I(u(e.min)):e.min,max:t?I(u(e.max)):e.max,dataMin:e.dataMin,dataMax:e.dataMax,userMin:e.userMin,userMax:e.userMax}},getThreshold:function(e){var t=this,n=t.isLog,i=n?u(t.min):t.min,r=n?u(t.max):t.max;return i>e||null===e?e=i:e>r&&(e=r),t.translate(e,0,1,0,1)},addPlotBand:function(e){this.addPlotBandOrLine(e,"plotBands")},addPlotLine:function(e){this.addPlotBandOrLine(e,"plotLines")},addPlotBandOrLine:function(e,t){var n=new H(this,e).render(),i=this.userOptions;return t&&(i[t]=i[t]||[],i[t].push(e)),this.plotLinesAndBands.push(n),n},getOffset:function(){var e,t,n,i,r=this,o=r.chart,a=o.renderer,s=r.options,l=r.tickPositions,u=r.ticks,c=r.horiz,h=r.side,f=o.inverted?[1,0,3,2][h]:h,g=0,m=0,v=s.title,y=s.labels,b=0,_=o.axisOffset,x=o.clipOffset,w=[-1,1,1,-1][h];if(r.hasData=e=r.hasVisibleSeries||d(r.min)&&d(r.max)&&!!l,r.showAxis=t=e||p(s.showEmpty,!0),r.axisGroup||(r.gridGroup=a.g("grid").attr({zIndex:s.gridZIndex||1}).add(),r.axisGroup=a.g("axis").attr({zIndex:s.zIndex||2}).add(),r.labelGroup=a.g("axis-labels").attr({zIndex:y.zIndex||7}).add()),e||r.isLinked)_n(l,function(e){u[e]?u[e].addLabel():u[e]=new j(r,e)}),_n(l,function(e){(0===h||2===h||{1:"left",3:"right"}[h]===y.align)&&(b=bt(u[e].getLabelSize(),b))}),r.staggerLines&&(b+=16*(r.staggerLines-1));else for(i in u)u[i].destroy(),delete u[i];v&&v.text&&v.enabled!==!1&&(r.axisTitle||(r.axisTitle=a.text(v.text,0,0,v.useHTML).attr({zIndex:7,rotation:v.rotation||0,align:v.textAlign||{low:"left",middle:"center",high:"right"}[v.align]}).css(v.style).add(r.axisGroup),r.axisTitle.isNew=!0),t&&(g=r.axisTitle.getBBox()[c?"height":"width"],m=p(v.margin,c?5:10),n=v.offset),r.axisTitle[t?"show":"hide"]()),r.offset=w*p(s.offset,_[h]),r.axisTitleMargin=p(n,b+m+(2!==h&&b&&w*s.labels[c?"y":"x"])),_[h]=bt(_[h],r.axisTitleMargin+g+w*r.offset),x[f]=bt(x[f],s.lineWidth)},getLinePath:function(e){var t=this.chart,n=this.opposite,i=this.offset,r=this.horiz,o=this.left+(n?this.width:0)+i,a=t.chartHeight-this.bottom-(n?this.height:0)+i;return this.lineTop=a,n||(e*=-1),t.renderer.crispLine([Qt,r?this.left:o,r?a:this.top,Zt,r?t.chartWidth-this.right:o,r?a:t.chartHeight-this.bottom],e)},getTitlePosition:function(){var e=this.horiz,t=this.left,n=this.top,r=this.len,o=this.options.title,a=e?t:n,s=this.opposite,l=this.offset,u=i(o.style.fontSize||12),c={low:a+(e?0:r),middle:a+r/2,high:a+(e?r:0)}[o.align],d=(e?n+this.height:t)+(e?1:-1)*(s?-1:1)*this.axisTitleMargin+(2===this.side?u:0);return{x:e?c:d+(s?this.width:0)+l+(o.x||0),y:e?d-(s?this.height:0)+l:c+(o.y||0)}},render:function(){var e,t,n,i=this,r=i.chart,o=r.renderer,a=i.options,s=i.isLog,l=i.isLinked,c=i.tickPositions,h=i.axisTitle,f=i.stacks,p=i.ticks,g=i.minorTicks,m=i.alternateBands,v=a.stackLabels,y=a.alternateGridColor,b=i.tickmarkOffset,_=a.lineWidth,x=r.hasRendered,w=x&&d(i.oldMin)&&!isNaN(i.oldMin),C=i.hasData,T=i.showAxis;if(_n([p,g,m],function(e){var t;for(t in e)e[t].isActive=!1}),(C||l)&&(i.minorTickInterval&&!i.categories&&_n(i.getMinorTickPositions(),function(e){g[e]||(g[e]=new j(i,e,"minor")),w&&g[e].isNew&&g[e].render(null,!0),g[e].render(null,!1,1)}),c.length&&(_n(c.slice(1).concat([c[0]]),function(e,t){t=t===c.length-1?0:t+1,(!l||e>=i.min&&e<=i.max)&&(p[e]||(p[e]=new j(i,e)),w&&p[e].isNew&&p[e].render(t,!0),p[e].render(t,!1,1))}),b&&0===i.min&&(p[-1]||(p[-1]=new j(i,-1,null,!0)),p[-1].render(-1))),y&&_n(c,function(e,r){0===r%2&&e<i.max&&(m[e]||(m[e]=new H(i)),t=e+b,n=c[r+1]!==G?c[r+1]+b:i.max,m[e].options={from:s?u(t):t,to:s?u(n):n,color:y},m[e].render(),m[e].isActive=!0)}),i._addedPlotLB||(_n((a.plotLines||[]).concat(a.plotBands||[]),function(e){i.addPlotBandOrLine(e)}),i._addedPlotLB=!0)),_n([p,g,m],function(e){var t,n,i=[],o=Q?Q.duration||500:0,a=function(){for(n=i.length;n--;)e[i[n]]&&!e[i[n]].isActive&&(e[i[n]].destroy(),delete e[i[n]])};for(t in e)e[t].isActive||(e[t].render(t,!1,0),e[t].isActive=!1,i.push(t));e!==m&&r.hasRendered&&o?o&&setTimeout(a,o):a()}),_&&(e=i.getLinePath(_),i.axisLine?i.axisLine.animate({d:e}):i.axisLine=o.path(e).attr({stroke:a.lineColor,"stroke-width":_,zIndex:7}).add(i.axisGroup),i.axisLine[T?"show":"hide"]()),h&&T&&(h[h.isNew?"attr":"animate"](i.getTitlePosition()),h.isNew=!1),v&&v.enabled){var E,S,k,A=i.stackTotalGroup;A||(i.stackTotalGroup=A=o.g("stack-labels").attr({visibility:Yt,zIndex:6}).add()),A.translate(r.plotLeft,r.plotTop);for(E in f){S=f[E];for(k in S)S[k].render(A)}}i.isDirty=!1},removePlotBandOrLine:function(e){for(var t=this.plotLinesAndBands,n=t.length;n--;)t[n].id===e&&t[n].destroy()},setTitle:function(e,t){this.update({title:e},t)},redraw:function(){var e=this,t=e.chart,n=t.pointer;n.reset&&n.reset(!0),e.render(),_n(e.plotLinesAndBands,function(e){e.render()}),_n(e.series,function(e){e.isDirty=!0})},setCategories:function(e,t){this.update({categories:e},t)},destroy:function(){var e,t=this,n=t.stacks;En(t);for(e in n)N(n[e]),n[e]=null;_n([t.ticks,t.minorTicks,t.alternateBands,t.plotLinesAndBands],function(e){N(e)}),_n(["stackTotalGroup","axisLine","axisGroup","gridGroup","labelGroup","axisTitle"],function(e){t[e]&&(t[e]=t[e].destroy())})}},$.prototype={init:function(e,t){var n=t.borderWidth,r=t.style,o=i(r.padding);
this.chart=e,this.options=t,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=e.renderer.label("",0,0,t.shape,null,null,t.useHTML,null,"tooltip").attr({padding:o,fill:t.backgroundColor,"stroke-width":n,r:t.borderRadius,zIndex:8}).css(r).css({padding:0}).hide().add(),Lt||this.label.shadow(t.shadow),this.shared=t.shared},destroy:function(){_n(this.crosshairs,function(e){e&&e.destroy()}),this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(t,n,i,r){var o=this,a=o.now,s=o.options.animation!==!1&&!o.isHidden;e(a,{x:s?(2*a.x+t)/3:t,y:s?(a.y+n)/2:n,anchorX:s?(2*a.anchorX+i)/3:i,anchorY:s?(a.anchorY+r)/2:r}),o.label.attr(a),s&&(xt(t-a.x)>1||xt(n-a.y)>1)&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){o&&o.move(t,n,i,r)},32))},hide:function(){var e,t=this;clearTimeout(this.hideTimer),this.isHidden||(e=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){t.label.fadeOut(),t.isHidden=!0},p(this.options.hideDelay,500)),e&&_n(e,function(e){e.setState()}),this.chart.hoverPoints=null)},hideCrosshairs:function(){_n(this.crosshairs,function(e){e&&e.hide()})},getAnchor:function(e,t){var n,i,r=this.chart,o=r.inverted,a=r.plotTop,s=0,l=0;return e=f(e),n=e[0].tooltipPos,this.followPointer&&t&&(t.chartX===G&&(t=r.pointer.normalize(t)),n=[t.chartX-r.plotLeft,t.chartY-a]),n||(_n(e,function(e){i=e.series.yAxis,s+=e.plotX,l+=(e.plotLow?(e.plotLow+e.plotHigh)/2:e.plotY)+(!o&&i?i.top-a:0)}),s/=e.length,l/=e.length,n=[o?r.plotWidth-l:s,this.shared&&!o&&e.length>1&&t?t.chartY-a:o?r.plotHeight-s:l]),Cn(n,mt)},getPosition:function(e,t,n){var i,r=this.chart,o=r.plotLeft,a=r.plotTop,s=r.plotWidth,l=r.plotHeight,u=p(this.options.distance,12),c=n.plotX,d=n.plotY,h=c+o+(r.inverted?u:-e-u),f=d-t+a+15;return 7>h&&(h=o+bt(c,0)+u),h+e>o+s&&(h-=h+e-(o+s),f=d-t+a-u,i=!0),a+5>f&&(f=a+5,i&&d>=f&&f+t>=d&&(f=d+a+u)),f+t>a+l&&(f=bt(a,a+l-t-u)),{x:h,y:f}},defaultFormatter:function(e){var t,n=this.points||f(this),i=n[0].series;return t=[i.tooltipHeaderFormatter(n[0])],_n(n,function(e){i=e.series,t.push(i.tooltipFormatter&&i.tooltipFormatter(e)||e.point.tooltipFormatter(i.tooltipOptions.pointFormat))}),t.push(e.options.footerFormat||""),t.join("")},refresh:function(e,t){var n,i,r,o,a,s,u,c=this,d=c.chart,h=c.label,g=c.options,m={},v=[],y=g.formatter||c.defaultFormatter,b=d.hoverPoints,_=g.crosshairs,x=c.shared;if(clearTimeout(this.hideTimer),c.followPointer=f(e)[0].series.tooltipOptions.followPointer,o=c.getAnchor(e,t),n=o[0],i=o[1],!x||e.series&&e.series.noSharedTooltip?m=e.getLabelConfig():(d.hoverPoints=e,b&&_n(b,function(e){e.setState()}),_n(e,function(e){e.setState(nn),v.push(e.getLabelConfig())}),m={x:e[0].category,y:e[0].y},m.points=v,e=e[0]),a=y.call(m,c),u=e.series,r=x||!u.isCartesian||u.tooltipOutsidePlot||d.isInsidePlot(n,i),a!==!1&&r?(c.isHidden&&(Mn(h),h.attr("opacity",1).show()),h.attr({text:a}),s=g.borderColor||e.color||u.color||"#606060",h.attr({stroke:s}),c.updatePosition({plotX:n,plotY:i}),this.isHidden=!1):this.hide(),_){_=f(_);for(var w,C,T,E,S=_.length;S--;)T=e.series[S?"yAxis":"xAxis"],_[S]&&T&&(E=S?p(e.stackY,e.y):e.x,T.isLog&&(E=l(E)),w=T.getPlotLinePath(E,1),c.crosshairs[S]?c.crosshairs[S].attr({d:w,visibility:Yt}):(C={"stroke-width":_[S].width||1,stroke:_[S].color||"#C0C0C0",zIndex:_[S].zIndex||2},_[S].dashStyle&&(C.dashstyle=_[S].dashStyle),c.crosshairs[S]=d.renderer.path(w).attr(C).add()))}Sn(d,"tooltipRefresh",{text:a,x:n+d.plotLeft,y:i+d.plotTop,borderColor:s})},updatePosition:function(e){var t=this.chart,n=this.label,i=(this.options.positioner||this.getPosition).call(this,n.width,n.height,e);this.move(mt(i.x),mt(i.y),e.plotX+t.plotLeft,e.plotY+t.plotTop)}},U.prototype={init:function(e,t){var n,i,r=Lt?"":t.chart.zoomType,o=e.inverted;this.options=t,this.chart=e,this.zoomX=n=/x/.test(r),this.zoomY=i=/y/.test(r),this.zoomHor=n&&!o||i&&o,this.zoomVert=i&&!o||n&&o,this.pinchDown=[],this.lastValidTouch={},t.tooltip.enabled&&(e.tooltip=new $(e,t.tooltip)),this.setDOMEvents()},normalize:function(t){var n,i,r,o;return t=t||pt.event,t.target||(t.target=t.srcElement),t=kn(t),o=t.touches?t.touches.item(0):t,this.chartPosition=n=wn(this.chart.container),o.pageX===G?(i=t.x,r=t.y):(i=o.pageX-n.left,r=o.pageY-n.top),e(t,{chartX:mt(i),chartY:mt(r)})},getCoordinates:function(e){var t={xAxis:[],yAxis:[]};return _n(this.chart.axes,function(n){t[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(e[n.horiz?"chartX":"chartY"])})}),t},getIndex:function(e){var t=this.chart;return t.inverted?t.plotHeight+t.plotTop-e.chartY:e.chartX-t.plotLeft},runPointActions:function(e){var t,n,i,r,o,a=this,s=a.chart,l=s.series,u=s.tooltip,c=s.hoverPoint,d=s.hoverSeries,h=s.chartWidth,f=a.getIndex(e);if(u&&a.options.tooltip.shared&&(!d||!d.noSharedTooltip)){for(n=[],i=l.length,r=0;i>r;r++)l[r].visible&&l[r].options.enableMouseTracking!==!1&&!l[r].noSharedTooltip&&l[r].tooltipPoints.length&&(t=l[r].tooltipPoints[f],t.series&&(t._dist=xt(f-t.clientX),h=_t(h,t._dist),n.push(t)));for(i=n.length;i--;)n[i]._dist>h&&n.splice(i,1);n.length&&n[0].clientX!==a.hoverX&&(u.refresh(n,e),a.hoverX=n[0].clientX)}d&&d.tracker?(t=d.tooltipPoints[f-d.xAxis.left+s.plotLeft],t&&t!==c&&t.onMouseOver(e)):u&&u.followPointer&&!u.isHidden&&(o=u.getAnchor([{}],e),u.updatePosition({plotX:o[0],plotY:o[1]}))},reset:function(e){var t=this,n=t.chart,i=n.hoverSeries,r=n.hoverPoint,o=n.tooltip,a=o&&o.shared?n.hoverPoints:r;e=e&&o&&a,e&&f(a)[0].plotX===G&&(e=!1),e?o.refresh(a):(r&&r.onMouseOut(),i&&i.onMouseOut(),o&&(o.hide(),o.hideCrosshairs()),t.hoverX=null)},scaleGroups:function(e,t){var n=this.chart;_n(n.series,function(i){i.xAxis&&i.xAxis.zoomEnabled&&(i.group.attr(e),i.markerGroup&&(i.markerGroup.attr(e),i.markerGroup.clip(t?n.clipRect:null)),i.dataLabelsGroup&&i.dataLabelsGroup.attr(e))}),n.clipRect.attr(t||n.clipBox)},pinchTranslateDirection:function(e,t,n,i,r,o,a){var s,l,u,c,d,h,f=this.chart,p=e?"x":"y",g=e?"X":"Y",m="chart"+g,v=e?"width":"height",y=f["plot"+(e?"Left":"Top")],b=1,_=f.inverted,x=f.bounds[e?"h":"v"],w=1===t.length,C=t[0][m],T=n[0][m],E=!w&&t[1][m],S=!w&&n[1][m],k=function(){!w&&xt(C-E)>20&&(b=xt(T-S)/xt(C-E)),u=(y-T)/b+C,s=f["plot"+(e?"Width":"Height")]/b};k(),l=u,l<x.min?(l=x.min,c=!0):l+s>x.max&&(l=x.max-s,c=!0),c?(T-=.8*(T-a[p][0]),w||(S-=.8*(S-a[p][1])),k()):a[p]=[T,S],_||(o[p]=u-y,o[v]=s),h=_?e?"scaleY":"scaleX":"scale"+g,d=_?1/b:b,r[v]=s,r[p]=l,i[h]=b,i["translate"+g]=d*y+(T-d*C)},pinch:function(t){var n=this,i=n.chart,r=n.pinchDown,o=i.tooltip&&i.tooltip.options.followTouchMove,a=t.touches,s=a.length,l=n.lastValidTouch,u=n.zoomHor||n.pinchHor,c=n.zoomVert||n.pinchVert,d=u||c,h=n.selectionMarker,f={},p={};"touchstart"===t.type&&(o||d)&&t.preventDefault(),Cn(a,function(e){return n.normalize(e)}),"touchstart"===t.type?(_n(a,function(e,t){r[t]={chartX:e.chartX,chartY:e.chartY}}),l.x=[r[0].chartX,r[1]&&r[1].chartX],l.y=[r[0].chartY,r[1]&&r[1].chartY],_n(i.axes,function(e){if(e.zoomEnabled){var t=i.bounds[e.horiz?"h":"v"],n=e.minPixelPadding,r=e.toPixels(e.dataMin),o=e.toPixels(e.dataMax),a=_t(r,o),s=bt(r,o);t.min=_t(e.pos,a-n),t.max=bt(e.pos+e.len,s+n)}})):r.length&&(h||(n.selectionMarker=h=e({destroy:Ht},i.plotBox)),u&&n.pinchTranslateDirection(!0,r,a,f,h,p,l),c&&n.pinchTranslateDirection(!1,r,a,f,h,p,l),n.hasPinched=d,n.scaleGroups(f,p),!d&&o&&1===s&&this.runPointActions(n.normalize(t)))},dragStart:function(e){var t=this.chart;t.mouseIsDown=e.type,t.cancelClick=!1,t.mouseDownX=this.mouseDownX=e.chartX,this.mouseDownY=e.chartY},drag:function(e){var t,n,i=this.chart,r=i.options.chart,o=e.chartX,a=e.chartY,s=this.zoomHor,l=this.zoomVert,u=i.plotLeft,c=i.plotTop,d=i.plotWidth,h=i.plotHeight,f=this.mouseDownX,p=this.mouseDownY;u>o?o=u:o>u+d&&(o=u+d),c>a?a=c:a>c+h&&(a=c+h),this.hasDragged=Math.sqrt(Math.pow(f-o,2)+Math.pow(p-a,2)),this.hasDragged>10&&(t=i.isInsidePlot(f-u,p-c),i.hasCartesianSeries&&(this.zoomX||this.zoomY)&&t&&(this.selectionMarker||(this.selectionMarker=i.renderer.rect(u,c,s?1:d,l?1:h,0).attr({fill:r.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),this.selectionMarker&&s&&(n=o-f,this.selectionMarker.attr({width:xt(n),x:(n>0?0:n)+f})),this.selectionMarker&&l&&(n=a-p,this.selectionMarker.attr({height:xt(n),y:(n>0?0:n)+p})),t&&!this.selectionMarker&&r.panning&&i.pan(o))},drop:function(t){var n=this.chart,i=this.hasPinched;if(this.selectionMarker){var r,o={xAxis:[],yAxis:[],originalEvent:t.originalEvent||t},a=this.selectionMarker,s=a.x,l=a.y;(this.hasDragged||i)&&(_n(n.axes,function(e){if(e.zoomEnabled){var t=e.horiz,n=e.toValue(t?s:l),i=e.toValue(t?s+a.width:l+a.height);isNaN(n)||isNaN(i)||(o[e.xOrY+"Axis"].push({axis:e,min:_t(n,i),max:bt(n,i)}),r=!0)}}),r&&Sn(n,"selection",o,function(t){n.zoom(e(t,i?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),i&&this.scaleGroups({translateX:n.plotLeft,translateY:n.plotTop,scaleX:1,scaleY:1})}n&&(g(n.container,{cursor:n._cursor}),n.cancelClick=this.hasDragged>10,n.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(e){e=this.normalize(e),e.preventDefault&&e.preventDefault(),this.dragStart(e)},onDocumentMouseUp:function(e){this.drop(e)},onDocumentMouseMove:function(e){var t=this.chart,n=this.chartPosition,i=t.hoverSeries;e=kn(e),n&&i&&i.isCartesian&&!t.isInsidePlot(e.pageX-n.left-t.plotLeft,e.pageY-n.top-t.plotTop)&&this.reset()},onContainerMouseLeave:function(){this.reset(),this.chartPosition=null},onContainerMouseMove:function(e){var t=this.chart;e=this.normalize(e),e.returnValue=!1,"mousedown"===t.mouseIsDown&&this.drag(e),t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)&&!t.openMenu&&this.runPointActions(e)},inClass:function(e,t){for(var n;e;){if(n=h(e,"class")){if(-1!==n.indexOf(t))return!0;if(-1!==n.indexOf(Xt+"container"))return!1}e=e.parentNode}},onTrackerMouseOut:function(e){var t=this.chart.hoverSeries;!t||t.options.stickyTracking||this.inClass(e.toElement||e.relatedTarget,Xt+"tooltip")||t.onMouseOut()},onContainerClick:function(t){var n,i,r,o=this.chart,a=o.hoverPoint,s=o.plotLeft,l=o.plotTop,u=o.inverted;t=this.normalize(t),t.cancelBubble=!0,o.cancelClick||(a&&this.inClass(t.target,Xt+"tracker")?(n=this.chartPosition,i=a.plotX,r=a.plotY,e(a,{pageX:n.left+s+(u?o.plotWidth-r:i),pageY:n.top+l+(u?o.plotHeight-i:r)}),Sn(a.series,"click",e(t,{point:a})),o.hoverPoint&&a.firePointEvent("click",t)):(e(t,this.getCoordinates(t)),o.isInsidePlot(t.chartX-s,t.chartY-l)&&Sn(o,"click",t)))},onContainerTouchStart:function(e){var t=this.chart;1===e.touches.length?(e=this.normalize(e),t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)&&(this.runPointActions(e),this.pinch(e))):2===e.touches.length&&this.pinch(e)},onContainerTouchMove:function(e){(1===e.touches.length||2===e.touches.length)&&this.pinch(e)},onDocumentTouchEnd:function(e){this.drop(e)},setDOMEvents:function(){var e,t=this,n=t.chart.container;this._events=e=[[n,"onmousedown","onContainerMouseDown"],[n,"onmousemove","onContainerMouseMove"],[n,"onclick","onContainerClick"],[n,"mouseleave","onContainerMouseLeave"],[ft,"mousemove","onDocumentMouseMove"],[ft,"mouseup","onDocumentMouseUp"]],Bt&&e.push([n,"ontouchstart","onContainerTouchStart"],[n,"ontouchmove","onContainerTouchMove"],[ft,"touchend","onDocumentTouchEnd"]),_n(e,function(e){t["_"+e[2]]=function(n){t[e[2]](n)},0===e[1].indexOf("on")?e[0][e[1]]=t["_"+e[2]]:Tn(e[0],e[1],t["_"+e[2]])})},destroy:function(){var e=this;_n(e._events,function(t){0===t[1].indexOf("on")?t[0][t[1]]=null:En(t[0],t[1],e["_"+t[2]])}),delete e._events,clearInterval(e.tooltipTimeout)}},W.prototype={init:function(e,n){var r=this,o=n.itemStyle,a=p(n.padding,8),s=n.itemMarginTop||0;this.options=n,n.enabled&&(r.baseline=i(o.fontSize)+3+s,r.itemStyle=o,r.itemHiddenStyle=t(o,n.itemHiddenStyle),r.itemMarginTop=s,r.padding=a,r.initialItemX=a,r.initialItemY=a-5,r.maxItemWidth=0,r.chart=e,r.itemHeight=0,r.lastLineHeight=0,r.render(),Tn(r.chart,"endResize",function(){r.positionCheckboxes()}))},colorizeItem:function(e,t){var n,i,r=this,o=r.options,a=e.legendItem,s=e.legendLine,l=e.legendSymbol,u=r.itemHiddenStyle.color,c=t?o.itemStyle.color:u,d=t?e.color:u,h=e.options&&e.options.marker,f={stroke:d,fill:d};if(a&&a.css({fill:c,color:c}),s&&s.attr({stroke:d}),l){if(h){h=e.convertAttribs(h);for(n in h)i=h[n],i!==G&&(f[n]=i)}l.attr(f)}},positionItem:function(e){var t=this,n=t.options,i=n.symbolPadding,r=!n.rtl,o=e._legendItemPos,a=o[0],s=o[1],l=e.checkbox;e.legendGroup&&e.legendGroup.translate(r?a:t.legendWidth-a-2*i-4,s),l&&(l.x=a,l.y=s)},destroyItem:function(e){var t=e.checkbox;_n(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){e[t]&&e[t].destroy()}),t&&D(e.checkbox)},destroy:function(){var e=this,t=e.group,n=e.box;n&&(e.box=n.destroy()),t&&(e.group=t.destroy())},positionCheckboxes:function(e){var t,n=this.group.alignAttr,i=this.clipHeight||this.legendHeight;n&&(t=n.translateY,_n(this.allItems,function(r){var o,a=r.checkbox;a&&(o=t+a.y+(e||0)+3,g(a,{left:n.translateX+r.legendItemWidth+a.x-20+Kt,top:o+Kt,display:o>t-6&&t+i-6>o?"":Jt}))}))},renderTitle:function(){var e=this.options,t=this.padding,n=e.title,i=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,t-3,t-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(n.style).add(this.group)),i=this.title.getBBox().height,this.contentGroup.attr({translateY:i})),this.titleHeight=i},renderItem:function(e){var n,i,r,o=this,a=o.chart,s=a.renderer,l=o.options,u="horizontal"===l.layout,c=l.symbolWidth,d=l.symbolPadding,h=o.itemStyle,f=o.itemHiddenStyle,p=o.padding,g=!l.rtl,v=l.width,y=l.itemMarginBottom||0,b=o.itemMarginTop,_=o.initialItemX,x=e.legendItem,C=e.series||e,T=C.options,E=T.showCheckbox,S=l.useHTML;x||(e.legendGroup=s.g("legend-item").attr({zIndex:1}).add(o.scrollGroup),C.drawLegendSymbol(o,e),e.legendItem=x=s.text(l.labelFormat?w(l.labelFormat,e):l.labelFormatter.call(e),g?c+d:-d,o.baseline,S).css(t(e.visible?h:f)).attr({align:g?"left":"right",zIndex:2}).add(e.legendGroup),(S?x:e.legendGroup).on("mouseover",function(){e.setState(nn),x.css(o.options.itemHoverStyle)}).on("mouseout",function(){x.css(e.visible?h:f),e.setState()}).on("click",function(t){var n="legendItemClick",i=function(){e.setVisible()};t={browserEvent:t},e.firePointEvent?e.firePointEvent(n,t,i):Sn(e,n,t,i)}),o.colorizeItem(e,e.visible),T&&E&&(e.checkbox=m("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},l.itemCheckboxStyle,a.container),Tn(e.checkbox,"click",function(t){var n=t.target;Sn(e,"checkboxClick",{checked:n.checked},function(){e.select()})}))),i=x.getBBox(),r=e.legendItemWidth=l.itemWidth||c+d+i.width+p+(E?20:0),o.itemHeight=n=i.height,u&&o.itemX-_+r>(v||a.chartWidth-2*p-_)&&(o.itemX=_,o.itemY+=b+o.lastLineHeight+y,o.lastLineHeight=0),o.maxItemWidth=bt(o.maxItemWidth,r),o.lastItemY=b+o.itemY+y,o.lastLineHeight=bt(n,o.lastLineHeight),e._legendItemPos=[o.itemX,o.itemY],u?o.itemX+=r:(o.itemY+=b+n+y,o.lastLineHeight=n),o.offsetWidth=v||bt(u?o.itemX-_:r,o.offsetWidth)},render:function(){var t,n,i,r,o=this,a=o.chart,s=a.renderer,l=o.group,u=o.box,c=o.options,h=o.padding,f=c.borderWidth,p=c.backgroundColor;o.itemX=o.initialItemX,o.itemY=o.initialItemY,o.offsetWidth=0,o.lastItemY=0,l||(o.group=l=s.g("legend").attr({zIndex:7}).add(),o.contentGroup=s.g().attr({zIndex:1}).add(l),o.scrollGroup=s.g().add(o.contentGroup)),o.renderTitle(),t=[],_n(a.series,function(e){var n=e.options;n.showInLegend&&!d(n.linkedTo)&&(t=t.concat(e.legendItems||("point"===n.legendType?e.data:e)))}),k(t,function(e,t){return(e.options&&e.options.legendIndex||0)-(t.options&&t.options.legendIndex||0)}),c.reversed&&t.reverse(),o.allItems=t,o.display=n=!!t.length,_n(t,function(e){o.renderItem(e)}),i=c.width||o.offsetWidth,r=o.lastItemY+o.lastLineHeight+o.titleHeight,r=o.handleOverflow(r),(f||p)&&(i+=h,r+=h,u?i>0&&r>0&&(u[u.isNew?"attr":"animate"](u.crisp(null,null,null,i,r)),u.isNew=!1):(o.box=u=s.rect(0,0,i,r,c.borderRadius,f||0).attr({stroke:c.borderColor,"stroke-width":f||0,fill:p||Jt}).add(l).shadow(c.shadow),u.isNew=!0),u[n?"show":"hide"]()),o.legendWidth=i,o.legendHeight=r,_n(t,function(e){o.positionItem(e)}),n&&l.align(e({width:i,height:r},c),!0,"spacingBox"),a.isResizing||this.positionCheckboxes()},handleOverflow:function(e){var t,n,i=this,r=this.chart,o=r.renderer,a=this.options,s=a.y,l="top"===a.verticalAlign,u=r.spacingBox.height+(l?-s:s)-this.padding,c=a.maxHeight,d=this.clipRect,h=a.navigation,f=p(h.animation,!0),g=h.arrowSize||12,m=this.nav;return"horizontal"===a.layout&&(u/=2),c&&(u=_t(u,c)),e>u&&!a.useHTML?(this.clipHeight=n=u-20-this.titleHeight,this.pageCount=t=yt(e/n),this.currentPage=p(this.currentPage,1),this.fullHeight=e,d||(d=i.clipRect=o.clipRect(0,0,9999,0),i.contentGroup.clip(d)),d.attr({height:n}),m||(this.nav=m=o.g().attr({zIndex:1}).add(this.group),this.up=o.symbol("triangle",0,0,g,g).on("click",function(){i.scroll(-1,f)}).add(m),this.pager=o.text("",15,10).css(h.style).add(m),this.down=o.symbol("triangle-down",0,0,g,g).on("click",function(){i.scroll(1,f)}).add(m)),i.scroll(0),e=u):m&&(d.attr({height:r.chartHeight}),m.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e},scroll:function(e,t){var n,i=this.pageCount,r=this.currentPage+e,o=this.clipHeight,a=this.options.navigation,s=a.activeColor,l=a.inactiveColor,u=this.pager,c=this.padding;r>i&&(r=i),r>0&&(t!==G&&O(t,this.chart),this.nav.attr({translateX:c,translateY:o+7+this.titleHeight,visibility:Yt}),this.up.attr({fill:1===r?l:s}).css({cursor:1===r?"default":"pointer"}),u.attr({text:r+"/"+this.pageCount}),this.down.attr({x:18+this.pager.getBBox().width,fill:r===i?l:s}).css({cursor:r===i?"default":"pointer"}),n=-_t(o*(r-1),this.fullHeight-o+c)+1,this.scrollGroup.animate({translateY:n}),u.attr({text:r+"/"+i}),this.currentPage=r,this.positionCheckboxes(n))}},q.prototype={init:function(e,n){var i,r=e.series;e.series=null,i=t(K,e),i.series=e.series=r;var a=i.chart,s=a.margin,l=o(s)?s:[s,s,s,s];this.optionsMarginTop=p(a.marginTop,l[0]),this.optionsMarginRight=p(a.marginRight,l[1]),this.optionsMarginBottom=p(a.marginBottom,l[2]),this.optionsMarginLeft=p(a.marginLeft,l[3]);var u=a.events;this.runChartClick=u&&!!u.click,this.bounds={h:{},v:{}},this.callback=n,this.isResizing=0,this.options=i,this.axes=[],this.series=[],this.hasCartesianSeries=a.showAxes;var c,d=this;if(d.index=Vt.length,Vt.push(d),a.reflow!==!1&&Tn(d,"load",function(){d.initReflow()}),u)for(c in u)Tn(d,c,u[c]);d.xAxis=[],d.yAxis=[],d.animation=Lt?!1:p(a.animation,!0),d.pointCount=0,d.counters=new S,d.firstRender()},initSeries:function(e){var t,n=this,i=n.options.chart,r=e.type||i.type||i.defaultSeriesType,o=pn[r];return o||P(17,!0),t=new o,t.init(this,e),t},addSeries:function(e,t,n){var i,r=this;return e&&(t=p(t,!0),Sn(r,"addSeries",{options:e},function(){i=r.initSeries(e),r.isDirtyLegend=!0,t&&r.redraw(n)})),i},addAxis:function(e,n,i,r){var o,a=n?"xAxis":"yAxis",s=this.options;o=new z(this,t(e,{index:this[a].length})),s[a]=f(s[a]||{}),s[a].push(e),p(i,!0)&&this.redraw(r)},isInsidePlot:function(e,t,n){var i=n?t:e,r=n?e:t;return i>=0&&i<=this.plotWidth&&r>=0&&r<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&_n(this.axes,function(e){e.adjustTickAmount()}),this.maxTicks=null},redraw:function(e){var t,n,i=this,r=i.axes,o=i.series,a=i.pointer,s=i.legend,l=i.isDirtyLegend,u=i.isDirtyBox,c=o.length,d=c,h=i.renderer,f=h.isHidden(),p=[];for(O(e,i),f&&i.cloneRenderTo();d--;)if(n=o[d],n.isDirty&&n.options.stacking){t=!0;break}if(t)for(d=c;d--;)n=o[d],n.options.stacking&&(n.isDirty=!0);_n(o,function(e){e.isDirty&&"point"===e.options.legendType&&(l=!0)}),l&&s.options.enabled&&(s.render(),i.isDirtyLegend=!1),i.hasCartesianSeries&&(i.isResizing||(i.maxTicks=null,_n(r,function(e){e.setScale()})),i.adjustTickAmounts(),i.getMargins(),_n(r,function(e){e.isDirtyExtremes&&(e.isDirtyExtremes=!1,p.push(function(){Sn(e,"afterSetExtremes",e.getExtremes())})),(e.isDirty||u||t)&&(e.redraw(),u=!0)})),u&&i.drawChartBox(),_n(o,function(e){e.isDirty&&e.visible&&(!e.isCartesian||e.xAxis)&&e.redraw()}),a&&a.reset&&a.reset(!0),h.draw(),Sn(i,"redraw"),f&&i.cloneRenderTo(!0),_n(p,function(e){e.call()})},showLoading:function(t){var n=this,i=n.options,r=n.loadingDiv,o=i.loading;r||(n.loadingDiv=r=m(Ut,{className:Xt+"loading"},e(o.style,{zIndex:10,display:Jt}),n.container),n.loadingSpan=m("span",null,o.labelStyle,r)),n.loadingSpan.innerHTML=t||i.lang.loading,n.loadingShown||(g(r,{opacity:0,display:"",left:n.plotLeft+Kt,top:n.plotTop+Kt,width:n.plotWidth+Kt,height:n.plotHeight+Kt}),An(r,{opacity:o.style.opacity},{duration:o.showDuration||0}),n.loadingShown=!0)},hideLoading:function(){var e=this.options,t=this.loadingDiv;t&&An(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){g(t,{display:Jt})}}),this.loadingShown=!1},get:function(e){var t,n,i,r=this,o=r.axes,a=r.series;for(t=0;t<o.length;t++)if(o[t].options.id===e)return o[t];for(t=0;t<a.length;t++)if(a[t].options.id===e)return a[t];for(t=0;t<a.length;t++)for(i=a[t].points||[],n=0;n<i.length;n++)if(i[n].id===e)return i[n];return null},getAxes:function(){var e,t,n=this,i=this.options,r=i.xAxis=f(i.xAxis||{}),o=i.yAxis=f(i.yAxis||{});_n(r,function(e,t){e.index=t,e.isX=!0}),_n(o,function(e,t){e.index=t}),e=r.concat(o),_n(e,function(e){t=new z(n,e)}),n.adjustTickAmounts()},getSelectedPoints:function(){var e=[];return _n(this.series,function(t){e=e.concat(xn(t.points||[],function(e){return e.selected}))}),e},getSelectedSeries:function(){return xn(this.series,function(e){return e.selected})},showResetZoom:function(){var e=this,t=K.lang,n=e.options.chart.resetZoomButton,i=n.theme,r=i.states,o="chart"===n.relativeTo?null:"plotBox";this.resetZoomButton=e.renderer.button(t.resetZoom,null,null,function(){e.zoomOut()},i,r&&r.hover).attr({align:n.position.align,title:t.resetZoomTitle}).add().align(n.position,!1,o)},zoomOut:function(){var e=this;Sn(e,"selection",{resetSelection:!0},function(){e.zoom()})},zoom:function(e){var t,n,i=this,r=i.pointer,a=!1;!e||e.resetSelection?_n(i.axes,function(e){t=e.zoom()}):_n(e.xAxis.concat(e.yAxis),function(e){var n=e.axis,i=n.isXAxis;(r[i?"zoomX":"zoomY"]||r[i?"pinchX":"pinchY"])&&(t=n.zoom(e.min,e.max),n.displayBtn&&(a=!0))}),n=i.resetZoomButton,a&&!n?i.showResetZoom():!a&&o(n)&&(i.resetZoomButton=n.destroy()),t&&i.redraw(p(i.options.chart.animation,e&&e.animation,i.pointCount<100))},pan:function(e){var t=this,n=t.xAxis[0],i=t.mouseDownX,r=n.pointRange/2,o=n.getExtremes(),a=n.translate(i-e,!0)+r,s=n.translate(i+t.plotWidth-e,!0)-r,l=t.hoverPoints;l&&_n(l,function(e){e.setState()}),n.series.length&&a>_t(o.dataMin,o.min)&&s<bt(o.dataMax,o.max)&&n.setExtremes(a,s,!0,!1,{trigger:"pan"}),t.mouseDownX=e,g(t.container,{cursor:"move"})},setTitle:function(e,n){var i,r,o=this,a=o.options;i=a.title=t(a.title,e),r=a.subtitle=t(a.subtitle,n),_n([["title",e,i],["subtitle",n,r]],function(e){var t=e[0],n=o[t],i=e[1],r=e[2];n&&i&&(o[t]=n=n.destroy()),r&&r.text&&!n&&(o[t]=o.renderer.text(r.text,0,0,r.useHTML).attr({align:r.align,"class":Xt+t,zIndex:r.zIndex||4}).css(r.style).add().align(r,!1,"spacingBox"))})},getChartSize:function(){var e=this,t=e.options.chart,n=e.renderToClone||e.renderTo;e.containerWidth=vn(n,"width"),e.containerHeight=vn(n,"height"),e.chartWidth=bt(0,t.width||e.containerWidth||600),e.chartHeight=bt(0,p(t.height,e.containerHeight>19?e.containerHeight:400))},cloneRenderTo:function(e){var t=this.renderToClone,n=this.container;e?t&&(this.renderTo.appendChild(n),D(t),delete this.renderToClone):(n&&this.renderTo.removeChild(n),this.renderToClone=t=this.renderTo.cloneNode(0),g(t,{position:Wt,top:"-9999px",display:"block"}),ft.body.appendChild(t),n&&t.appendChild(n))},getContainer:function(){var t,n,o,a,s,l,u=this,c=u.options.chart,d="data-highcharts-chart";u.renderTo=a=c.renderTo,l=Xt+jt++,r(a)&&(u.renderTo=a=ft.getElementById(a)),a||P(13,!0),s=i(h(a,d)),!isNaN(s)&&Vt[s]&&Vt[s].destroy(),h(a,d,u.index),a.innerHTML="",a.offsetWidth||u.cloneRenderTo(),u.getChartSize(),n=u.chartWidth,o=u.chartHeight,u.container=t=m(Ut,{className:Xt+"container"+(c.className?" "+c.className:""),id:l},e({position:qt,overflow:Gt,width:n+Kt,height:o+Kt,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},c.style),u.renderToClone||a),u._cursor=t.style.cursor,u.renderer=c.forExport?new On(t,n,o,!0):new X(t,n,o),Lt&&u.renderer.create(u,t,n,o)},getMargins:function(){var e,t,n=this,i=n.options.chart,r=i.spacingTop,o=i.spacingRight,a=i.spacingBottom,s=i.spacingLeft,l=n.legend,u=n.optionsMarginTop,c=n.optionsMarginLeft,h=n.optionsMarginRight,f=n.optionsMarginBottom,g=n.options.title,m=n.options.subtitle,v=n.options.legend,y=p(v.margin,10),b=v.x,_=v.y,x=v.align,w=v.verticalAlign;n.resetMargins(),e=n.axisOffset,!n.title&&!n.subtitle||d(n.optionsMarginTop)||(t=bt(n.title&&!g.floating&&!g.verticalAlign&&g.y||0,n.subtitle&&!m.floating&&!m.verticalAlign&&m.y||0),t&&(n.plotTop=bt(n.plotTop,t+p(g.margin,15)+r))),l.display&&!v.floating&&("right"===x?d(h)||(n.marginRight=bt(n.marginRight,l.legendWidth-b+y+o)):"left"===x?d(c)||(n.plotLeft=bt(n.plotLeft,l.legendWidth+b+y+s)):"top"===w?d(u)||(n.plotTop=bt(n.plotTop,l.legendHeight+_+y+r)):"bottom"===w&&(d(f)||(n.marginBottom=bt(n.marginBottom,l.legendHeight-_+y+a)))),n.extraBottomMargin&&(n.marginBottom+=n.extraBottomMargin),n.extraTopMargin&&(n.plotTop+=n.extraTopMargin),n.hasCartesianSeries&&_n(n.axes,function(e){e.getOffset()}),d(c)||(n.plotLeft+=e[3]),d(u)||(n.plotTop+=e[0]),d(f)||(n.marginBottom+=e[2]),d(h)||(n.marginRight+=e[1]),n.setChartSize()},initReflow:function(){function e(e){var o=i.width||vn(r,"width"),a=i.height||vn(r,"height"),s=e?e.target:pt;n.hasUserSize||!o||!a||s!==pt&&s!==ft||((o!==n.containerWidth||a!==n.containerHeight)&&(clearTimeout(t),n.reflowTimeout=t=setTimeout(function(){n.container&&(n.setSize(o,a,!1),n.hasUserSize=null)},100)),n.containerWidth=o,n.containerHeight=a)}var t,n=this,i=n.options.chart,r=n.renderTo;Tn(pt,"resize",e),Tn(n,"destroy",function(){En(pt,"resize",e)})},setSize:function(e,t,n){var i,r,o,a=this;a.isResizing+=1,o=function(){a&&Sn(a,"endResize",null,function(){a.isResizing-=1})},O(n,a),a.oldChartHeight=a.chartHeight,a.oldChartWidth=a.chartWidth,d(e)&&(a.chartWidth=i=bt(0,mt(e)),a.hasUserSize=!!i),d(t)&&(a.chartHeight=r=bt(0,mt(t))),g(a.container,{width:i+Kt,height:r+Kt}),a.setChartSize(!0),a.renderer.setSize(i,r,n),a.maxTicks=null,_n(a.axes,function(e){e.isDirty=!0,e.setScale()}),_n(a.series,function(e){e.isDirty=!0}),a.isDirtyLegend=!0,a.isDirtyBox=!0,a.getMargins(),a.redraw(n),a.oldChartHeight=null,Sn(a,"resize"),Q===!1?o():setTimeout(o,Q&&Q.duration||500)},setChartSize:function(e){var t,n,i,r,o,a,s,l=this,u=l.inverted,c=l.renderer,d=l.chartWidth,h=l.chartHeight,f=l.options.chart,p=f.spacingTop,g=f.spacingRight,m=f.spacingBottom,v=f.spacingLeft,y=l.clipOffset;l.plotLeft=i=mt(l.plotLeft),l.plotTop=r=mt(l.plotTop),l.plotWidth=o=bt(0,mt(d-i-l.marginRight)),l.plotHeight=a=bt(0,mt(h-r-l.marginBottom)),l.plotSizeX=u?a:o,l.plotSizeY=u?o:a,l.plotBorderWidth=s=f.plotBorderWidth||0,l.spacingBox=c.spacingBox={x:v,y:p,width:d-v-g,height:h-p-m},l.plotBox=c.plotBox={x:i,y:r,width:o,height:a},t=yt(bt(s,y[3])/2),n=yt(bt(s,y[0])/2),l.clipBox={x:t,y:n,width:vt(l.plotSizeX-bt(s,y[1])/2-t),height:vt(l.plotSizeY-bt(s,y[2])/2-n)},e||_n(l.axes,function(e){e.setAxisSize(),e.setAxisTranslation()})},resetMargins:function(){var e=this,t=e.options.chart,n=t.spacingTop,i=t.spacingRight,r=t.spacingBottom,o=t.spacingLeft;e.plotTop=p(e.optionsMarginTop,n),e.marginRight=p(e.optionsMarginRight,i),e.marginBottom=p(e.optionsMarginBottom,r),e.plotLeft=p(e.optionsMarginLeft,o),e.axisOffset=[0,0,0,0],e.clipOffset=[0,0,0,0]},drawChartBox:function(){var e,t,n=this,i=n.options.chart,r=n.renderer,o=n.chartWidth,a=n.chartHeight,s=n.chartBackground,l=n.plotBackground,u=n.plotBorder,c=n.plotBGImage,d=i.borderWidth||0,h=i.backgroundColor,f=i.plotBackgroundColor,p=i.plotBackgroundImage,g=i.plotBorderWidth||0,m=n.plotLeft,v=n.plotTop,y=n.plotWidth,b=n.plotHeight,_=n.plotBox,x=n.clipRect,w=n.clipBox;e=d+(i.shadow?8:0),(d||h)&&(s?s.animate(s.crisp(null,null,null,o-e,a-e)):(t={fill:h||Jt},d&&(t.stroke=i.borderColor,t["stroke-width"]=d),n.chartBackground=r.rect(e/2,e/2,o-e,a-e,i.borderRadius,d).attr(t).add().shadow(i.shadow))),f&&(l?l.animate(_):n.plotBackground=r.rect(m,v,y,b,0).attr({fill:f}).add().shadow(i.plotShadow)),p&&(c?c.animate(_):n.plotBGImage=r.image(p,m,v,y,b).add()),x?x.animate({width:w.width,height:w.height}):n.clipRect=r.clipRect(w),g&&(u?u.animate(u.crisp(null,m,v,y,b)):n.plotBorder=r.rect(m,v,y,b,0,g).attr({stroke:i.plotBorderColor,"stroke-width":g,zIndex:1}).add()),n.isDirtyBox=!1},propFromSeries:function(){var e,t,n,i=this,r=i.options.chart,o=i.options.series;_n(["inverted","angular","polar"],function(a){for(e=pn[r.type||r.defaultSeriesType],n=i[a]||r[a]||e&&e.prototype[a],t=o&&o.length;!n&&t--;)e=pn[o[t].type],e&&e.prototype[a]&&(n=!0);i[a]=n})},render:function(){var t,n=this,r=n.axes,o=n.renderer,a=n.options,s=a.labels,l=a.credits;n.setTitle(),n.legend=new W(n,a.legend),_n(r,function(e){e.setScale()}),n.getMargins(),n.maxTicks=null,_n(r,function(e){e.setTickPositions(!0),e.setMaxTicks()}),n.adjustTickAmounts(),n.getMargins(),n.drawChartBox(),n.hasCartesianSeries&&_n(r,function(e){e.render()}),n.seriesGroup||(n.seriesGroup=o.g("series-group").attr({zIndex:3}).add()),_n(n.series,function(e){e.translate(),e.setTooltipPoints(),e.render()}),s.items&&_n(s.items,function(t){var r=e(s.style,t.style),a=i(r.left)+n.plotLeft,l=i(r.top)+n.plotTop+12;delete r.left,delete r.top,o.text(t.html,a,l).attr({zIndex:2}).css(r).add()}),l.enabled&&!n.credits&&(t=l.href,n.credits=o.text(l.text,0,0).on("click",function(){t&&(location.href=t)}).attr({align:l.position.align,zIndex:8}).css(l.style).add().align(l.position)),n.hasRendered=!0},destroy:function(){var e,t=this,n=t.axes,i=t.series,r=t.container,o=r&&r.parentNode;for(Sn(t,"destroy"),Vt[t.index]=G,t.renderTo.removeAttribute("data-highcharts-chart"),En(t),e=n.length;e--;)n[e]=n[e].destroy();for(e=i.length;e--;)i[e]=i[e].destroy();_n(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(e){var n=t[e];n&&n.destroy&&(t[e]=n.destroy())}),r&&(r.innerHTML="",En(r),o&&D(r));for(e in t)delete t[e]},isReadyToRender:function(){var e=this;return!Ot&&pt==pt.top&&"complete"!==ft.readyState||Lt&&!pt.canvg?(Lt?jn.push(function(){e.firstRender()},e.options.global.canvasToolsURL):ft.attachEvent("onreadystatechange",function(){ft.detachEvent("onreadystatechange",e.firstRender),"complete"===ft.readyState&&e.firstRender()}),!1):!0},firstRender:function(){var e=this,t=e.options,n=e.callback;e.isReadyToRender()&&(e.getContainer(),Sn(e,"init"),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),_n(t.series||[],function(t){e.initSeries(t)}),Sn(e,"beforeRender"),e.pointer=new U(e,t),e.render(),e.renderer.draw(),n&&n.apply(e,[e]),_n(e.callbacks,function(t){t.apply(e,[e])}),e.cloneRenderTo(!0),Sn(e,"load"))}},q.prototype.callbacks=[];var Hn=function(){};Hn.prototype={init:function(e,t,n){var i,r=this;return r.series=e,r.applyOptions(t,n),r.pointAttr={},e.options.colorByPoint&&(i=e.options.colors||e.chart.options.colors,r.color=r.color||i[e.colorCounter++],e.colorCounter===i.length&&(e.colorCounter=0)),e.chart.pointCount++,r},applyOptions:function(t,n){var i=this,r=i.series,o=r.pointValKey;return t=Hn.prototype.optionsToObject.call(this,t),e(i,t),i.options=i.options?e(i.options,t):t,o&&(i.y=i[o]),i.x===G&&r&&(i.x=n===G?r.autoIncrement():n),i},optionsToObject:function(e){var t,n,i=this.series,r=i.pointArrayMap||["y"],o=r.length,s=0,l=0;if("number"==typeof e||null===e)t={y:e};else if(a(e))for(t={},e.length>o&&(n=typeof e[0],"string"===n?t.name=e[0]:"number"===n&&(t.x=e[0]),s++);o>l;)t[r[l++]]=e[s++];else"object"==typeof e&&(t=e,e.dataLabels&&(i._hasPointLabels=!0),e.marker&&(i._hasPointMarkers=!0));return t},destroy:function(){var e,t=this,n=t.series,i=n.chart,r=i.hoverPoints;i.pointCount--,r&&(t.setState(),c(r,t),r.length||(i.hoverPoints=null)),t===i.hoverPoint&&t.onMouseOut(),(t.graphic||t.dataLabel)&&(En(t),t.destroyElements()),t.legendItem&&i.legend.destroyItem(t);for(e in t)t[e]=null},destroyElements:function(){for(var e,t=this,n=["graphic","dataLabel","dataLabelUpper","group","connector","shadowGroup"],i=6;i--;)e=n[i],t[e]&&(t[e]=t[e].destroy())},getLabelConfig:function(){var e=this;return{x:e.category,y:e.y,key:e.name||e.category,series:e.series,point:e,percentage:e.percentage,total:e.total||e.stackTotal}},select:function(e,t){var n=this,i=n.series,r=i.chart;e=p(e,!n.selected),n.firePointEvent(e?"select":"unselect",{accumulate:t},function(){n.selected=n.options.selected=e,i.options.data[bn(n,i.data)]=n.options,n.setState(e&&rn),t||_n(r.getSelectedPoints(),function(e){e.selected&&e!==n&&(e.selected=e.options.selected=!1,i.options.data[bn(e,i.data)]=e.options,e.setState(tn),e.firePointEvent("unselect"))
})})},onMouseOver:function(e){var t=this,n=t.series,i=n.chart,r=i.tooltip,o=i.hoverPoint;o&&o!==t&&o.onMouseOut(),t.firePointEvent("mouseOver"),!r||r.shared&&!n.noSharedTooltip||r.refresh(t,e),t.setState(nn),i.hoverPoint=t},onMouseOut:function(){var e=this.series.chart,t=e.hoverPoints;t&&-1!==bn(this,t)||(this.firePointEvent("mouseOut"),this.setState(),e.hoverPoint=null)},tooltipFormatter:function(e){var t=this.series,n=t.tooltipOptions,i=p(n.valueDecimals,""),r=n.valuePrefix||"",o=n.valueSuffix||"";return _n(t.pointArrayMap||["y"],function(t){t="{point."+t,(r||o)&&(e=e.replace(t+"}",r+t+"}"+o)),e=e.replace(t+"}",t+":,."+i+"f}")}),w(e,{point:this,series:this.series})},update:function(e,t,n){var i,r=this,a=r.series,s=r.graphic,l=a.data,u=a.chart;t=p(t,!0),r.firePointEvent("update",{options:e},function(){r.applyOptions(e),o(e)&&(a.getAttribs(),s&&s.attr(r.pointAttr[a.state])),i=bn(r,l),a.xData[i]=r.x,a.yData[i]=a.toYData?a.toYData(r):r.y,a.zData[i]=r.z,a.options.data[i]=r.options,a.isDirty=!0,a.isDirtyData=!0,t&&u.redraw(n)})},remove:function(e,t){var n,i=this,r=i.series,o=r.chart,a=r.data;O(t,o),e=p(e,!0),i.firePointEvent("remove",null,function(){n=bn(i,a),a.splice(n,1),r.options.data.splice(n,1),r.xData.splice(n,1),r.yData.splice(n,1),r.zData.splice(n,1),i.destroy(),r.isDirty=!0,r.isDirtyData=!0,e&&o.redraw()})},firePointEvent:function(e,t,n){var i=this,r=this.series,o=r.options;(o.point.events[e]||i.options&&i.options.events&&i.options.events[e])&&this.importEvents(),"click"===e&&o.allowPointSelect&&(n=function(e){i.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),Sn(this,e,t,n)},importEvents:function(){if(!this.hasImportedEvents){var e,n=this,i=t(n.series.options.point,n.options),r=i.events;n.events=r;for(e in r)Tn(n,e,r[e]);this.hasImportedEvents=!0}},setState:function(e){var n,i,r=this,o=r.plotX,a=r.plotY,s=r.series,l=s.options.states,u=Dn[s.type].marker&&s.options.marker,c=u&&!u.enabled,d=u&&u.states[e],h=d&&d.enabled===!1,f=s.stateMarkerGraphic,p=r.marker||{},g=s.chart,m=r.pointAttr;e=e||tn,e===r.state||r.selected&&e!==rn||l[e]&&l[e].enabled===!1||e&&(h||c&&!d.enabled)||(r.graphic?(n=u&&r.graphic.symbolName&&m[e].r,r.graphic.attr(t(m[e],n?{x:o-n,y:a-n,width:2*n,height:2*n}:{}))):(e&&d&&(n=d.radius,i=p.symbol||s.symbol,f&&f.currentSymbol!==i&&(f=f.destroy()),f?f.attr({x:o-n,y:a-n}):(s.stateMarkerGraphic=f=g.renderer.symbol(i,o-n,a-n,2*n,2*n).attr(m[e]).add(s.markerGroup),f.currentSymbol=i)),f&&f[e&&g.isInsidePlot(o,a)?"show":"hide"]()),r.state=e)}};var Vn=function(){};Vn.prototype={isCartesian:!0,type:"line",pointClass:Hn,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},colorCounter:0,init:function(t,n){var i,o,a,s=this,l=t.series;s.chart=t,s.options=n=s.setOptions(n),s.bindAxes(),e(s,{name:n.name,state:tn,pointAttr:{},visible:n.visible!==!1,selected:n.selected===!0}),Lt&&(n.animation=!1),o=n.events;for(i in o)Tn(s,i,o[i]);(o&&o.click||n.point&&n.point.events&&n.point.events.click||n.allowPointSelect)&&(t.runTrackerClick=!0),s.getColor(),s.getSymbol(),s.setData(n.data,!1),s.isCartesian&&(t.hasCartesianSeries=!0),l.push(s),s._i=l.length-1,k(l,function(e,t){return p(e.options.index,e._i)-p(t.options.index,e._i)}),_n(l,function(e,t){e.index=t,e.name=e.name||"Series "+(t+1)}),a=n.linkedTo,s.linkedSeries=[],r(a)&&(a=":previous"===a?l[s.index-1]:t.get(a),a&&(a.linkedSeries.push(s),s.linkedParent=a))},bindAxes:function(){var e,t=this,n=t.options,i=t.chart;t.isCartesian&&_n(["xAxis","yAxis"],function(r){_n(i[r],function(i){e=i.options,(n[r]===e.index||n[r]!==G&&n[r]===e.id||n[r]===G&&0===e.index)&&(i.series.push(t),t[r]=i,i.isDirty=!0)}),t[r]||P(18,!0)})},autoIncrement:function(){var e=this,t=e.options,n=e.xIncrement;return n=p(n,t.pointStart,0),e.pointInterval=p(e.pointInterval,t.pointInterval,1),e.xIncrement=n+e.pointInterval,n},getSegments:function(){var e,t=this,n=-1,i=[],r=t.points,o=r.length;if(o)if(t.options.connectNulls){for(e=o;e--;)null===r[e].y&&r.splice(e,1);r.length&&(i=[r])}else _n(r,function(e,t){null===e.y?(t>n+1&&i.push(r.slice(n+1,t)),n=t):t===o-1&&i.push(r.slice(n+1,t+1))});t.segments=i},setOptions:function(e){var n,i=this.chart,r=i.options,o=r.plotOptions,a=o[this.type];return this.userOptions=e,n=t(a,o.series,e),this.tooltipOptions=t(r.tooltip,n.tooltip),null===a.marker&&delete n.marker,n},getColor:function(){var e,t,n=this.options,i=this.userOptions,r=this.chart.options.colors,o=this.chart.counters;e=n.color||Dn[this.type].color,e||n.colorByPoint||(d(i._colorIndex)?t=i._colorIndex:(i._colorIndex=o.color,t=o.color++),e=r[t]),this.color=e,o.wrapColor(r.length)},getSymbol:function(){var e,t=this,n=t.userOptions,i=t.options.marker,r=t.chart,o=r.options.symbols,a=r.counters;t.symbol=i.symbol,t.symbol||(d(n._symbolIndex)?e=n._symbolIndex:(n._symbolIndex=a.symbol,e=a.symbol++),t.symbol=o[e]),/^url/.test(t.symbol)&&(i.radius=0),a.wrapSymbol(o.length)},drawLegendSymbol:function(e){var t,n,i,r=this.options,o=r.marker,a=e.options,s=a.symbolWidth,l=this.chart.renderer,u=this.legendGroup,c=e.baseline;r.lineWidth&&(i={"stroke-width":r.lineWidth},r.dashStyle&&(i.dashstyle=r.dashStyle),this.legendLine=l.path([Qt,0,c-4,Zt,s,c-4]).attr(i).add(u)),o&&o.enabled&&(t=o.radius,this.legendSymbol=n=l.symbol(this.symbol,s/2-t,c-4-t,2*t,2*t).add(u))},addPoint:function(e,t,n,i){var r,o=this,a=o.options,s=o.data,l=o.graph,u=o.area,c=o.chart,d=o.xData,h=o.yData,f=o.zData,g=o.names,m=l&&l.shift||0,v=a.data;O(i,c),l&&n&&(l.shift=m+1),u&&(n&&(u.shift=m+1),u.isArea=!0),t=p(t,!0),r={series:o},o.pointClass.prototype.applyOptions.apply(r,[e]),d.push(r.x),h.push(o.toYData?o.toYData(r):r.y),f.push(r.z),g&&(g[r.x]=r.name),v.push(e),"point"===a.legendType&&o.generatePoints(),n&&(s[0]&&s[0].remove?s[0].remove(!1):(s.shift(),d.shift(),h.shift(),f.shift(),v.shift())),o.getAttribs(),o.isDirty=!0,o.isDirtyData=!0,t&&c.redraw()},setData:function(e,t){var n,i=this,o=i.points,l=i.options,u=i.chart,c=null,d=i.xAxis,h=d&&d.categories&&!d.categories.length?[]:null;i.xIncrement=null,i.pointRange=d&&d.categories?1:l.pointRange,i.colorCounter=0;var f,g=[],m=[],v=[],y=e?e.length:[],b=l.turboThreshold||1e3,_=i.pointArrayMap,x=_&&_.length,w=!!i.toYData;if(y>b){for(n=0;null===c&&y>n;)c=e[n],n++;if(s(c)){var C=p(l.pointStart,0),T=p(l.pointInterval,1);for(n=0;y>n;n++)g[n]=C,m[n]=e[n],C+=T;i.xIncrement=C}else if(a(c))if(x)for(n=0;y>n;n++)f=e[n],g[n]=f[0],m[n]=f.slice(1,x+1);else for(n=0;y>n;n++)f=e[n],g[n]=f[0],m[n]=f[1]}else for(n=0;y>n;n++)e[n]!==G&&(f={series:i},i.pointClass.prototype.applyOptions.apply(f,[e[n]]),g[n]=f.x,m[n]=w?i.toYData(f):f.y,v[n]=f.z,h&&f.name&&(h[n]=f.name));for(i.requireSorting&&g.length>1&&g[1]<g[0]&&P(15),r(m[0])&&P(14,!0),i.data=[],i.options.data=e,i.xData=g,i.yData=m,i.zData=v,i.names=h,n=o&&o.length||0;n--;)o[n]&&o[n].destroy&&o[n].destroy();d&&(d.minRange=d.userMinRange),i.isDirty=i.isDirtyData=u.isDirtyBox=!0,p(t,!0)&&u.redraw(!1)},remove:function(e,t){var n=this,i=n.chart;e=p(e,!0),n.isRemoving||(n.isRemoving=!0,Sn(n,"remove",null,function(){n.destroy(),i.isDirtyLegend=i.isDirtyBox=!0,e&&i.redraw(t)})),n.isRemoving=!1},processData:function(e){var t,n,i,r,o=this,a=o.xData,s=o.yData,l=a.length,u=0,c=l,d=o.xAxis,h=o.options,f=h.cropThreshold,p=o.isCartesian;if(p&&!o.isDirty&&!d.isDirty&&!o.yAxis.isDirty&&!e)return!1;if(p&&o.sorted&&(!f||l>f||o.forceCrop)){var g=d.getExtremes(),m=g.min,v=g.max;if(a[l-1]<m||a[0]>v)a=[],s=[];else if(a[0]<m||a[l-1]>v){for(r=0;l>r;r++)if(a[r]>=m){u=bt(0,r-1);break}for(;l>r;r++)if(a[r]>v){c=r+1;break}a=a.slice(u,c),s=s.slice(u,c),t=!0}}for(r=a.length-1;r>0;r--)n=a[r]-a[r-1],n>0&&(i===G||i>n)&&(i=n);o.cropped=t,o.cropStart=u,o.processedXData=a,o.processedYData=s,null===h.pointRange&&(o.pointRange=i||1),o.closestPointRange=i},generatePoints:function(){var e,t,n,i,r=this,o=r.options,a=o.data,s=r.data,l=r.processedXData,u=r.processedYData,c=r.pointClass,d=l.length,h=r.cropStart||0,p=r.hasGroupedData,g=[];if(!s&&!p){var m=[];m.length=a.length,s=r.data=m}for(i=0;d>i;i++)t=h+i,p?g[i]=(new c).init(r,[l[i]].concat(f(u[i]))):(s[t]?n=s[t]:a[t]!==G&&(s[t]=n=(new c).init(r,a[t],l[i])),g[i]=n);if(s&&(d!==(e=s.length)||p))for(i=0;e>i;i++)i!==h||p||(i+=d),s[i]&&(s[i].destroyElements(),s[i].plotX=G);r.data=s,r.points=g},translate:function(){this.processedXData||this.processData(),this.generatePoints();var e,t,n,i=this,r=i.options,o=r.stacking,a=i.xAxis,s=a.categories,l=i.yAxis,u=i.points,c=u.length,h=!!i.modifyValue,f="between"===r.pointPlacement,g=r.threshold;for(t=l.series.sort(function(e,t){return e.index-t.index}),n=t.length;n--;)if(t[n].visible){t[n]===i&&(e=!0);break}for(n=0;c>n;n++){var m,v,y=u[n],b=y.x,_=y.y,x=y.low,w=l.stacks[(g>_?"-":"")+i.stackKey];l.isLog&&0>=_&&(y.y=_=null),y.plotX=a.translate(b,0,0,0,1,f),o&&i.visible&&w&&w[b]&&(m=w[b],v=m.total,m.cum=x=m.cum-_,_=x+_,e&&(x=p(g,l.min)),l.isLog&&0>=x&&(x=null),"percent"===o&&(x=v?100*x/v:0,_=v?100*_/v:0),y.percentage=v?100*y.y/v:0,y.total=y.stackTotal=v,y.stackY=_),y.yBottom=d(x)?l.translate(x,0,1,0,1):null,h&&(_=i.modifyValue(_,y)),y.plotY="number"==typeof _&&1/0!==_?mt(10*l.translate(_,0,1,0,1))/10:G,y.clientX=f?a.translate(b,0,0,0,1):y.plotX,y.negative=y.y<(g||0),y.category=s&&s[y.x]!==G?s[y.x]:y.x}i.getSegments()},setTooltipPoints:function(e){var t,n,i,r,o,a=this,s=[],l=a.xAxis,u=l?l.tooltipLen||l.len:a.chart.plotSizeX,c=[];if(a.options.enableMouseTracking!==!1){for(e&&(a.tooltipPoints=null),_n(a.segments||a.points,function(e){s=s.concat(e)}),l&&l.reversed&&(s=s.reverse()),t=s.length,o=0;t>o;o++)for(r=s[o],n=s[o-1]?i+1:0,i=s[o+1]?bt(0,vt((r.clientX+(s[o+1]?s[o+1].clientX:u))/2)):u;n>=0&&i>=n;)c[n++]=r;a.tooltipPoints=c}},tooltipHeaderFormatter:function(e){var t,n=this,i=n.tooltipOptions,r=i.xDateFormat,o=i.dateTimeLabelFormats,a=n.xAxis,l=a&&"datetime"===a.options.type,u=i.headerFormat,c=a&&a.closestPointRange;if(l&&!r)if(c){for(t in et)if(et[t]>=c){r=o[t];break}}else r=o.day;return l&&r&&s(e.key)&&(u=u.replace("{point.key}","{point.key:"+r+"}")),w(u,{point:e,series:n})},onMouseOver:function(){var e=this,t=e.chart,n=t.hoverSeries;n&&n!==e&&n.onMouseOut(),e.options.events.mouseOver&&Sn(e,"mouseOver"),e.setState(nn),t.hoverSeries=e},onMouseOut:function(){var e=this,t=e.options,n=e.chart,i=n.tooltip,r=n.hoverPoint;r&&r.onMouseOut(),e&&t.events.mouseOut&&Sn(e,"mouseOut"),!i||t.stickyTracking||i.shared&&!e.noSharedTooltip||i.hide(),e.setState(),n.hoverSeries=null},animate:function(t){var n,i,r,a=this,s=a.chart,l=s.renderer,u=a.options.animation,c=s.clipBox,d=s.inverted;u&&!o(u)&&(u=Dn[a.type].animation),r="_sharedClip"+u.duration+u.easing,t?(n=s[r],i=s[r+"m"],n||(s[r]=n=l.clipRect(e(c,{width:0})),s[r+"m"]=i=l.clipRect(-99,d?-s.plotLeft:-s.plotTop,99,d?s.chartWidth:s.chartHeight)),a.group.clip(n),a.markerGroup.clip(i),a.sharedClipKey=r):(n=s[r],n&&(n.animate({width:s.plotSizeX},u),s[r+"m"].animate({width:s.plotSizeX+99},u)),a.animate=null,a.animationTimeout=setTimeout(function(){a.afterAnimate()},u.duration))},afterAnimate:function(){var e=this.chart,t=this.sharedClipKey,n=this.group;n&&this.options.clip!==!1&&(n.clip(e.clipRect),this.markerGroup.clip()),setTimeout(function(){t&&e[t]&&(e[t]=e[t].destroy(),e[t+"m"]=e[t+"m"].destroy())},100)},drawPoints:function(){var t,n,i,r,o,a,s,l,u,c,d,h,f=this,g=f.points,m=f.chart,v=f.options,y=v.marker,b=f.markerGroup;if(y.enabled||f._hasPointMarkers)for(r=g.length;r--;)o=g[r],n=o.plotX,i=o.plotY,u=o.graphic,c=o.marker||{},d=y.enabled&&c.enabled===G||c.enabled,h=m.isInsidePlot(mt(n),i,m.inverted),d&&i!==G&&!isNaN(i)&&null!==o.y?(t=o.pointAttr[o.selected?rn:tn],a=t.r,s=p(c.symbol,f.symbol),l=0===s.indexOf("url"),u?u.attr({visibility:h?Ot?"inherit":Yt:Gt}).animate(e({x:n-a,y:i-a},u.symbolName?{width:2*a,height:2*a}:{})):h&&(a>0||l)&&(o.graphic=u=m.renderer.symbol(s,n-a,i-a,2*a,2*a).attr(t).add(b))):u&&(o.graphic=u.destroy())},convertAttribs:function(e,t,n,i){var r,o,a=this.pointAttrToOptions,s={};e=e||{},t=t||{},n=n||{},i=i||{};for(r in a)o=a[r],s[r]=p(e[o],t[r],n[r],i[r]);return s},getAttribs:function(){var t,n,i,r,o,a,s=this,l=s.options,u=Dn[s.type].marker?l.marker:l,c=u.states,h=c[nn],f=s.color,p={stroke:f,fill:f},g=s.points||[],m=[],v=s.pointAttrToOptions,y=l.negativeColor;for(l.marker?(h.radius=h.radius||u.radius+2,h.lineWidth=h.lineWidth||u.lineWidth+1):h.color=h.color||In(h.color||f).brighten(h.brightness).get(),m[tn]=s.convertAttribs(u,p),_n([nn,rn],function(e){m[e]=s.convertAttribs(c[e],m[tn])}),s.pointAttr=m,n=g.length;n--;){if(i=g[n],u=i.options&&i.options.marker||i.options,u&&u.enabled===!1&&(u.radius=0),i.negative&&y&&(i.color=i.fillColor=y),o=l.colorByPoint||i.color,i.options)for(a in v)d(u[v[a]])&&(o=!0);o?(u=u||{},r=[],c=u.states||{},t=c[nn]=c[nn]||{},l.marker||(t.color=In(t.color||i.color).brighten(t.brightness||h.brightness).get()),r[tn]=s.convertAttribs(e({color:i.color},u),m[tn]),r[nn]=s.convertAttribs(c[nn],m[nn],r[tn]),r[rn]=s.convertAttribs(c[rn],m[rn],r[tn]),i.negative&&l.marker&&y&&(r[tn].fill=r[nn].fill=r[rn].fill=s.convertAttribs({fillColor:y}).fill)):r=m,i.pointAttr=r}},update:function(n,i){var r=this.chart,o=this.userOptions,a=this.type;n=t(o,{animation:!1,index:this.index,pointStart:this.xData[0]},n),this.remove(!1),e(this,pn[n.type||a].prototype),this.init(r,n),p(i,!0)&&r.redraw(!1)},destroy:function(){var e,t,n,i,r,o=this,a=o.chart,s=/AppleWebKit\/533/.test(St),l=o.data||[];for(Sn(o,"destroy"),En(o),_n(["xAxis","yAxis"],function(e){r=o[e],r&&(c(r.series,o),r.isDirty=r.forceRedraw=!0)}),o.legendItem&&o.chart.legend.destroyItem(o),t=l.length;t--;)n=l[t],n&&n.destroy&&n.destroy();o.points=null,clearTimeout(o.animationTimeout),_n(["area","graph","dataLabelsGroup","group","markerGroup","tracker","graphNeg","areaNeg","posClip","negClip"],function(t){o[t]&&(e=s&&"group"===t?"hide":"destroy",o[t][e]())}),a.hoverSeries===o&&(a.hoverSeries=null),c(a.series,o);for(i in o)delete o[i]},drawDataLabels:function(){var e,n,i,r,o=this,a=o.options,s=a.dataLabels,l=o.points;(s.enabled||o._hasPointLabels)&&(o.dlProcessOptions&&o.dlProcessOptions(s),r=o.plotGroup("dataLabelsGroup","data-labels",o.visible?Yt:Gt,s.zIndex||6),n=s,_n(l,function(a){var l,u,c,h,f,g=a.dataLabel,m=a.connector,v=!0;if(e=a.options&&a.options.dataLabels,l=n.enabled||e&&e.enabled,g&&!l)a.dataLabel=g.destroy();else if(l){if(f=s.rotation,s=t(n,e),u=a.getLabelConfig(),i=s.format?w(s.format,u):s.formatter.call(u,s),s.style.color=p(s.color,s.style.color,o.color,"black"),g)d(i)?(g.attr({text:i}),v=!1):(a.dataLabel=g=g.destroy(),m&&(a.connector=m.destroy()));else if(d(i)){c={fill:s.backgroundColor,stroke:s.borderColor,"stroke-width":s.borderWidth,r:s.borderRadius||0,rotation:f,padding:s.padding,zIndex:1};for(h in c)c[h]===G&&delete c[h];g=a.dataLabel=o.chart.renderer[f?"text":"label"](i,0,-999,null,null,null,s.useHTML).attr(c).css(s.style).add(r).shadow(s.shadow)}g&&o.alignDataLabel(a,g,s,null,v)}}))},alignDataLabel:function(t,n,i,r,o){var a,s=this.chart,l=s.inverted,u=p(t.plotX,-999),c=p(t.plotY,-999),d=n.getBBox();r=e({x:l?s.plotWidth-c:u,y:mt(l?s.plotHeight-u:c),width:0,height:0},r),e(i,{width:d.width,height:d.height}),i.rotation?(a={align:i.align,x:r.x+i.x+r.width/2,y:r.y+i.y+r.height/2},n[o?"attr":"animate"](a)):(n.align(i,null,r),a=n.alignAttr),n.attr({visibility:i.crop===!1||s.isInsidePlot(u,c,l)?s.renderer.isSVG?"inherit":Yt:Gt})},getSegmentPath:function(e){var t=this,n=[],i=t.options.step;return _n(e,function(r,o){var a,s=r.plotX,l=r.plotY;t.getPointSpline?n.push.apply(n,t.getPointSpline(e,r,o)):(n.push(o?Zt:Qt),i&&o&&(a=e[o-1],"right"===i?n.push(a.plotX,l):"center"===i?n.push((a.plotX+s)/2,a.plotY,(a.plotX+s)/2,l):n.push(s,a.plotY)),n.push(r.plotX,r.plotY))}),n},getGraphPath:function(){var e,t=this,n=[],i=[];return _n(t.segments,function(r){e=t.getSegmentPath(r),r.length>1?n=n.concat(e):i.push(r[0])}),t.singlePoints=i,t.graphPath=n,n},drawGraph:function(){var e=this,t=this.options,n=[["graph",t.lineColor||this.color]],i=t.lineWidth,r=t.dashStyle,o=this.getGraphPath(),a=t.negativeColor;a&&n.push(["graphNeg",a]),_n(n,function(n,a){var s,l=n[0],u=e[l];u?(Mn(u),u.animate({d:o})):i&&o.length&&(s={stroke:n[1],"stroke-width":i,zIndex:1},r&&(s.dashstyle=r),e[l]=e.chart.renderer.path(o).attr(s).add(e.group).shadow(!a&&t.shadow))})},clipNeg:function(){var e,t,n,i,r,o=this.options,a=this.chart,s=a.renderer,l=o.negativeColor,u=this.graph,c=this.area,d=this.posClip,h=this.negClip,f=a.chartWidth,p=a.chartHeight,g=bt(f,p);l&&(u||c)&&(e=yt(this.yAxis.len-this.yAxis.translate(o.threshold||0)),i={x:0,y:0,width:g,height:e},r={x:0,y:e,width:g,height:g-e},a.inverted&&s.isVML&&(i={x:a.plotWidth-e-a.plotLeft,y:0,width:f,height:p},r={x:e+a.plotLeft-f,y:0,width:a.plotLeft+e,height:f}),this.yAxis.reversed?(t=r,n=i):(t=i,n=r),d?(d.animate(t),h.animate(n)):(this.posClip=d=s.clipRect(t),this.negClip=h=s.clipRect(n),u&&(u.clip(d),this.graphNeg.clip(h)),c&&(c.clip(d),this.areaNeg.clip(h))))},invertGroups:function(){function e(){var e={width:t.yAxis.len,height:t.xAxis.len};_n(["group","markerGroup"],function(n){t[n]&&t[n].attr(e).invert()})}var t=this,n=t.chart;t.xAxis&&(Tn(n,"resize",e),Tn(t,"destroy",function(){En(n,"resize",e)}),e(),t.invertGroups=e)},plotGroup:function(e,t,n,i,r){var o=this[e],a=!o,s=this.chart,l=this.xAxis,u=this.yAxis;return a&&(this[e]=o=s.renderer.g(t).attr({visibility:n,zIndex:i||.1}).add(r)),o[a?"attr":"animate"]({translateX:l?l.left:s.plotLeft,translateY:u?u.top:s.plotTop,scaleX:1,scaleY:1}),o},render:function(){var e,t=this,n=t.chart,i=t.options,r=i.animation,o=r&&!!t.animate&&n.renderer.isSVG,a=t.visible?Yt:Gt,s=i.zIndex,l=t.hasRendered,u=n.seriesGroup;e=t.plotGroup("group","series",a,s,u),t.markerGroup=t.plotGroup("markerGroup","markers",a,s,u),o&&t.animate(!0),t.getAttribs(),e.inverted=t.isCartesian?n.inverted:!1,t.drawGraph&&(t.drawGraph(),t.clipNeg()),t.drawDataLabels(),t.drawPoints(),t.options.enableMouseTracking!==!1&&t.drawTracker(),n.inverted&&t.invertGroups(),i.clip===!1||t.sharedClipKey||l||e.clip(n.clipRect),o?t.animate():l||t.afterAnimate(),t.isDirty=t.isDirtyData=!1,t.hasRendered=!0},redraw:function(){var e=this,t=e.chart,n=e.isDirtyData,i=e.group,r=e.xAxis,o=e.yAxis;i&&(t.inverted&&i.attr({width:t.plotWidth,height:t.plotHeight}),i.animate({translateX:p(r&&r.left,t.plotLeft),translateY:p(o&&o.top,t.plotTop)})),e.translate(),e.setTooltipPoints(!0),e.render(),n&&Sn(e,"updatedData")},setState:function(e){var t,n=this,i=n.options,r=n.graph,o=n.graphNeg,a=i.states,s=i.lineWidth;if(e=e||tn,n.state!==e){if(n.state=e,a[e]&&a[e].enabled===!1)return;e&&(s=a[e].lineWidth||s+1),r&&!r.dashstyle&&(t={"stroke-width":s},r.attr(t),o&&o.attr(t))}},setVisible:function(e,t){var n,i=this,r=i.chart,o=i.legendItem,a=r.options.chart.ignoreHiddenSeries,s=i.visible;i.visible=e=i.userOptions.visible=e===G?!s:e,n=e?"show":"hide",_n(["group","dataLabelsGroup","markerGroup","tracker"],function(e){i[e]&&i[e][n]()}),r.hoverSeries===i&&i.onMouseOut(),o&&r.legend.colorizeItem(i,e),i.isDirty=!0,i.options.stacking&&_n(r.series,function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)}),_n(i.linkedSeries,function(t){t.setVisible(e,!1)}),a&&(r.isDirtyBox=!0),t!==!1&&r.redraw(),Sn(i,n)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(e){var t=this;t.selected=e=e===G?!t.selected:e,t.checkbox&&(t.checkbox.checked=e),Sn(t,e?"select":"unselect")},drawTracker:function(){var e,t,n=this,i=n.options,r=i.trackByArea,o=[].concat(r?n.areaPath:n.graphPath),a=o.length,s=n.chart,l=s.pointer,u=s.renderer,c=s.options.tooltip.snap,d=n.tracker,h=i.cursor,f=h&&{cursor:h},p=n.singlePoints,g=function(){s.hoverSeries!==n&&n.onMouseOver()};if(a&&!r)for(t=a+1;t--;)o[t]===Qt&&o.splice(t+1,0,o[t+1]-c,o[t+2],Zt),(t&&o[t]===Qt||t===a)&&o.splice(t,0,Zt,o[t-2]+c,o[t-1]);for(t=0;t<p.length;t++)e=p[t],o.push(Qt,e.plotX-c,e.plotY,Zt,e.plotX+c,e.plotY);d?d.attr({d:o}):(n.tracker=d=u.path(o).attr({"class":Xt+"tracker","stroke-linejoin":"round",visibility:n.visible?Yt:Gt,stroke:en,fill:r?en:Jt,"stroke-width":i.lineWidth+(r?0:2*c),zIndex:2}).addClass(Xt+"tracker").on("mouseover",g).on("mouseout",function(e){l.onTrackerMouseOut(e)}).css(f).add(n.markerGroup),Bt&&d.on("touchstart",g))}};var zn=v(Vn);pn.line=zn,Dn.area=t(Pn,{threshold:0});var $n=v(Vn,{type:"area",getSegments:function(){var e,t,n,i,r=[],o=[],a=[],s=this.xAxis,l=this.yAxis,u=l.stacks[this.stackKey],c={},d=this.points;if(this.options.stacking&&!this.cropped){for(n=0;n<d.length;n++)c[d[n].x]=d[n];for(i in u)a.push(+i);a.sort(function(e,t){return e-t}),_n(a,function(n){c[n]?o.push(c[n]):(e=s.translate(n),t=l.toPixels(u[n].cum,!0),o.push({y:null,plotX:e,clientX:e,plotY:t,yBottom:t,onMouseOver:Ht}))}),o.length&&r.push(o)}else Vn.prototype.getSegments.call(this),r=this.segments;this.segments=r},getSegmentPath:function(e){var t,n=Vn.prototype.getSegmentPath.call(this,e),i=[].concat(n),r=this.options,o=n.length;if(3===o&&i.push(Zt,n[1],n[2]),r.stacking&&!this.closedStacks)for(t=e.length-1;t>=0;t--)t<e.length-1&&r.step&&i.push(e[t+1].plotX,e[t].yBottom),i.push(e[t].plotX,e[t].yBottom);else this.closeSegment(i,e);return this.areaPath=this.areaPath.concat(i),n},closeSegment:function(e,t){var n=this.yAxis.getThreshold(this.options.threshold);e.push(Zt,t[t.length-1].plotX,n,Zt,t[0].plotX,n)},drawGraph:function(){this.areaPath=[],Vn.prototype.drawGraph.apply(this);var e=this,t=this.areaPath,n=this.options,i=n.negativeColor,r=[["area",this.color,n.fillColor]];i&&r.push(["areaNeg",n.negativeColor,n.negativeFillColor]),_n(r,function(i){var r=i[0],o=e[r];o?o.animate({d:t}):e[r]=e.chart.renderer.path(t).attr({fill:p(i[2],In(i[1]).setOpacity(n.fillOpacity||.75).get()),zIndex:0}).add(e.group)})},drawLegendSymbol:function(e,t){t.legendSymbol=this.chart.renderer.rect(0,e.baseline-11,e.options.symbolWidth,12,2).attr({zIndex:3}).add(t.legendGroup)}});pn.area=$n,Dn.spline=t(Pn);var Un=v(Vn,{type:"spline",getPointSpline:function(e,t,n){var i,r,o,a,s,l=1.5,u=l+1,c=t.plotX,d=t.plotY,h=e[n-1],f=e[n+1];if(h&&f){var p,g=h.plotX,m=h.plotY,v=f.plotX,y=f.plotY;i=(l*c+g)/u,r=(l*d+m)/u,o=(l*c+v)/u,a=(l*d+y)/u,p=(a-r)*(o-c)/(o-i)+d-a,r+=p,a+=p,r>m&&r>d?(r=bt(m,d),a=2*d-r):m>r&&d>r&&(r=_t(m,d),a=2*d-r),a>y&&a>d?(a=bt(y,d),r=2*d-a):y>a&&d>a&&(a=_t(y,d),r=2*d-a),t.rightContX=o,t.rightContY=a}return n?(s=["C",h.rightContX||h.plotX,h.rightContY||h.plotY,i||c,r||d,c,d],h.rightContX=h.rightContY=null):s=[Qt,c,d],s}});pn.spline=Un,Dn.areaspline=t(Dn.area);var Wn=$n.prototype,qn=v(Un,{type:"areaspline",closedStacks:!0,getSegmentPath:Wn.getSegmentPath,closeSegment:Wn.closeSegment,drawGraph:Wn.drawGraph});pn.areaspline=qn,Dn.column=t(Pn,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,threshold:0});var Gn=v(Vn,{type:"column",tooltipOutsidePlot:!0,requireSorting:!1,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},trackerGroups:["group","dataLabelsGroup"],init:function(){Vn.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&_n(t.series,function(t){t.type===e.type&&(t.isDirty=!0)})},getColumnMetrics:function(){var e,t,n=this,i=n.chart,r=n.options,o=this.xAxis,a=o.reversed,s={},l=0;r.grouping===!1?l=1:_n(i.series,function(i){var r=i.options;i.type===n.type&&i.visible&&n.options.group===r.group&&(r.stacking?(e=i.stackKey,s[e]===G&&(s[e]=l++),t=s[e]):r.grouping!==!1&&(t=l++),i.columnIndex=t)});var u=_t(xt(o.transA)*(o.ordinalSlope||r.pointRange||o.closestPointRange||1),o.len),c=u*r.groupPadding,h=u-2*c,f=h/l,g=r.pointWidth,m=d(g)?(f-g)/2:f*r.pointPadding,v=p(g,f-2*m),y=(a?l-(n.columnIndex||0):n.columnIndex)||0,b=m+(c+y*f-u/2)*(a?-1:1);return n.columnMetrics={width:v,offset:b}},translate:function(){var e=this,t=e.chart,n=e.options,i=n.stacking,r=n.borderWidth,o=e.yAxis,a=n.threshold,s=e.translatedThreshold=o.getThreshold(a),l=p(n.minPointLength,5),u=e.getColumnMetrics(),c=u.width,d=yt(bt(c,1+2*r)),h=u.offset;Vn.prototype.translate.apply(e),_n(e.points,function(n){var a,u=_t(bt(-999,n.plotY),o.len+999),f=p(n.yBottom,s),g=n.plotX+h,m=yt(_t(u,f)),v=yt(bt(u,f)-m),y=o.stacks[(n.y<0?"-":"")+e.stackKey];i&&e.visible&&y&&y[n.x]&&y[n.x].setOffset(h,d),xt(v)<l&&l&&(v=l,m=xt(m-s)>l?f-l:s-(o.translate(n.y,0,1,0,1)<=s?l:0)),n.barX=g,n.pointWidth=c,n.shapeType="rect",n.shapeArgs=a=t.renderer.Element.prototype.crisp.call(0,r,g,m,d,v),r%2&&(a.y-=1,a.height+=1)})},getSymbol:Ht,drawLegendSymbol:$n.prototype.drawLegendSymbol,drawGraph:Ht,drawPoints:function(){var e,n=this,i=n.options,r=n.chart.renderer;_n(n.points,function(o){var a=o.plotY,s=o.graphic;a===G||isNaN(a)||null===o.y?s&&(o.graphic=s.destroy()):(e=o.shapeArgs,s?(Mn(s),s.animate(t(e))):o.graphic=s=r[o.shapeType](e).attr(o.pointAttr[o.selected?rn:tn]).add(n.group).shadow(i.shadow,null,i.stacking&&!i.borderRadius))})},drawTracker:function(){var e=this,t=e.chart.pointer,n=e.options.cursor,i=n&&{cursor:n},r=function(t){var n,i=t.target;for(e.onMouseOver();i&&!n;)n=i.point,i=i.parentNode;n!==G&&n.onMouseOver(t)};_n(e.points,function(e){e.graphic&&(e.graphic.element.point=e),e.dataLabel&&(e.dataLabel.element.point=e)}),e._hasTracking?e._hasTracking=!0:_n(e.trackerGroups,function(n){e[n]&&(e[n].addClass(Xt+"tracker").on("mouseover",r).on("mouseout",function(e){t.onTrackerMouseOut(e)}).css(i),Bt&&e[n].on("touchstart",r))})},alignDataLabel:function(e,n,i,r,o){var a=this.chart,s=a.inverted,l=e.dlBox||e.shapeArgs,u=e.below||e.plotY>p(this.translatedThreshold,a.plotSizeY),c=p(i.inside,!!this.options.stacking);l&&(r=t(l),s&&(r={x:a.plotWidth-r.y-r.height,y:a.plotHeight-r.x-r.width,width:r.height,height:r.width}),c||(s?(r.x+=u?0:r.width,r.width=0):(r.y+=u?r.height:0,r.height=0))),i.align=p(i.align,!s||c?"center":u?"right":"left"),i.verticalAlign=p(i.verticalAlign,s||c?"middle":u?"top":"bottom"),Vn.prototype.alignDataLabel.call(this,e,n,i,r,o)},animate:function(e){var t,n=this,i=this.yAxis,r=n.options,o=this.chart.inverted,a={};Ot&&(e?(a.scaleY=.001,t=_t(i.pos+i.len,bt(i.pos,i.toPixels(r.threshold))),o?a.translateX=t-i.len:a.translateY=t,n.group.attr(a)):(a.scaleY=1,a[o?"translateX":"translateY"]=i.pos,n.group.animate(a,n.options.animation),n.animate=null))},remove:function(){var e=this,t=e.chart;t.hasRendered&&_n(t.series,function(t){t.type===e.type&&(t.isDirty=!0)}),Vn.prototype.remove.apply(e,arguments)}});pn.column=Gn,Dn.bar=t(Dn.column);var Xn=v(Gn,{type:"bar",inverted:!0});pn.bar=Xn,Dn.scatter=t(Pn,{lineWidth:0,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>",followPointer:!0},stickyTracking:!1});var Yn=v(Vn,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup"],drawTracker:Gn.prototype.drawTracker,setTooltipPoints:Ht});pn.scatter=Yn,Dn.pie=t(Pn,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var Kn=v(Hn,{init:function(){Hn.prototype.init.apply(this,arguments);var t,n=this;return n.y<0&&(n.y=null),e(n,{visible:n.visible!==!1,name:p(n.name,"Slice")}),t=function(){n.slice()},Tn(n,"select",t),Tn(n,"unselect",t),n},setVisible:function(e){var t,n=this,i=n.series,r=i.chart;n.visible=n.options.visible=e=e===G?!n.visible:e,i.options.data[bn(n,i.data)]=n.options,t=e?"show":"hide",_n(["graphic","dataLabel","connector","shadowGroup"],function(e){n[e]&&n[e][t]()}),n.legendItem&&r.legend.colorizeItem(n,e),!i.isDirty&&i.options.ignoreHiddenPoint&&(i.isDirty=!0,r.redraw())},slice:function(e,t,n){var i,r=this,o=r.series,a=o.chart;O(n,a),t=p(t,!0),r.sliced=r.options.sliced=e=d(e)?e:!r.sliced,o.options.data[bn(r,o.data)]=r.options,i=e?r.slicedTranslation:{translateX:0,translateY:0},r.graphic.animate(i),r.shadowGroup&&r.shadowGroup.animate(i)}}),Jn={type:"pie",isCartesian:!1,pointClass:Kn,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:Ht,animate:function(e){var t=this,n=t.points,i=t.startAngleRad;e||(_n(n,function(e){var n=e.graphic,r=e.shapeArgs;n&&(n.attr({r:t.center[3]/2,start:i,end:i}),n.animate({r:r.r,start:r.start,end:r.end},t.options.animation))}),t.animate=null)},setData:function(e,t){Vn.prototype.setData.call(this,e,!1),this.processData(),this.generatePoints(),p(t,!0)&&this.chart.redraw()},getCenter:function(){var e,t,n=this.options,r=this.chart,o=2*(n.slicedOffset||0),a=r.plotWidth-2*o,s=r.plotHeight-2*o,l=n.center,u=[p(l[0],"50%"),p(l[1],"50%"),n.size||"100%",n.innerSize||0],c=_t(a,s);return Cn(u,function(n,r){return t=/%$/.test(n),e=2>r||2===r&&t,(t?[a,s,c,c][r]*i(n)/100:n)+(e?o:0)})},translate:function(e){this.generatePoints();var t,n,i,r,o,a,s,l,u=0,c=this,d=0,h=1e3,f=c.options,p=f.slicedOffset,g=p+f.borderWidth,m=c.startAngleRad=Tt/180*((f.startAngle||0)%360-90),v=c.points,y=2*Tt,b=f.dataLabels.distance,_=f.ignoreHiddenPoint,x=v.length;for(e||(c.center=e=c.getCenter()),c.getX=function(t,n){return i=gt.asin((t-e[1])/(e[2]/2+b)),e[0]+(n?-1:1)*wt(i)*(e[2]/2+b)},s=0;x>s;s++)l=v[s],u+=_&&!l.visible?0:l.y;for(s=0;x>s;s++)l=v[s],r=u?l.y/u:0,t=mt((m+d*y)*h)/h,(!_||l.visible)&&(d+=r),n=mt((m+d*y)*h)/h,l.shapeType="arc",l.shapeArgs={x:e[0],y:e[1],r:e[2]/2,innerR:e[3]/2,start:t,end:n},i=(n+t)/2,i>.75*y&&(i-=2*Tt),l.slicedTranslation={translateX:mt(wt(i)*p),translateY:mt(Ct(i)*p)},o=wt(i)*e[2]/2,a=Ct(i)*e[2]/2,l.tooltipPos=[e[0]+.7*o,e[1]+.7*a],l.half=y/4>i?0:1,l.angle=i,g=_t(g,b/2),l.labelPos=[e[0]+o+wt(i)*b,e[1]+a+Ct(i)*b,e[0]+o+wt(i)*g,e[1]+a+Ct(i)*g,e[0]+o,e[1]+a,0>b?"center":l.half?"right":"left",i],l.percentage=100*r,l.total=u;this.setTooltipPoints()},drawGraph:null,drawPoints:function(){var t,n,i,r,o=this,a=o.chart,s=a.renderer,l=o.options.shadow;l&&!o.shadowGroup&&(o.shadowGroup=s.g("shadow").add(o.group)),_n(o.points,function(a){n=a.graphic,r=a.shapeArgs,i=a.shadowGroup,l&&!i&&(i=a.shadowGroup=s.g("shadow").add(o.shadowGroup)),t=a.sliced?a.slicedTranslation:{translateX:0,translateY:0},i&&i.attr(t),n?n.animate(e(r,t)):a.graphic=n=s.arc(r).setRadialReference(o.center).attr(a.pointAttr[a.selected?rn:tn]).attr({"stroke-linejoin":"round"}).attr(t).add(o.group).shadow(l,i),a.visible===!1&&a.setVisible(!1)})},drawDataLabels:function(){var e,t,n,i,r,o,a,s,l,u,c,d,h,f=this,g=f.data,m=f.chart,v=f.options.dataLabels,y=p(v.connectorPadding,10),b=p(v.connectorWidth,1),_=m.plotWidth,x=m.plotHeight,w=p(v.softConnector,!0),C=v.distance,T=f.center,E=T[2]/2,S=T[1],k=C>0,A=[[],[]],N=[0,0,0,0],D=function(e,t){return t.y-e.y},P=function(e,t){e.sort(function(e,n){return void 0!==e.angle&&(n.angle-e.angle)*t})};if(v.enabled||f._hasPointLabels){for(Vn.prototype.drawDataLabels.apply(f),_n(g,function(e){e.dataLabel&&A[e.half].push(e)}),d=0;!a&&g[d];)a=g[d]&&g[d].dataLabel&&(g[d].dataLabel.getBBox().height||21),d++;for(d=2;d--;){var I,O,R,L=[],B=[],F=A[d],j=F.length;if(P(F,d-.5),C>0){for(O=S-E-C;S+E+C>=O;O+=a)L.push(O);if(I=L.length,j>I){for(c=[].concat(F),c.sort(D),h=j;h--;)c[h].rank=h;for(h=j;h--;)F[h].rank>=I&&F.splice(h,1);j=F.length}for(h=0;j>h;h++){e=F[h],o=e.labelPos;var H,V,z=9999;for(V=0;I>V;V++)H=xt(L[V]-o[1]),z>H&&(z=H,R=V);if(h>R&&null!==L[h])R=h;else if(j-h+R>I&&null!==L[h])for(R=I-j+h;null===L[R];)R++;else for(;null===L[R];)R++;B.push({i:R,y:L[R]}),L[R]=null}B.sort(D)}for(h=0;j>h;h++){var $,U;e=F[h],o=e.labelPos,i=e.dataLabel,u=e.visible===!1?Gt:Yt,U=o[1],C>0?($=B.pop(),R=$.i,l=$.y,(U>l&&null!==L[R+1]||l>U&&null!==L[R-1])&&(l=U)):l=U,s=v.justify?T[0]+(d?-1:1)*(E+C):f.getX(0===R||R===L.length-1?U:l,d),i._attr={visibility:u,align:o[6]},i._pos={x:s+v.x+({left:y,right:-y}[o[6]]||0),y:l+v.y-10},i.connX=s,i.connY=l,null===this.options.size&&(r=i.width,y>s-r?N[3]=bt(mt(r-s+y),N[3]):s+r>_-y&&(N[1]=bt(mt(s+r-_+y),N[1])),0>l-a/2?N[0]=bt(mt(-l+a/2),N[0]):l+a/2>x&&(N[2]=bt(mt(l+a/2-x),N[2])))}}(0===M(N)||this.verifyDataLabelOverflow(N))&&(this.placeDataLabels(),k&&b&&_n(this.points,function(e){t=e.connector,o=e.labelPos,i=e.dataLabel,i&&i._pos?(u=i._attr.visibility,s=i.connX,l=i.connY,n=w?[Qt,s+("left"===o[6]?5:-5),l,"C",s,l,2*o[2]-o[4],2*o[3]-o[5],o[2],o[3],Zt,o[4],o[5]]:[Qt,s+("left"===o[6]?5:-5),l,Zt,o[2],o[3],Zt,o[4],o[5]],t?(t.animate({d:n}),t.attr("visibility",u)):e.connector=t=f.chart.renderer.path(n).attr({"stroke-width":b,stroke:v.connectorColor||e.color||"#606060",visibility:u}).add(f.group)):t&&(e.connector=t.destroy())}))}},verifyDataLabelOverflow:function(e){var t,n=this.center,i=this.options,r=i.center,o=i.minSize||80,a=o;
return null!==r[0]?a=bt(n[2]-bt(e[1],e[3]),o):(a=bt(n[2]-e[1]-e[3],o),n[0]+=(e[3]-e[1])/2),null!==r[1]?a=bt(_t(a,n[2]-bt(e[0],e[2])),o):(a=bt(_t(a,n[2]-e[0]-e[2]),o),n[1]+=(e[0]-e[2])/2),a<n[2]?(n[2]=a,this.translate(n),_n(this.points,function(e){e.dataLabel&&(e.dataLabel._pos=null)}),this.drawDataLabels()):t=!0,t},placeDataLabels:function(){_n(this.points,function(e){var t,n=e.dataLabel;n&&(t=n._pos,t?(n.attr(n._attr),n[n.moved?"animate":"attr"](t),n.moved=!0):n&&n.attr({y:-999}))})},alignDataLabel:Ht,drawTracker:Gn.prototype.drawTracker,drawLegendSymbol:$n.prototype.drawLegendSymbol,getSymbol:Ht};Jn=v(Vn,Jn),pn.pie=Jn,e(Highcharts,{Axis:z,Chart:q,Color:In,Legend:W,Pointer:U,Point:Hn,Tick:j,Tooltip:$,Renderer:X,Series:Vn,SVGElement:F,SVGRenderer:On,arrayMin:A,arrayMax:M,charts:Vt,dateFormat:J,format:w,pathAnim:Z,getOptions:B,hasBidiBug:Rt,isTouchDevice:Pt,numberFormat:y,seriesTypes:pn,setOptions:L,addEvent:Tn,removeEvent:En,createElement:m,discardElement:D,css:g,each:_n,extend:e,map:Cn,merge:t,pick:p,splat:f,extendClass:v,pInt:i,wrap:_,svg:Ot,canvas:Lt,vml:!Ot&&!Lt,product:zt,version:$t})}();var Oven=function(){/**
 * almond 0.2.4 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */
var requirejs,require,define;!function(e){function t(e,t){return v.call(e,t)}function n(e,t){var n,i,r,o,a,s,l,u,c,d,h=t&&t.split("/"),f=g.map,p=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(h=h.slice(0,h.length-1),e=h.concat(e.split("/")),u=0;u<e.length;u+=1)if(d=e[u],"."===d)e.splice(u,1),u-=1;else if(".."===d){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||p)&&f){for(n=e.split("/"),u=n.length;u>0;u-=1){if(i=n.slice(0,u).join("/"),h)for(c=h.length;c>0;c-=1)if(r=f[h.slice(0,c).join("/")],r&&(r=r[i])){o=r,a=u;break}if(o)break;!s&&p&&p[i]&&(s=p[i],l=u)}!o&&s&&(o=s,a=l),o&&(n.splice(0,a,o),e=n.join("/"))}return e}function i(t,n){return function(){return c.apply(e,y.call(arguments,0).concat([t,n]))}}function r(e){return function(t){return n(t,e)}}function o(e){return function(t){f[e]=t}}function a(n){if(t(p,n)){var i=p[n];delete p[n],m[n]=!0,u.apply(e,i)}if(!t(f,n)&&!t(m,n))throw new Error("No "+n);return f[n]}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function l(e){return function(){return g&&g.config&&g.config[e]||{}}}var u,c,d,h,f={},p={},g={},m={},v=Object.prototype.hasOwnProperty,y=[].slice;d=function(e,t){var i,o=s(e),l=o[0];return e=o[1],l&&(l=n(l,t),i=a(l)),l?e=i&&i.normalize?i.normalize(e,r(t)):n(e,t):(e=n(e,t),o=s(e),l=o[0],e=o[1],l&&(i=a(l))),{f:l?l+"!"+e:e,n:e,pr:l,p:i}},h={require:function(e){return i(e)},exports:function(e){var t=f[e];return"undefined"!=typeof t?t:f[e]={}},module:function(e){return{id:e,uri:"",exports:f[e],config:l(e)}}},u=function(n,r,s,l){var u,c,g,v,y,b,_=[];if(l=l||n,"function"==typeof s){for(r=!r.length&&s.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(v=d(r[y],l),c=v.f,"require"===c)_[y]=h.require(n);else if("exports"===c)_[y]=h.exports(n),b=!0;else if("module"===c)u=_[y]=h.module(n);else if(t(f,c)||t(p,c)||t(m,c))_[y]=a(c);else{if(!v.p)throw new Error(n+" missing "+c);v.p.load(v.n,i(l,!0),o(c),{}),_[y]=f[c]}g=s.apply(f[n],_),n&&(u&&u.exports!==e&&u.exports!==f[n]?f[n]=u.exports:g===e&&b||(f[n]=g))}else n&&(f[n]=s)},requirejs=require=c=function(t,n,i,r,o){return"string"==typeof t?h[t]?h[t](n):a(d(t,n).f):(t.splice||(g=t,n.splice?(t=n,n=i,i=null):t=e),n=n||function(){},"function"==typeof i&&(i=r,r=o),r?u(e,t,n,i):setTimeout(function(){u(e,t,n,i)},4),c)},c.config=function(e){return g=e,c},define=function(e,n,i){n.splice||(i=n,n=[]),t(f,e)||t(p,e)||(p[e]=[e,n,i])},define.amd={jQuery:!0}}(),define("build/almond.js",function(){}),define("oven/unvetted/kernel/kernelGlobals",[],function(){var e,t,n,i,r,o;return void 0===o&&(o={get:function(){if(void 0===this._document)throw new Error("ERROR: _document is undefined.  Highest level module must call setDocument because all levels of the OVEN library need it");return this._document},set:function(e){if(void 0===e)throw new Error("ERROR: oInDocument is undefined!");this._document=e}}),void 0===r&&(r={get:function(){if(void 0===this._window)throw new Error("ERROR: _window is undefined.  Highest level module must call setWindow because all levels of the OVEN library need it");return this._window},set:function(e){if(void 0===e)throw new Error("ERROR: oInWindow is undefined!");this._window=e}}),e=function(e){if(void 0!==i)throw new Error("ERROR: Globals is already defined!!!");i={logFunction:e.loggerFunction,errorFunction:e.errorFunction,resourceManager:e.resourceManager,window:r,document:o},i.document.set(e.document),i.window.set(e.window);var t,n;for(t in e)e.hasOwnProperty(t)&&"window"!==t&&"document"!==t&&void 0===i[t]&&(n=e[t],i[t]=n)},n=function(){if(void 0===i)throw new Error("ERROR: Globals is undefined.  Highest level module must call setGlobal because all levels of the OVEN library need it");return i},void 0===t&&(t={setGlobal:e,getGlobals:n}),t});var g_performance=!1,g_debug=!0,_window,_console;return define("oven/unvetted/kernel/kernelUtil",[],function(){function e(e,t){var n,i,r,o,a="",s=2,l=!0;for(s||(s=0),r=0;s+1>r;r++)a+="  ";if(void 0!==t&&e.length<2*t&&(l=!1),n=a,"[object Array]"===Object.prototype.toString.call(e))for(i=0;i<e.length;i+=1){for(void 0!==t&&l===!0&&i>=t&&(i=e.length-t,l=!1,n+="................\n"+a),n+="[",o=0;o<e[i].length;o++){0!==o&&(n+=", ");var u=e[i][o];if("[object Date]"===Object.prototype.toString.call(u)){var c=u.getFullYear()+"/"+h(u.getMonth()+1)+"/"+h(u.getDate())+" "+h(u.getHours())+":"+h(u.getMinutes())+":"+h(u.getSeconds());n+="'"+c+"'"}else n+=u}n+="],\n"+a}return n}function t(t){function n(t,i){if(i.length>500)throw new Error("[..you've dug too deep..]");var r,o,a=i+"  ";if(t&&t.stack&&!Object.getOwnPropertyDescriptor(t,"stack").enumerable)return r="ERROR => {\n",r+=a+"name : "+t.name+",\n",r+=a+"code : "+t.code+",\n",r+=a+"message : "+t.message+",\n",r+=a+"stack : "+t.stack+",\n",r+=i+"}";if(t&&t.toUTCString)return t.toUTCString();if(t&&Array.isArray(t)){if(Array.isArray(t[0]))return r=e(t);if(0===t.length)return"[ ]";for(r="[\n",o=0;o<t.length;++o)r+=a,r+=n(t[o],a),r+=",\n";return r+=i+"]"}if(t&&"object"==typeof t){r="{\n";for(o in t)r+=a+o+": ",r+=n(t[o],a),r+=",\n";return r+=i+"}"}return t&&"function"==typeof t?t.name?"[function "+t.name+"]":"[function]":void 0===t?"[undefined]":null===t?"[null]":t.toString()}try{return"\n"+n(t,"")}catch(i){return"Error: "+i.stack}}function n(e){var n,i="",r=[];for(0===e.length&&(i="[undefined]"),n=0;n<e.length;++n){var o=e[n];i+=void 0===o?"[undefined]":null===o?"[null]":"object"==typeof o?t(o):o.toString(),r.push(o)}return{message:i,parameters:r}}function i(e,t,n){var i="["+e+" <"+t+">"+"] ";if("object"==typeof n?n.unshift(i):n=[i+n],!_console)throw new Error("you probably want to know that this platform doesn't have a console object - and to set the replacement to _console in this object");_console.log.apply?_console.log.apply(_console,n):_console.log(n)}function r(e,t,n){var i="["+e+" <"+t+">"+"] ";if("object"==typeof n?n.unshift(i):n=[i+n],!_console)throw new Error("you probably want to know that this platform doesn't have a console object - and to set the replacement to _console in this object");void 0!==_console.error.apply?_console.error.apply(_console,n):_console.error(n)}var o,a,s,l,u,c,d,h,f=!1,p=!0,g=!0,m=!1;return h=function(e){return(10>e?"0":"")+e},c=function(e,t,i,r,o){var a,s,l,c,h="",f="",p=o[0],g=o[1],v=[];if(e&&!(o.length<1)){if(1===o.length)g=p,p=r;else if(o.length>1&&o.slice){var y=n(o.slice(1));g instanceof Function||(g=y.message)}if(l=(new Error).stack)if(m===!1){for(a=(new Error).stack.toString(),void 0===d&&(-1!==a.indexOf("kernelUtil")?d="kernelUtil":-1!==a.indexOf("kernelutil")&&(d="kernelutil"));-1!==a.indexOf(d);)a=a.substr(a.indexOf("\n")+1);s=a.slice(a.indexOf("("),a.indexOf(")")+1),f="	"+s}else t===u&&(f="	"+l);if(h=function(){var e,n=[];for(e=0;e<arguments.length;e+=1)n.push(arguments[e]);n.push(f),t(i,p,n)},g instanceof Function)g(h);else if("object"==typeof g){for(p=f,c=0;c<o.length;c+=1)v.push(o[c]);t(i,p,v)}else t(i,p,g+f)}},a=i,s=i,l=i,u=r,o={assert:function(e,t){if(g_debug&&e!==!0)if("string"==typeof t)o.log.error('ASSERTION FAILED - "'+t+'"');else{if("function"!=typeof t)throw new Error("Assertion failed");t()}},isPerfOn:function(){return g_performance},OvenPerformanceTimer:function(){function e(){return{id:"createTimer"+(i+=1),startTime:0,delta:0,start:function(){this.startTime=(new Date).getTime()},now:function(){return(new Date).getTime()},end:function(){this.delta=(new Date).getTime()-this.startTime},result:function(){return this.delta}}}function t(){var e;if(!_window.performance)return null;if(_window.performance.webkitNow)e=function(){return _window.performance.webkitNow()};else{if(!_window.performance.now)return null;e=function(){return _window.performance.now()}}return{id:"hiResChromeTimer"+(i+=1),startTime:0,delta:0,start:function(){this.startTime=e()},now:function(){return e()},end:function(){this.delta=e()-this.startTime},result:function(){return Math.ceil(this.delta)}}}var n,i=0;return n=t(),n||(n=e()),{id:function(){return n.id},start:function(){return n.start()},now:function(){return n.now()},end:function(){return n.end()},result:function(){return n.result()}}},log:{init:function(e,t){_console=e,_window=t},setTrace:function(e){f=e},setWarn:function(e){p=e},setError:function(e){g=e},isTraceEnabled:function(){return f},isDebugEnabled:function(){return p},isErrorEnabled:function(){return g},_perfBuffer:[],_category:"!!UNSPECIFIED!!",setCategory:function(e){this._category=e},setShowStackError:function(e){m=e},clearCategory:function(){this._category="!!UNSPECIFIED!!"},trace:function(){c(f,s,"OVEN::TRACE",this._category,Array.prototype.slice.call(arguments))},warn:function(){c(p,l,"OVEN::WARN",this._category,arguments)},error:function(){c(g,u,"OVEN::ERROR",this._category,arguments)},perf:function(e,t){function n(){var t,n=[];for(t=0;t<arguments.length;t+=1)n.push(arguments[t]);a("OVEN::PERFORMANCE",e,n)}!g_performance||arguments.length<1||(1===arguments.length&&(t=e,e=this._category),t instanceof Function?t(n):a("OVEN::PERFORMANCE",e,t))},perfBuffered:function(e,t){function n(){var t,n=[];for(t=0;t<arguments.length;t+=1)n.push(arguments[t]);i._perfBuffer.push(["OVEN::PERFORMANCE",e,n])}var i=this;!g_performance||arguments.length<1||(1===arguments.length&&(t=e,e=this._category),t instanceof Function?t(n):this._perfBuffer.push(["OVEN::PERFORMANCE",e,t]))},perfFlush:function(){var e,t=this._perfBuffer;for(e=0;e<t.length;e+=1)a(t[e][0],t[e][1],t[e][2]);this._perfBuffer=[]},dumpObj:function(e){return t(e)}}}}),define("oven/unvetted/kernel/kernelEnvironment",["oven/unvetted/kernel/kernelUtil","oven/unvetted/kernel/kernelGlobals"],function(e,t){function n(){return void 0===s&&(s=t.getGlobals()),s}function i(){return void 0===c&&(c=n().window.get()),c}function r(){return void 0===l&&(l=n().document.get()),l}function o(){if(void 0===c&&(c=i()),!u){if(!c||!c.document)throw new Error("ERROR.  Something is undefined.  _window="+c+", _window.document="+c.document);u=c.document}return u}var a,s,l,u,c,d,h,f;return a={document:{get:function(){return void 0===l&&(l=r()),l},getGlobal:function(){return void 0===u&&(u=o()),u}},log:{getLog:function(){return void 0===d&&(d=s.loggerFunction?s.loggerFunction:null),d},getError:function(){return void 0===h&&(h=s.errorFunction?s.errorFunction:null),h}},window:{get:function(){return void 0===c&&(c=i()),c}},numformat:{get:function(){return void 0===f&&(f=s.numformat),f}},globals:{set:function(e){s=e}}}}),define("oven/unvetted/library/utility/mathUtil",[],function(){function e(e,t){return e-t}function t(e,t){return t-e}var n={HOLE:-999999,HOLEF:-999999,INTERPOLATE:-999998,INTERPOLATEF:-999998,SQRT2PI:Math.sqrt(2*Math.PI),createNormalDistribution:function(e,t){var i={mean:0,stdDev:0,_c1:0,_c2:0,init:function(e,t){this.mean=e,this.stdDev=t,this._c1=1/(this.stdDev*n.SQRT2PI),this._c2=-.5/(this.stdDev*this.stdDev)},calc:function(e){var t=e-this.mean;return this._c1*Math.exp(this._c2*t*t)}};return void 0!==e&&void 0!==t&&i.init(e,t),i},clamp:function(e,t,n){return t>e?t:e>n?n:e},distanceSquared:function(e,t,n,i){var r=n-e,o=i-t;return r*r+o*o},distance:function(e,t,n,i){return Math.sqrt(this.distanceSquared(e,t,n,i))},lerp:function(e,t,n){return e+n*(t-e)},sortAscending:function(t){t.sort(e)},sortDescending:function(e){e.sort(t)},sort:function(e){this.sortAscending(e)},sign:function(e){return e/Math.abs(e)},isFiniteNumber:function(e){return"number"==typeof e&&isFinite(e)}};return n}),define("oven/unvetted/library/utility/compatibility",[],function(){return Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>0&&(i=Number(arguments[1]),i!==i?i=0:0!==i&&1/0!==i&&i!==-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var r=i>=0?i:Math.max(n-Math.abs(i),0);n>r;r++)if(r in t&&t[r]===e)return r;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,i,r;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),a=o.length>>>0;if("[object Function]"!=={}.toString.call(e))throw new TypeError(e+" is not a function");for(t&&(n=t),r=Object.prototype.hasOwnProperty,i=0;a>i;){var s;r.call(o,i)&&(s=o[i],e.call(n,s,i,o)),++i}}),Array.prototype.map||(Array.prototype.map=function(e,t){var n,i,r;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),a=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(t&&(n=t),i=new Array(a),r=0;a>r;){var s,l;r in o&&(s=o[r],l=e.call(n,s,r,o),i[r]=l),++r}return i}),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r}),Array.prototype.every||(Array.prototype.every=function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=arguments.length>=2?arguments[1]:void 0,r=0;n>r;r++)if(r in t&&!e.call(i,t[r],r,t))return!1;return!0}),{dummy:"R+ compatibility"}}),define("oven/library/utility/objects",["oven/unvetted/library/utility/compatibility"],function(){var e={clone:function(t){var n,i,r,o;if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return n=new Date,n.setTime(t.getTime()),n;if(t instanceof Array){for(n=[],i=0,r=t.length;r>i;++i)n[i]=e.clone(t[i]);return n}if(t instanceof Object){n={};for(o in t)t.hasOwnProperty(o)&&(n[o]=e.clone(t[o]));return n}return null},cloneInto:function(t,n){var i,r,o;if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return n=new Date,n.setTime(t.getTime()),n;if(t instanceof Array){for(n instanceof Array||(n=[]),i=0,r=t.length;r>i;++i)n[i]=e.cloneInto(t[i],n[i]);return n}if(t instanceof Object){n instanceof Object||(n={});for(o in t)t.hasOwnProperty(o)&&(n[o]=e.cloneInto(t[o],n[o]))}return n},merge:function(t,n,i){var r,o,a,s;if(null===n||"object"!=typeof n)return n;if(n instanceof Date)return r=new Date,r.setTime(n.getTime()),r;if(n instanceof Array){for(t=t instanceof Array&&i?e.clone(t):[],o=0,a=n.length;a>o;++o)void 0===t[o]&&(t[o]={}),t[o]=e.merge(t[o],n[o],i);return t}if(n instanceof Object){t=t instanceof Object?e.clone(t):{};for(s in n)n.hasOwnProperty(s)&&(void 0===t[s]&&(t[s]={}),t[s]=e.merge(t[s],n[s],i));return t}return e.clone(t)},convertObjectToArray:function(e,t){var n;for(n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},toArray:function(e,t){var n,i;for(i in e)e.hasOwnProperty(i)&&"number"==typeof e[i]&&(n=e[i],t.push(n));return t},fromArray:function(e,t,n){var i;for(i in e)e.hasOwnProperty(i)&&"number"==typeof e[i]&&(e[i]=t[n++]);return n},isEmpty:function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},iterate:function(e,t,n){var i,r=e.length;for(i=0;r>i;i++)t(e[i],n,i)},consolidateArrays:function(e){var t=[];return this.iterate(e,function(e,n){e.length?n.iterate(e,function(e){-1===t.indexOf(e)&&t.push(e)}):0!==e.length&&-1===t.indexOf(e)&&t.push(e)},this),t},extend:function(e,t){var n,i,r={};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]={value:t[n],enumerable:!0});return i=Object.create(e,r)},assimilate:function(e,t){var n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&void 0===t[n]&&(t[n]=e[n]);return t},assimilateSafe:function(e,t){var n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n))if(void 0===t[n])t[n]=e[n];else{var i="[objects] EXCEPTION: collision detected from assimilate("+e+","+t+") call on key '"+n+"' (could be dangerous)";if(!console||!console.error)throw new Error(i);console.error(i)}return t},copyInto:function(e,t){var n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},assimilateOwnProperties:function(e,t){return Object.getOwnPropertyNames(e).forEach(function(n){t.hasOwnProperty(n)||Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t},setPropertyByPath:function(e,t,n){var i,r=t.split("."),o=r.length,a=e;for(i=0;o-1>i;++i){var s=r[i];void 0===a[s]&&(a[s]={}),a=a[s]}a[r[i]]=n},getObjectDeltaModificationsOnly:function(e,t){if(e!==t){var n,i={},r=!0;for(n in t)if(t.hasOwnProperty(n)&&void 0!==e[n]&&e[n]!==t[n]){var o=typeof e[n],a=typeof t[n];if(e[n]&&t[n]&&"object"===o&&"object"===a){var s=this.getObjectDeltaModificationsOnly(e[n],t[n]);void 0!==s&&(r=!1,i[n]=s)}else r=!1,i[n]=t[n]}return r?void 0:i}}};return e}),define("oven/unvetted/kernel/kernelColor",["oven/library/utility/objects","oven/unvetted/library/utility/mathUtil"],function(e,t){var n={aliceblue:{hex:"f0f8ff",channels:[240,248,255,1]},antiquewhite:{hex:"faebd7",channels:[250,235,215,1]},aqua:{hex:"00ffff",channels:[0,255,255,1]},aquamarine:{hex:"7fffd4",channels:[127,255,212,1]},azure:{hex:"f0ffff",channels:[240,255,255,1]},beige:{hex:"f5f5dc",channels:[245,245,220,1]},bisque:{hex:"ffe4c4",channels:[255,228,196,1]},black:{hex:"000000",channels:[0,0,0,1]},blanchedalmond:{hex:"ffebcd",channels:[255,235,205,1]},blue:{hex:"0000ff",channels:[0,0,255,1]},blueviolet:{hex:"8a2be2",channels:[138,43,226,1]},brown:{hex:"a52a2a",channels:[165,42,42,1]},burlywood:{hex:"deb887",channels:[222,184,135,1]},cadetblue:{hex:"5f9ea0",channels:[95,158,160,1]},chartreuse:{hex:"7fff00",channels:[127,255,0,1]},chocolate:{hex:"d2691e",channels:[210,105,30,1]},coral:{hex:"ff7f50",channels:[255,127,80,1]},cornflowerblue:{hex:"6495ed",channels:[100,149,237,1]},cornsilk:{hex:"fff8dc",channels:[255,248,220,1]},crimson:{hex:"dc143c",channels:[220,20,60,1]},cyan:{hex:"00ffff",channels:[0,255,255,1]},darkblue:{hex:"00008b",channels:[0,0,139,1]},darkcyan:{hex:"008b8b",channels:[0,139,139,1]},darkgoldenrod:{hex:"b8860b",channels:[184,134,11,1]},darkgray:{hex:"a9a9a9",channels:[169,169,169,1]},darkgreen:{hex:"006400",channels:[0,100,0,1]},darkgrey:{hex:"a9a9a9",channels:[169,169,169,1]},darkkhaki:{hex:"bdb76b",channels:[189,183,107,1]},darkmagenta:{hex:"8b008b",channels:[139,0,139,1]},darkolivegreen:{hex:"556b2f",channels:[85,107,47,1]},darkorange:{hex:"ff8c00",channels:[255,140,0,1]},darkorchid:{hex:"9932cc",channels:[153,50,204,1]},darkred:{hex:"8b0000",channels:[139,0,0,1]},darksalmon:{hex:"e9967a",channels:[233,150,122,1]},darkseagreen:{hex:"8fbc8f",channels:[143,188,143,1]},darkslateblue:{hex:"483d8b",channels:[72,61,139,1]},darkslategray:{hex:"2f4f4f",channels:[47,79,79,1]},darkslategrey:{hex:"2f4f4f",channels:[47,79,79,1]},darkturquoise:{hex:"00ced1",channels:[0,206,209,1]},darkviolet:{hex:"9400d3",channels:[148,0,211,1]},deeppink:{hex:"ff1493",channels:[255,20,147,1]},deepskyblue:{hex:"00bfff",channels:[0,191,255,1]},dimgray:{hex:"696969",channels:[105,105,105,1]},dimgrey:{hex:"696969",channels:[105,105,105,1]},dodgerblue:{hex:"1e90ff",channels:[30,144,255,1]},firebrick:{hex:"b22222",channels:[178,34,34,1]},floralwhite:{hex:"fffaf0",channels:[255,250,240,1]},forestgreen:{hex:"228b22",channels:[34,139,34,1]},fuchsia:{hex:"ff00ff",channels:[255,0,255,1]},gainsboro:{hex:"dcdcdc",channels:[220,220,220,1]},ghostwhite:{hex:"f8f8ff",channels:[248,248,255,1]},gold:{hex:"ffd700",channels:[255,215,0,1]},goldenrod:{hex:"daa520",channels:[218,165,32,1]},gray:{hex:"808080",channels:[128,128,128,1]},green:{hex:"008000",channels:[0,128,0,1]},greenyellow:{hex:"adff2f",channels:[173,255,47,1]},grey:{hex:"808080",channels:[128,128,128,1]},honeydew:{hex:"f0fff0",channels:[240,255,240,1]},hotpink:{hex:"ff69b4",channels:[255,105,180,1]},indianred:{hex:"cd5c5c",channels:[205,92,92,1]},indigo:{hex:"4b0082",channels:[75,0,130,1]},ivory:{hex:"fffff0",channels:[255,255,240,1]},khaki:{hex:"f0e68c",channels:[240,230,140,1]},lavender:{hex:"e6e6fa",channels:[230,230,250,1]},lavenderblush:{hex:"fff0f5",channels:[255,240,245,1]},lawngreen:{hex:"7cfc00",channels:[124,252,0,1]},lemonchiffon:{hex:"fffacd",channels:[255,250,205,1]},lightblue:{hex:"add8e6",channels:[173,216,230,1]},lightcoral:{hex:"f08080",channels:[240,128,128,1]},lightcyan:{hex:"e0ffff",channels:[224,255,255,1]},lightgoldenrodyellow:{hex:"fafad2",channels:[250,250,210,1]},lightgray:{hex:"d3d3d3",channels:[211,211,211,1]},lightgreen:{hex:"90ee90",channels:[144,238,144,1]},lightgrey:{hex:"d3d3d3",channels:[211,211,211,1]},lightpink:{hex:"ffb6c1",channels:[255,182,193,1]},lightsalmon:{hex:"ffa07a",channels:[255,160,122,1]},lightseagreen:{hex:"20b2aa",channels:[32,178,170,1]},lightskyblue:{hex:"87cefa",channels:[135,206,250,1]},lightslateblue:{hex:"8470ff",channels:[119,136,153,1]},lightslategray:{hex:"778899",channels:[119,136,153,1]},lightsteelblue:{hex:"b0c4de",channels:[176,196,222,1]},lightyellow:{hex:"ffffe0",channels:[255,255,224,1]},lime:{hex:"00ff00",channels:[0,255,0,1]},limegreen:{hex:"32cd32",channels:[50,205,50,1]},linen:{hex:"faf0e6",channels:[250,240,230,1]},magenta:{hex:"ff00ff",channels:[255,0,255,1]},maroon:{hex:"800000",channels:[128,0,0,1]},mediumaquamarine:{hex:"66cdaa",channels:[102,205,170,1]},mediumblue:{hex:"0000cd",channels:[0,0,205,1]},mediumorchid:{hex:"ba55d3",channels:[186,85,211,1]},mediumpurple:{hex:"9370d8",channels:[147,112,219,1]},mediumseagreen:{hex:"3cb371",channels:[60,179,113,1]},mediumslateblue:{hex:"7b68ee",channels:[123,104,238,1]},mediumspringgreen:{hex:"00fa9a",channels:[0,250,154,1]},mediumturquoise:{hex:"48d1cc",channels:[72,209,204,1]},mediumvioletred:{hex:"c71585",channels:[199,21,133,1]},midnightblue:{hex:"191970",channels:[25,25,112,1]},mintcream:{hex:"f5fffa",channels:[245,255,250,1]},mistyrose:{hex:"ffe4e1",channels:[255,228,225,1]},moccasin:{hex:"ffe4b5",channels:[255,228,181,1]},navajowhite:{hex:"ffdead",channels:[255,222,173,1]},navy:{hex:"000080",channels:[0,0,128,1]},oldlace:{hex:"fdf5e6",channels:[253,245,230,1]},olive:{hex:"808000",channels:[128,128,0,1]},olivedrab:{hex:"6b8e23",channels:[107,142,35,1]},orange:{hex:"ffa500",channels:[255,165,0,1]},orangered:{hex:"ff4500",channels:[255,69,0,1]},orchid:{hex:"da70d6",channels:[218,112,214,1]},palegoldenrod:{hex:"eee8aa",channels:[238,232,170,1]},palegreen:{hex:"98fb98",channels:[152,251,152,1]},paleturquoise:{hex:"afeeee",channels:[175,238,238,1]},palevioletred:{hex:"d87093",channels:[219,112,147,1]},papayawhip:{hex:"ffefd5",channels:[255,239,213,1]},peachpuff:{hex:"ffdab9",channels:[255,218,185,1]},peru:{hex:"cd853f",channels:[205,133,63,1]},pink:{hex:"ffc0cb",channels:[255,192,203,1]},plum:{hex:"dda0dd",channels:[221,160,221,1]},powderblue:{hex:"b0e0e6",channels:[176,224,230,1]},purple:{hex:"800080",channels:[128,0,128,1]},red:{hex:"ff0000",channels:[255,0,0,1]},rosybrown:{hex:"bc8f8f",channels:[188,143,143,1]},royalblue:{hex:"4169e1",channels:[65,105,225,1]},saddlebrown:{hex:"8b4513",channels:[139,69,19,1]},salmon:{hex:"fa8072",channels:[250,128,114,1]},sandybrown:{hex:"f4a460",channels:[244,164,96,1]},seagreen:{hex:"2e8b57",channels:[46,139,87,1]},seashell:{hex:"fff5ee",channels:[255,245,238,1]},sienna:{hex:"a0522d",channels:[160,82,45,1]},silver:{hex:"c0c0c0",channels:[192,192,192,1]},skyblue:{hex:"87ceeb",channels:[135,206,235,1]},slateblue:{hex:"6a5acd",channels:[106,90,205,1]},slategray:{hex:"708090",channels:[112,128,144,1]},slategrey:{hex:"708090",channels:[112,128,144,1]},snow:{hex:"fffafa",channels:[255,250,250,1]},springgreen:{hex:"00ff7f",channels:[0,255,127,1]},steelblue:{hex:"4682b4",channels:[70,130,180,1]},tan:{hex:"d2b48c",channels:[210,180,140,1]},teal:{hex:"008080",channels:[0,128,128,1]},thistle:{hex:"d8bfd8",channels:[216,191,216,1]},tomato:{hex:"ff6347",channels:[255,99,71,1]},turquoise:{hex:"40e0d0",channels:[64,224,208,1]},violet:{hex:"ee82ee",channels:[238,130,238,1]},wheat:{hex:"f5deb3",channels:[245,222,179,1]},white:{hex:"ffffff",channels:[255,255,255,1]},whitesmoke:{hex:"f5f5f5",channels:[245,245,245,1]},yellow:{hex:"ffff00",channels:[255,255,0,1]},yellowgreen:{hex:"9acd32",channels:[154,205,50,1]}},i=.95047,r=1,o=1.08883,a={rgb:{to_string:function(e,t,n){return"rgb("+Math.floor(e)+","+Math.floor(t)+","+Math.floor(n)+")"}},hsl:{to_string:function(e,t,n){return"hsl("+Math.floor(e)+","+Math.floor(t)+"%,"+Math.floor(n)+"%)"},from_rgb:function(e,t,n){var i,r,o=Math.min(e/=255,t/=255,n/=255),a=Math.max(e,t,n),s=a-o,l=(a+o)/2;return s?(r=.5>l?s/(a+o):s/(2-a-o),i=e===a?(t-n)/s+(n>t?6:0):t===a?(n-e)/s+2:(e-t)/s+4,i*=60):r=i=0,{h:i,s:100*r,l:100*l}},to_rgb:function(e,t,n){function i(e){return e>360?e-=360:0>e&&(e+=360),60>e?o+(a-o)*e/60:180>e?a:240>e?o+(a-o)*(240-e)/60:o}function r(e){return Math.round(255*i(e))}var o,a;return t/=100,n/=100,e%=360,0>e&&(e+=360),t=0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+t):n+t-n*t,o=2*n-a,{r:r(e+120),g:r(e),b:r(e-120)}}},hsv:{from_rgb:function(e,t,n){e/=255,t/=255,n/=255;var i,r,o=Math.max(e,t,n),a=Math.min(e,t,n),s=o,l=o-a;if(r=0===o?0:l/o,o===a)i=0;else{switch(o){case e:i=(t-n)/l+(n>t?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i*=60,0>i&&(i+=360)}return{h:i,s:100*r,v:100*s}},to_rgb:function(e,t,n){var i,r,o;e/=60,t/=100,n/=100;var a=Math.floor(e),s=e-a,l=n*(1-t),u=n*(1-s*t),c=n*(1-(1-s)*t);switch(a){case 0:i=n,r=c,o=l;break;case 1:i=u,r=n,o=l;break;case 2:i=l,r=n,o=c;break;case 3:i=l,r=u,o=n;break;case 4:i=c,r=l,o=n;break;case 5:i=n,r=l,o=u}return{r:255*i>>0,g:255*r>>0,b:255*o>>0}}},hcl:{from_lab:function(e,t,n){return{h:180*(Math.atan2(n,t)/Math.PI),c:Math.sqrt(t*t+n*n),l:e}},to_lab:function(e,t,n){return{l:n,a:Math.cos(e*=Math.PI/180)*t,b:Math.sin(e)*t}},to_rgb:function(e,t,n){var i=this.to_lab(e,t,n);return a.lab.to_rgb(i.l,i.a,i.b)},from_rgb:function(e,t,n){var i=a.lab.from_rgb(e,t,n);return this.from_lab(i.l,i.a,i.b)}},lab:{to_rgb:function(e,t,n){var s=a.lab.to_xyz,l=a.xyz.to_rgb,u=(e+16)/116,c=u+t/500,d=u-n/200;return c=s(c)*i,u=s(u)*r,d=s(d)*o,{r:l(3.2404542*c-1.5371385*u-.4985314*d),g:l(-.969266*c+1.8760108*u+.041556*d),b:l(.0556434*c-.2040259*u+1.0572252*d)}},from_rgb:function(e,t,n){var s=a.xyz.from_rgb,l=a.xyz.to_lab;e=s(e),t=s(t),n=s(n);var u=l((.4124564*e+.3575761*t+.1804375*n)/i),c=l((.2126729*e+.7151522*t+.072175*n)/r),d=l((.0193339*e+.119192*t+.9503041*n)/o);return{l:116*c-16,a:500*(u-c),b:200*(c-d)}},to_xyz:function(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}},xyz:{from_rgb:function(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},to_rgb:function(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))},to_lab:function(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}}},s={lab:function(e){return void 0!==e&&void 0!==e.l&&void 0!==e.a&&void 0!==e.b},rgb:function(e){return void 0!==e&&void 0!==e.r&&void 0!==e.g&&void 0!==e.b},hcl:function(e){return void 0!==e&&void 0!==e.h&&void 0!==e.c&&void 0!==e.l},hsl:function(e){return void 0!==e&&void 0!==e.h&&void 0!==e.s&&void 0!==e.l},hsv:function(e){return void 0!==e&&void 0!==e.h&&void 0!==e.s&&void 0!==e.v}},l={rgbrgba:{re:/(^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$)|(^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{0,2}(\.\d{1,2})?)\)$)/,example:["rgb(123, 234, 45)","rgb(255,234,245)","rgba(123, 234, 45, 0.5)"],process:function(e){return void 0!==e[1]&&""!==e[1]?[parseInt(e[2],10),parseInt(e[3],10),parseInt(e[4],10)]:void 0!==e[5]&&""!==e[5]?[parseInt(e[6],10),parseInt(e[7],10),parseInt(e[8],10),parseFloat(e[9])]:[255,255,255]}},hsv:{re:/^hsv\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["hsv(123, 234, 45)","hcl(255,234,245)"],process:function(e){return a.hsv.to_rgb(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10))}},hsl:{re:/^hsl\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["hsl(123, 234, 45)","hcl(255,234,245)"],process:function(e){return a.hsl.to_rgb(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10))}},hcl:{re:/^hcl\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["hcl(123, 234, 45)","hcl(255,234,245)"],process:function(e){return a.hcl.to_rgb(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10))}},lab:{re:/^lab\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["lab(123, 234, 45)","hcl(255,234,245)"],process:function(e){return a.lab.to_rgb(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10))}},hex:{re:/(^#?([A-Fa-f0-9])([A-Fa-f0-9])([A-Fa-f0-9])$)|(^#?([A-Fa-f0-9]{2})([A-Fa-f0-9]{2})([A-Fa-f0-9]{2})$)/,example:["#fB0","f0f","#aFBb03","e2d3A9"],process:function(e){if(void 0!==e[1]&&""!==e[1]){var t=e[2],n=e[3],i=e[4];return[parseInt(t+t,16),parseInt(n+n,16),parseInt(i+i,16)]}return void 0!==e[5]?[parseInt(e[6],16),parseInt(e[7],16),parseInt(e[8],16)]:void 0}}},u={create:function(t){var i=0,r=0,o=0,s=1;if("string"==typeof t){"#"===t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var u,c=n[t];if(c)u=c.channels,i=u[0],r=u[1],o=u[2],s=u[3];else{var d=null;switch(t.substr(0,3)){case"rgb":d=l.rgbrgba;break;case"hsl":d=l.hsl;break;case"hsv":d=l.hsv;break;case"hcl":d=l.hcl;break;case"lab":d=l.lab;break;default:d=l.hex}var h=d.re.exec(t);u=d.process(h),u&&u.length>0&&(i=u[0],r=u[1],o=u[2],s=u[3])}}else void 0!==t&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b&&(i=t.r,r=t.g,o=t.b,s=t.a);return{r:0>i||isNaN(i)?0:i>255?255:i|=0,g:0>r||isNaN(r)?0:r>255?255:r|=0,b:0>o||isNaN(o)?0:o>255?255:o|=0,a:0>s||isNaN(s)||null===s?1:s>1?1:s,toString:function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},toHex:function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16),i=this.a.toString(16);return 1===e.length&&(e="0"+e),1===t.length&&(t="0"+t),1===n.length&&(n="0"+n),1===i.length&&(i="0"+i),"#"+e+t+n+i},toHex2:function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16),i=this.a.toString(16);return 1===e.length&&(e="0"+e),1===t.length&&(t="0"+t),1===n.length&&(n="0"+n),1===i.length&&(i="0"+i),"0x"+e+t+n+i},getLuminosity:function(e,t,n){var i=.2126*this.r+.7152*this.g+.0722*this.b;return e&&t&&n?(i/=255,i=Math.pow(i,e),i=t+i*(n-t),Math.floor(255*i)):Math.floor(i)},getBrightness:function(){return Math.sqrt(.241*this.r*this.r+.691*this.g*this.g+.068*this.b*this.b)},brighter:function(e){var t=a.hcl.from_rgb(this.r,this.b,this.g),n=Math.pow(.7,void 0!==e?-e:-1);t.l=t.l*n;var i=a.hcl.to_rgb(t.h,t.c,t.l);return this.r=i.r,this.b=i.g,this.g=i.b,this},darker:function(e){var t=a.hcl.from_rgb(this.r,this.b,this.g),n=Math.pow(.7,void 0!==e?e:1);t.l=t.l*n;var i=a.hcl.to_rgb(t.h,t.c,t.l);return this.r=i.r,this.b=i.g,this.g=i.b,this},clone:function(){return e.clone(this)},scale:function(e){var t=this.clone();return t.r*=e,t.r|=0,t.g*=e,t.g|=0,t.b*=e,t.b|=0,t}}},interpolate_rgb:function(e,n,i){if(0===i)return u.create(e);if(1===i)return u.create(n);var r=u.create(e),o=u.create(n);if(!s.rgb(r)||!s.rgb(o))return void 0;if(0>i)return void 0;var a=t.lerp(r.r,o.b,i),l=t.lerp(r.g,o.g,i),c=t.lerp(r.b,o.b,i);return u.create({r:a,g:l,b:c})},interpolate_hsl:function(e,t,n){var i=function(e){if(s.hsl(e))return e;s.rgb(e)||(e=u.create(e));var t=a.hsl.from_rgb(e.r,e.g,e.b);return{h:t.h,s:t.s,l:t.l}};if(0===n)return u.create(e);if(1===n)return u.create(t);var r=i(e),o=i(t);if(!s.hsl(r)||!s.hsl(o))return void 0;if(0>n)return void 0;var l=r.h,c=r.s,d=r.l,h=o.h-l,f=o.s-c,p=o.l-d;h>180?h-=360:-180>h&&(h+=360);var g=a.hsl.to_rgb(l+h*n,c+f*n,d+p*n);return u.create({r:g.r,g:g.g,b:g.b})},converters:a};return u}),/*
 * canvg.js - Javascript SVG parser and renderer on Canvas
 * MIT Licensed 
 * Gabe Lerner (gabelerner@gmail.com)
 * http://code.google.com/p/canvg/
 *
 * Requires: rgbcolor.js - http://www.phpied.com/rgb-color-parser-in-javascript/
 */
define("oven/3rdparty/canvg/canvg",["oven/unvetted/kernel/kernelColor","oven/unvetted/kernel/kernelEnvironment"],function(e,t){var n,i,r,o,a,s,l;n=function(){return void 0===s&&(s=t.document.get()),s},i=function(){return void 0===l&&(l=t.window.get()),l},o=function(e,t,i){if(null!=e||null!=t||null!=i){i=i||{},"string"==typeof e&&(e=n().getElementById(e)),null!=e.svg&&e.svg.stop();var a=r();(1!=e.childNodes.length||"OBJECT"!=e.childNodes[0].nodeName)&&(e.svg=a),a.opts=i;var s=e.getContext("2d");"undefined"!=typeof t.documentElement?a.loadXmlDoc(s,t):"<"==t.substr(0,1)?a.loadXml(s,t):a.load(s,t)}else for(var l=n().getElementsByTagName("svg"),u=0;u<l.length;u++){var c=l[u],d=n().createElement("canvas");d.width=c.clientWidth,d.height=c.clientHeight,c.parentNode.insertBefore(d,c),c.parentNode.removeChild(c);var h=n().createElement("div");h.appendChild(c),o(d,h.innerHTML)}},r=function(){var t={};return t.FRAMERATE=30,t.MAX_VIRTUAL_PIXELS=3e4,t.init=function(e){var n=0;t.UniqueId=function(){return n++,"canvg"+n},t.Definitions={},t.Styles={},t.Animations=[],t.Images=[],t.ctx=e,t.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(e,t){this.viewPorts.push({width:e,height:t})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(e){return null!=e&&"number"==typeof e?e:"x"==e?this.width():"y"==e?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},t.init(),t.ImagesLoaded=function(){for(var e=0;e<t.Images.length;e++)if(!t.Images[e].loaded)return!1;return!0},t.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},t.compressSpaces=function(e){return e.replace(/[\s\r\t\n]+/gm," ")},t.ajax=function(e){var t;return t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t?(t.open("GET",e,!1),t.send(null),t.responseText):null},t.parseXml=function(e){if(window.DOMParser){var t=new DOMParser;return t.parseFromString(e,"text/xml")}e=e.replace(/<!DOCTYPE svg[^>]*>/,"");var n=new ActiveXObject("Microsoft.XMLDOM");return n.async="false",n.loadXML(e),n},t.Property=function(e,t){this.name=e,this.value=t},t.Property.prototype.getValue=function(){return this.value},t.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},t.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var e=parseFloat(this.value);return(this.value+"").match(/%$/)&&(e/=100),e},t.Property.prototype.valueOrDefault=function(e){return this.hasValue()?this.value:e},t.Property.prototype.numValueOrDefault=function(e){return this.hasValue()?this.numValue():e},t.Property.prototype.addOpacity=function(n){var i=this.value;if(null!=n&&""!=n&&"string"==typeof this.value){var r=e.create(this.value);r.ok&&(i="rgba("+r.r+", "+r.g+", "+r.b+", "+n+")")}return new t.Property(this.name,i)},t.Property.prototype.getDefinition=function(){var e=this.value.match(/#([^\)']+)/);return e&&(e=e[1]),e||(e=this.value),t.Definitions[e]},t.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},t.Property.prototype.getFillStyleDefinition=function(e,n){var i=this.getDefinition();if(null!=i&&i.createGradient)return i.createGradient(t.ctx,e,n);if(null!=i&&i.createPattern){if(i.getHrefAttribute().hasValue()){var r=i.attribute("patternTransform");i=i.getHrefAttribute().getDefinition(),r.hasValue()&&(i.attribute("patternTransform",!0).value=r.value)}return i.createPattern(t.ctx,e)}return null},t.Property.prototype.getDPI=function(){return 96},t.Property.prototype.getEM=function(e){var n=12,i=new t.Property("fontSize",t.Font.Parse(t.ctx.font).fontSize);return i.hasValue()&&(n=i.toPixels(e)),n},t.Property.prototype.getUnits=function(){var e=this.value+"";return e.replace(/[0-9\.\-]/g,"")},t.Property.prototype.toPixels=function(e,n){if(!this.hasValue())return 0;var i=this.value+"";if(i.match(/em$/))return this.numValue()*this.getEM(e);if(i.match(/ex$/))return this.numValue()*this.getEM(e)/2;if(i.match(/px$/))return this.numValue();if(i.match(/pt$/))return this.numValue()*this.getDPI(e)*(1/72);if(i.match(/pc$/))return 15*this.numValue();if(i.match(/cm$/))return this.numValue()*this.getDPI(e)/2.54;if(i.match(/mm$/))return this.numValue()*this.getDPI(e)/25.4;if(i.match(/in$/))return this.numValue()*this.getDPI(e);if(i.match(/%$/))return this.numValue()*t.ViewPort.ComputeSize(e);var r=this.numValue();return n&&1>r?r*t.ViewPort.ComputeSize(e):r},t.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var e=this.value+"";return e.match(/s$/)?1e3*this.numValue():e.match(/ms$/)?this.numValue():this.numValue()},t.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var e=this.value+"";return e.match(/deg$/)?this.numValue()*(Math.PI/180):e.match(/grad$/)?this.numValue()*(Math.PI/200):e.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},t.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(e,n,i,r,o,a){var s=null!=a?this.Parse(a):this.CreateFont("","","","","",t.ctx.font);return{fontFamily:o||s.fontFamily,fontSize:r||s.fontSize,fontStyle:e||s.fontStyle,fontWeight:i||s.fontWeight,fontVariant:n||s.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var e=this;this.Parse=function(n){for(var i={},r=t.trim(t.compressSpaces(n||"")).split(" "),o={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},a="",s=0;s<r.length;s++)o.fontStyle||-1==e.Styles.indexOf(r[s])?o.fontVariant||-1==e.Variants.indexOf(r[s])?o.fontWeight||-1==e.Weights.indexOf(r[s])?o.fontSize?"inherit"!=r[s]&&(a+=r[s]):("inherit"!=r[s]&&(i.fontSize=r[s].split("/")[0]),o.fontStyle=o.fontVariant=o.fontWeight=o.fontSize=!0):("inherit"!=r[s]&&(i.fontWeight=r[s]),o.fontStyle=o.fontVariant=o.fontWeight=!0):("inherit"!=r[s]&&(i.fontVariant=r[s]),o.fontStyle=o.fontVariant=!0):("inherit"!=r[s]&&(i.fontStyle=r[s]),o.fontStyle=!0);return""!=a&&(i.fontFamily=a),i}},t.ToNumberArray=function(e){for(var n=t.trim(t.compressSpaces((e||"").replace(/,/g," "))).split(" "),i=0;i<n.length;i++)n[i]=parseFloat(n[i]);return n},t.Point=function(e,t){this.x=e,this.y=t},t.Point.prototype.angleTo=function(e){return Math.atan2(e.y-this.y,e.x-this.x)},t.Point.prototype.applyTransform=function(e){var t=this.x*e[0]+this.y*e[2]+e[4],n=this.x*e[1]+this.y*e[3]+e[5];this.x=t,this.y=n},t.CreatePoint=function(e){var n=t.ToNumberArray(e);return new t.Point(n[0],n[1])},t.CreatePath=function(e){for(var n=t.ToNumberArray(e),i=[],r=0;r<n.length;r+=2)i.push(new t.Point(n[r],n[r+1]));return i},t.BoundingBox=function(e,t,n,i){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(e,t){null!=e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),null!=t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},this.addX=function(e){this.addPoint(e,null)},this.addY=function(e){this.addPoint(null,e)},this.addBoundingBox=function(e){this.addPoint(e.x1,e.y1),this.addPoint(e.x2,e.y2)},this.addQuadraticCurve=function(e,t,n,i,r,o){var a=e+2/3*(n-e),s=t+2/3*(i-t),l=a+1/3*(r-e),u=s+1/3*(o-t);this.addBezierCurve(e,t,a,l,s,u,r,o)},this.addBezierCurve=function(e,t,n,i,r,o,a,s){var l=[e,t],u=[n,i],c=[r,o],d=[a,s];this.addPoint(l[0],l[1]),this.addPoint(d[0],d[1]);for(var h=0;1>=h;h++){var f=function(e){return Math.pow(1-e,3)*l[h]+3*Math.pow(1-e,2)*e*u[h]+3*(1-e)*Math.pow(e,2)*c[h]+Math.pow(e,3)*d[h]},p=6*l[h]-12*u[h]+6*c[h],g=-3*l[h]+9*u[h]-9*c[h]+3*d[h],m=3*u[h]-3*l[h];if(0!=g){var v=Math.pow(p,2)-4*m*g;if(!(0>v)){var y=(-p+Math.sqrt(v))/(2*g);y>0&&1>y&&(0==h&&this.addX(f(y)),1==h&&this.addY(f(y)));var b=(-p-Math.sqrt(v))/(2*g);b>0&&1>b&&(0==h&&this.addX(f(b)),1==h&&this.addY(f(b)))}}else{if(0==p)continue;var _=-m/p;_>0&&1>_&&(0==h&&this.addX(f(_)),1==h&&this.addY(f(_)))}}},this.isPointInBox=function(e,t){return this.x1<=e&&e<=this.x2&&this.y1<=t&&t<=this.y2},this.addPoint(e,t),this.addPoint(n,i)},t.Transform=function(e){var n=this;this.Type={},this.Type.translate=function(e){this.p=t.CreatePoint(e),this.apply=function(e){e.translate(this.p.x||0,this.p.y||0)},this.unapply=function(e){e.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(e){e.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(e){var n=t.ToNumberArray(e);this.angle=new t.Property("angle",n[0]),this.cx=n[1]||0,this.cy=n[2]||0,this.apply=function(e){e.translate(this.cx,this.cy),e.rotate(this.angle.toRadians()),e.translate(-this.cx,-this.cy)},this.unapply=function(e){e.translate(this.cx,this.cy),e.rotate(-1*this.angle.toRadians()),e.translate(-this.cx,-this.cy)},this.applyToPoint=function(e){var t=this.angle.toRadians();e.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),e.applyTransform([Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0]),e.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(e){this.p=t.CreatePoint(e),this.apply=function(e){e.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(e){e.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(e){e.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(e){this.m=t.ToNumberArray(e),this.apply=function(e){e.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.applyToPoint=function(e){e.applyTransform(this.m)}},this.Type.SkewBase=function(e){this.base=n.Type.matrix,this.base(e),this.angle=new t.Property("angle",e)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(e){this.base=n.Type.SkewBase,this.base(e),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(e){this.base=n.Type.SkewBase,this.base(e),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(e){for(var t=0;t<this.transforms.length;t++)this.transforms[t].apply(e)},this.unapply=function(e){for(var t=this.transforms.length-1;t>=0;t--)this.transforms[t].unapply(e)},this.applyToPoint=function(e){for(var t=0;t<this.transforms.length;t++)this.transforms[t].applyToPoint(e)};for(var i=t.trim(t.compressSpaces(e)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),r=0;r<i.length;r++){var o=t.trim(i[r].split("(")[0]),a=i[r].split("(")[1].replace(")",""),s=new this.Type[o](a);s.type=o,this.transforms.push(s)}},t.AspectRatio=function(e,n,i,r,o,a,s,l,u,c){n=t.compressSpaces(n),n=n.replace(/^defer\s/,"");var d=n.split(" ")[0]||"xMidYMid",h=n.split(" ")[1]||"meet",f=i/r,p=o/a,g=Math.min(f,p),m=Math.max(f,p);"meet"==h&&(r*=g,a*=g),"slice"==h&&(r*=m,a*=m),u=new t.Property("refX",u),c=new t.Property("refY",c),u.hasValue()&&c.hasValue()?e.translate(-g*u.toPixels("x"),-g*c.toPixels("y")):(d.match(/^xMid/)&&("meet"==h&&g==p||"slice"==h&&m==p)&&e.translate(i/2-r/2,0),d.match(/YMid$/)&&("meet"==h&&g==f||"slice"==h&&m==f)&&e.translate(0,o/2-a/2),d.match(/^xMax/)&&("meet"==h&&g==p||"slice"==h&&m==p)&&e.translate(i-r,0),d.match(/YMax$/)&&("meet"==h&&g==f||"slice"==h&&m==f)&&e.translate(0,o-a)),"none"==d?e.scale(f,p):"meet"==h?e.scale(g,g):"slice"==h&&e.scale(m,m),e.translate(null==s?0:-s,null==l?0:-l)},t.Element={},t.EmptyProperty=new t.Property("EMPTY",""),t.Element.ElementBase=function(e){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(e,n){var i=this.attributes[e];return null!=i?i:(1==n&&(i=new t.Property(e,""),this.attributes[e]=i),i||t.EmptyProperty)},this.getHrefAttribute=function(){for(var e in this.attributes)if(e.match(/:href$/))return this.attributes[e];return t.EmptyProperty},this.style=function(e,n){var i=this.styles[e];if(null!=i)return i;var r=this.attribute(e);if(null!=r&&r.hasValue())return this.styles[e]=r,r;var o=this.parent;if(null!=o){var a=o.style(e);if(null!=a&&a.hasValue())return a}return 1==n&&(i=new t.Property(e,""),this.styles[e]=i),i||t.EmptyProperty},this.render=function(e){if("none"!=this.style("display").value&&"hidden"!=this.attribute("visibility").value){if(e.save(),this.attribute("mask").hasValue()){var t=this.attribute("mask").getDefinition();null!=t&&t.apply(e,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();null!=n&&n.apply(e,this)}else this.setContext(e),this.renderChildren(e),this.clearContext(e);e.restore()}},this.setContext=function(){},this.clearContext=function(){},this.renderChildren=function(e){for(var t=0;t<this.children.length;t++)this.children[t].render(e)},this.addChild=function(e,n){var i=e;n&&(i=t.CreateElement(e)),i.parent=this,this.children.push(i)},null!=e&&1==e.nodeType){for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];if(1==i.nodeType&&this.addChild(i,!0),this.captureTextNodes&&3==i.nodeType){var r=i.nodeValue||i.text||"";""!=t.trim(t.compressSpaces(r))&&this.addChild(new t.Element.tspan(i),!1)}}for(var n=0;n<e.attributes.length;n++){var o=e.attributes[n];this.attributes[o.nodeName]=new t.Property(o.nodeName,o.value)}var a=t.Styles[e.nodeName];if(null!=a)for(var s in a)this.styles[s]=a[s];if(this.attribute("class").hasValue())for(var l=t.compressSpaces(this.attribute("class").value).split(" "),u=0;u<l.length;u++){if(a=t.Styles["."+l[u]],null!=a)for(var s in a)this.styles[s]=a[s];if(a=t.Styles[e.nodeName+"."+l[u]],null!=a)for(var s in a)this.styles[s]=a[s]}if(this.attribute("id").hasValue()){var a=t.Styles["#"+this.attribute("id").value];if(null!=a)for(var s in a)this.styles[s]=a[s]}if(this.attribute("style").hasValue())for(var a=this.attribute("style").value.split(";"),n=0;n<a.length;n++)if(""!=t.trim(a[n])){var c=a[n].split(":"),s=t.trim(c[0]),d=t.trim(c[1]);this.styles[s]=new t.Property(s,d)}this.attribute("id").hasValue()&&null==t.Definitions[this.attribute("id").value]&&(t.Definitions[this.attribute("id").value]=this)}},t.Element.RenderedElementBase=function(e){this.base=t.Element.ElementBase,this.base(e),this.setContext=function(e){if(this.style("fill").isUrlDefinition()){var n=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=n&&(e.fillStyle=n)}else if(this.style("fill").hasValue()){var i=this.style("fill");"currentColor"==i.value&&(i.value=this.style("color").value),e.fillStyle="none"==i.value?"rgba(0,0,0,0)":i.value}if(this.style("fill-opacity").hasValue()){var i=new t.Property("fill",e.fillStyle);i=i.addOpacity(this.style("fill-opacity").value),e.fillStyle=i.value}if(this.style("stroke").isUrlDefinition()){var n=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=n&&(e.strokeStyle=n)}else if(this.style("stroke").hasValue()){var r=this.style("stroke");"currentColor"==r.value&&(r.value=this.style("color").value),e.strokeStyle="none"==r.value?"rgba(0,0,0,0)":r.value}if(this.style("stroke-opacity").hasValue()){var r=new t.Property("stroke",e.strokeStyle);r=r.addOpacity(this.style("stroke-opacity").value),e.strokeStyle=r.value}if(this.style("stroke-width").hasValue()){var o=this.style("stroke-width").toPixels();e.lineWidth=0==o?.001:o}if(this.style("stroke-linecap").hasValue()&&(e.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(e.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(e.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()){var a=t.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof e.setLineDash?e.setLineDash(a):"undefined"!=typeof e.webkitLineDash?e.webkitLineDash=a:"undefined"!=typeof e.mozDash&&(e.mozDash=a);var s=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof e.lineDashOffset?e.lineDashOffset=s:"undefined"!=typeof e.webkitLineDashOffset?e.webkitLineDashOffset=s:"undefined"!=typeof e.mozDashOffset&&(e.mozDashOffset=s)}if("undefined"!=typeof e.font&&(e.font=t.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue()){var l=new t.Transform(this.attribute("transform").value);l.apply(e)}if(this.attribute("clip-path").hasValue()){var u=this.attribute("clip-path").getDefinition();null!=u&&u.apply(e)}this.style("opacity").hasValue()&&(e.globalAlpha=this.style("opacity").numValue())}},t.Element.RenderedElementBase.prototype=new t.Element.ElementBase,t.Element.PathElementBase=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.path=function(e){return null!=e&&e.beginPath(),new t.BoundingBox},this.renderChildren=function(e){this.path(e),t.Mouse.checkPath(this,e),""!=e.fillStyle&&(this.attribute("fill-rule").hasValue()?e.fill(this.attribute("fill-rule").value):e.fill()),""!=e.strokeStyle&&e.stroke();var n=this.getMarkers();if(null!=n){if(this.style("marker-start").isUrlDefinition()){var i=this.style("marker-start").getDefinition();i.render(e,n[0][0],n[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var i=this.style("marker-mid").getDefinition(),r=1;r<n.length-1;r++)i.render(e,n[r][0],n[r][1]);if(this.style("marker-end").isUrlDefinition()){var i=this.style("marker-end").getDefinition();i.render(e,n[n.length-1][0],n[n.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},t.Element.PathElementBase.prototype=new t.Element.RenderedElementBase,t.Element.svg=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseClearContext=this.clearContext,this.clearContext=function(e){this.baseClearContext(e),t.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,this.baseSetContext(e),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),e.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var n=t.ViewPort.width(),i=t.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){n=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");var r=0,o=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(r=-this.attribute("refX").toPixels("x"),o=-this.attribute("refY").toPixels("y")),e.beginPath(),e.moveTo(r,o),e.lineTo(n,o),e.lineTo(n,i),e.lineTo(r,i),e.closePath(),e.clip()}if(t.ViewPort.SetCurrent(n,i),this.attribute("viewBox").hasValue()){var a=t.ToNumberArray(this.attribute("viewBox").value),s=a[0],l=a[1];n=a[2],i=a[3],t.AspectRatio(e,this.attribute("preserveAspectRatio").value,t.ViewPort.width(),n,t.ViewPort.height(),i,s,l,this.attribute("refX").value,this.attribute("refY").value),t.ViewPort.RemoveCurrent(),t.ViewPort.SetCurrent(a[2],a[3])}}},t.Element.svg.prototype=new t.Element.RenderedElementBase,t.Element.rect=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var n=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y"),a=this.attribute("rx").toPixels("x"),s=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(s=a),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(a=s),a=Math.min(a,r/2),s=Math.min(s,o/2),null!=e&&(e.beginPath(),e.moveTo(n+a,i),e.lineTo(n+r-a,i),e.quadraticCurveTo(n+r,i,n+r,i+s),e.lineTo(n+r,i+o-s),e.quadraticCurveTo(n+r,i+o,n+r-a,i+o),e.lineTo(n+a,i+o),e.quadraticCurveTo(n,i+o,n,i+o-s),e.lineTo(n,i+s),e.quadraticCurveTo(n,i,n+a,i),e.closePath()),new t.BoundingBox(n,i,n+r,i+o)}},t.Element.rect.prototype=new t.Element.PathElementBase,t.Element.circle=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var n=this.attribute("cx").toPixels("x"),i=this.attribute("cy").toPixels("y"),r=this.attribute("r").toPixels();return null!=e&&(e.beginPath(),e.arc(n,i,r,0,2*Math.PI,!0),e.closePath()),new t.BoundingBox(n-r,i-r,n+r,i+r)}},t.Element.circle.prototype=new t.Element.PathElementBase,t.Element.ellipse=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var n=4*((Math.sqrt(2)-1)/3),i=this.attribute("rx").toPixels("x"),r=this.attribute("ry").toPixels("y"),o=this.attribute("cx").toPixels("x"),a=this.attribute("cy").toPixels("y");return null!=e&&(e.beginPath(),e.moveTo(o,a-r),e.bezierCurveTo(o+n*i,a-r,o+i,a-n*r,o+i,a),e.bezierCurveTo(o+i,a+n*r,o+n*i,a+r,o,a+r),e.bezierCurveTo(o-n*i,a+r,o-i,a+n*r,o-i,a),e.bezierCurveTo(o-i,a-n*r,o-n*i,a-r,o,a-r),e.closePath()),new t.BoundingBox(o-i,a-r,o+i,a+r)}},t.Element.ellipse.prototype=new t.Element.PathElementBase,t.Element.line=function(e){this.base=t.Element.PathElementBase,this.base(e),this.getPoints=function(){return[new t.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new t.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(e){var n=this.getPoints();return null!=e&&(e.beginPath(),e.moveTo(n[0].x,n[0].y),e.lineTo(n[1].x,n[1].y)),new t.BoundingBox(n[0].x,n[0].y,n[1].x,n[1].y)},this.getMarkers=function(){var e=this.getPoints(),t=e[0].angleTo(e[1]);return[[e[0],t],[e[1],t]]}},t.Element.line.prototype=new t.Element.PathElementBase,t.Element.polyline=function(e){this.base=t.Element.PathElementBase,this.base(e),this.points=t.CreatePath(this.attribute("points").value),this.path=function(e){var n=new t.BoundingBox(this.points[0].x,this.points[0].y);null!=e&&(e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y));for(var i=1;i<this.points.length;i++)n.addPoint(this.points[i].x,this.points[i].y),null!=e&&e.lineTo(this.points[i].x,this.points[i].y);return n},this.getMarkers=function(){for(var e=[],t=0;t<this.points.length-1;t++)e.push([this.points[t],this.points[t].angleTo(this.points[t+1])]);return e.push([this.points[this.points.length-1],e[e.length-1][1]]),e}},t.Element.polyline.prototype=new t.Element.PathElementBase,t.Element.polygon=function(e){this.base=t.Element.polyline,this.base(e),this.basePath=this.path,this.path=function(e){var t=this.basePath(e);return null!=e&&(e.lineTo(this.points[0].x,this.points[0].y),e.closePath()),t}},t.Element.polygon.prototype=new t.Element.polyline,t.Element.path=function(e){this.base=t.Element.PathElementBase,this.base(e);var n=this.attribute("d").value;n=n.replace(/,/gm," "),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),n=n.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([0-9])([+\-])/gm,"$1 $2"),n=n.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),n=n.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),n=t.compressSpaces(n),n=t.trim(n),this.PathParser=new function(e){this.tokens=e.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new t.Point(0,0),this.control=new t.Point(0,0),this.current=new t.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var e=new t.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(e)},this.getAsControlPoint=function(){var e=this.getPoint();return this.control=e,e},this.getAsCurrentPoint=function(){var e=this.getPoint();return this.current=e,e},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var e=new t.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return e},this.makeAbsolute=function(e){return this.isRelativeCommand()&&(e.x+=this.current.x,e.y+=this.current.y),e},this.addMarker=function(e,t,n){null!=n&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)),this.addMarkerAngle(e,null==t?null:t.angleTo(e))},this.addMarkerAngle=function(e,t){this.points.push(e),this.angles.push(t)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var e=0;e<this.angles.length;e++)if(null==this.angles[e])for(var t=e+1;t<this.angles.length;t++)if(null!=this.angles[t]){this.angles[e]=this.angles[t];break}return this.angles}}(n),this.path=function(e){var n=this.PathParser;n.reset();var i=new t.BoundingBox;for(null!=e&&e.beginPath();!n.isEnd();)switch(n.nextCommand(),n.command){case"M":case"m":var r=n.getAsCurrentPoint();for(n.addMarker(r),i.addPoint(r.x,r.y),null!=e&&e.moveTo(r.x,r.y),n.start=n.current;!n.isCommandOrEnd();){var r=n.getAsCurrentPoint();n.addMarker(r,n.start),i.addPoint(r.x,r.y),null!=e&&e.lineTo(r.x,r.y)}break;case"L":case"l":for(;!n.isCommandOrEnd();){var o=n.current,r=n.getAsCurrentPoint();n.addMarker(r,o),i.addPoint(r.x,r.y),null!=e&&e.lineTo(r.x,r.y)}break;case"H":case"h":for(;!n.isCommandOrEnd();){var a=new t.Point((n.isRelativeCommand()?n.current.x:0)+n.getScalar(),n.current.y);n.addMarker(a,n.current),n.current=a,i.addPoint(n.current.x,n.current.y),null!=e&&e.lineTo(n.current.x,n.current.y)}break;case"V":case"v":for(;!n.isCommandOrEnd();){var a=new t.Point(n.current.x,(n.isRelativeCommand()?n.current.y:0)+n.getScalar());n.addMarker(a,n.current),n.current=a,i.addPoint(n.current.x,n.current.y),null!=e&&e.lineTo(n.current.x,n.current.y)}break;case"C":case"c":for(;!n.isCommandOrEnd();){var s=n.current,l=n.getPoint(),u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,l),i.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,c.x,c.y),null!=e&&e.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y)}break;case"S":case"s":for(;!n.isCommandOrEnd();){var s=n.current,l=n.getReflectedControlPoint(),u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,l),i.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,c.x,c.y),null!=e&&e.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y)}break;case"Q":case"q":for(;!n.isCommandOrEnd();){var s=n.current,u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,u),i.addQuadraticCurve(s.x,s.y,u.x,u.y,c.x,c.y),null!=e&&e.quadraticCurveTo(u.x,u.y,c.x,c.y)}break;case"T":case"t":for(;!n.isCommandOrEnd();){var s=n.current,u=n.getReflectedControlPoint();n.control=u;var c=n.getAsCurrentPoint();n.addMarker(c,u,u),i.addQuadraticCurve(s.x,s.y,u.x,u.y,c.x,c.y),null!=e&&e.quadraticCurveTo(u.x,u.y,c.x,c.y)}break;case"A":case"a":for(;!n.isCommandOrEnd();){var s=n.current,d=n.getScalar(),h=n.getScalar(),f=n.getScalar()*(Math.PI/180),p=n.getScalar(),g=n.getScalar(),c=n.getAsCurrentPoint(),m=new t.Point(Math.cos(f)*(s.x-c.x)/2+Math.sin(f)*(s.y-c.y)/2,-Math.sin(f)*(s.x-c.x)/2+Math.cos(f)*(s.y-c.y)/2),v=Math.pow(m.x,2)/Math.pow(d,2)+Math.pow(m.y,2)/Math.pow(h,2);v>1&&(d*=Math.sqrt(v),h*=Math.sqrt(v));var y=(p==g?-1:1)*Math.sqrt((Math.pow(d,2)*Math.pow(h,2)-Math.pow(d,2)*Math.pow(m.y,2)-Math.pow(h,2)*Math.pow(m.x,2))/(Math.pow(d,2)*Math.pow(m.y,2)+Math.pow(h,2)*Math.pow(m.x,2)));isNaN(y)&&(y=0);var b=new t.Point(y*d*m.y/h,y*-h*m.x/d),_=new t.Point((s.x+c.x)/2+Math.cos(f)*b.x-Math.sin(f)*b.y,(s.y+c.y)/2+Math.sin(f)*b.x+Math.cos(f)*b.y),x=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},w=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(x(e)*x(t))},C=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(w(e,t))},T=C([1,0],[(m.x-b.x)/d,(m.y-b.y)/h]),E=[(m.x-b.x)/d,(m.y-b.y)/h],S=[(-m.x-b.x)/d,(-m.y-b.y)/h],k=C(E,S);w(E,S)<=-1&&(k=Math.PI),w(E,S)>=1&&(k=0);var A=1-g?1:-1,M=T+A*(k/2),N=new t.Point(_.x+d*Math.cos(M),_.y+h*Math.sin(M));if(n.addMarkerAngle(N,M-A*Math.PI/2),n.addMarkerAngle(c,M-A*Math.PI),i.addPoint(c.x,c.y),null!=e){var w=d>h?d:h,D=d>h?1:d/h,P=d>h?h/d:1;e.translate(_.x,_.y),e.rotate(f),e.scale(D,P),e.arc(0,0,w,T,T+k,1-g),e.scale(1/D,1/P),e.rotate(-f),e.translate(-_.x,-_.y)}}break;case"Z":case"z":null!=e&&e.closePath(),n.current=n.start}return i},this.getMarkers=function(){for(var e=this.PathParser.getMarkerPoints(),t=this.PathParser.getMarkerAngles(),n=[],i=0;i<e.length;i++)n.push([e[i],t[i]]);return n}},t.Element.path.prototype=new t.Element.PathElementBase,t.Element.pattern=function(e){this.base=t.Element.ElementBase,this.base(e),this.createPattern=function(e){var i=this.attribute("width").toPixels("x",!0),r=this.attribute("height").toPixels("y",!0),o=new t.Element.svg;o.attributes.viewBox=new t.Property("viewBox",this.attribute("viewBox").value),o.attributes.width=new t.Property("width",i+"px"),o.attributes.height=new t.Property("height",r+"px"),o.attributes.transform=new t.Property("transform",this.attribute("patternTransform").value),o.children=this.children;var a=n().createElement("canvas");a.width=i,a.height=r;var s=a.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&s.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var l=-1;1>=l;l++)for(var u=-1;1>=u;u++)s.save(),s.translate(l*a.width,u*a.height),o.render(s),s.restore();var c=e.createPattern(a,"repeat");return c}},t.Element.pattern.prototype=new t.Element.ElementBase,t.Element.marker=function(e){this.base=t.Element.ElementBase,this.base(e),this.baseRender=this.render,this.render=function(e,n,i){e.translate(n.x,n.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(i),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(e.lineWidth,e.lineWidth),e.save();var r=new t.Element.svg;r.attributes.viewBox=new t.Property("viewBox",this.attribute("viewBox").value),r.attributes.refX=new t.Property("refX",this.attribute("refX").value),r.attributes.refY=new t.Property("refY",this.attribute("refY").value),r.attributes.width=new t.Property("width",this.attribute("markerWidth").value),r.attributes.height=new t.Property("height",this.attribute("markerHeight").value),r.attributes.fill=new t.Property("fill",this.attribute("fill").valueOrDefault("black")),r.attributes.stroke=new t.Property("stroke",this.attribute("stroke").valueOrDefault("none")),r.children=this.children,r.render(e),e.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(1/e.lineWidth,1/e.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(-i),e.translate(-n.x,-n.y)}},t.Element.marker.prototype=new t.Element.ElementBase,t.Element.defs=function(e){this.base=t.Element.ElementBase,this.base(e),this.render=function(){}},t.Element.defs.prototype=new t.Element.ElementBase,t.Element.GradientBase=function(e){this.base=t.Element.ElementBase,this.base(e),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[];for(var i=0;i<this.children.length;i++){var r=this.children[i];"stop"==r.type&&this.stops.push(r)}this.getGradient=function(){},this.createGradient=function(e,i,r){var o=this;this.getHrefAttribute().hasValue()&&(o=this.getHrefAttribute().getDefinition());var a=function(e){if(r.hasValue()){var n=new t.Property("color",e);return n.addOpacity(r.value).value}return e},s=this.getGradient(e,i);if(null==s)return a(o.stops[o.stops.length-1].color);for(var l=0;l<o.stops.length;l++)s.addColorStop(o.stops[l].offset,a(o.stops[l].color));if(this.attribute("gradientTransform").hasValue()){var u=t.ViewPort.viewPorts[0],c=new t.Element.rect;c.attributes.x=new t.Property("x",-t.MAX_VIRTUAL_PIXELS/3),c.attributes.y=new t.Property("y",-t.MAX_VIRTUAL_PIXELS/3),c.attributes.width=new t.Property("width",t.MAX_VIRTUAL_PIXELS),c.attributes.height=new t.Property("height",t.MAX_VIRTUAL_PIXELS);var d=new t.Element.g;
d.attributes.transform=new t.Property("transform",this.attribute("gradientTransform").value),d.children=[c];var h=new t.Element.svg;h.attributes.x=new t.Property("x",0),h.attributes.y=new t.Property("y",0),h.attributes.width=new t.Property("width",u.width),h.attributes.height=new t.Property("height",u.height),h.children=[d];var f=n().createElement("canvas");f.width=u.width,f.height=u.height;var p=f.getContext("2d");return p.fillStyle=s,h.render(p),p.createPattern(f,"no-repeat")}return s}},t.Element.GradientBase.prototype=new t.Element.ElementBase,t.Element.linearGradient=function(e){this.base=t.Element.GradientBase,this.base(e),this.getGradient=function(e,t){var n=t.getBoundingBox();this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var i="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),r="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),o="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),a="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return i==o&&r==a?null:e.createLinearGradient(i,r,o,a)}},t.Element.linearGradient.prototype=new t.Element.GradientBase,t.Element.radialGradient=function(e){this.base=t.Element.GradientBase,this.base(e),this.getGradient=function(e,t){var n=t.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var i="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),r="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),o=i,a=r;this.attribute("fx").hasValue()&&(o="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(a="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var s="objectBoundingBox"==this.gradientUnits?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return e.createRadialGradient(o,a,0,i,r,s)}},t.Element.radialGradient.prototype=new t.Element.GradientBase,t.Element.stop=function(e){this.base=t.Element.ElementBase,this.base(e),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var n=this.style("stop-color");this.style("stop-opacity").hasValue()&&(n=n.addOpacity(this.style("stop-opacity").value)),this.color=n.value},t.Element.stop.prototype=new t.Element.ElementBase,t.Element.AnimateBase=function(e){this.base=t.Element.ElementBase,this.base(e),t.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var e=this.attribute("attributeType").value,t=this.attribute("attributeName").value;return"CSS"==e?this.parent.style(t,!0):this.parent.attribute(t,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(e){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"!=this.attribute("repeatCount").value&&"indefinite"!=this.attribute("repeatDur").value)return"remove"!=this.attribute("fill").valueOrDefault("remove")||this.removed?!1:(this.removed=!0,this.getProperty().value=this.initialValue,!0);this.duration=0}this.duration=this.duration+e;var t=!1;if(this.begin<this.duration){var n=this.calcValue();if(this.attribute("type").hasValue()){var i=this.attribute("type").value;n=i+"("+n+")"}this.getProperty().value=n,t=!0}return t},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var e={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var n=e.progress*(this.values.value.length-1),i=Math.floor(n),r=Math.ceil(n);e.from=new t.Property("from",parseFloat(this.values.value[i])),e.to=new t.Property("to",parseFloat(this.values.value[r])),e.progress=(n-i)/(r-i)}else e.from=this.from,e.to=this.to;return e}},t.Element.AnimateBase.prototype=new t.Element.ElementBase,t.Element.animate=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){var e=this.progress(),t=e.from.numValue()+(e.to.numValue()-e.from.numValue())*e.progress;return t+this.initialUnits}},t.Element.animate.prototype=new t.Element.AnimateBase,t.Element.animateColor=function(n){this.base=t.Element.AnimateBase,this.base(n),this.calcValue=function(){var t=this.progress(),n=e.create(t.from.value),i=e.create(t.to.value);if(n.ok&&i.ok){var r=n.r+(i.r-n.r)*t.progress,o=n.g+(i.g-n.g)*t.progress,a=n.b+(i.b-n.b)*t.progress;return"rgb("+parseInt(r,10)+","+parseInt(o,10)+","+parseInt(a,10)+")"}return this.attribute("from").value}},t.Element.animateColor.prototype=new t.Element.AnimateBase,t.Element.animateTransform=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){for(var e=this.progress(),n=t.ToNumberArray(e.from.value),i=t.ToNumberArray(e.to.value),r="",o=0;o<n.length;o++)r+=n[o]+(i[o]-n[o])*e.progress+" ";return r}},t.Element.animateTransform.prototype=new t.Element.animate,t.Element.font=function(e){this.base=t.Element.ElementBase,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"font-face"==i.type?(this.fontFace=i,i.style("font-family").hasValue()&&(t.Definitions[i.style("font-family").value]=this)):"missing-glyph"==i.type?this.missingGlyph=i:"glyph"==i.type&&(""!=i.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[i.unicode]&&(this.glyphs[i.unicode]=[]),this.glyphs[i.unicode][i.arabicForm]=i):this.glyphs[i.unicode]=i)}},t.Element.font.prototype=new t.Element.ElementBase,t.Element.fontface=function(e){this.base=t.Element.ElementBase,this.base(e),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},t.Element.fontface.prototype=new t.Element.ElementBase,t.Element.missingglyph=function(e){this.base=t.Element.path,this.base(e),this.horizAdvX=0},t.Element.missingglyph.prototype=new t.Element.path,t.Element.glyph=function(e){this.base=t.Element.path,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},t.Element.glyph.prototype=new t.Element.path,t.Element.text=function(e){this.captureTextNodes=!0,this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(e){this.baseSetContext(e),this.style("dominant-baseline").hasValue()&&(e.textBaseline=this.style("dominant-baseline").value),this.style("alignment-baseline").hasValue()&&(e.textBaseline=this.style("alignment-baseline").value)},this.getBoundingBox=function(){return new t.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)},this.renderChildren=function(e){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.x+=this.getAnchorDelta(e,this,0);for(var t=0;t<this.children.length;t++)this.renderChild(e,this,t)};var n=this.style("text-anchor").valueOrDefault("start");this.getAnchorDelta=function(e,t,i){if("start"!=n){for(var r=0,o=i;o<t.children.length;o++){var a=t.children[o];if(o>i&&a.attribute("x").hasValue())break;r+=a.measureTextRecursive(e)}return-1*("end"==n?r:r/2)}return 0},this.renderChild=function(e,t,n){var i=t.children[n];i.attribute("x").hasValue()?i.x=i.attribute("x").toPixels("x")+this.getAnchorDelta(e,t,n):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),i.attribute("dx").hasValue()&&(this.x+=i.attribute("dx").toPixels("x")),i.x=this.x),this.x=i.x+i.measureText(e),i.attribute("y").hasValue()?i.y=i.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),i.attribute("dy").hasValue()&&(this.y+=i.attribute("dy").toPixels("y")),i.y=this.y),this.y=i.y,i.render(e);for(var n=0;n<i.children.length;n++)this.renderChild(e,i,n)}},t.Element.text.prototype=new t.Element.RenderedElementBase,t.Element.TextElementBase=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.getGlyph=function(e,t,n){var i=t[n],r=null;if(e.isArabic){var o="isolated";(0==n||" "==t[n-1])&&n<t.length-2&&" "!=t[n+1]&&(o="terminal"),n>0&&" "!=t[n-1]&&n<t.length-2&&" "!=t[n+1]&&(o="medial"),n>0&&" "!=t[n-1]&&(n==t.length-1||" "==t[n+1])&&(o="initial"),"undefined"!=typeof e.glyphs[i]&&(r=e.glyphs[i][o],null==r&&"glyph"==e.glyphs[i].type&&(r=e.glyphs[i]))}else r=e.glyphs[i];return null==r&&(r=e.missingGlyph),r},this.renderChildren=function(e){var n=this.parent.style("font-family").getDefinition();if(null==n)""!=e.fillStyle&&e.fillText(t.compressSpaces(this.getText()),this.x,this.y),""!=e.strokeStyle&&e.strokeText(t.compressSpaces(this.getText()),this.x,this.y);else{var i=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize),r=this.parent.style("font-style").valueOrDefault(t.Font.Parse(t.ctx.font).fontStyle),o=this.getText();n.isRTL&&(o=o.split("").reverse().join(""));for(var a=t.ToNumberArray(this.parent.attribute("dx").value),s=0;s<o.length;s++){var l=this.getGlyph(n,o,s),u=i/n.fontFace.unitsPerEm;e.translate(this.x,this.y),e.scale(u,-u);var c=e.lineWidth;e.lineWidth=e.lineWidth*n.fontFace.unitsPerEm/i,"italic"==r&&e.transform(1,0,.4,1,0,0),l.render(e),"italic"==r&&e.transform(1,0,-.4,1,0,0),e.lineWidth=c,e.scale(1/u,-1/u),e.translate(-this.x,-this.y),this.x+=i*(l.horizAdvX||n.horizAdvX)/n.fontFace.unitsPerEm,"undefined"==typeof a[s]||isNaN(a[s])||(this.x+=a[s])}}},this.getText=function(){},this.measureTextRecursive=function(e){for(var t=this.measureText(e),n=0;n<this.children.length;n++)t+=this.children[n].measureTextRecursive(e);return t},this.measureText=function(e){var n=this.parent.style("font-family").getDefinition();if(null!=n){var i=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize),r=0,o=this.getText();n.isRTL&&(o=o.split("").reverse().join(""));for(var a=t.ToNumberArray(this.parent.attribute("dx").value),s=0;s<o.length;s++){var l=this.getGlyph(n,o,s);r+=(l.horizAdvX||n.horizAdvX)*i/n.fontFace.unitsPerEm,"undefined"==typeof a[s]||isNaN(a[s])||(r+=a[s])}return r}var u=t.compressSpaces(this.getText());if(!e.measureText)return 10*u.length;e.save(),this.setContext(e);var c=e.measureText(u).width;return e.restore(),c}},t.Element.TextElementBase.prototype=new t.Element.RenderedElementBase,t.Element.tspan=function(e){this.captureTextNodes=!0,this.base=t.Element.TextElementBase,this.base(e),this.text=e.nodeValue||e.text||"",this.getText=function(){return this.text}},t.Element.tspan.prototype=new t.Element.TextElementBase,t.Element.tref=function(e){this.base=t.Element.TextElementBase,this.base(e),this.getText=function(){var e=this.getHrefAttribute().getDefinition();return null!=e?e.children[0].getText():void 0}},t.Element.tref.prototype=new t.Element.TextElementBase,t.Element.a=function(e){this.base=t.Element.TextElementBase,this.base(e),this.hasText=!0;for(var n=0;n<e.childNodes.length;n++)3!=e.childNodes[n].nodeType&&(this.hasText=!1);this.text=this.hasText?e.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(e){if(this.hasText){this.baseRenderChildren(e);var n=new t.Property("fontSize",t.Font.Parse(t.ctx.font).fontSize);t.Mouse.checkBoundingBox(this,new t.BoundingBox(this.x,this.y-n.toPixels("y"),this.x+this.measureText(e),this.y))}else{var i=new t.Element.g;i.children=this.children,i.parent=this,i.render(e)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){t.ctx.canvas.style.cursor="pointer"}},t.Element.a.prototype=new t.Element.TextElementBase,t.Element.image=function(e){this.base=t.Element.RenderedElementBase,this.base(e);var i=this.getHrefAttribute().value,r=i.match(/\.svg$/);if(t.Images.push(this),this.loaded=!1,r)this.img=t.ajax(i),this.loaded=!0;else{this.img=n().createElement("img");var o=this;this.img.onload=function(){o.loaded=!0},this.img.onerror=function(){"undefined"!=typeof console&&(console.log('ERROR: image "'+i+'" not found'),o.loaded=!0)},this.img.src=i}this.renderChildren=function(e){var n=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),o=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y");0!=o&&0!=a&&(e.save(),r?e.drawSvg(this.img,n,i,o,a):(e.translate(n,i),t.AspectRatio(e,this.attribute("preserveAspectRatio").value,o,this.img.width,a,this.img.height,0,0),e.drawImage(this.img,0,0)),e.restore())},this.getBoundingBox=function(){var e=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");return new t.BoundingBox(e,n,e+i,n+r)}},t.Element.image.prototype=new t.Element.RenderedElementBase,t.Element.g=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.getBoundingBox=function(){for(var e=new t.BoundingBox,n=0;n<this.children.length;n++)e.addBoundingBox(this.children[n].getBoundingBox());return e}},t.Element.g.prototype=new t.Element.RenderedElementBase,t.Element.symbol=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(e){if(this.baseSetContext(e),this.attribute("viewBox").hasValue()){var n=t.ToNumberArray(this.attribute("viewBox").value),i=n[0],r=n[1];width=n[2],height=n[3],t.AspectRatio(e,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,i,r),t.ViewPort.SetCurrent(n[2],n[3])}}},t.Element.symbol.prototype=new t.Element.RenderedElementBase,t.Element.style=function(e){this.base=t.Element.ElementBase,this.base(e);for(var n="",i=0;i<e.childNodes.length;i++)n+=e.childNodes[i].nodeValue;n=n.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),n=t.compressSpaces(n);for(var r=n.split("}"),i=0;i<r.length;i++)if(""!=t.trim(r[i]))for(var o=r[i].split("{"),a=o[0].split(","),s=o[1].split(";"),l=0;l<a.length;l++){var u=t.trim(a[l]);if(""!=u){for(var c={},d=0;d<s.length;d++){var h=s[d].indexOf(":"),f=s[d].substr(0,h),p=s[d].substr(h+1,s[d].length-h);null!=f&&null!=p&&(c[t.trim(f)]=new t.Property(t.trim(f),t.trim(p)))}if(t.Styles[u]=c,"@font-face"==u)for(var g=c["font-family"].value.replace(/"/g,""),m=c.src.value.split(","),v=0;v<m.length;v++)if(m[v].indexOf('format("svg")')>0)for(var y=m[v].indexOf("url"),b=m[v].indexOf(")",y),_=m[v].substr(y+5,b-y-6),x=t.parseXml(t.ajax(_)),w=x.getElementsByTagName("font"),C=0;C<w.length;C++){var T=t.CreateElement(w[C]);t.Definitions[g]=T}}}},t.Element.style.prototype=new t.Element.ElementBase,t.Element.use=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(e){this.baseSetContext(e),this.attribute("x").hasValue()&&e.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&e.translate(0,this.attribute("y").toPixels("y"))},this.getDefinition=function(){var e=this.getHrefAttribute().getDefinition();return this.attribute("width").hasValue()&&(e.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(e.attribute("height",!0).value=this.attribute("height").value),e},this.path=function(e){var t=this.getDefinition();null!=t&&t.path(e)},this.getBoundingBox=function(){var e=this.getDefinition();return null!=e?e.getBoundingBox():void 0},this.renderChildren=function(e){var t=this.getDefinition();if(null!=t){var n=t.parent;t.parent=null,t.render(e),t.parent=n}}},t.Element.use.prototype=new t.Element.RenderedElementBase,t.Element.mask=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(e,i){var r=this.attribute("x").toPixels("x"),o=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");if(0==a&&0==s){for(var l=new t.BoundingBox,u=0;u<this.children.length;u++)l.addBoundingBox(this.children[u].getBoundingBox());var r=Math.floor(l.x1),o=Math.floor(l.y1),a=Math.floor(l.width()),s=Math.floor(l.height())}var c=i.attribute("mask").value;i.attribute("mask").value="";var d=n().createElement("canvas");d.width=r+a,d.height=o+s;var h=d.getContext("2d");this.renderChildren(h);var f=n().createElement("canvas");f.width=r+a,f.height=o+s;var p=f.getContext("2d");i.render(p),p.globalCompositeOperation="destination-in",p.fillStyle=h.createPattern(d,"no-repeat"),p.fillRect(0,0,r+a,o+s),e.fillStyle=p.createPattern(f,"no-repeat"),e.fillRect(0,0,r+a,o+s),i.attribute("mask").value=c},this.render=function(){}},t.Element.mask.prototype=new t.Element.ElementBase,t.Element.clipPath=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(e){for(var n=0;n<this.children.length;n++){var i=this.children[n];if("undefined"!=typeof i.path){var r=null;i.attribute("transform").hasValue()&&(r=new t.Transform(i.attribute("transform").value),r.apply(e)),i.path(e),e.clip(),r&&r.unapply(e)}}},this.render=function(){}},t.Element.clipPath.prototype=new t.Element.ElementBase,t.Element.filter=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(e,t){var i=t.getBoundingBox(),r=Math.floor(i.x1),o=Math.floor(i.y1),a=Math.floor(i.width()),s=Math.floor(i.height()),l=t.style("filter").value;t.style("filter").value="";for(var u=0,c=0,d=0;d<this.children.length;d++){var h=this.children[d].extraFilterDistance||0;u=Math.max(u,h),c=Math.max(c,h)}var f=n().createElement("canvas");f.width=a+2*u,f.height=s+2*c;var p=f.getContext("2d");p.translate(-r+u,-o+c),t.render(p);for(var d=0;d<this.children.length;d++)this.children[d].apply(p,0,0,a+2*u,s+2*c);e.drawImage(f,0,0,a+2*u,s+2*c,r-u,o-c,a+2*u,s+2*c),t.style("filter",!0).value=l},this.render=function(){}},t.Element.filter.prototype=new t.Element.ElementBase,t.Element.feMorphology=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(){}},t.Element.feMorphology.prototype=new t.Element.ElementBase,t.Element.feColorMatrix=function(e){function n(e,t,n,i,r,o){return e[4*n*i+4*t+o]}function i(e,t,n,i,r,o,a){e[4*n*i+4*t+o]=a}this.base=t.Element.ElementBase,this.base(e),this.apply=function(e,t,r,o,a){for(var s=e.getImageData(0,0,o,a),r=0;a>r;r++)for(var t=0;o>t;t++){var l=n(s.data,t,r,o,a,0),u=n(s.data,t,r,o,a,1),c=n(s.data,t,r,o,a,2),d=(l+u+c)/3;i(s.data,t,r,o,a,0,d),i(s.data,t,r,o,a,1,d),i(s.data,t,r,o,a,2,d)}e.clearRect(0,0,o,a),e.putImageData(s,0,0)}},t.Element.feColorMatrix.prototype=new t.Element.ElementBase,t.Element.feGaussianBlur=function(e){this.base=t.Element.ElementBase,this.base(e),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(e,i,r,o,a){return"undefined"==typeof stackBlurCanvasRGBA?("undefined"!=typeof console&&console.log("ERROR: StackBlur.js must be included for blur to work"),void 0):(e.canvas.id=t.UniqueId(),e.canvas.style.display="none",n().body.appendChild(e.canvas),stackBlurCanvasRGBA(e.canvas.id,i,r,o,a,this.blurRadius),n().body.removeChild(e.canvas),void 0)}},t.Element.feGaussianBlur.prototype=new t.Element.ElementBase,t.Element.title=function(){},t.Element.title.prototype=new t.Element.ElementBase,t.Element.desc=function(){},t.Element.desc.prototype=new t.Element.ElementBase,t.Element.MISSING=function(e){"undefined"!=typeof console&&console.log("ERROR: Element '"+e.nodeName+"' not yet implemented.")},t.Element.MISSING.prototype=new t.Element.ElementBase,t.CreateElement=function(e){var n=e.nodeName.replace(/^[^:]+:/,"");n=n.replace(/\-/g,"");var i=null;return i="undefined"!=typeof t.Element[n]?new t.Element[n](e):new t.Element.MISSING(e),i.type=e.nodeName,i},t.load=function(e,n){t.loadXml(e,t.ajax(n))},t.loadXml=function(e,n){t.loadXmlDoc(e,t.parseXml(n))},t.loadXmlDoc=function(e,n){t.init(e);var i=function(t){for(var n=e.canvas;n;)t.x-=n.offsetLeft,t.y-=n.offsetTop,n=n.offsetParent;return window.scrollX&&(t.x+=window.scrollX),window.scrollY&&(t.y+=window.scrollY),t};1!=t.opts.ignoreMouse&&(e.canvas.onclick=function(e){var n=i(new t.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY));t.Mouse.onclick(n.x,n.y)},e.canvas.onmousemove=function(e){var n=i(new t.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY));t.Mouse.onmousemove(n.x,n.y)});var r=t.CreateElement(n.documentElement);r.root=!0;var o=!0,a=function(){t.ViewPort.Clear(),e.canvas.parentNode&&t.ViewPort.SetCurrent(e.canvas.parentNode.clientWidth,e.canvas.parentNode.clientHeight),1!=t.opts.ignoreDimensions&&(r.style("width").hasValue()&&(e.canvas.width=r.style("width").toPixels("x"),e.canvas.style.width=e.canvas.width+"px"),r.style("height").hasValue()&&(e.canvas.height=r.style("height").toPixels("y"),e.canvas.style.height=e.canvas.height+"px"));var i=e.canvas.clientWidth||e.canvas.width,a=e.canvas.clientHeight||e.canvas.height;if(1==t.opts.ignoreDimensions&&r.style("width").hasValue()&&r.style("height").hasValue()&&(i=r.style("width").toPixels("x"),a=r.style("height").toPixels("y")),t.ViewPort.SetCurrent(i,a),null!=t.opts.offsetX&&(r.attribute("x",!0).value=t.opts.offsetX),null!=t.opts.offsetY&&(r.attribute("y",!0).value=t.opts.offsetY),null!=t.opts.scaleWidth&&null!=t.opts.scaleHeight){var s=1,l=1,u=t.ToNumberArray(r.attribute("viewBox").value);r.attribute("width").hasValue()?s=r.attribute("width").toPixels("x")/t.opts.scaleWidth:isNaN(u[2])||(s=u[2]/t.opts.scaleWidth),r.attribute("height").hasValue()?l=r.attribute("height").toPixels("y")/t.opts.scaleHeight:isNaN(u[3])||(l=u[3]/t.opts.scaleHeight),r.attribute("width",!0).value=t.opts.scaleWidth,r.attribute("height",!0).value=t.opts.scaleHeight,r.attribute("viewBox",!0).value="0 0 "+i*s+" "+a*l,r.attribute("preserveAspectRatio",!0).value="none"}1!=t.opts.ignoreClear&&e.clearRect(0,0,i,a),r.render(e),o&&(o=!1,"function"==typeof t.opts.renderCallback&&t.opts.renderCallback(n))},s=!0;t.ImagesLoaded()&&(s=!1,a()),t.intervalID=setInterval(function(){var e=!1;if(s&&t.ImagesLoaded()&&(s=!1,e=!0),1!=t.opts.ignoreMouse&&(e|=t.Mouse.hasEvents()),1!=t.opts.ignoreAnimation)for(var n=0;n<t.Animations.length;n++)e|=t.Animations[n].update(1e3/t.FRAMERATE);"function"==typeof t.opts.forceRedraw&&1==t.opts.forceRedraw()&&(e=!0),e&&(a(),t.Mouse.runEvents())},1e3/t.FRAMERATE)},t.stop=function(){t.intervalID&&clearInterval(t.intervalID)},t.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(e,t){this.events.push({type:"onclick",x:e,y:t,run:function(e){e.onclick&&e.onclick()}})},this.onmousemove=function(e,t){this.events.push({type:"onmousemove",x:e,y:t,run:function(e){e.onmousemove&&e.onmousemove()}})},this.eventElements=[],this.checkPath=function(e,t){for(var n=0;n<this.events.length;n++){var i=this.events[n];t.isPointInPath&&t.isPointInPath(i.x,i.y)&&(this.eventElements[n]=e)}},this.checkBoundingBox=function(e,t){for(var n=0;n<this.events.length;n++){var i=this.events[n];t.isPointInBox(i.x,i.y)&&(this.eventElements[n]=e)}},this.runEvents=function(){t.ctx.canvas.style.cursor="";for(var e=0;e<this.events.length;e++)for(var n=this.events[e],i=this.eventElements[e];i;)n.run(i),i=i.parent;this.events=[],this.eventElements=[]}},t},a=function(e,t,n,i,r,a){o(e.canvas,t,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:n,offsetY:i,scaleWidth:r,scaleHeight:a})};var u={canvg:o,build:r,drawSvg:a};return u}),define("oven/unvetted/kernel/kernelDraw",["oven/unvetted/library/utility/mathUtil","oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelUtil","oven/3rdparty/canvg/canvg"],function(e,t,n,i){function r(e,t){return e||(e=new g.Image,e.src=t),e}function o(e,t,n,i,r){n||i||r?(m.beginPath(),m.moveTo(e,t)):m.lineTo(e,t)}function a(e,t,n){e&&m.fill(),t&&m.stroke(),n&&m.clip()}function s(e){return"x"in e&&"y"in e&&l(e.x)&&l(e.y)?T:e instanceof Array&&0 in e&&"x"in e[0]&&"y"in e[0]?p.geometryFormats.GEOMETRY_AOS:e instanceof Array&&0 in e&&l(e[0])?S:l(e)?k:void 0}function l(e){return e instanceof Array||e instanceof Float32Array}function u(e){return 0===m.lineWidth%2?.5+e<<0:Math.floor(e)+.5}function c(e,t){i.drawSvg(m,e,0,0,t,t)}function d(e,t,n,i,r){return void 0===r&&(r=.5),{x:r*n+(1-r)*e,y:r*i+(1-r)*t}}function h(e,t,n,i,r,o){var a,s,l,u,c,d,h,f,p={},g={};return p.x=e-2*n+r,p.y=t-2*i+o,g.x=2*n-2*e,g.y=2*i-2*t,a=4*(p.x*p.x+p.y*p.y),s=4*(p.x*g.x+p.y*g.y),l=g.x*g.x+g.y*g.y,f=2*Math.sqrt(a+s+l),u=Math.sqrt(a),c=2*a*u,h=2*Math.sqrt(l),d=s/u,(c*f+u*s*(f-h)+(4*l*a-s*s)*Math.log((2*u+d+f)/(d+h)))/(4*c)}function f(){if(!m)throw new Error("ERROR: kernelDraw.setupLineStyle() was called before setting a context");if(!m.setLineDash)return m.mozDash?(m.setLineDash=function(e){m.mozDash=e},void 0):m.webkitLineDash?(m.setLineDash=function(e){m.webkitLineDash=e},void 0):(m.setLineDash=function(){},void 0)}var p,g,m,v,y,b=1024,_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAQACAYAAAAgBjM/AAAAAXNSR0IArs4c6QAAACpJREFUWMPtyLENAAAIAyDj4/Z0Z18wMFJJputyzjnnnHPOOeecc869uAVFhgEf83TLswAAAABJRU5ErkJggg==",x=1280,w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABQAAAAABCAYAAACBgAP1AAAAAXNSR0IArs4c6QAAAChJREFUWMPtxzERADAIADGc89JZqqKXbJlqq53H3d3d3d3d3d3d//kBeoH9vZqhh90AAAAASUVORK5CYII=",C=2*Math.PI,T=1,E=2,S=3,k=4,A={None:0,Circle:1,GradientCircle:2,Triangle:3,Diamond:4,Square:5,Cross:6,Plus:7,Star:8,Dart:9,L:10,M:11,S:12,Lozenge:13,Kite:14,Bowtie:15,SVGIcon:16};return p={geometryFormats:{GEOMETRY_SOA:T,GEOMETRY_AOS:E,GEOMETRY_AOA:S,GEOMETRY_IA:k},PointType:A,init:function(e){if(g||v||y)throw new Error("ERROR: kernelDraw.Draw.init() was double called!!!");g=e,v=r(v,_),y=r(y,w)},setCanvas:function(e){m=e.getContext("2d"),f()},setContext:function(e){m=e,f()},getContext:function(){return m},setLineDash:function(e){m.setLineDash(e)},dashedLine:function(t,n,i,r,o,a){var s,l,u,c,d,h,f,p,g,v,y=!1;for(o||(o=[10,5]),s&&0!==s||(s=.001),a&&(m.save(),this.setStrokeStyle(a),y=!0),n===r&&(r+=1e-4),l=o.length,u=i-t,c=r-n,d=c/u,h=Math.sqrt(u*u+c*c),f=0,v=!0,m.beginPath(),m.moveTo(t,n);h>=.1;)s=o[f%l],f+=1,s>h&&(s=h),p=u>0?Math.sqrt(s*s/(1+d*d)):0>u?-Math.sqrt(s*s/(1+d*d)):0,g=0!==u?d*p:s*e.sign(c),t+=p,n+=g,m[v?"lineTo":"moveTo"](t,n),h-=s,v=!v;m.stroke(),y&&m.restore()},printText:function(e,t,n,i){m.fillStyle=m.strokeStyle=i,m.fillText(e,t,n)},clear:function(){m.canvas.width=m.canvas.width},clearRect:function(e,t,n,i,r){r?m.clearRect(e-.5,t-.5,n+1.5,i+1):m.clearRect(e,t,n,i)},clearBox:function(e,t){t&&t>0?m.clearRect(e.left+t,e.top+t,e.width+t,e.height+t):m.clearRect(e.left,e.top,e.width,e.height)},clipBox:function(e,t){t&&t>0?(m.moveTo(e.left+t,e.top+t),m.lineTo(e.right-t,e.top+t),m.lineTo(e.right-t,e.bottom-t),m.lineTo(e.left+t,e.bottom-t)):(m.moveTo(e.left+t,e.top+t),m.lineTo(e.right-t,e.top+t),m.lineTo(e.right-t,e.bottom-t),m.lineTo(e.left+t,e.bottom-t)),m.closePath(),m.clip()},linearGradient:function(e,t,n,i,r,o){var a,s=m.createLinearGradient(e,t,n,i);for(a=0;a<r.length;a++)s.addColorStop(r[a],o[a]);return s},plotAreaInitDashGradient:function(e,t,n){var i,r,o=0,a=1/t,s=.5*a,l=0,u=s,c="rgba(0,0,0,0)";for(r=0;t>r;r++)e.addColorStop(l,n),e.addColorStop(u,n),e.addColorStop(u+o,c),i=l+a-o,e.addColorStop(i,c),l+=a,u+=a;return e},plotAreaCreateHorizontalDashGradient:function(e,t){var n=4,i=Math.floor(e.width/n),r=i*n,o=m.createLinearGradient(e.left,e.top,e.left+r,e.top);return this.plotAreaInitDashGradient(o,i,t)},plotAreaCreateVerticalDashGradient:function(e,t){var n=4,i=Math.floor(e.height/n),r=i*n,o=m.createLinearGradient(e.left,e.top,e.left,e.top+r);return this.plotAreaInitDashGradient(o,i,t)},plotAreaVerticalLineTo:function(e,t,n,i){if(!v)throw new Error("kernelDraw.init(window) was not called prior trying to draw!");for(var r,o=Math.abs(i-t),a=0,s=o,l=Math.min(n,e),u=Math.min(i,t);s>0;)r=Math.min(s,b),r>0&&m.drawImage(v,0,0,1,r,l,a+u,1,r),s-=b,a+=b},plotAreaMinorVerticalLineTo:function(e,t,n,i){if(!v)throw new Error("kernelDraw.init(window) was not called prior trying to draw!");var r,o=Math.abs(i-t),a=0,s=m.globalAlpha,l=o,u=Math.min(n,e),c=Math.min(i,t);for(m.globalAlpha=.35;l>0;)r=Math.min(l,b),r>0&&m.drawImage(v,0,0,1,r/2,u,a+c,1,r),l-=r,a+=r;m.globalAlpha=s},plotAreaHorizontalLineTo:function(e,t,n,i){if(!y)throw new Error("kernelDraw.init(window) was not called prior trying to draw!");for(var r,o=Math.abs(n-e),a=0,s=o,l=Math.min(n,e),u=Math.min(i,t);s>0;)r=Math.min(s,x),r>0&&m.drawImage(y,0,0,r,1,a+l,u,r,1),s-=x,a+=x},plotAreaMinorHorizontalLineTo:function(e,t,n,i){if(!y)throw new Error("kernelDraw.init(window) was not called prior trying to draw!");var r,o=Math.abs(n-e),a=0,s=m.globalAlpha,l=o,u=Math.min(n,e),c=Math.min(i,t);for(m.globalAlpha=.35;l>0;)r=Math.min(l,x),r>0&&m.drawImage(y,0,0,r/2,1,a+u,c,r,1),l-=r,a+=r;m.globalAlpha=s},plotAreaRenderGridLines:function(e,t,n,i,r){function o(e,i,r,o){for(m.beginPath(),s=e.majorTicks,u=o.left+i.startPixelOffset,b=u,_=u,p=s.length,d=t||o.left,h=n||o.right,g=0;p>g;g++)l=Math.round(u+s[g].index*i.dx),l>d&&h>l&&C.plotAreaVerticalLineTo(l,w,l,x,2),0===g&&(b=l),_=l;if(i.startPixelOffset>i.dx)for(p>0&&(u+=b-u),f=r.range.padLeft,p=f.length,v=0;p>v&&(y=f[v].range*i.dx,c=Math.round(u-y),c>d);v++)c<o.right&&C.plotAreaVerticalLineTo(c,w,c,x,2),u-=y;if(i.dx<i.endPixelOffset)for(f=e.padRight,p=f.length,v=0;p>v&&(y=f[v].range*i.dx,c=Math.round(_+y),h>c);v++)C.plotAreaVerticalLineTo(c,w,c,x,2),_+=y;m.stroke(),m.closePath()}function a(e,i,r,o){for(d=Math.round(t||i.left),h=Math.round(n||i.right),g=e.startMajorTick;g<=e.end;g+=e.majorTickInterval)r.isHorizontal?(l=Math.round(r.pixelMapper.mapHorizontal(g)),l>=i.left&&l<=i.right&&C.plotAreaVerticalLineTo(l,x,l,w)):(l=Math.round(r.pixelMapper.mapVertical(g)),l>=i.top&&l<=i.bottom&&C.plotAreaHorizontalLineTo(d,l,h,l));if(o===!0)for(g=e.startMajorTick+e.minorTickInterval;g<=e.end;g+=2*e.minorTickInterval)r.isHorizontal?(l=Math.round(r.pixelMapper.mapHorizontal(g)),l>=i.left&&l<=i.right&&C.plotAreaMinorVerticalLineTo(l,x,l,w)):(l=Math.round(r.pixelMapper.mapVertical(g)),l>=i.top&&l<=i.bottom&&C.plotAreaMinorHorizontalLineTo(d,l,h,l))}var s,l,u,c,d,h,f,p,g,v,y,b=0,_=0,x=Math.round(e.boundingBox.top),w=Math.round(e.boundingBox.bottom),C=this;i&&(m.strokeStyle=i),m.lineWidth=1,e.axisX&&e.axisX.range&&(e.axisX.getDataType()===e.axisX.baseAxes.AXIS_DATE?o(e.axisX.range,e.axisX.dateDataWindow,e.axisX,e.boundingBox):e.axisX.range.majorTickInterval&&a(e.axisX.range,e.boundingBox,e.axisX,r)),e.axisY&&e.axisY.range&&(e.axisY.getDataType()===e.axisY.baseAxes.AXIS_DATE?o(e.axisY.range,e.axisY.dateDataWindow,e.axisY,e.boundingBox):e.axisY.range.majorTickInterval&&a(e.axisY.range,e.boundingBox,e.axisY,r))},gradientPolyLine:function(e,t,n,i,r,o,a,s){var l,u,c=t.length;if(0===c)throw new Error("ERROR: kernelDraw:gradientPolyLine oPoints.length = 0. Bad bad. Fix it.");for(u=e.createLinearGradient(r.x,r.y,i.x,i.y),u.addColorStop(1,a),u.addColorStop(0,o),e.strokeStyle=u,e.fillStyle=u,e.globalAlpha=.4,e.beginPath(),e.moveTo(s.x1,s.y1),l=0;c>l;l++)e.lineTo(t[l].x,t[l].y);for(e.lineTo(s.x2,s.y2),e.closePath(),e.fill(),e.stroke(),e.globalAlpha=1,e.strokeStyle=n,e.beginPath(),e.moveTo(t[0].x,t[0].y),l=1;c>l;l++)e.lineTo(t[l].x,t[l].y);e.stroke()},styledLineSingle:function(e,t,n,i,r,o){var a,s,l,u,c;if(e!==n)for(s=r,a=o,c=(i-t)/(n-e),m.beginPath(),m.moveTo(e,t);n>e||i>t;)l=Math.sqrt(s*s/(1+c*c)),u=c*l,e+l>n&&(l=n-e),t+u>i&&(u=i-t),m.lineTo(e+l,t+u),m.stroke(),e+=l,t+=u,l=Math.sqrt(a*a/(1+c*c)),u=c*l,e+l>n&&(l=n-e),t+u>i&&(u=i-t),e+=l,t+=u,m.moveTo(e,t)},dotDashLine:function(e,t,i,r,o){var a,s,l,u,c,d,h,f,p,g,v,y=0,b=!1;if(void 0===o)throw new Error("dotDashArray is a required parameter");if(e!==i||t!==r){for(i>e?(a=e,s=i):(a=i,s=e),r>t?(l=t,u=r):(l=r,u=t),a===s&&(a+=1e-5),f=(u-l)/(s-a),p=f*f,g=1/(1+p),m.beginPath(),m.moveTo(a,l),h=o.map(function(e){return e*e
});s>a||u>l;)v=h[y],c=Math.sqrt(v*g),d=f*c,a+c>s&&(c=s-a),l+d>u&&(d=u-l),a+=c,l+=d,b?m.moveTo(a,l):(m.lineTo(a,l),m.stroke()),b=~b,y===o.length-1?y=0:++y;a!==s&&n.log.warn("kernelDraw","edge problem with the x math here"),l!==u&&n.log.warn("kernelDraw","edge problem with the y math here")}},drawDotDashPathFn:function(e,t,n){var i=[0,0],r=[0,0];if(2>t)throw new Error("Insufficient vertex count passed to drawDotDashPathFn()");for(e(i,1,0),t-=1,1;t>0;t-=1)r[0]=i[0],r[1]=i[1],e(i,1,0),this.dotDashLine(r[0],r[1],i[0],i[1],n)},flatQuadratic:function(e,t,n,i,r,o){m.beginPath(),m.moveTo(e,t),m.quadraticCurveTo(n,i,r,o),m.stroke()},styledQuadraticSimple1:function(e,t,i,r,o,a){function s(e,t,n,i){return{x:(n+e)/2,y:(i+t)/2}}function l(e,t,n,i,r,o){var a,s,l,u,c,d,h,f,p={},g={};return p.x=e-2*n+r,p.y=t-2*i+o,g.x=2*n-2*e,g.y=2*i-2*t,a=4*(p.x*p.x+p.y*p.y),s=4*(p.x*g.x+p.y*g.y),l=g.x*g.x+g.y*g.y,f=2*Math.sqrt(a+s+l),u=Math.sqrt(a),c=2*a*u,h=2*Math.sqrt(l),d=s/u,(c*f+u*s*(f-h)+(4*l*a-s*s)*Math.log((2*u+d+f)/(d+h)))/(4*c)}var u=s(e,t,i,r),c=s(i,r,o,a),d=s(u.x,u.y,c.x,c.y),h=l(e,t,i,r,o,a);n.log.trace("kernelDraw","full arclen: "+h),m.beginPath();var f=s(e,t,u.x,u.y),p=s(u.x,u.y,d.x,d.y),g=s(f.x,f.y,p.x,p.y);m.moveTo(e,t),m.quadraticCurveTo(f.x,f.y,g.x,g.y),n.log.trace("kernelUtil","one quarter len actually: "+l(e,t,f.x,f.y,g.x,g.y)),m.stroke()},styledQuadraticSimple2:function(e,t,n,i,r,o){m.beginPath();var a=.125,s=d(e,t,n,i,a),l=d(n,i,r,o,a),u=d(s.x,s.y,l.x,l.y,a);m.moveTo(e,t),m.quadraticCurveTo(s.x,s.y,u.x,u.y),m.stroke(),a=.5;var c=d(e,t,n,i,a),h=d(n,i,r,o,a),f=d(c.x,c.y,h.x,h.y,a);m.moveTo(f.x,f.y),m.lineTo(h.x,h.y),m.lineTo(r,o),a=.5;var p=d(f.x,f.y,h.x,h.y,a),g=d(h.x,h.y,r,o,a),v=d(p.x,p.y,g.x,g.y,a);m.strokeStyle="orange",m.beginPath(),m.moveTo(p.x,p.y),m.lineTo(g.x,g.y),m.beginPath(),m.moveTo(f.x,f.y),m.lineTo(v.x,v.y),m.strokeStyle="white",m.beginPath(),m.moveTo(f.x,f.y),m.quadraticCurveTo(p.x,p.y,v.x,v.y),m.strokeStyle="red",m.stroke()},styledQuadraticSimple3:function(e,t,n,i,r,o,a,s){var l;l=a;var u=d(e,t,n,i,l),c=d(n,i,r,o,l),h=d(u.x,u.y,c.x,c.y,l);l=(s-a)/(1-a);var f=d(h.x,h.y,c.x,c.y,l),p=d(c.x,c.y,r,o,l),g=d(f.x,f.y,p.x,p.y,l);m.beginPath(),m.moveTo(h.x,h.y),m.quadraticCurveTo(f.x,f.y,g.x,g.y),m.stroke()},styledQuadraticBySimpleDivisions:function(e,t,n,i,r,o,a){var s,l,u,c;for(s=0,u=1/a,c=!0,l=s;1>l;l+=u)m.strokeStyle=c===!0?"rgba(255,0,0,1.0)":"rgba(0,255,0,0.0)",this.styledQuadraticSimple3(e,t,n,i,r,o,l,l+u),c=!c},styledQuadraticSimpleByPixelStride:function(e,t,n,i,r,o,a){var s=h(e,t,n,i,r,o),l=(s/a).toFixed(0);this.styledQuadraticBySimpleDivisions(e,t,n,i,r,o,l)},styledQuadraticSimpleGradient:function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p){var g,v,y;for(g=0,y=1/a,v=g;1>v;v+=y)m.strokeStyle="rgba("+(d*v+s*(1-v)).toFixed(0)+","+(h*v+l*(1-v)).toFixed(0)+","+(f*v+u*(1-v)).toFixed(0)+","+(p*v+c*(1-v))+")",this.styledQuadraticSimple3(e,t,n,i,r,o,v,v+y)},styledQuadratic:function(e,t,n,i,r,o,a){this.styledQuadraticSimpleByPixelStride(e,t,n,i,r,o,a)},setFont:function(e){m.font=e},setAlpha:function(e){m.globalAlpha=e},getAlpha:function(){return m.globalAlpha},setFillStyle:function(e){m.fillStyle=e},getFillStyle:function(){return m.fillStyle},setStrokeStyle:function(e){m.strokeStyle=e},getStrokeStyle:function(){return m.strokeStyle},setLineWidth:function(e){m.lineWidth=e},setLineCap:function(e){m.lineCap=e},setTextAlignment:function(e){m.textAlign=e},setTextBaseline:function(e){m.textBaseline=e},drawLine:function(e,t,n,i){m.beginPath(),e===n?(e=u(e),n=e):t===i&&(t=u(t),i=t),m.moveTo(e,t),m.lineTo(n,i),m.stroke()},drawBatchLine:function(e,t,n,i,r){(void 0===r||r===!0)&&(e===n?(e=u(e),n=e):t===i&&(t=u(t),i=t)),m.moveTo(e,t),m.lineTo(n,i)},drawRect:function(e,t,n,i,r,o,s){m.beginPath(),m.rect(e,t,n,i),a(r,o,s)},drawQuad:function(e,t,n,i,r,o,s){m.beginPath(),m.rect(e,t,n-e,i-t),a(r,o,s)},roundRect:function(e,t,n,i,r,o,s,l){m.beginPath(),m.moveTo(e+r,t),m.lineTo(e+n-r,t),m.quadraticCurveTo(e+n,t,e+n,t+r),m.lineTo(e+n,t+i-r),m.quadraticCurveTo(e+n,t+i,e+n-r,t+i),m.lineTo(e+r,t+i),m.quadraticCurveTo(e,t+i,e,t+i-r),m.lineTo(e,t+r),m.quadraticCurveTo(e,t,e+r,t),m.closePath(),a(o,s,l)},drawTriangle:function(e,t,n,i,r,o,s,l,u){m.beginPath(),m.moveTo(e,t),m.lineTo(n,i),m.lineTo(r,o),m.closePath(),a(s,l,u)},drawArc:function(e,t,n,i,r,o,s,l,u,c,d){m.beginPath(),m.moveTo(e,t),m.arc(n,i,r,o,s,l),m.closePath(),a(u,c,d)},drawAnnulus:function(e,t,n,i,r,o,s,l,u,c){m.beginPath(),m.arc(e,t,i,r,o,s),m.arc(e,t,n,o,r,!s),m.closePath(),a(l,u,c)},drawCircle:function(e,t,n,i,r,o){m.beginPath(),m.moveTo(e+n,t),m.arc(e,t,n,0,C),a(i,r,o)},drawEllipse:function(e,t,n,i,r,o,s){m.save(),m.beginPath(),m.translate(e,t),m.scale(n/i,1),m.arc(0,0,i,0,C),m.restore(),m.closePath(),a(r,o,s)},drawSvgFromResource:function(e,t,n,i,r){e&&isFinite(t)&&isFinite(n)&&m.drawImage(e.call(e.name,i,r),t,n)},beginPath:function(){m.beginPath()},finishPath:function(e,t,n,i){e&&m.closePath(),t&&m.fill(),n&&m.stroke(),i&&m.clip()},drawPath:function(e,t,n,i,r,o){if(t=t||s(e),t===T)p.drawPathSOA(e,n,i,r,o);else if(t===E)p.drawPathAOS(e,n,i,r,o);else if(t===S)p.drawPathAOA(e,void 0,void 0,void 0,void 0,void 0,n,i,r,o);else{if(t!==k)throw new Error("drawPath: unable to discover geometry format");p.drawPathIA(e,e.length/2,void 0,void 0,void 0,n,i,r,o)}},drawPathSOA:function(e,t,n,i,r){var a,s=e.x,l=e.y,u=s.length;if(!(2>u)){for(o(s[0],l[0],n,i,r),a=1;u>a;a+=1)m.lineTo(s[a],l[a]);p.finishPath(t,n,i,r)}},drawPathAOS:function(e,t,n,i,r){var a,s,l=e.length;if(2>l)throw new Error("Insufficient vertex count passed to drawPathAOS()");for(s=e[0],o(s.x,s.y,n,i,r),a=1;l>a;a+=1)s=e[a],m.lineTo(s.x,s.y);p.finishPath(t,n,i,r)},drawPathAOA:function(e,t,n,i,r,a,s,l,u,c){var d,h;if(t=void 0===t?e.length:t,n=n||1,i=i||1,r=r||0,a=a||0,h=a+i,2>t)throw new Error("Insufficient vertex count passed to drawPathAOA()");for(d=e[r],o(d[a],d[h],l,u,c),r+=n,t-=1,1;t>0;t-=1)d=e[r],m.lineTo(d[a],d[h]),r+=n;p.finishPath(s,l,u,c)},drawPathIA:function(e,t,n,i,r,a,s,l,u){if(2>t)throw new Error("Insufficient vertex count passed to drawPathIA()");for(n=n||2,i=i||1,r=r||0,o(e[r],e[r+i],s,l,u),r+=n,t-=1,1;t>0;t-=1)m.lineTo(e[r],e[r+i]),r+=n;p.finishPath(a,s,l,u)},drawPathFn:function(e,t,n,i,r,a){var s=[0,0];if(2>t)throw new Error("Insufficient vertex count passed to drawPathFn()");for(e(s,1,0),o(s[0],s[1],i,r,a),t-=1,1;t>0;t-=1)e(s,1,0),m.lineTo(s[0],s[1]);p.finishPath(n,i,r,a)},drawBezierPath:function(e,t,n,i,r,o,a){if(n=n||s(t),n===T)p.drawBezierPathSOA(e,t,i,r,o,a);else if(n===E)p.drawBezierPathAOS(e,t,i,r,o,a);else if(n===S)p.drawBezierPathAOA(e,t,void 0,void 0,void 0,void 0,void 0,i,r,o,a);else{if(n!==k)throw new Error("drawPath: unable to discover geometry format");p.drawBezierPathIA(e,t,t.length/(e+1),void 0,void 0,void 0,i,r,o,a)}},drawBezierPathSOA:function(e,t,n,i,r,a){var s,l,u,c,d,h,f,g=t.x,v=t.y,y=g.length;if(e+1>y)throw new Error("Insufficient vertex count passed to drawBezierPathSOA()");if(o(g[0],v[0],i,r,a),3===e)for(s=1;y>s;)l=g[s],u=v[s],s+=1,c=g[s],d=v[s],s+=1,h=g[s],f=v[s],s+=1,m.bezierCurveTo(l,u,c,d,h,f);else if(2===e)for(s=1;y>s;)l=g[s],u=v[s],s+=1,c=g[s],d=v[s],s+=1,m.quadraticCurveTo(l,u,c,d);else{if(1!==e)throw new Error("Invalid degree passed to drawBezierPathSOA()");for(s=1;y>s;)l=g[s],u=v[s],s+=1,m.lineTo(l,u)}p.finishPath(n,i,r,a)},drawBezierPathAOS:function(e,t,n,i,r,a){var s,l,u,c,d=t.length;if(e+1>d)throw new Error("Insufficient vertex count passed to drawBezierPathAOS()");if(c=t[0],o(c.x,c.y,i,r,a),3===e)for(s=1;d>s;)l=t[s],s+=1,u=t[s],s+=1,c=t[s],s+=1,m.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y);else if(2===e)for(s=1;d>s;)l=t[s],s+=1,c=t[s],s+=1,m.quadraticCurveTo(l.x,l.y,c.x,c.y);else{if(1!==e)throw new Error("Invalid degree passed to drawBezierPathSOA()");for(s=1;d>s;)c=t[s],s+=1,m.lineTo(c.x,c.y)}p.finishPath(n,i,r,a)},drawBezierPathAOA:function(e,t,n,i,r,a,s,l,u,c,d){var h,f,g,v;if(n=void 0===n?t.length:n,i=i||1,r=r||1,a=a||0,s=s||0,v=s+r,e+1>n)throw new Error("Insufficient vertex count passed to drawBezierPathAOA()");if(g=t[a],o(g[s],g[v],u,c,d),a+=i,n-=1,3===e)for(1;n>0;n-=3)h=t[a],a+=i,f=t[a],a+=i,g=t[a],a+=i,m.bezierCurveTo(h[s],h[v],f[s],f[v],g[s],g[v]);else if(2===e)for(1;n>0;n-=2)h=t[a],a+=i,g=t[a],a+=i,m.quadraticCurveTo(h[s],h[v],g[s],g[v]);else{if(1!==e)throw new Error("Invalid degree passed to drawBezierPathAOA()");for(1;n>0;n-=1)g=t[a],a+=i,m.lineTo(g[s],g[v])}p.finishPath(l,u,c,d)},drawBezierPathIA:function(e,t,n,i,r,a,s,l,u,c){var d,h,f,g,v,y;if(e+1>n)throw new Error("Insufficient vertex count passed to drawBezierPathIA()");if(i=i||2,r=r||1,a=a||0,o(t[a],t[a+1],l,u,c),a+=i,n-=1,3===e)for(1;n>0;n-=3)d=t[a],h=t[a+r],a+=i,f=t[a],g=t[a+r],a+=i,v=t[a],y=t[a+r],a+=i,m.bezierCurveTo(d,h,f,g,v,y);else if(2===e)for(1;n>0;n-=2)d=t[a],h=t[a+r],a+=i,f=t[a],g=t[a+r],a+=i,m.quadraticCurveTo(d,h,f,g);else{if(1!==e)throw new Error("Invalid degree passed to drawBezierPathIA()");for(1;n>0;n-=1)d=t[a],h=t[a+r],a+=i,m.lineTo(d,h)}p.finishPath(s,l,u,c)},drawBezierPathFn:function(e,t,n,i,r,a,s){var l=[0,0],u=[0,0],c=[0,0];if(e+1>n)throw new Error("Insufficient vertex count passed to drawBezierPathFn()");if(t(c,1,0),o(c[0],c[1],r,a,s),n-=1,3===e)for(1;n>0;n-=3)t(l,1,0),t(u,1,0),t(c,1,0),m.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1]);else if(2===e)for(1;n>0;n-=2)t(l,1,0),t(c,1,0),m.quadraticCurveTo(l[0],l[1],c[0],c[1]);else{if(1!==e)throw new Error("Invalid degree passed to drawBezierPathAOA()");for(1;n>0;n-=1)t(c,1,0),m.lineTo(c[0],c[1])}p.finishPath(i,r,a,s)},drawRoundedRect:function(e,t,n,i,r,o,a,s,l,u,c){void 0===r&&(r=5),void 0===o&&(o=r),void 0===a&&(a=r),void 0===s&&(s=r);var d=e+n,h=t+i;m.beginPath(),m.moveTo(d-o,t),m.quadraticCurveTo(d,t,d,t+o),m.lineTo(d,h-a),m.quadraticCurveTo(d,h,d-a,h),m.lineTo(e+s,h),m.quadraticCurveTo(e,h,e,h-s),m.lineTo(e,t+r),m.quadraticCurveTo(e,t,e+r,t),p.finishPath(!0,l,u,c)},drawImage:function(){var e,t,n,i,r,o,a,s,l,u=arguments,c=u.length;if("object"==typeof u[0])return m.drawImage.apply(m,arguments);if(e=u[0],t=u[1],3===c)r=u[2];else if(5===c)n=u[2],i=u[3],r=u[4];else if(7===c)r=u[2],o=u[3],a=u[4],s=u[5],l=u[6];else{if(9!==c)throw new Error("Invalid number of arguments passed to drawImage()");n=u[2],i=u[3],r=u[4],o=u[5],a=u[6],s=u[7],l=u[8]}if(r instanceof g.ImageData)throw new Error("drawImage() doesn't render ImageData; use putPixels instead");return o=void 0===o?0:o,a=void 0===a?0:a,s=void 0===s?r.width:s,l=void 0===l?r.height:l,n=void 0===n?s:n,i=void 0===i?l:i,m.drawImage(r,o,a,s,l,e,t,n,i)},getPixels:function(e,t,n,i){return m.getImageData(e,t,n,i)},putPixels:function(e,t,n,i,r,o,a){if(!(n instanceof g.ImageData))throw new Error("putPixels() only renders ImageData objects; use drawImage for Image or Canvas sources");i=void 0===i?0:i,r=void 0===r?0:r,o=void 0===o?n.width:o,a=void 0===a?n.height:a,m.putImageData(n,e-i,t-r,i,r,o,a)},setIdentityTransform:function(){m.setTransform(1,0,0,1,0,0)},setTransform:function(e){m.setTransform(e[0],e[1],e[3],e[4],e[6],e[7])},applyTransform:function(e){m.transform(e[0],e[1],e[3],e[4],e[6],e[7])},setScale:function(e,t){m.scale(e,t)},setTranslate:function(e,t){m.translate(e,t)},setRotate:function(e){m.rotate(e)},drawGlyph:function(e,t,n,i,r){var o,a,s,l,u,d;switch(o=t/2,e){case A.Square:n&&m.fillRect(0,0,t,t),i&&m.strokeRect(0,0,t,t);break;case A.Triangle:m.beginPath(),m.moveTo(o,0),m.lineTo(t,t),m.lineTo(0,t),m.lineTo(o,0),n&&m.fill(),i&&m.stroke(),m.closePath();break;case A.Dart:m.beginPath(),m.moveTo(o,0),m.lineTo(t,t),m.lineTo(o,.7*t),m.lineTo(0,t),m.lineTo(o,0),n&&m.fill(),i&&m.stroke(),m.closePath();break;case A.Diamond:m.beginPath(),m.moveTo(o,0),m.lineTo(t,o),m.lineTo(o,t),m.lineTo(0,o),m.lineTo(o,0),n&&m.fill(),i&&m.stroke(),m.closePath();break;case A.GradientCircle:m.beginPath(),m.arc(o,o,o,0,2*Math.PI,!0),n&&m.fill(),i&&m.stroke(),m.closePath();break;case A.Cross:case A.Plus:var h=t/3,f=e===A.Cross;f?(m.translate(o,o),m.rotate(Math.PI/4),m.translate(-t/2,-t/2)):m.translate(1,1),m.beginPath(),m.moveTo(h,0),m.lineTo(2*h,0),m.lineTo(2*h,h),m.lineTo(3*h,h),m.lineTo(3*h,2*h),m.lineTo(2*h,2*h),m.lineTo(2*h,3*h),m.lineTo(h,3*h),m.lineTo(h,2*h),m.lineTo(0,2*h),m.lineTo(0,h),m.lineTo(h,h),m.lineTo(h,0),n&&m.fill(),i&&m.stroke(),m.closePath();break;case A.Star:d=t/8,m.beginPath(),m.moveTo(0,o),m.lineTo(t,o),m.moveTo(o,0),m.lineTo(o,t),m.moveTo(d,d),m.lineTo(t-d,t-d),m.moveTo(t-d,d),m.lineTo(d,t-d),i&&m.stroke(),m.closePath();break;case A.L:m.beginPath(),m.moveTo(0,0),m.lineTo(0,t),m.lineTo(t,t),m.lineTo(t,o),m.lineTo(o,o),m.lineTo(o,0),m.lineTo(0,0),n&&m.fill(),i&&m.stroke(),m.closePath();break;case A.M:a=t/4,s=3*t/4,m.beginPath(),m.moveTo(0,0),m.lineTo(0,a),m.lineTo(a,a),m.lineTo(a,o),m.lineTo(a,o),m.lineTo(o,o),m.lineTo(o,s),m.lineTo(s,s),m.lineTo(s,t),m.lineTo(t,t),m.lineTo(t,a),m.lineTo(s,a),m.lineTo(s,0),m.lineTo(0,0),n&&m.fill(),i&&m.stroke(),m.closePath();break;case A.S:l=t/3,u=2/3*t,m.beginPath(),m.moveTo(0,t),m.lineTo(u,t),m.lineTo(u,l),m.lineTo(t,l),m.lineTo(t,0),m.lineTo(l,0),m.lineTo(l,u),m.lineTo(0,u),m.lineTo(0,t),n&&m.fill(),i&&m.stroke(),m.closePath();break;case A.Lozenge:m.beginPath(),m.moveTo(0,t),m.lineTo(o,t),m.lineTo(t,o),m.lineTo(t,0),m.lineTo(o,0),m.lineTo(0,o),m.lineTo(0,t),n&&m.fill(),i&&m.stroke(),m.closePath();break;case A.Kite:a=t/4,m.beginPath(),m.moveTo(o,0),m.lineTo(0,a),m.lineTo(o,t),m.lineTo(t,a),m.lineTo(o,0),n&&m.fill(),i&&m.stroke(),m.closePath();break;case A.Bowtie:l=t/4,m.beginPath(),m.moveTo(0,0),m.lineTo(l,o),m.lineTo(0,t),m.lineTo(t,t),m.lineTo(t-l,o),m.lineTo(t,0),m.lineTo(0,0),n&&m.fill(),i&&m.stroke(),m.closePath();break;case A.SVGIcon:n&&void 0!==r&&c(r,t),i&&m.strokeRect(0,0,t,t);break;default:m.beginPath(),m.arc(o,o,t/2,0,2*Math.PI,!0),n&&m.fill(),i&&m.stroke(),m.closePath()}},canvas:{save:function(){m.save()},restore:function(){m.restore()}},save:function(){m.save()},restore:function(){m.restore()},fillText:function(e,t,n){m.fillText(e,t,n)},charting:{fontSizeMin:6,fontSize:8,fontFamily:"Calibri,Verdana,Arial,Helvetica-Light,ArialMT,Helvetica,sans-serif",round:function(e){return 0===m.lineWidth%2?.5+e<<0:Math.floor(e)+.5},getFontForText:function(e,t,n,i){var r,o;if(r=i||this.fontSize,r<=this.fontSizeMin)o=r.toString()+"px "+n,m.font=o;else for(;r>=this.fontSizeMin&&(o=r.toString()+"px "+n,m.font=o,!(m.measureText(e).width<=t));)r-=1;return Math.max(r,this.fontSizeMin)},roundRect:function(e,t,n,i,r,o,a,s){void 0===s&&(s=!0),void 0===o&&(o=5),e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+i-o,n),e.quadraticCurveTo(t+i,n,t+i,n+o),e.lineTo(t+i,n+r-o),e.quadraticCurveTo(t+i,n+r,t+i-o,n+r),e.lineTo(t+o,n+r),e.quadraticCurveTo(t,n+r,t,n+r-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),s&&e.stroke(),a&&e.fill()}},boundingBox:function(){var e,t=0;return e={createBoundingBox:function(e,n,i,r){var o=this;return{id:"boundingBox"+(t+=1),left:e,right:e+i,top:n,bottom:n+r,width:i,height:r,contains:function(e,t){return e>=this.left&&t>=this.top&&e<this.right&&t<this.bottom},clampHorizontal:function(e){return Math.min(this.right,Math.max(this.left,e))},clampVertical:function(e){return Math.min(this.bottom,Math.max(this.top,e))},union:function(e){var t=Math.min(this.left,e.left),n=Math.min(this.top,e.top),i=o.createBoundingBox(t,n,Math.max(this.right,e.right)-t,Math.max(this.bottom,e.bottom)-n);return i},intersection:function(e){var t=Math.max(this.left,e.left),n=Math.max(this.top,e.top),i=o.createBoundingBox(t,n,Math.min(this.right,e.right)-t,Math.min(this.bottom,e.bottom)-n);return i},intersects:function(e){return e.left>=this.right||e.right<=this.left||e.top>=this.bottom||e.bottom<=this.top?!1:!0},offset:function(e,t){return this.left+=e,this.right+=e,this.top+=t,this.bottom+=t,this},update:function(e,t,n,i){this.left=e||this.left,this.width=n||this.width,this.right=this.left+this.width,this.top=t||this.top,this.height=i||this.height,this.bottom=this.top+this.height},clearRect:function(e){e.clearRect(this.left-.5,this.top-.5,this.width+1.5,this.height+1)},fillRect:function(e){e.fillRect(this.left,this.top,this.width,this.height)},strokeRect:function(e){e.strokeRect(this.charting.round(this.left),this.charting.round(this.top),this.width,this.height)},clip:function(e){e.moveTo(this.left+1,this.top+1),e.lineTo(this.right,this.top+1),e.lineTo(this.right,this.bottom),e.lineTo(this.left+1,this.bottom),e.closePath(),e.clip()},equals:function(e){return e.left===this.left&&e.right===this.right&&e.top===this.top&&e.bottom===this.bottom},copyFrom:function(e){this.update(e.left,e.top,e.width,e.height)}}}}}}}),define("oven/unvetted/kernel/kernelBrowserUtils",[],function(){function e(e,t,n){var i,o,a=t.length,s=0,l=0;if(r.getComputedStyle&&(o=r.getComputedStyle(e,null)))for(i=0;a>i;i++)n!==!0?(l=o.getPropertyValue("padding-"+t[i]),l&&(s-=parseFloat(l)),l=o.getPropertyValue("border-"+t[i]),l&&(s-=parseFloat(l))):(l=o.getPropertyValue("margin-"+t[i]),l&&(s+=parseFloat(l)));return s}function t(e){var t=i.createElement("div");return t.innerHTML=e,t.firstChild}var n,i,r,o=["left","right"],a=["top","bottom"],s=/[\n\t\r]/g,l=/\s+/;return n={init:function(e,t){r=e,i=t},attachEventHandler:function(e,t,n){var i,r,o;for(i=t.split(" "),r=0;r<i.length;r++)o=i[r],e.addEventListener?e.addEventListener(o,n,!1):e.attachEvent?e.attachEvent("on"+o,n):e["on"+o]=n},removeEventHandler:function(e,t,n){var i,r,o;for(i=t.split(" "),r=0;r<i.length;r++)o=i[r],e.removeEventListener?e.removeEventListener(o,n,!1):e.attachEvent?e.detachEvent("on"+o,n):e["on"+o]=void 0},getOffset:function(e){var t,n,o,a,s,l,u,c,d;return t=i.body,n=e.getBoundingClientRect(),o=i.documentElement,a=o.clientTop||t.clientTop||0,s=o.clientLeft||t.clientLeft||0,l=r.pageYOffset||o.scrollTop||t.scrollTop,u=r.pageXOffset||o.scrollLeft||t.scrollLeft,c=n.top+l-a,d=n.left+u-s,{top:c,left:d}},getWindowOffset:function(e){var t={top:0,left:0};if(e.offsetParent)do t.left+=e.offsetLeft,t.top+=e.offsetTop;while(e=e.offsetParent);return t},getHeight:function(t,n){var i=t.offsetHeight;return i>0&&(i+=e(t,o,n)),i},getWidth:function(t,n){var i=t.offsetWidth;return i>0&&(i+=e(t,a,n)),i},getBoundingRect:function(e){var t=e.getBoundingClientRect();return t},getWindowSize:function(){return{w:r.document.documentElement.clientWidth,h:r.document.documentElement.clientHeight}},findElement:function(e,t){var n,i,r;if(i=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t),i&&(1===e.nodeType||9===e.nodeType)){if(i[1])return r=e.getElementsByTagName(t);if(i[2]&&e.getElementsByClassName)return r=e.getElementsByClassName(i[2])}if(9===e.nodeType){if("body"===t&&e.body)return[e.body];if(i&&i[3]){var o=e.getElementById(i[3]);if(!o||!o.parentNode)return[];if(o.id===i[3])return[o]}try{return r=e.querySelectorAll(t)}catch(a){}}else if(1===e.nodeType&&"object"!==e.nodeName){var s=e,l=e.getAttribute("id"),u=l,c=e.parentNode,d=/^\s*[+~]/.test(t);l?u=u.replace(/'/g,"\\$&"):e.setAttribute("id",u),d&&c&&(e=e.parentNode);try{if(!d||c)return n=e.querySelectorAll("[id='"+u+"'] "+t)}catch(h){}finally{l||s.removeAttribute("id")}}},containsElement:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},createAndPrependElement:function(e,n){var r,o;return r=i.createDocumentFragment(),o=t(n),r.appendChild(o),e.parentNode.insertBefore(r,e),o},createAndAppendElement:function(e,n){var r,o;return r=i.createDocumentFragment(),o=t(n),r.appendChild(o),e.appendChild(r),o},createAndReplaceElement:function(e,n){var r,o,a,s;return r=i.createDocumentFragment(),o=t(n),r.appendChild(o),a=e.nextSibling,s=e.parentNode,s.removeChild(e),a?s.insertBefore(r,a):s.appendChild(o),o},hasClass:function(e,t){var n=" "+t+" ";return 1===e.nodeType&&(" "+e.className+" ").replace(s," ").indexOf(n)>-1?!0:!1},removeClass:function(e,t){var n,i,r,o;if((t&&"string"==typeof t||void 0===t)&&(n=(t||"").split(l),1===e.nodeType&&e.className))if(t){for(i=(" "+e.className+" ").replace(s," "),r=0,o=n.length;o>r;r++)i=i.replace(" "+n[r]+" "," ");e.className=i.trim()}else e.className="";return this},addClass:function(e,t){var n,i,r,o;if(t&&"string"==typeof t&&(n=t.split(l),1===e.nodeType))if(e.className||1!==n.length){for(i=" "+e.className+" ",r=0,o=n.length;o>r;r++)~i.indexOf(" "+n[r]+" ")||(i+=n[r]+" ");e.className=i.trim()}else e.className=t},getEventPageCoords:function(e){var t,n,r,o=e.pageX,a=e.pageY;return void 0===o&&(n=(e.target||e.srcElement)&&(e.target||e.srcElement).ownerDocument||i,r=n.documentElement,t=n.body,o=e.clientX+(r&&r.scrollLeft||t&&t.scrollLeft||0)-(r&&r.clientLeft||t&&t.clientLeft||0),a=e.clientY+(r&&r.scrollTop||t&&t.scrollTop||0)-(r&&r.clientTop||t&&t.clientTop||0)),{pageX:o,pageY:a}},getEventTargetElement:function(e){return e.target?e.target:e.srcElement},getEventMouseButton:function(e){var t=e&&e.which,n=e&&e.button;return t||void 0===n||(t=1&n?1:2&n?3:4&n?2:void 0),t},stopEvent:function(e){e||(e=r.event),e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},getComputedElementSize:function(e,t){t=t||r;var n=e&&t.getComputedStyle(e,null);if(n){var i=parseInt(n.getPropertyValue("width"),10),o=parseInt(n.getPropertyValue("height"),10),a=parseInt(n.paddingLeft,10),s=parseInt(n.paddingRight,10),l=parseInt(n.paddingTop,10),u=parseInt(n.paddingBottom,10);return{totalWidth:i+a+s,totalHeight:o+l+u}}return{totalWidth:0,totalHeight:0}},showElement:function(e){e.style.display="block",e.style.visibility="visible"},positionElement:function(e,t,n,i,r){var o=0,a=0;return t+n.totalHeight+r.maxOffsetBottomY<=r.windowBottomRightY?t+=r.maxOffsetBottomY:t=t+n.totalHeight+r.minOffsetBottomY<=r.windowBottomRightY?r.windowBottomRightY-n.totalHeight:t-n.totalHeight-r.offsetTopY>=a?t-n.totalHeight+i.totalHeight-r.offsetTopY:r.windowBottomRightY-n.totalHeight,e+n.totalWidth+r.minOffsetRightX<=r.windowBottomRightX?e+=r.minOffsetRightX:e=e+n.totalWidth+r.maxOffsetRightX<=r.windowBottomRightX?r.windowBottomRightX-n.totalWidth:e-n.totalWidth-r.offsetLeftX>=o?e-n.totalWidth-i.totalWidth-r.offsetLeftX:r.windowBottomRightX-n.totalWidth,{x:e,y:t}},showAndPositionElement:function(e,t,n,i){i=i||{},i.minOffsetRightX=i.minOffsetRightX||0,i.minOffsetBottomY=i.minOffsetBottomY||0,i.maxOffsetRightX=i.maxOffsetRightX||0,i.maxOffsetBottomY=i.maxOffsetBottomY||0,i.offsetTopY=i.offsetTopY||0,i.offsetLeftX=i.offsetLeftX||0,i.zIndex=i.zIndex||100,i.windowBottomRightX=i.windowBottomRightX||this.getWindowSize().w,i.windowBottomRightY=i.windowBottomRightY||this.getWindowSize().h,this.showElement(n);var r=this.getComputedElementSize(n),o=this.getComputedElementSize(i.parent),a=this.positionElement(e,t,r,o,i);n.style.left=a.x+"px",n.style.top=a.y+"px",n.style.zIndex=i.zIndex}}}),/**
 * @file      A module that manages ArrayBufferViews.
 * @author    Bret Alfieri <balfieri2@bloomberg.net>
 * @copyright Bloomberg LP 2014
 */
define("oven/library/math/base/typedArrays",[],function(){var e={createUint8Array:null,createInt8Array:null,createUint16Array:null,createInt16Array:null,createUint32Array:null,createInt32Array:null,createFloat32Array:null,createFloat64Array:null};return e.init=function(e){this.createUint8Array="undefined"==typeof e.Uint8Array?function(){return arguments}:function(){return new e.Uint8Array(arguments)},this.createInt8Array="undefined"==typeof e.Int8Array?function(){return arguments}:function(){return new e.Int8Array(arguments)},this.createUint16Array="undefined"==typeof e.Uint16Array?function(){return arguments}:function(){return new e.Uint16Array(arguments)},this.createInt16Array="undefined"==typeof e.Int16Array?function(){return arguments}:function(){return new e.Int16Array(arguments)},this.createUint32Array="undefined"==typeof e.Uint32Array?function(){return arguments}:function(){return new e.Uint32Array(arguments)},this.createInt32Array="undefined"==typeof e.Int32Array?function(){return arguments}:function(){return new e.Int32Array(arguments)},this.createFloat32Array="undefined"==typeof e.Float32Array?function(){return arguments}:function(){return new e.Float32Array(arguments)},this.createFloat64Array="undefined"==typeof e.Float64Array?function(){return arguments}:function(){return new e.Float64Array(arguments)},"undefined"==typeof e.ArrayBuffer||e.ArrayBuffer.prototype.slice||(e.ArrayBuffer.prototype.slice=function(t,n){var i=new e.Uint8Array(this);void 0==n&&(n=i.length);for(var r=new e.ArrayBuffer(n-t),o=new e.Uint8Array(r),a=0,s=o.length;s>a;++a)o[a]=i[a+t];return r})},e.clone=function(e){var t=Object.prototype.toString.call(e);switch(t){case"[object Uint8Array]":return this.createUint8Array(e.buffer.slice(0));case"[object Int8Array]":return this.createInt8Array(e.buffer.slice(0));case"[object Uint16Array]":return this.createUint16Array(e.buffer.slice(0));case"[object Int16Array]":return this.createInt16Array(e.buffer.slice(0));case"[object Uint32Array]":return this.createUint32Array(e.buffer.slice(0));case"[object Int32Array]":return this.createInt32Array(e.buffer.slice(0));case"[object Float32Array]":return this.createFloat32Array(e.buffer.slice(0));case"[object Float64Array]":return this.createFloat64Array(e.buffer.slice(0))}},e}),define("oven/oven_bootstrap",["oven/unvetted/kernel/kernelGlobals","oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelDraw","oven/unvetted/kernel/kernelUtil","oven/unvetted/kernel/kernelBrowserUtils","oven/library/math/base/typedArrays"],function(e,t,n,i,r,o){var a=void 0,s={bootstrap:{init:function(s){var l;try{var u=s.elem.ownerDocument;l={document:u,window:u.defaultView||u.parentWindow}}catch(c){}s.window&&(l.window=s.window),s.document&&(l.document=s.document),s.numformat&&(l.numformat=s.numformat),void 0!==s.terminal_version&&(l.terminal_version=s.terminal_version),void 0===a&&l.window&&(s.console?l.console=s.console:l.window.console&&l.window.console.log&&l.window.console.error&&(l.console=l.window.console),e.setGlobal(l),t.globals.set(e.getGlobals()),n.init(l.window),r.init(l.window,l.document),i.log.init(l.console,l.window),void 0!==s.errorStack&&i.log.setShowStackError(s.errorStack),a=l.window),o.init(a),s.hasOwnProperty("logTrace")&&i.log.setTrace(s.logTrace),s.hasOwnProperty("logWarn")&&i.log.setWarn(s.logWarn),s.hasOwnProperty("logError")&&i.log.setError(s.logError)}}};return s}),define("oven/unvetted/contracts/events",[],function(){var e,t,n=[],i={BASEEVENTS_GROUP:0,DATAEVENT_GROUP:1,PROPERTYEVENT_GROUP:2,STATE_CHANGE_GROUP:3,MENUEVENT_GROUP:4,ANNOTATIONS_GROUP:5,DATABINDINGEVENT_GROUP:6,WINDOW_RESIZE:0,WINDOW_INVALIDATE:1,MOUSE_DOWN:2,MOUSE_UP:3,MOUSE_MOVE:4,MOUSE_LEAVE:5,MOUSE_DOUBLECLICK:6,MOUSE_WHEEL:7,CHART_PAN:8,CHART_PAN_END:9,CHART_ZOOM:10,CHART_FILTER:11,RESET_VIEW:12,INTERACTION_START:13,INTERACTION_CAPTURE:14,INTERACTION_END:15,MAP_PAN:16,MAP_ZOOM:17,MAP_SELECT:18,MAP_RESET:19,HIGHLIGHT:20,UNHIGHLIGHT:21,MOUSE_BUTTON_LEFT:22,MOUSE_BUTTON_RIGHT:23,MOUSE_BUTTON_MIDDLE:24,BUTTON_CLICK:25,FILTER_START:26,FILTER_ADJUST:27,FILTER_END:28,CHART_ZOOM_RATIO:29,PANORAMA_ZOOM_RATIO:30,PANORAMA_PAN:31,PANORAMA_ZOOM:32,AXIS_LABEL_MOUSE_OVER:33,AXIS_LABEL_MOUSE_CLICK:34,COMPONENT_MOUSE_OVER:35,COMPONENT_MOUSE_CLICK:36,TOOLBAR_UPDATE_UI:37,BASETYPE_MAX:37,ROW_DELETES:1e3,ROW_MOVES:1001,ROW_INSERTS:1002,COLUMN_DELETES:1003,COLUMN_MOVES:1004,COLUMN_INSERTS:1005,ROW_CHANGES:1006,TABLE_CHANGE:1007,TABLE_CLEAR:1008,DATATYPE_MAX:1008,PROPERTY_ADD:2e3,PROPERTY_UPDATE:2001,PROPERTY_REMOVE:2002,PROPERTYTYPE_MAX:2002,STATE_VISUALIZATION_READY:3e3,HISTOGRAM_COMPONENT:4e3,CONTEXT_MENU_CREATE:5e3,CONTEXT_MENU_ACTION:5001,CONTEXT_MENU_CLOSE:5002,createMouseEvent:function(e,t,n,i,r,o,a){return{group:this.BASEEVENTS_GROUP,type:e,x:t,y:n,wheelDelta:i,source:r,platformEvent:o,isMouseEvent:!0,button:a}},createResizeEvent:function(e,t,n){return{group:this.BASEEVENTS_GROUP,type:this.WINDOW_RESIZE,width:e,height:t,platformEvent:n,isMouseEvent:!1}},createInvalidateEvent:function(e,t,n,i){return{group:this.BASEEVENTS_GROUP,type:this.WINDOW_INVALIDATE,rect:e,z:n,source:t,platformEvent:i}},createPanEvent:function(e,t,n,i,r){return{group:this.BASEEVENTS_GROUP,type:e,offsetX:t,offsetY:n,source:i,platformEvent:r}},createZoomEvent:function(e,t,n,i,r){return{group:this.BASEEVENTS_GROUP,type:e,start:t,end:n,source:i,platformEvent:r}},createResetEvent:function(e,t){return{group:this.BASEEVENTS_GROUP,type:this.RESET_VIEW,source:e,platformEvent:t}},createPanoramaZoomEvent:function(e,t,n){return{group:this.BASEEVENTS_GROUP,type:this.PANORAMA_ZOOM,viewport:e,source:t,platformEvent:n}},createInteractionEvent:function(e,t,n,i){return{group:this.BASEEVENTS_GROUP,type:e,interaction:t,source:n,platformEvent:i}},createMapZoomEvent:function(e,t,n,i,r,o){return{group:this.BASEEVENTS_GROUP,type:e,offsetX:t,offsetY:n,scale:i,source:r,platformEvent:o}},createDatachangedEvent:function(e,t,n){return{group:this.DATAEVENT_GROUP,type:e,dataViewSet:t,args:n}},createStatechangedEvent:function(e){return{group:this.STATE_CHANGE_GROUP,type:e}},createPropertychangedEvent:function(e,t){return{group:this.PROPERTYEVENT_GROUP,type:e,eventset:t}},createPropertyChangedEvent_v2:function(e,t){return{group:this.PROPERTYEVENT_GROUP,type:e,events:t}},createButtonClickEvent:function(e,t,n){return{group:this.BASEEVENTS_GROUP,type:e,source:t,platformEvent:n}},eventNameFromType:function(e){return n[e]||e},createAxisSelectedEvent:function(e,t){return void 0===t?{group:this.BASEEVENTS_GROUP,type:e}:{group:this.BASEEVENTS_GROUP,type:e,axisName:t.axisName,label:t.label,button:t.button,data_index:t.data_index,source:t}},createComponentSelectedEvent:function(e,t,n){return void 0===n?{group:this.BASEEVENTS_GROUP,type:e,component_type:t}:{group:this.BASEEVENTS_GROUP,type:e,component_type:t,component_name:n.name,data_index:n.data_index,source:n}},createContextMenuEvent:function(e,t,n,i,r){return{group:this.MENUEVENT_GROUP,type:e,x:t,y:n,source:i,platformEvent:r,isMouseEvent:!0}}};for(e in i)i.hasOwnProperty(e)&&(t=i[e],"number"!=typeof t||n[t]||(n[t]=e));return i}),define("oven/framework/events/eventManager",["oven/unvetted/library/utility/compatibility","oven/unvetted/contracts/events","oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelUtil"],function(e,t,n,i){var r,o;return r={create:function(){var e=[{priority:50,widgets:[]}];return{pendingDraw:!1,pendingDraw2:!1,register:function(n,i,r){var o,a,s,l;for((void 0===i||1>i||i>100)&&(i=50),void 0===r&&(r=t.BASEEVENTS_GROUP),0===e.length&&e.push({priority:i,widgets:[{group:r,widg:n}]}),o=0,a=e.length;a>o;o+=1)if(e[o].priority===i){if(l=e[o].widgets,s=l.indexOf(n),0>s)return l.push({group:r,widg:n}),void 0}else if(i<e[o].priority)return e.splice(o,0,{priority:i,widgets:[{group:r,widg:n}]}),void 0;e.push({priority:i,group:r,widgets:[{group:r,widg:n}]})},unregister:function(t){function n(e,t){var n,i;for(i=e.length,n=0;i>n;n+=1)if(e[n].widg===t)return n;return-1}var i,r,o,a;for(i=0,r=e.length;r>i;i+=1)if(o=e[i].widgets,a=n(o,t),a>=0)return o.splice(a,1),0===o.length&&e.splice(i,1),void 0},notify:function(t){try{var n,r,o;for(n=0;n<e.length;n++)for(r=e[n].widgets,o=0;o<r.length;o++)if(r[o].widg.notify&&r[o].group===t.group&&(r[o].widg.notify(t),t.isHandled===!0))return!0}catch(a){throw i.log.error("ERROR: "+a.stack),a}return!1},redrawDirtyScreenAsync:function(e){var i=this;i.pendingDraw||(o||(o=n.window.get()),i.pendingDraw=!0,o.setTimeout(function(){i.notify(t.createInvalidateEvent(null,e||this,0,0)),i.pendingDraw=!1},16))},redrawDirtyScreenAsync2:function(e){var i=this;i.pendingDraw2||(o||(o=n.window.get()),i.pendingDraw2=!0,o.requestAnimationFrame(function(){return i.notify(t.createInvalidateEvent(null,e||this,0,0)),i.queueDraw=!1,!1}))},redrawDirtyScreen:function(e){i.log.warn("eventManager","redrawDirtyScreen() called: 'Didn't listen to the rules'"),this.notify(t.createInvalidateEvent(null,e||this,0,0))}}}}}),define("oven/unvetted/contracts/platform",[],function(){var e=0,t={GRADIENT_STROKE:1,DRAG:2,DOUBLECLICK:3,VML:4,TOUCH:5,TEXT_BASELINE_OFFSET:6,CURSOR_DEFAULT:0,CURSOR_RESIZE_COL:1,CURSOR_RESIZE_ROW:2,CURSOR_POINTER:3,CURSOR_WAIT:4,CURSOR_CROSSHAIR:5,CURSOR_TEXT:6,CURSOR_MOVE:7,CURSOR_MOVE_HORZ:8,CURSOR_MOVE_VERT:9,CURSOR_MOVE_NESW:10,CURSOR_MOVE_NWSE:11,CURSOR_NONE:12,createEventProvider:function(e){return{registerMouseEvents:e}},createPlatform:function(n,i,r,o,a,s,l,u,c,d,h,f,p){return{eventProvider:n,requestAnimationFrame:i,createCanvas:function(t){var n=r.call(this,t);return n.id="canvas"+e++,n},scaleCanvas:function(e,t){var n=e.width,i=e.height,r=n,o=i;e.width=n*t,e.height=i*t,e.style.width=r+"px",e.style.height=o+"px";var a=e.getContext("2d");a.scale(t,t)},createTooltip:o||function(){},createMenu:a||function(){},startFrame:s||function(){},beginGroup:l||function(){},endGroup:u||function(){},getGroups:c||function(){return[]},log:d||function(){},error:d||function(){},featureFlags:h||[],setElementStyle:f||function(){},getCursorName:p||function(e){var n;for(n in t)if(t.hasOwnProperty(n)&&0===n.indexOf("CURSOR")&&t[n]===e)return n},isTouch:-1!==h.indexOf(t.TOUCH),textBaselineOffset:-1===h.indexOf(t.TEXT_BASELINE_OFFSET)?0:2}}};return t}),define("oven/unvetted/library/utility/arrays",[],function(){var e;return e={min:function(e,t,n,i,r){var o;if(0===e.length)return null;if(1===e.length)return e[0];t=t||Math.min,n=n||0,i=i||e.length;var a,s=e[n];for(o=n+1;i>o;o++)a=t(e[o],s,r),void 0!==a&&(s=a);return s||0},max:function(e,t,n,i,r){var o;if(0===e.length)return null;if(1===e.length)return e[0];t=t||Math.max,n=n||0,i=i||e.length;var a,s=e[n];for(o=n+1;i>o;o++)a=t(e[o],s,r),void 0!==a&&(s=a);return s||0},startsWith:function(e,t){return e.slice(0,t.length)===t},find:function(e,t){var n,i=e.length;for(n=0;i>n;n++)if(t(e[n]))return n;return-1}}}),define("oven/legacy/library/utility/queue",["oven/unvetted/library/utility/arrays"],function(e){var t;return t={createQueue:function(t){var n,i=[],r=-1;return n={push:t>0?function(e){return r=(r+1)%t,i[r]=e,this}:function(e){return r++,i[r]=e,this},pop:function(){var e=i[r];return r=Math.max(-1,r-1),e},peek:function(){return i[r]},at:t>0?function(e){return i.length<=t?i[e%i.length]:i[(r+1+e)%t]}:function(e){return i[e]},setAt:t>0?function(e,n){return i.length<=t?i[e%t]=n:i[(r+1+e)%t]=n,this}:function(e,t){return i[e]=t,this},length:function(){return i.length},average:function(){var e,t=0,n=i.length;if(1===n)return i[0];if(1>n)return 0;for(e=0;n>e;e++)t+=i[e];return t/n},min:function(){return e.min(i)},max:function(){return e.max(i)},variance:function(e){var t,n,r,o=i.length,a=0;if(2>o)return 0;for(r=e||this.average(),n=0;o>n;n++)t=i[n],a+=(t-r)*(t-r);return a/o},stddev:function(e){return Math.sqrt(e||this.variance())},cv:function(e,t){return t=t||this.average(),isNaN(t)||0===t?0:(e=e||this.stddev(this.variance(t)),e/t)},median:function(){var e=this.min();return e+.5*(this.max()-e)},getArray:function(){return i}}}}}),define("oven/unvetted/library/utility/debugUtil",["oven/unvetted/kernel/kernelUtil"],function(e){var t={trace:function(t,n){e.log.trace(t,n)},debug:function(t,n){e.log.warn(t,n)},warn:function(t,n){e.log.warn(t,n)},error:function(t,n){e.log.error(t,n)}};return t}),define("oven/framework/config/schema/configSchemaBuilder",["oven/library/utility/objects","oven/unvetted/library/utility/debugUtil"],function(e,t){function n(e,t,n,i,r,o,a){return v(e,n,i,t,r,o,a)}function i(e,i){function r(){function t(e){var n,i,r=e.properties;for(n in r)r.hasOwnProperty(n)&&(i=r[n],i.objectType===x.ConfigSet&&(o[i.key]=i,t(i)))}var n,r,a,s;for(n=0,r=e.length;r>n;n+=1)a=e[n],o[a.key]=a,t(a);for(n=0,r=i.length;r>n;n+=1)s=i[n],o[s.key]=s}var o={},a={getConfigSet:function(e){return o[e]},getConfigSets:function(){return o},parseConfigSetFromString:function(e,i){function r(e,t){if(!e)return t;switch(e.propertyType){case b.Integer:return parseInt(t,10);case b.Double:return parseFloat(t);case b.Boolean:return 1===t||"true"===t||"1"===t;case b.Enum:return e.fromString(t);default:return t}}if(!o.hasOwnProperty(e))return t.error("ConfigUtil",function(t){var n,i="";for(n in o)o.hasOwnProperty(n)&&(i+=n+" ");t("ERROR: Unsupported type = '"+e+"'. Known types are: "+i)}),void 0;var s=!1,l=!1;return n(a,w.ConfigValues,o[e],i,r,s,l)},validateConfigSet:function(e,i,r){function s(e,t){var n=e.validate;return void 0!==t?n?n(t):t:e.defaultValue}if(!o.hasOwnProperty(e))return t.error("ConfigUtil",function(t){var n,i=[];for(n in o)o.hasOwnProperty(n)&&i.push(n);t("ERROR: Unsupported type = '"+e+"'. Known types are: ",i)}),void 0;var l=!0,u=r?!1:!0;return n(a,w.ConfigSet,o[e],i,s,l,u)},validateStyle:function(){return{}}};return r(),a}function r(e,t){return{objectType:x.ConfigSet,key:e,properties:t}}function o(e,t,n,i){return{objectType:x.Array,elemType:e,minOccurs:n,maxOccurs:i,defaultValue:t}}function a(e,t,n){return{objectType:x.Choice,key:e,options:t,defaultSelector:n}}function s(e,t){return{objectType:x.Style,key:e,properties:t}}function l(e,t){return{objectType:x.Property,propertyType:e,defaultValue:t}}function u(e,t,n){return{objectType:x.Reference,referenceType:e,key:t,skipMissing:n}}function c(e,t){return{objectType:x.Collection,configObj:e,fillDefaults:t}}function d(e,t){var n=e;return""!==t&&(n+=":"+t),n}function h(e){var t=e.split(":"),n=t[0],i=void 0!==t[1]?e.substr(n.length+1,e.length):"";return{typeId:n,instanceId:i}}var f,p,g,m,v,y,b={String:1,Integer:2,Double:3,Color:4,Boolean:5,Resource:6,Enum:7},_={ConfigSetReference:1,DataReference:2,StyleReference:3},x={ConfigSet:1,Style:2,Property:3,Reference:4,Collection:5,Array:6,Choice:7},w={ConfigSet:1,ConfigValues:2};y=function(e,n,i,r,o,a,s,l,u){var c=n?n.objectType:void 0;switch(c){case x.ConfigSet:i[r]=v(e,n,o,a,s,l,u);break;case void 0:case x.Property:i[r]=s(n,o);break;case x.Collection:i[r]=f(e,n,o,a,s,l,u);break;case x.Array:i[r]=p(e,n,o,a,s,l,u);break;case x.Choice:i[r]=g(e,n,o,a,s,l,u);break;case x.Reference:m(e,n,i,r,o,a,s,l,u);break;case x.Style:t.trace("configUtil",function(e){e("Styles not supported yet. key = ",r," value = ",o)});break;default:t.error("configUtil Unknown object type: ",function(e){e("key = ",r," value = ",o," configObject = ",n)})}},v=function(e,t,n,i,r,o,a){var s,l=t.properties,u={},c=i===w.ConfigSet?l:n;for(s in c)if(c.hasOwnProperty(s)){var d=n?n[s]:void 0,h=l[s];o&&void 0===h||a&&void 0===d||y(e,h,u,s,d,i,r,o,a)}return u},f=function(e,t,n,i,r,o,a){var s,l,u={};t.fillDefaults===!1&&(a=!0);for(s in n)n.hasOwnProperty(s)&&(l=n[s],y(e,t.configObj,u,s,l,i,r,o,a));return u},p=function(e,n,i,r,o,a,s){var l=[],u=n.maxOccurs||1/0,c=n.minOccurs||0,d=n.elemType,h=n.defaultValue,f=!0;i||(i=h);var p,g,m=i&&i.length||0;for(m>u&&(t.warn("configUtil",function(e){e("Array exceeds schema-specified max element count ("+u+"), array = ",i)}),f=!1),c>m&&(t.warn("configUtil",function(e){e("Array has less than schema-specified min element count ("+c+"), array = ",i)}),f=!1),f||(i=h,m=h&&h.length||0),l.length=m,p=0;m>p;++p)g=i[p],y(e,d,l,p,g,r,o,a,s);return i?l:void 0};var C=function(e,n){var i,r,o,a,s=e.options,l=!0;return"object"!=typeof n?(t.warn("configUtil",function(e){e("Expected object for choice value, but instead got: ",n)}),l=!1):(i=Object.keys(n),r=i&&i.length||0,1!==r?(t.warn("configUtil",function(e){e("A choice object must contain exactly one selector, not "+r)}),l=!1):(o=i[0],a=s.hasOwnProperty(o)&&s[o]||null,a||(t.warn("configUtil",function(t){t('"'+o+'" is an invalid choice for '+"choice type "+e.key)}),l=!1))),l?o:null};g=function(e,t,n,i,r,o,a){var s,l,u,c={},d=t.defaultSelector,h=t.options;return n&&(s=C(t,n)),s||d&&h.hasOwnProperty(d)&&(s=d,n={},n[d]=void 0),s&&n&&(l=h[s],u=n[s],y(e,l,c,s,u,i,r,o,a)),c},m=function(e,n,i,r,o,a,s,l,u){var c,d=n.skipMissing,h=n.referenceType,f=n.key;switch(h){case _.DataReference:return i[r]=s(n,o),void 0;case _.ConfigSetReference:c=e.getConfigSet(f);break;default:return t.trace("configUtil",function(e){e("Unsupported reference type. key = ",f," type = ",h)}),void 0}c?d&&void 0===o||y(e,c,i,r,o,a,s,l,u):t.error("configUtil",function(e){e("Invalid reference, key = ",f," type = ",h)})};var T={PropertyType:b,ReferenceType:_,ObjectTypes:x,createConfigSet:r,createConfigChoice:a,createConfigArray:o,createStyle:s,createStringProperty:function(e){return l(b.String,e)},createIntegerProperty:function(e){return l(b.Integer,e)},createDoubleProperty:function(e){return l(b.Double,e)},createColorProperty:function(e){return l(b.Color,e)},createBooleanProperty:function(e){return l(b.Boolean,e)},createResourceProperty:function(e){return l(b.Resource,e)},createEnumProperty:function(t,n){function i(e){var t=s[e.toLowerCase()];return void 0===t&&(t=c),t}function r(e){return u.hasOwnProperty(e)?e:"string"==typeof e?i(e):c}var o,a,s={},u={},c=n;for(o in t)t.hasOwnProperty(o)&&(a=t[o],s[o.toLowerCase()]=a,u[a]=!0);return c="string"==typeof n?i(n):n,e.assimilate(l(b.Enum,c),{fromString:i,validate:r})},createConfigSetReference:function(e,t){return u(_.ConfigSetReference,e,t)},createDataReference:function(e,t){return u(_.DataReference,e,t)},createStyleReference:function(e,t){return u(_.StyleReference,e,t)},createConfigCollection:function(e,t){return c(e,t)},createSchema:i,makeConfigId:d,splitConfigId:h};return T}),define("oven/unvetted/contracts/commonConfig",["oven/framework/config/schema/configSchemaBuilder"],function(e){var t={SIZE_MODE:{FIXED:0,PERCENT:1,PACKED:2,STRETCH:3},GRIDLINE_DASHED:0,GRIDLINE_SOLID:1,GRIDLINE_TYPES:{GRIDLINE_DASHED:0,GRIDLINE_SOLID:1},COLOR_RAMP_TYPE_3POINT:0,COLOR_RAMP_TYPE_5POINT:1,COLOR_RAMP_TYPE_BREWER:2,COLOR_RAMP_TYPE_MUTED_3POINT:3,DASH_RENDERER_DRAWIMAGE:0,DASH_RENDERER_GRADIENT:1,DASH_RENDERER_LINETO:2,DASH_RENDERER_TYPES:{DASH_RENDERER_DRAWIMAGE:0,DASH_RENDERER_GRADIENT:1,DASH_RENDERER_LINETO:2},FILTER_ALPHA_MODE:0,FILTER_GRAYSCALE_MODE:1,SPLITTER_DRAWIMAGE:0,SPLITTER_RESIZE:1,SPLITTER_DRAW_TYPES:{SPLITTER_DRAWIMAGE:0,SPLITTER_RESIZE:1},RIBBON_DOCK_LEFT:1,RIBBON_DOCK_RIGHT:2,ALIGNMENT_NONE:0,ALIGNMENT_LEFT:1,ALIGNMENT_RIGHT:2,ALIGNMENT_TOP:3,ALIGNMENT_BOTTOM:4,ALIGNMENT_CENTER:5,ALIGN_TYPES:{ALIGN_LEFT:0,ALIGN_TOP:1,ALIGN_RIGHT:2,ALIGN_BOTTOM:3},createDefaultStringTable:function(){var e={filterTitle:"Change",buttonLabelAnnotate:"Annotate",tooltipAnnotate:"Click to show/hide the Annotations Toolbar",buttonLabelReset:"Reset",tooltipReset:"To remove any zoom.  You can also double click on the chart to reset.",buttonLabelTrack:"Track",tooltipTrack:"Click to show/hide the price/time tracking crosshairs",buttonLabelZoom:"Zoom",tooltipZoom:"Click to activate/deactivate the date/time Zoom mode",dayNamesInitial:["S","M","T","W","R","F","S"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNamesInitial:["J","F","M","A","M","J","J","A","S","O","N","D"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthNamesFull:["January","February","March","April","May","June","July","August","September","October","November","December"],quarterNamesShort:["Q1","Q2","Q3","Q4"],trillionsInitial:"T",billionsInitial:"B",millionsInitial:"M",thousandsInitial:"k"};return e},configSetNames:{DefaultStringTable:"DefaultStringTable",DayNamesInitials:"DayNameInitials",DayNamesShort:"DayNamesShort",DayNamesFull:"DayNamesFull",MonthNamesShort:"MonthNamesShort",MonthNamesFull:"MonthNamesFull",QuarterNamesShort:"QuarterNamesShort"}};return t.defaultStringTableProperties={filterTitle:e.createStringProperty("Change"),buttonLabelAnnotate:e.createStringProperty("Annotate"),tooltipAnnotate:e.createStringProperty("Click to show/hide the Annotations Toolbar"),buttonLabelReset:e.createStringProperty("Reset"),tooltipReset:e.createStringProperty("To remove any zoom.  You can also double click on the chart to reset."),buttonLabelTrack:e.createStringProperty("Track"),tooltipTrack:e.createStringProperty("Click to show/hide the price/time tracking crosshairs"),buttonLabelZoom:e.createStringProperty("Zoom"),tooltipZoom:e.createStringProperty("Click to activate/deactivate the date/time Zoom mode"),dayNamesInitial:e.createConfigSet(t.configSetNames.DayNamesInitials,{0:e.createStringProperty("S"),1:e.createStringProperty("M"),2:e.createStringProperty("T"),3:e.createStringProperty("W"),4:e.createStringProperty("R"),5:e.createStringProperty("F"),6:e.createStringProperty("S")}),dayNamesShort:e.createConfigSet(t.configSetNames.DayNamesShort,{0:e.createStringProperty("Sun"),1:e.createStringProperty("Mon"),2:e.createStringProperty("Tue"),3:e.createStringProperty("Wed"),4:e.createStringProperty("Thu"),5:e.createStringProperty("Fri"),6:e.createStringProperty("Sat")}),dayNamesFull:e.createConfigSet(t.configSetNames.DayNamesFull,{0:e.createStringProperty("Sunday"),1:e.createStringProperty("Monday"),2:e.createStringProperty("Tuesday"),3:e.createStringProperty("Wednesday"),4:e.createStringProperty("Thursday"),5:e.createStringProperty("Friday"),6:e.createStringProperty("Saturday")}),monthNamesShort:e.createConfigSet(t.configSetNames.MonthNamesShort,{0:e.createStringProperty("Jan"),1:e.createStringProperty("Feb"),2:e.createStringProperty("Mar"),3:e.createStringProperty("Apr"),4:e.createStringProperty("May"),5:e.createStringProperty("Jun"),6:e.createStringProperty("Jul"),7:e.createStringProperty("Aug"),8:e.createStringProperty("Sep"),9:e.createStringProperty("Oct"),10:e.createStringProperty("Nov"),11:e.createStringProperty("Dec")}),monthNamesFull:e.createConfigSet(t.configSetNames.MonthNamesFull,{0:e.createStringProperty("January"),1:e.createStringProperty("February"),2:e.createStringProperty("March"),3:e.createStringProperty("April"),4:e.createStringProperty("May"),5:e.createStringProperty("June"),6:e.createStringProperty("July"),7:e.createStringProperty("August"),8:e.createStringProperty("September"),9:e.createStringProperty("October"),10:e.createStringProperty("November"),11:e.createStringProperty("December")}),quarterNamesShort:e.createConfigSet(t.configSetNames.QuarterNamesShort,{0:e.createStringProperty("Q1"),1:e.createStringProperty("Q2"),2:e.createStringProperty("Q3"),3:e.createStringProperty("Q4")}),trillionsInitial:e.createStringProperty("T"),billionsInitial:e.createStringProperty("B"),millionsInitial:e.createStringProperty("M"),thousandsInitial:e.createStringProperty("k")},t.defaultStringTableConfigSet=e.createConfigSet(t.configSetNames.DefaultStringTable,t.defaultStringTableProperties),t}),define("oven/unvetted/library/charting",[],function(){var e=2*Math.PI,t=[function(e,t){return[e,t,!0]},function(e,t){return[e,Math.PI-t,!1]},function(t,n){return[e-t,Math.PI-n,!0]},function(t,n){return[e-t,n,!1]}],n={fontSizeMin:6,fontSize:8,fontFamily:"Calibri,Verdana,Arial,Helvetica-Light,ArialMT,Helvetica,sans-serif",getFontForText:function(e,t,n,i,r,o){var a,s,l=r||this.fontSize;if(o=o||this.fontSizeMin,l<=this.fontSizeMin)a=l.toString()+"px "+i,e.font=a;else for(;l>=o&&(a=l.toString()+"px "+i,e.font=a,s=e.measureText(t),!(s.width<=n));)l-=1;return Math.max(l,o)},drawLine:function(e,t,n,i,r,o,a){a&&(e.lineWidth=a),e.strokeStyle=t,e.beginPath(),this.drawBatchLine(e,n,i,r,o),e.stroke()},drawBatchLine:function(e,t,n,i,r){t===i?(t=this.round(e,t),i=t):n===r&&(n=this.round(e,n),r=n),e.moveTo(t,n),e.lineTo(i,r)},dashedLineTo:function(e,t,n,i,r,o){var a,s=function(e,t){return t>=e},l=function(e,t){return e>=t},u=function(e,t){return t>e?e:t},c=function(e,t){return e>t?e:t},d={thereYet:l,cap:u},h={thereYet:l,cap:u};n-r>0&&(h.thereYet=s,h.cap=c),t-i>0&&(d.thereYet=s,d.cap=c),e.moveTo(t,n);var f,p=t,g=n,m=0,v=!0;if("number"==typeof o){f=o;do a=Math.atan2(r-n,i-t),p=d.cap(i,p+Math.cos(a)*f),g=h.cap(r,g+Math.sin(a)*f),v?e.lineTo(p,g):e.moveTo(p,g),v=!v;while(!d.thereYet(p,i)||!h.thereYet(g,r))}else do a=Math.atan2(r-n,i-t),f=o[m],p=d.cap(i,p+Math.cos(a)*f),g=h.cap(r,g+Math.sin(a)*f),v?e.lineTo(p,g):e.moveTo(p,g),m=(m+1)%o.length,v=!v;while(!d.thereYet(p,i)||!h.thereYet(g,r))},dashedVerticalLineTo:function(e,t,n,i,r,o){var a=function(e,t){return t>=e},s=function(e,t){return e>=t},l=function(e,t){return t>e?e:t},u=function(e,t){return e>t?e:t},c={thereYet:s,cap:l},d={thereYet:s,cap:l};n-r>0&&(d.thereYet=a,d.cap=u),t-i>0&&(c.thereYet=a,c.cap=u),e.moveTo(t,n);var h,f=t,p=n,g=0,m=!0;if("number"==typeof o){h=o;var v=Math.round(Math.abs((r-n)/h))+1;do f=c.cap(i,f),p=d.cap(r,p-h),m?e.lineTo(f,p):e.moveTo(f,p),m=!m;while(--v)}else do h=o[g],f=c.cap(i,f),p=d.cap(r,p-h),m?e.lineTo(f,p):e.moveTo(f,p),g=(g+1)%o.length,m=!m;while(!c.thereYet(f,i))},dashedHorizontalLineTo:function(e,t,n,i,r,o){var a=function(e,t){return t>=e},s=function(e,t){return e>=t},l=function(e,t){return t>e?e:t},u=function(e,t){return e>t?e:t},c={thereYet:s,cap:l},d={thereYet:s,cap:l};n-r>0&&(d.thereYet=a,d.cap=u),t-i>0&&(c.thereYet=a,c.cap=u),e.moveTo(t,n);var h,f=t,p=n,g=0,m=!0;if("number"==typeof o){h=o;var v=Math.round(Math.abs((i-t)/h))+1;do f=c.cap(i,f+h),p=d.cap(r,p),m?e.lineTo(f,p):e.moveTo(f,p),m=!m;while(--v)}else do h=o[g],f=c.cap(i,f+h),p=d.cap(r,p),m?e.lineTo(f,p):e.moveTo(f,p),g=(g+1)%o.length,m=!m;while(!c.thereYet(f,i))},roundRect:function(e,t,n,i,r,o,a,s){void 0===s&&(s=!0),void 0===o&&(o=5),e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+i-o,n),e.quadraticCurveTo(t+i,n,t+i,n+o),e.lineTo(t+i,n+r-o),e.quadraticCurveTo(t+i,n+r,t+i-o,n+r),e.lineTo(t+o,n+r),e.quadraticCurveTo(t,n+r,t,n+r-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),s&&e.stroke(),a&&e.fill()},round:function(e,t){return 0===e.lineWidth%2?.5+t<<0:Math.floor(t)+.5},point:function(e,t){var n=this;return{x:e,y:t,subtract:function(i){return n.point(e-i.x,i.y-t)}}},drawArc:function(e,t,n,i,r,o,a,s,l,u,c,d){e.beginPath(),e.moveTo(t,n),e.arc(i,r,o,a,s,d),e.closePath(),l&&(e.fillStyle=l,e.fill()),u&&(e.strokeStyle=u,c&&(e.lineWidth=c),e.stroke())},drawCircle:function(t,n,i,r,o,a,s){this.drawArc(t,n+r,i,n,i,r,0,e,o,a,s)},drawVerticallyClippedCircle:function(t,n,i,r,o,a,s,l,u){var c=n-r,d=Math.acos(c/a);this.drawArc(t,r+c,o,r,o,a,d,e-d,s,l,u,i)},drawHorizontallyClippedCircle:function(e,t,n,i,r,o,a,s,l){var u=t-r,c=Math.asin(u/o);this.drawArc(e,i,r+u,i,r,o,c,Math.PI-c,a,s,l,n)},corners:{TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3},cornerClippedCircle:function(e,n,i,r,o,a,s,l,u,c){var d=n-o,h=Math.acos(d/s),f=i-a,p=Math.asin(f/s),g=t[r](h,p);this.drawArc(e,o+d,a+f,o,a,s,g[0],g[1],l,u,c,g[2])},drawBeveledRect:function(e,t,n,i,r,o,a,s,l){if(e.save(),a){var u=Math.round(t),c=Math.round(n);e.fillStyle=a,e.fillRect(u,c,i,r)}if(o>0&&s){var d=.5*o;if(e.lineWidth=o,e.strokeStyle=s,s!==l&&l){n=this.round(e,n+d);var h=this.round(e,n+r-o),f=this.round(e,t+i);t=Math.ceil(t+d),e.beginPath(),e.moveTo(t,h),e.lineTo(t,n),e.lineTo(f,n),e.stroke(),e.strokeStyle=l,f=Math.ceil(f-d),e.beginPath(),e.moveTo(t,h),e.lineTo(f,h),e.lineTo(f,n),e.stroke()}else e.strokeRect(this.round(e,t+d),this.round(e,n+d),Math.round(i),Math.round(r))}e.restore()},createLinearGradient:function(e,t,n,i,r,o){var a=e.createLinearGradient(n,i,n+r,i+o),s=t.length;if(s)for(var l=0;s>l;l++)a.addColorStop(t[l].offset,t[l].color);else a.addColorStop(0,t||e.strokeStyle),a.addColorStop(1,t||e.fillStyle);return a},createStyle:function(e,t,i,r,o,a){return t instanceof Array?n.createLinearGradient(e,t,i,r,o,a):t},setClipRectangle:function(e,t){e.beginPath(),e.moveTo(t.left,t.top),e.lineTo(t.right,t.top),e.lineTo(t.right,t.bottom),e.lineTo(t.left,t.bottom),e.closePath(),e.clip()}};return n}),define("oven/unvetted/library/boundingBox",["oven/unvetted/kernel/kernelDraw","oven/unvetted/library/charting","oven/unvetted/kernel/kernelUtil"],function(e,t,n){var i,r=0;return i={createBoundingBox:function(o,a,s,l){if(isNaN(o)||isNaN(a)||isNaN(s)||isNaN(l))throw n.log.error("createBoundingBox","("+o+", "+a+", "+s+", "+l+", "+"): one or more parms passed to createBoundingBox were of value NaN"),new Error("[boundingBox] one or more parms passed to createBoundingBox were of value NaN");return{id:"boundingBox"+(r+=1),left:o,right:o+s,top:a,bottom:a+l,width:s,height:l,contains:function(e,t){return e>=this.left&&t>=this.top&&e<this.right&&t<this.bottom},clampHorizontal:function(e){return Math.min(this.right,Math.max(this.left,e))},clampVertical:function(e){return Math.min(this.bottom,Math.max(this.top,e))},union:function(e){var t,n=Math.min(this.left,e.left),r=Math.min(this.top,e.top);return t=i.createBoundingBox(n,r,Math.max(this.right,e.right)-n,Math.max(this.bottom,e.bottom)-r)},intersection:function(e){var t,n=Math.max(this.left,e.left),r=Math.max(this.top,e.top);return t=i.createBoundingBox(n,r,Math.min(this.right,e.right)-n,Math.min(this.bottom,e.bottom)-r)},intersects:function(e){return!(e.left>this.right||e.right<this.left||e.top>this.bottom||e.bottom<this.top)},offset:function(e,t){return this.left+=e,this.right+=e,this.top+=t,this.bottom+=t,this},update:function(e,t,n,i){return this.left=e||0,this.width=n||0,this.right=this.left+this.width,this.top=t||0,this.height=i||0,this.bottom=this.top+this.height,this},deflate:function(e,t,n,i){return this.left+=e,this.width-=e+n,this.right-=n,this.top+=t,this.height-=t+i,this.bottom-=i,this},inflate:function(e,t,n,i){return this.left-=e,this.width+=e+n,this.right+=n,this.top-=t,this.height+=t+i,this.bottom+=i,this},scale:function(e,t){this.left*=e,this.right*=e,this.top*=t,this.bottom*=t,this.width=this.right-this.left,this.height=this.bottom-this.top},clearRect:function(t){e.setContext(t),e.clearRect(this.left-.5,this.top-.5,this.width+1.5,this.height+1)},fillRect:function(e){e.fillRect(this.left,this.top,this.width,this.height)},strokeRect:function(e){e.strokeRect(t.round(e,this.left),t.round(e,this.top),this.width,this.height)},clip:function(e){e.beginPath(),e.moveTo(this.left+1,this.top+1),e.lineTo(this.right,this.top+1),e.lineTo(this.right,this.bottom),e.lineTo(this.left+1,this.bottom),e.closePath(),e.clip()},equals:function(e){return e.left===this.left&&e.right===this.right&&e.top===this.top&&e.bottom===this.bottom},copyFrom:function(e,t){this.update(e.left,e.top,e.width,e.height),t&&(t.paddingLeft||t.paddingLeftPercent||t.paddingTop||t.paddingTopPercent||t.paddingRight||t.paddingRightPercent||t.paddingBottom||t.paddingBottomPercent)&&(this.deflate(t.paddingLeft||Math.round(t.paddingLeftPercent/100*e.width)||0,t.paddingTop||Math.round(t.paddingTopPercent/100*e.width)||0,t.paddingRight||Math.round(t.paddingRightPercent/100*e.width)||0,t.paddingBottom||Math.round(t.paddingBottomPercent/100*e.width)||0),(t.marginLeft||t.marginTop||t.marginRight||t.marginBottom)&&this.deflate(t.marginLeft||0,t.marginTop||0,t.marginRight||0,t.marginBottom||0))}}}}}),define("oven/legacy/library/layers/layer",["oven/unvetted/contracts/events","oven/library/utility/objects"],function(e,t){var n;return n={PICKLAYER_Z:9969,MAX_Z:9999,touchPaddingRadius:10,touchPadding:20,createLayer:function(e,t,n,i){return{canvas:t,overlay:n,textOverlay:i,interactions:[],offsetX:0,offsetY:0,isVisible:!0,hide:function(){this.isVisible=!1},show:function(){this.isVisible=!0}}},hitTest:function(e,n,i,r){var o,a,s=!1;return e&&(a=e.pickBoundingBox||e.boundingBox,a&&void 0!==n.x&&void 0!==n.y)?(o=e.notify&&i,(e.offsetX||e.offsetY)&&(a=t.clone(a),a.offset(e.offsetX||0,e.offsetY||0)),s=a.contains(n.x,n.y),o&&(s?(e.hit=!0,s=e.notify(n)):this.notifyIfMouseLeaving(e,n,r,s)),s):!1},notifyIfMouseLeaving:function(t,n,i,r){return!t.hit||r!==!1&&this.hitTest(t,n,!1,i)?!1:(t.hit=!1,t.notify(e.createMouseEvent(e.MOUSE_LEAVE,n.x,n.y,0,t,n.originalEvent)),!0)}}}),define("oven/unvetted/contracts/baseDataContract",[],function(){var e={DataTypes:{Table:1,Image:2},FieldTypes:{UNKNOWN:"UNKNOWN",STRING:"STRING",DOUBLE:"DOUBLE",BOOLEAN:"BOOLEAN",DATE:"DATE",DATETIME:"DATETIME",INTEGER:"INTEGER",ARRAY:"ARRAY"}};return e}),/**
 * @file      A module that extends the global Math object.
 * @author    Bret Alfieri <balfieri2@bloomberg.net>
 * @copyright Bloomberg LP 2014
 */
define("oven/library/math/base/mathExt",[],function(){var e={};return e.E=Math.E,e.LN_2=Math.LN2,e.LN_10=Math.LN10,e.LOG_2E=Math.LOG2E,e.LOG_10E=Math.LOG10E,e.PI=Math.PI,e.INV_SQRT_2=Math.SQRT1_2,e.SQRT_2=Math.SQRT2,e.abs=Math.abs,e.acos=Math.acos,e.asin=Math.asin,e.atan=Math.atan,e.atan2=Math.atan2,e.ceil=Math.ceil,e.cos=Math.cos,e.exp=Math.exp,e.floor=Math.floor,e.log=Math.log,e.max=Math.max,e.min=Math.min,e.pow=Math.pow,e.random=Math.random,e.round=Math.round,e.sin=Math.sin,e.sqrt=Math.sqrt,e.tan=Math.tan,e.TWO_PI=2*Math.PI,e.HALF_PI=.5*Math.PI,e.TO_DEGREES=180/Math.PI,e.TO_RADIANS=Math.PI/180,e.log2=function(e){return Math.log(e)/Math.LN2},e.log10=function(e){return Math.log(e)/Math.LN10},e.logb=function(e,t){return Math.log(e)/Math.log(t)},e.lerp=function(e,t,n){return e+n*(t-e)},e.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},e.saturate=function(e){return Math.min(Math.max(0,e),1)},e.equalsRel=function(e,t,n){return n||(n=0),Math.abs(e-t)<=n*Math.max(Math.max(Math.abs(e),Math.abs(t)),1)},e.gcf=function(t,n){return 0==n?t:e.gcf(n,t%n)},e.lcm=function(t,n){var i=e.gcf(t,n);return i?t/i*n:0},e.lcmArray=function(t){return t.length>1?(t.push(e.lcm(t.shift(),t.shift())),e.lcmArray(t)):t[0]},e}),/**
 * @file      A module containing a functional interface for 2D points.
 * @author    Bret Alfieri <balfieri2@bloomberg.net>,
 *            Alex Betts <abetts3@bloomberg.net>
 * @copyright Bloomberg LP 2014
 */
define("oven/library/math/geometry2d/point2d",["oven/library/math/base/mathExt","oven/library/math/base/typedArrays"],function(e,t){var n={};return n.create=function(e,n){return void 0===e?t.createFloat32Array(0,0):t.createFloat32Array(e,n)},n.clone=function(e){return t.createFloat32Array(e[0],e[1])},n.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},n.init=function(e,t,n){return e[0]=t,e[1]=n,e},n.neg=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},n.addVec=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},n.subVec=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},n.subPoint=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},n.transform=function(e,t,n){var i=t[0],r=t[1];return e[0]=n[0]*i+n[3]*r+n[6],e[1]=n[1]*i+n[4]*r+n[7],e},n.transformHomothetic=function(e,t,n){var i=n[0],r=n[1],o=n[2],a=n[3];return e[0]=t[0]*i+o,e[1]=t[1]*r+a,e},n.equalsRel=function(t,n,i){return e.equalsRel(t[0],n[0],i)&&e.equalsRel(t[1],n[1],i)},n.toString=function(e){return"["+e[0]+","+e[1]+"]"},n}),define("oven/library/math/aabox",["oven/library/math/geometry2d/point2d","oven/unvetted/kernel/kernelUtil"],function(e){var t;return t={initEmpty:function(e){return e[0]=1/0,e[1]=1/0,e[2]=-1/0,e[3]=-1/0,e},initInfinite:function(e){return e[0]=-1/0,e[1]=-1/0,e[2]=1/0,e[3]=1/0,e},init:function(e,t,n,i,r){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e},initSize:function(e,t,n){return t>0?(e[0]=0,e[2]=t):0>t?(e[0]=0,e[2]=-t):(e[0]=1/0,e[2]=-1/0),n>0?(e[1]=0,e[3]=n):0>n?(e[1]=0,e[3]=-n):(e[1]=1/0,e[3]=-1/0),e},initOriginSize:function(e,t,n,i,r){return i>0?(e[0]=t,e[2]=t+i):0>i?(e[0]=t+i,e[2]=t):(e[0]=1/0,e[2]=-1/0),r>0?(e[1]=n,e[3]=n+r):0>r?(e[1]=n+r,e[3]=n):(e[1]=1/0,e[3]=-1/0),e},initCopy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},initSizeCopy:function(e,t){return e[0]=0,e[1]=0,e[2]=t[2]-t[0],e[3]=t[3]-t[1],e},initEnvelope:function(e,n){return t.initEmpty(e),t.envelope(e,e,n),e},createEmpty:function(){return[1/0,1/0,-1/0,-1/0]},createInfinite:function(){return[-1/0,-1/0,1/0,1/0]},create:function(e,n,i,r){return t.init([1/0,1/0,-1/0,-1/0],e,n,i,r)},createOriginSize:function(e,n,i,r){return t.initOriginSize([1/0,1/0,-1/0,-1/0],e,n,i,r)},createSize:function(e,n){return t.initSize([1/0,1/0,-1/0,-1/0],e,n)},createCopy:function(e){return[e[0],e[1],e[2],e[3]]},createSizeCopy:function(e){return t.initSizeCopy([1/0,1/0,-1/0,-1/0],e)},width:function(e){return e[2]-e[0]},height:function(e){return e[3]-e[1]},origin:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=1,e},center:function(e,t){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e[2]=1,e},extent:function(e,t){return e[0]=t[2],e[1]=t[3],e},size:function(e,t){return e[0]=t[2]-t[0],e[1]=t[3]-t[1],e},intervals:function(e,t){return e[0][0]=t[0],e[0][1]=t[2],e[1][0]=t[1],e[1][1]=t[3],e},corners:function(e,t){return e[0][0]=t[0],e[0][1]=t[1],e[1][0]=t[2],e[1][1]=t[1],e[2][0]=t[2],e[2][1]=t[3],e[3][0]=t[0],e[3][1]=t[3],e},translate:function(e,t,n){var i=n[0],r=n[1];return e[0]=t[0]+i,e[1]=t[1]+r,e[2]=t[2]+i,e[3]=t[3]+r,e},scale:function(e,t,n){var i=n[0],r=n[1];return e[0]=t[0]*i,e[1]=t[1]*r,e[2]=t[2]*i,e[3]=t[3]*r,e},uniformScale:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},empty:function(e){return e[0]>=e[2]||e[1]>=e[3]},contains:function(e,t){return e[0]<=t[0]&&t[0]<=e[2]&&e[1]<=t[1]&&t[1]<=e[3]},subset:function(e,t){var n,i;return n=t[0]<=e[0]&&e[2]<=t[2],i=t[1]<=e[1]&&e[3]<=t[3],n&&i},overlaps:function(e,t){var n,i;return n=e[0]<=t[0]&&t[0]<=e[2]||t[0]<=e[0]&&e[0]<=t[2],i=e[1]<=t[1]&&t[1]<=e[3]||t[1]<=e[1]&&e[1]<=t[3],n&&i},intersection:function(e,t,n){var i,r;return i=Math.max(t[0],n[0]),r=Math.min(t[2],n[2]),r>=i?(e[0]=i,e[2]=r):(e[0]=1/0,e[2]=-1/0),i=Math.max(t[1],n[1]),r=Math.min(t[3],n[3]),r>=i?(e[1]=i,e[3]=r):(e[1]=1/0,e[3]=-1/0),e},hull:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[2]=Math.max(t[2],n[2]),e[1]=Math.min(t[1],n[1]),e[3]=Math.max(t[3],n[3]),e},envelope:function(e,t,n){var i,r,o=n.length;if(o>0)for(r=n[0],e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.max(t[2],r[0]),e[3]=Math.max(t[3],r[1]),i=1;o>i;i+=1)r=n[i],e[0]=Math.min(e[0],r[0]),e[1]=Math.min(e[1],r[1]),e[2]=Math.max(e[2],r[0]),e[3]=Math.max(e[3],r[1]);else e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3];return e},envelopev:function(e,t){var n,i,r=arguments.length;for(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],n=2;r>n;++n)i=arguments[n],e[0]=Math.min(e[0],i[0]),e[1]=Math.min(e[1],i[1]),e[2]=Math.max(e[2],i[0]),e[3]=Math.max(e[3],i[1]);return e},transformAffine2d:function(n,i,r){var o=[[0,0],[0,0],[0,0],[0,0]];return t.corners(o,i),t.initEmpty(n),o.forEach(function(t){e.transform(t,t,r)}),t.envelope(n,n,o),n},transformAffine2dAsHomothetic2d:function(e,t,n){var i=n[0],r=n[4],o=n[6],a=n[7];return e[0]=t[0]*i+o,e[1]=t[1]*r+a,e[2]=t[2]*i+o,e[3]=t[3]*r+a,e},transformHomothetic2d:function(e,t,n){var i=n[0],r=n[1],o=n[2],a=n[3];return e[0]=t[0]*i+o,e[1]=t[1]*r+a,e[2]=t[2]*i+o,e[3]=t[3]*r+a,e}}}),define("oven/unvetted/library/textRendering",["oven/unvetted/contracts/baseDataContract","oven/unvetted/library/charting","oven/library/math/aabox","oven/unvetted/library/boundingBox"],function(e,t,n,i){var r,o=e.FieldTypes,a=.5*Math.PI,s=.5*a,l=function(e){return e&&Math.abs(e-a)>s},u=function(e,t){t&&e.push(t)};return r={fontSizeMin:6,fontSize:10,fontFamily:"Calibri,Verdana,Arial,Helvetica-Light,ArialMT,Helvetica,sans-serif",FACEMOD_BOLD:"bold",FACEMOD_BOLDER:"bolder",FACEMOD_LIGHTER:"lighter",FACEMOD_ITALIC:"italic",FACEMOD_SMALLCAPS:"small-caps",TEXTALIGN_START:"start",TEXTALIGN_END:"end",TEXTALIGN_CENTER:"center",TEXTALIGN_LEFT:"left",TEXTALIGN_RIGHT:"right",TEXTBASELINE_ALPHABETIC:"alphabetic",TEXTBASELINE_BOTTOM:"bottom",TEXTBASELINE_HANGING:"hanging",TEXTBASELINE_IDEOGRAPHIC:"ideographic",TEXTBASELINE_MIDDLE:"middle",TEXTBASELINE_TOP:"top",SPLITTABLE_CHARS:[" ","/","-","&"],createTextRenderer:function(e,o){var a,s=e,u=s.getContext("2d"),c=o&&o.lineSpacing||-1,d=o&&o.horizontalPadding||0,h=o&&o.verticalPadding||0;return a={setRenderState:function(e,t,n,i,r){this.setFontString(e),this.setFillStyle(t),this.setStrokeStyle(n),this.setAlignment(i),this.setBaseline(r)},setFontString:function(e){e&&(u.font=e)},setAlignment:function(e){e&&(u.textAlign=e)},setFillStyle:function(e){e&&(u.fillStyle=e)},setStrokeStyle:function(e){e&&(u.strokeStyle=e)},setBaseline:function(e){e&&(u.textBaseline=e)},setShadow:function(e,t,n,i){e&&(u.shadowOffsetX=e),t&&(u.shadowOffsetY=t),n&&(u.shadowBlur=n),i&&(u.shadowColor=i)},drawFilledString:function(e,t,n,i,r,o){u.save(),this.setRenderState(i,r,null,o),this.drawBatchString(e,t,n),u.restore()},drawStrokedString:function(e,t,n,i,r,o){u.save(),this.setRenderState(i,null,r,o),this.drawBatchString(e,t,n),u.restore()},drawString:function(e,t,n,i,r,o){this.drawFilledString(e,t,n,i,r,o)},drawBatchStringRotated:function(e,t,n,i,r){u.save(),l(i)&&r!==!0?u.translate(t,e):u.translate(e,t),u.rotate(i),u.fillText(n,0,0),u.restore()},drawBatchString:function(e,t,n){u.fillStyle&&u.fillText(n,e,t)},drawBatchStringMaxWidth:function(e,t,n,i){u.fillStyle&&u.fillText(n,e,t,i)},drawBatchOutlinedString:function(e,t,n){u.strokeStyle&&u.strokeText(n,e,t),u.fillStyle&&u.fillText(n,e,t)},clear:function(e,t,n,i){e&&t&&n&&i?u.clearRect(e,t,n,i):u.clearRect(0,0,s.width,s.height)},measureString:function(e){return u.measureText(e).width},getFontHeight:function(){var e,t=u.font,n=t.split(" ");for(e=0;e<n.length;e++)if(-1!==n[e].indexOf("px",this.length-2))return Number(n[e].substring(0,n[e].length-2));return 0},getCanvasWidth:function(){return s.width*s.invPixelScale},getCanvasHeight:function(){return s.height*s.invPixelScale},setLineSpacing:function(e){c=e},setVerticalPadding:function(e){h=e},setHorizontalPadding:function(e){d=e},getLineSpacing:function(e){return-1===c?Math.round(.2*(e||this.getFontHeight())):c},computeTextX:function(e){var t,i=n.width(e)-2*d,r=e[0]+d,a=r+.5*i;switch(o&&o.textAlign||u.textAlign){case"left":case"start":t=e[0];break;case"end":case"right":t=e[2];break;case"center":t=a}return t},computeTextY:function(e,t,i){var r,a,s,l=this.getLineSpacing(),c=n.height(e)-2*h,d=e[1]+h,f=d+.5*c;switch(r=t*(i+l)-l,s=f-.5*r,o&&o.textBaseline||u.textBaseline){case"top":case"hanging":a=0;break;case"middle":a=-.5*i;break;case"alphabetic":case"ideographic":case"bottom":a=-i}return s-a},measureRichText:function(e){var t,n,i,r,o,a,s,l=this.getFontHeight(),c=e.length,d=0,h=0,f=0;for(t=0;c>t;++t)if(i=e[t].text,0!==i.length)for(r=i.split("\n"),o=r.length,n=0;o>n;++n)a=r[n],d+=u.measureText(a).width,(n!==o-1||"\n"===a.charAt(a.length-1))&&(d>h&&(h=d),d=0,f++);return 0!==d&&(d>h&&(h=d),f++),s=f>1?this.getLineSpacing(l)*f:0,{width:h,height:f*l+s}},drawRichText:function(e,t,n,i){var r,o,a,s,l,c,d,h=this.getFontHeight(),f=this.getLineSpacing(),p=e.length,g=t,m=n,v=u.fillStyle,y=i?u.strokeText:u.fillText;for(r=0;p>r;++r)if(a=e[r].color||v,i?u.strokeStyle=a:u.fillStyle=a,s=e[r].text,0!==s.length)for(l=s.split("\n"),c=l.length,o=0;c>o;++o)d=l[o],y.call(u,d,g,m),o!==c-1||"\n"===d.charAt(d.length-1)?(m+=h+f,g=t):g+=u.measureText(d).width;u.fillStyle=v},wordWrapText:function(e,n,a){u.save();var s,c,d,h,f,p,g,m,v,y,b,_,x,w,C,T,E,S,k,A,M,N,D=r.SPLITTABLE_CHARS,P=function(e,t){var n,i,r,o=e.length,a=0,s=[],l="0123456789.";for(n=0;o>n;++n)i=e[n],D.indexOf(i)>=0&&(r=o-1>n&&l.indexOf(e[n+1])>=0,r&&"-"===i||(s.push(e.substring(a,n)),t.push(i),a=n+1));return n!==a&&s.push(e.substring(a,o)),s},I=l(a),O=n.width,R=n.height,L=n.left,B=n.top,F=o&&o.fontFamily||r.fontFamily,j=!1,H=o&&o.fontSize||this.getFontHeight(),V=.5,z=o&&o.fontSizeMin||r.fontSizeMin,$=this.measureString(" ");switch(s=.5*R,c=L+.5*O,d=B+.5*R,o&&o.textAlign||u.textAlign){case"left":case"start":p=n.left;break;case"end":case"right":p=n.right;break;case"center":p=c}for(;!j&&H>=z;){for(N=this.getLineSpacing(H),h=r.buildFontString(H,F),this.setFontString("Bold "+h),f=H+N,g=d,m=[],v="",y=[],b=[],_=P(e,y),x=0,A=_.length,w=0;A>w;w++)for(T=_[w].split("\n"),S=w<_.length-1?y[w]:" ",C=0;C<T.length;C++)E=this.measureString(T[C])+$,(0!==C||E+x>O)&&v.length>0?(b.push(x),x=E,m.push(v),v=T[C]+S):(x+=E,v+=T[C]+S);for(m.push(v),b.push(x),A=m.length,w=0;w<m.length;w++)m[w]=m[w].replace(/\s+$/,"");g-=f*(m.length-1)/2,d-s>g?H-=V:j=!0}for(E=0,A=b.length,w=0;A>w;w+=1)b[w]>E&&(E=b[w],M=w);return I&&(E=O,O=R,R=E),A-=1,H=t.getFontForText(u,m[M],O,F,H,o.fontSizeMin||r.fontSizeMin),j=u.measureText(m[M])<=O,H=Math.round(Math.min(H,R/A-A*N)),H=Math.max(H,r.fontSizeMin),N=this.getLineSpacing(H),f=H+N,h=r.buildFontString(H,F),g=B+.5*(I?O:R)-.5*f*A,k={fontString:h,fontSize:H,fontFitted:j,isVertical:I,textX:p,textY:g,lineHeight:f,lines:m,lineLengths:b,angle:a},k.clipBoundingBox=I?i.createBoundingBox(B,L,O,R):n,u.restore(),k},measureWrappedText:function(e){var t,n,r,a,s,l=0;switch(e.lineLengths.sort(function(e,t){return t-e}),a=e.lineLengths[0],s=e.lines.length*e.lineHeight,t=e.clipBoundingBox,o&&o.textAlign||u.textAlign){case"left":case"start":n=t.left;break;case"end":case"right":n=t.right-a;break;case"center":n=t.left+.5*t.width-.5*a}switch(o&&o.textBaseline||u.textBaseline){case"top":case"hanging":l=0;break;case"middle":l=-.5*e.fontSize;break;case"alphabetic":case"ideographic":case"bottom":l=-e.fontSize}return r=e.textY+l,t=i.createBoundingBox(n,r,a,s)},drawWordWrappedText:function(e,t,n){var i=this.wordWrapText(e,t,n);this.drawWrappedText(i)},drawWrappedText:function(e){var n,i=e.lines.length,r=e.textY;for(u.save(),e.fontFitted||t.setClipRectangle(u,e.clipBoundingBox),this.setFontString(e.fontString),n=0;i>n;n++)this.drawBatchStringRotated(e.textX,r,e.lines[n],e.angle),r+=e.lineHeight;u.restore()},drawFittedText:function(e,t){var i,r,o=e.fittedVertically?e.lines:e.elidedLines,a=e.linesFitted,s=e.lineHeight,l=this.getLineSpacing(),u=this.computeTextX(t),c=this.computeTextY(t,a,s),h=n.width(t)-2*d;for(i=0;a>i;++i)r=o[i],this.drawBatchStringMaxWidth(u,c,r,h),c+=l+s},setCanvas:function(e){u=e.getContext("2d")},restoreCanvasses:function(){u=s.getContext("2d")}}},buildFontString:function(e,t,n){var i,r="";for(i=0;n&&i<n.length;i++)r+=n[i]+" ";return r+e+"px "+t},buildFontStringFull:function(e){var t,n=[];return u(n,e.fontStyle),u(n,e.fontVariant),u(n,e.fontWeight),u(n,e.fontSize+(e.lineHeight&&e.lineHeight.length?"/"+e.lineHeight:"")),u(n,e.fontFamily),t=n.join(" ")},parseFormattedString:function(e,t,n,i,r){return this.parseFormattedStringNew(e,t.getDataView(),n,i,r)},parseFormattedStringNew:function(e,t,n,i,r){var a,s,l,u,c,d,h,f,p,g,m,v,y,b,_,x="~",w=[],C=0,T="";if(a=t.getDataSchema(),s=e.indexOf("{"),l=e.substring(0,s),-1===s)return{fullText:e,coloredPieces:[{text:e,color:null,stringPosition:0}]};for(;-1!==s;){if(d=e.indexOf("}",s),-1===d){l+="undefined";break}if(h=!1,"+"===e.charAt(s+1)?(h=!0,u=e.substring(s+2,d)):u=e.substring(s+1,d),f=!1,p="",g=u.indexOf(x),-1!==g&&(f=!0,p=u.substring(g+1,u.length),u=u.substring(0,g)),u.indexOf(x)===u.length-1&&(f=!0,u=u.substring(0,u.length-1)),c=a.getFieldIndex(u),void 0===c||-1===c)l+="undefined";else switch(m=a.getFieldType(u),v=n[c],m===o.UNKNOWN&&("number"==typeof v?m=o.DOUBLE:"string"==typeof v&&(m=o.STRING)),m){case o.STRING:l+=v;break;case o.DOUBLE:case o.INTEGER:y=m===o.DOUBLE?r&&r.labelFormatDecimalPrecision||2:0,f?(w.push({text:l,color:null,stringPosition:C}),C+=l.replace("\n","").length,b=i.formatNumber(v,void 0,y,h)+p,_=v>0?r&&r.coloredTextPositiveColor?r.coloredTextPositiveColor:"green":0>v?r&&r.coloredTextNegativeColor?r.coloredTextNegativeColor:"red":r&&r.coloredTextUnchangedColor?r.coloredTextUnchangedColor:"white",w.push({text:b,color:_,stringPosition:C}),C+=b.replace("\n","").length,T+=l+b,l=""):l+=i.formatNumber(v,void 0,y,h)}s=e.indexOf("{",d),l+=-1!==s?e.substring(d+1,s):e.substring(d+1,e.length)}return 0===w.length?(T=l,w.push({text:l,color:null,stringPosition:C})):""!==l&&(T+=l,w.push({text:l,color:null,stringPosition:C})),{fullText:T,coloredPieces:w}}}}),define("oven/legacy/library/layers/tooltip",["oven/unvetted/contracts/commonConfig","oven/unvetted/library/charting","oven/unvetted/library/boundingBox","oven/legacy/library/layers/layer","oven/library/utility/objects","oven/unvetted/contracts/platform","oven/unvetted/library/textRendering"],function(e,t,n,i,r,o,a){return{createTooltip:function(e,o,s){var l,u,c,d,h,f,p,g,m=e.getPlatform(),v=o.getContext("2d"),y=4,b=5,_=15,x=s&&s.fontSize?s.fontSize:12,w=null,C=null,T=!1,E=m.isTouch,S=[],k=function(){return void 0===g&&(g=a.createTextRenderer(o,s)),g},A=function(){var e=l.boundingBox;if(e){var t=h+y+3;e.inflate(t,t,t,t),e.clearRect(v),e.deflate(t,t,t,t)}};return l=r.assimilate(i.createLayer(m,o),{drawBackground:function(){v.fillStyle=s&&s.tooltipBackgroundColor||(o.isVML?"black":"rgba(0,0,0,0.8)"),v.strokeStyle=s&&s.tooltipBorderColor||(o.isVML?"white":"rgba(255,255,255,0.5)"),v.lineWidth=h,v.shadowOffsetX=y,v.shadowOffsetY=y,v.shadowBlur=4,v.shadowColor="rgba(0, 0, 0, 0.5)",v.fillRect(this.boundingBox.left,this.boundingBox.top,this.boundingBox.width,this.boundingBox.height),v.shadowOffsetX=0,v.shadowOffsetY=0,v.shadowBlur=0,v.shadowColor="rgba(0, 0, 0, 0)",v.strokeRect(this.boundingBox.left,this.boundingBox.top,this.boundingBox.width,this.boundingBox.height)},draw:function(e){var n;if(this.boundingBox&&p){v.save(),this.drawBackground(),f=p,t.getFontForText(v,f.split("\n")[0],this.boundingBox.width-2*b,c,u),v.fillStyle=d,v.textAlign="right"===e?"right":"center"===e?"center":"left",v.textBaseline="top";var i=f.split("\n");for(n=0;n<i.length;n++)v.fillText(i[n],"left"===v.textAlign?this.boundingBox.left+_:this.boundingBox.left+this.boundingBox.width/2,this.boundingBox.top+b+n*u);v.restore()}},show:function(e,t,n,i){this.setPositionAndContents(e,t,n,i),this.drawRichText(i)},setText:function(e){if(p=e){var t=p.split("\n");this.boundingBox.height=(u+3)*(t.length+1)}},setBoundingBox:function(e){var i=0;A(),E&&(i-=e.height+40);var r=o.width*o.invPixelScale,a=o.height*o.invPixelScale;w=Math.max(t.round(v,Math.min(r-e.width,e.left)),0),C=Math.max(t.round(v,Math.min(a-e.height,e.top+x+i)),0),this.boundingBox=n.createBoundingBox(w,C,e.width,e.height)},setPositionAndContents:function(e,t,i){v.save(),S=i.coloredPieces,p=i.fullText,v.font=a.buildFontString(u,c);var r=k().measureRichText(S),s=r.width+2*b,l=r.height+2*b;return e+s>o.width&&(e-=s+2*_),this.setBoundingBox(n.createBoundingBox(e+_,t,s,l)),v.restore(),e+_},hide:function(){A(),this.isVisible=!1},drawRichText:function(e){if(this.boundingBox&&S){this.isVisible=!0,v.save(),this.drawBackground(),v.textAlign=e||s.textAlign||"left";var t="left"===v.textAlign?this.boundingBox.left+b:this.boundingBox.left+this.boundingBox.width/2,n=this.boundingBox.top+b;T?(n=this.boundingBox.top+this.boundingBox.height/2,k().setBaseline("middle")):v.textBaseline="top",v.font=a.buildFontString(u,c),v.fillStyle=d,k().drawRichText(S,t,n),v.restore()}},updateConfig:function(e){s=e,u=s&&s.fontSize?s.fontSize:t.fontSize,c=s&&s.fontFamily?s.fontFamily:t.fontFamily,d=s&&(s.tooltipFontColor||s.fontColor)||"white",h=s&&s.lineWidth?s.lineWidth:1,b=s&&void 0!==s.paddingLeft?s.paddingLeft:b,_=s&&void 0!==s.marginLeft?s.marginLeft:_,x=s&&void 0!==s.marginTop?s.marginTop:u,T=s&&void 0!==s.centerVertical?s.centerVertical:!1}}),l.updateConfig(s),l}}}),define("oven/unvetted/browserPlatform/browserPlatform",["oven/unvetted/contracts/platform","oven/legacy/library/utility/queue","oven/legacy/library/layers/tooltip","oven/unvetted/kernel/kernelEnvironment","oven/unvetted/library/utility/compatibility","oven/unvetted/kernel/kernelUtil"],function(e,t,n,i,r,o){var a,s,l=function(e){!Function.prototype.bind||"object"!=typeof console&&"function"!=typeof console||"object"!=typeof console.log||["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.call(console[e],console)},Function.prototype.bind);var t=function(t){e[t]||(e[t]=function(){if(e[t].history=e[t].history||[],e[t].history.push(arguments),"undefined"!=typeof console&&"function"==typeof console[t])if(s.opera)for(var n=0;n<arguments.length;)console[t]("Item "+(n+1)+": "+arguments[n]),n++;else 1===Array.prototype.slice.call(arguments).length&&"string"==typeof Array.prototype.slice.call(arguments)[0]?console[t](Array.prototype.slice.call(arguments).toString()):console[t](Array.prototype.slice.call(arguments));else Function.prototype.bind||"undefined"==typeof console||"object"!=typeof console[t]||Function.prototype.call.call(console[t],console,Array.prototype.slice.call(arguments))})};t("log"),t("error")},u={createPlatform:function(r,u){var h=[],f=[];r.id,a&&s||(a=i.document.get(),s=i.window.get(),d());var p,g="    ",m=[],v=c(),y=!1;m[e.CURSOR_DEFAULT]="default",m[e.CURSOR_RESIZE_COL]="col-resize",m[e.CURSOR_RESIZE_ROW]="row-resize",m[e.CURSOR_MOVE]="move",m[e.CURSOR_MOVE_HORZ]="e-resize",m[e.CURSOR_MOVE_VERT]="n-resize",m[e.CURSOR_POINTER]="pointer",m[e.CURSOR_WAIT]="wait",m[e.CURSOR_CROSSHAIR]="crosshair",m[e.CURSOR_TEXT]="text",m[e.CURSOR_MOVE_NESW]="nesw-resize",m[e.CURSOR_MOVE_NWSE]="nwse-resize",m[e.CURSOR_NONE]="none";var b=function(){for(var e=[],t=0,n=h.length;n>t;t++)e.push(g);return e.join("")},_={createCanvas:function(t,n){var i=r,o=a.createElement("canvas"),l=[m[e.CURSOR_DEFAULT]];return o.getContext||(G_vmlCanvasManager.initElement(o),void 0===FlashCanvas&&(y=!0)),o.isHiRes=t,o.invPixelScale=t&&s.devicePixelRatio?1/s.devicePixelRatio:1,o.isVML=y,o.style.position="absolute",o.setPosition=function(e,t,n,i,r){(e||0===e)&&(this.style.left=e+"px"),(t||0===t)&&(this.style.top=t+"px"),(n||0===n)&&(this.width=+n),(i||0===i)&&(this.height=+i),(r||0===r)&&(this.style.zIndex=r||this.style.zIndex)},o.pushCursor=function(e){var t=m[e];t&&(this.style.cursor=t,l.push(t))},o.popCursor=function(){l.pop(),this.style.cursor=l[l.length-1]||m[e.CURSOR_DEFAULT]},o.setZIndex=function(e){this.style.zIndex=e},o.getZIndex=function(){return this.style.zIndex},o.show=function(){this.style.visibility="visible"},o.hide=function(){this.style.visibility="hidden"},o.isVisible=function(){return"hidden"!==this.style.visibility},o.addToDOM=function(){i.appendChild(o)},o.removeFromDOM=function(){i.removeChild(o)},(n||void 0===n)&&o.addToDOM(),o},createTooltip:function(e,t,i){return n.createTooltip(e,t,i)},createMenu:function(){throw new Error("TODO: createMenu is not implemented!!!!  Likely never was!!!!  I deleted the broken code with r846")},startFrame:function(){h=[],f=[]},beginGroup:function(e){return h.push({name:e,startTime:(new Date).getTime()}),this},endGroup:function(e){var n=h.pop(),i=(new Date).getTime(),r=i-n.startTime;return e&&this.log(b()+n.name+": "+r+" ms"),f[n.name]||(f[n.name]=t.createQueue()),f[n.name].push(r),this},getGroups:function(){return f},setElementStyle:function(e,t,n){return $("#"+e).css(t,n),this}};return l(_),_.log||(_.log=function(){}),_.error||(_.error=function(){}),p=null!==s.navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)|(BlackBerry)/i),_.featureFlags=[],-1===s.navigator.userAgent.indexOf("Chrome")&&_.featureFlags.push(e.GRADIENT_STROKE),-1===s.navigator.userAgent.indexOf("BlackBerry")&&_.featureFlags.push(e.DRAG),-1!==s.navigator.userAgent.indexOf("Firefox")&&_.featureFlags.push(e.TEXT_BASELINE_OFFSET),p?_.featureFlags.push(e.TOUCH):_.featureFlags.push(e.DOUBLECLICK),v&&!isNaN(v)&&9>v&&_.featureFlags.push(e.VML),e.createPlatform(u,function(e,t){try{s.requestAnimationFrame.call(s,e,t)}catch(n){o.log.error("ERROR: requestAnimationFrame error="+n.stack)}},_.createCanvas,_.createTooltip,_.createMenu,_.startFrame,_.beginGroup,_.endGroup,_.getGroups,_.log,_.featureFlags,_.setElementStyle)}},c=function(){var e=s.navigator.userAgent.indexOf("MSIE");if(e>-1){var t=s.navigator.userAgent.substr(e);return t=t.substr(t.indexOf(" ")+1),parseFloat(t)}return null},d=function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!s.requestAnimationFrame;++n)s.requestAnimationFrame=s[t[n]+"RequestAnimationFrame"],s.cancelAnimationFrame=s[t[n]+"CancelAnimationFrame"]||s[t[n]+"CancelRequestAnimationFrame"];s.requestAnimationFrame||(s.requestAnimationFrame=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),r=s.setTimeout(function(){t(n+i)},i);return e=n+i,r}),s.cancelAnimationFrame||(s.cancelAnimationFrame=function(e){s.clearTimeout(e)})};return u}),define("oven/unvetted/browserPlatform/browserEventProvider",["oven/unvetted/contracts/platform","oven/unvetted/contracts/events","oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelBrowserUtils","oven/unvetted/kernel/kernelUtil"],function(e,t,n,i,r){var o,a;return a={addResizeListener:function(e,t){function r(e,t,r){var o=n.window.get(),a="over"===t;i.attachEventHandler(e,"OverflowEvent"in o?"overflowchanged":t+"flow",function(e){return e.type===t+"flow"||0===e.orient&&e.horizontalOverflow===a||1===e.orient&&e.verticalOverflow===a||2===e.orient&&e.horizontalOverflow===a&&e.verticalOverflow===a?r.call(this,e):void 0},!1)}function o(e,t,i,r){var o,a=n.document.get(),s=a.createEvent("Event");r=r||{},s.initEvent(t,"bubbles"in r?r.bubbles:!1,"cancelable"in r?r.cancelable:!0);for(o in i)i.hasOwnProperty(o)&&(s[o]=i[o]);e.dispatchEvent(s)}var a=n.document.get(),s=n.window.get(),l="onresize"in e;if(!l&&!e._resizeSensor){var u=e._resizeSensor=a.createElement("div");u.className="resize-sensor",u.style.position="absolute",u.style.top="0",u.style.left="0",u.style.width="100%",u.style.height="100%",u.style.overflow="hidden",u.style["z-index"]="-1",u.innerHTML='<div class="resize-overflow" style="position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:-1;"><div></div></div><div class="resize-underflow" style="position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:-1;"><div></div></div>';var c=0,d=0,h=u.firstElementChild.firstChild,f=u.lastElementChild.firstChild,p=function(t){var n=!1,i=e.offsetWidth;c!=i&&(h.style.width=i-1+"px",f.style.width=i+1+"px",n=!0,c=i);var r=e.offsetHeight;d!=r&&(h.style.height=r-1+"px",f.style.height=r+1+"px",n=!0,d=r),n&&t.currentTarget!=e&&o(e,"resize")};"static"==s.getComputedStyle(e).position&&(e.style.position="relative",e._resizeSensor._resetPosition=!0),r(u,"over",p),r(u,"under",p),r(u.firstElementChild,"over",p),r(u.lastElementChild,"under",p),e.appendChild(u),p({})}var g=e._flowEvents||(e._flowEvents=[]);-1==g.indexOf(t)&&g.push(t),l||e.addEventListener("resize",t,!1),e.onresize=function(t){g.forEach(function(n){n.call(e,t)})}},removeResizeListener:function(e,t){var n=e._flowEvents.indexOf(t);if(n>-1&&e._flowEvents.splice(n,1),!e._flowEvents.length){var i=e._resizeSensor;i&&(e.removeChild(i),i._resetPosition&&(e.style.position="static"),delete e._resizeSensor),"onresize"in e&&(e.onresize=null),delete e._flowEvents}e.removeEventListener("resize",t)}},o={createBrowserEventProvider:function(e,o){var s,l,u,c,d,h,f,p,g,m,v=e.canvasContainer,y=(e.rootContainer,e.vizContainer),b=e.dock&&e.dock.top,_=n.window.get(),x=function(e){e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1};return m={_document:n.document.get(),_window:n.window.get(),registeredElement:null,boundElement:null,isTouch:!1,downEvents:"mousedown touchstart MozTouchDown",moveEvents:"mousemove touchmove MozTouchMove",upEvents:"mouseup touchend MozTouchRelease",resizeEvents:"orientationchange resize",doubleClickEvent:"dblclick",wheelEvent:"mousewheel onmousewheel DOMMouseScroll",mouseoutEvents:"mouseleave mouseout",createCallback:function(e){return function(){return e.apply(m,arguments)}},getButtonClicked:function(e){var n,r=e&&i.getEventMouseButton(e);switch(r){case 1:n=t.MOUSE_BUTTON_LEFT;break;case 2:n=t.MOUSE_BUTTON_MIDDLE;break;case 3:n=t.MOUSE_BUTTON_RIGHT}return void 0===n&&this.isTouch&&(n=t.MOUSE_BUTTON_LEFT),n},getPageCoords:function(e){var t,n=this;return t=function(e){var t={};return e.touches&&e.touches.length?(n.isTouch=!0,t.pageX=e.touches[0].pageX,t.pageY=e.touches[0].pageY):e.changedTouches&&e.changedTouches.length&&(n.isTouch=!0,t.pageX=e.changedTouches[0].pageX,t.pageY=e.changedTouches[0].pageY),t},e.touches||e.changedTouches?t(e):void 0!==e.originalEvent?t(e.originalEvent):i.getEventPageCoords(e)},getEventType:function(e){return e===this.doubleClickEvent?t.MOUSE_DOUBLECLICK:this.wheelEvent.indexOf(e)>=0?t.MOUSE_WHEEL:this.downEvents.indexOf(e)>=0?t.MOUSE_DOWN:this.moveEvents.indexOf(e)>=0?t.MOUSE_MOVE:this.upEvents.indexOf(e)>=0?t.MOUSE_UP:this.resizeEvents.indexOf(e)>=0?t.WINDOW_RESIZE:this.mouseoutEvents.indexOf(e)>=0?t.MOUSE_LEAVE:(r.log.error("getEventType","Unknown event type: "+e),void 0)},areWeIntendedMouseEventTarget:function(e){var t=i.getEventTargetElement(e);return this.registeredElement===t?!0:i.containsElement(this.registeredElement,t)?!0:!1},createResizeEvent:function(e){var n=i.getWindowSize();return t.createResizeEvent(n.w,n.h,void 0!==e.originalEvent?e.originalEvent:null)},onMouseMove:function(e){return this.boundElement||this.areWeIntendedMouseEventTarget(e)?this.onMouseEvent(e):void 0},onMouseDown:function(e){return this.boundElement||this.areWeIntendedMouseEventTarget(e)?(this.boundElement=this.registeredElement,this.onMouseEvent(e)):!0},onMouseUp:function(e){return this.boundElement||this.areWeIntendedMouseEventTarget(e)?(this.onMouseEvent(e),this.boundElement=null,this.isTouch=!1,!1):!0},onMouseDoubleClick:function(e){return this.boundElement||this.areWeIntendedMouseEventTarget(e)?this.onMouseEvent(e):void 0},onMouseWheel:function(e){if(this.areWeIntendedMouseEventTarget(e)){var n,i,r=function(e){var t=e.wheelDelta,n=e.detail;return n?t?t/n/40*n>0?1:-1:-n/3:t/120},a=e.clientX-f,l=e.clientY-h;return n=r(e),i=this.getButtonClicked(e),o.notify(t.createMouseEvent(this.getEventType(e.type),a,l,n,s,e?e.originalEvent||e:null,i)),this.updateRegisteredElementInfo(),!1}},onMouseLeave:function(e){var n,i;return this.updateRegisteredElementInfo(),e&&o&&this.registeredElement&&(n=this.getPageCoords(e),!this.isTouch)?(s=this.registeredElement,x(e),l=n.pageX-f,u=n.pageY-h,i=this.getButtonClicked(e),c=t.createMouseEvent(this.getEventType(e.type),l,u,0,s,e?e.originalEvent||e:null,i),o.notify(c),!1):!0},onMouseEvent:function(e){var n,i,r;return this.updateRegisteredElementInfo(),e&&o&&this.registeredElement&&(n=this.getEventType(e.type),i=this.getPageCoords(e),!this.isTouch&&this.boundElement||i.pageY>h&&i.pageX>f&&i.pageY<p&&i.pageX<g||this.isTouch&&n===t.MOUSE_UP)?(s=this.registeredElement,this.isTouch||x(e),l=i.pageX-f,u=i.pageY-h,r=this.getButtonClicked(e),c=t.createMouseEvent(n,l,u,0,s,e?e.originalEvent||e:null,r),o.notify(c),!1):!0},getCanvasContainerDimensions:function(){var e=i.getWidth(y),t=i.getHeight(y);return t-=b?i.getHeight(b):v.offsetTop,{height:t,width:e}},onResize:function(e,t,n){var i,r=this.createResizeEvent(e);return void 0!==n&&void 0!==t&&(r.width=t,r.height=n),this.updateRegisteredElementInfo(),i=this.getCanvasContainerDimensions(),r.height=i.height,r.width=i.width,o.notify(r),!1},notify:function(e){return e.type===t.WINDOW_RESIZE&&this.updateRegisteredElementInfo(),!1},registerMouseEvents:function(e){return void 0===this._document&&(this._document=n.document.get()),this.registeredElement=e,o.register(this),this.updateRegisteredElementInfo(),e=this._document,i.attachEventHandler(e,this.downEvents,this.createCallback(this.onMouseDown)),i.attachEventHandler(e,this.moveEvents,this.createCallback(this.onMouseMove)),i.attachEventHandler(e,this.upEvents,this.createCallback(this.onMouseUp)),i.attachEventHandler(e,this.doubleClickEvent,this.createCallback(this.onMouseDoubleClick)),i.attachEventHandler(e,this.wheelEvent,this.createCallback(this.onMouseWheel)),i.attachEventHandler(e,this.mouseoutEvents,this.createCallback(this.onMouseLeave)),this},setRegisteredEvents:function(e){return this.registeredElement=e,o.register(this),this.updateRegisteredElementInfo(),this},updateRegisteredElementInfo:function(){var e,t;this.registeredElement&&(e=i.getHeight(this.registeredElement),t=i.getWidth(this.registeredElement),d=i.getOffset(this.registeredElement),h=d.top,p=h+e,f=d.left,g=f+t)}},a.addResizeListener(y,function(e){try{m.onResize(e)}catch(t){r.log.error("resize","Error: (vizContainer).resize ex="+t.stack)}}),i.attachEventHandler(_,"resize",function(e){try{m.onResize(e)}catch(t){r.log.error("resize","Error: (window).resize ex="+t.stack)}}),i.attachEventHandler(_,"orientationchange",function(e){try{_.scrollTo(0,0),m.onResize(e)}catch(t){r.log.error("orientationchange","Error: (window).resize ex="+t.stack)}}),m}}}),define("oven/unvetted/browserPlatform/benchmarkEventProvider",["oven/unvetted/contracts/events","oven/unvetted/kernel/kernelBrowserUtils","oven/unvetted/kernel/kernelEnvironment"],function(e,t,n){var i,r={createBenchmarkEventProvider:function(r){i||(i=n.window.get());var o={registeredElement:null,boundElement:null,abort:!1,sendEvent:function(t,n,i){var a=e.createMouseEvent(t,n,i,0,o.registeredElement,null,void 0);r.notify(a)},circleDragTest:function(t){i.requestAnimationFrame(function(){var n,i,r=t/10,a=.5*o.registeredElement.width,s=.5*o.registeredElement.height;i=Math.round(.5*s+(.5*Math.sin(r)+.5)*s),n=Math.round(.5*a+(.5*Math.cos(r)+.5)*a),o.abort?o.sendEvent(e.MOUSE_UP,n,i):(o.sendEvent(e.MOUSE_MOVE,n,i),o.circleDragTest(t+1))})},registerMouseEvents:function(n){return o.registeredElement=n,i.requestAnimationFrame(function(){var n=t.getWindowSize();r.notify(e.createResizeEvent(n.w,n.h)),i.requestAnimationFrame(function(){o.sendEvent(e.MOUSE_DOWN,o.registeredElement.width/2,o.registeredElement.height/2),o.circleDragTest(0)})}),this},stopTest:function(){o.abort=!0}};return t.attachEventHandler(n.window.get(),"resize",function(n){var i=t.getWindowSize();return r.notify(e.createResizeEvent(i.w,i.h,n?n.originalEvent:null)),!1}),o}};return r}),define("oven/unvetted/library/utility/queryString",["oven/unvetted/kernel/kernelEnvironment"],function(e){var t,n={getQueryVariable:function(n,i,r,o){t||(t=e.window.get());for(var a=t.location.search.substring(1),s=a.split("&"),l=0;l<s.length;l++){var u=s[l].split("=");if(u[0]==n)return u[1]}return o&&alert("Query Variable "+n+" not found"),i&&i.log&&i.log.debug&&i.log.debug("Query Variable "+n+" not found"),r||null},setQueryVariable:function(n,i,r){t||(t=e.window.get()),r||(r=t.location.search);var o=new RegExp("([?|&])"+n+"=.*?(&|#|$)(.*)","gi");if(o.test(r))return r.replace(o,"$1"+n+"="+i+"$2");var a=-1!==r.indexOf("?")?"&":"?",s=r.split("#");return r=s[0]+a+n+"="+i,s[1]&&(r+="#"+s[1]),r}};return n}),define("oven/unvetted/kernel/kernelCSS",["oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelUtil","oven/library/utility/objects"],function(e,t,n){var i,r,o;return o={_document:function(){return void 0===i&&(i=e.document.get()),i},_styleSheets:function(){var e,t=this._document().styleSheets,n=[];for(e in t)if(t.hasOwnProperty(e))try{(t[e].rules||t[e].cssRules)&&n.push(t[e])}catch(i){}return n
},_fwindow:function(){return void 0===r&&(r=e.window.get()),r},getDefinedStyle:function(e){var t,n,i,r,o=this._styleSheets();for(n in o)if(o.hasOwnProperty(n)){r=o[n].rules||o[n].cssRules;for(i in r)if(r.hasOwnProperty(i)&&r[i].selectorText===e){t=r[i].cssText?r[i].cssText:r[i].style.cssText;break}if(t)break}return t},isCSSLoaded:function(e){var t,n,i,r,o,a=!1;o=this._styleSheets();var s=e+".css";for(t=0;t<o.length;t++)if(r=o[t],i=r.title||null,n=r.href,i===e||n&&-1!==n.lastIndexOf(s)){a=!0;break}return a},cssDumper:function(e){function t(e){var t,n,i,r={};if(!e)return r;if(e instanceof d)for(t in e)e.hasOwnProperty(t)&&(i=e[t],i&&(r[t]=i));else if("string"==typeof e){e=e.split("; ");for(t in e)e.hasOwnProperty(t)&&(n=e[t].split(": "),r[n[0].toLowerCase()]=n[1])}return r}var i,r,o,a,s,l,u,c,d=this._fwindow().CSSStyleDeclaration,h=this._styleSheets(),f=e.style,p=!1;for(u in f)if(f.hasOwnProperty(u)&&(c=f[u],void 0!==c&&""!==c)){p=!0;break}for(o in h)if(h.hasOwnProperty(o)){a=h[o].rules||h[o].cssRules;for(s in a)if(a.hasOwnProperty(s))try{l=a[s].selectorText,e.is(l)&&(void 0===r&&(r={}),i=t(a[s].style),n.assimilate(i,r),i=t(f),n.assimilate(i,r))}catch(g){}}return p&&!r&&(r={},i=t(f),r=t(f),n.assimilate(i,r)),r},isElemCSSApplied:function(e,t){var n,i,r,o,a=this._styleSheets(),s=!1;for(n in a)if(a.hasOwnProperty(n)){i=a[n].rules||a[n].cssRules;for(r in i)if(i.hasOwnProperty(r))try{if(o=i[r].selectorText,t===o&&e.is(o)){s=!0;break}}catch(l){}if(s===!0)break}return s},loadjscssfile:function(e,t){var n,i=this._document();"js"===t?(n=i.createElement("script"),n.setAttribute("type","text/javascript"),n.setAttribute("src",e)):"css"===t&&(n=i.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e)),void 0!==n&&i.getElementsByTagName("head")[0].appendChild(n)},loadDynamicCss:function(e){var t=this._document(),n=t.createElement("style");n.setAttribute("type","text/css"),n.innerHTML=e,t.head.appendChild(n)},addCSSStyleToElement:function(e,t){var n,i,r,o,a,s="";if(n=e.style,a=this._fwindow(),a.getComputedStyle&&(o=a.getComputedStyle(e,null)))for(r in t)if(t.hasOwnProperty(r)){i=t[r],s+=r+": "+i+";";try{n[r]=i}catch(l){}}},addCSSClassToElement:function(e,t){e.className?e.className.match(new RegExp("(?:^|\\s)"+t))||(e.className+=" "+t):e.className=t},parseCSSFontString:function(e){var t,n,i;return t=this._document(),n=t.createElement("span"),i=n.style,i.font=e,{font:i.font,fontWeight:i.fontWeight,fontStyle:i.fontStyle,fontFamily:i.fontFamily,fontVariant:i.fontVariant,fontSize:i.fontSize,lineHeight:i.lineHeight}}}}),define("oven/unvetted/library/context/contextMenuProviderUtil",["oven/unvetted/contracts/events","oven/unvetted/kernel/kernelCSS","oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelUtil","oven/unvetted/kernel/kernelBrowserUtils"],function(e,t,n,i,r){var o={createContextMenuProvider:function(t,n,o,a,s){var l,u,c,d,h=[],f=[],p=function(e){i.log.warn("contextMenuProviderUtil",function(t){t("createContextMenuProvider() Missing Callback: "+e)})};o=o||{},o.create=o.create||function(){p("Register - CREATE()")},o.dismiss=o.dismiss||function(){p("Register - DISMISS()")},o.action=o.action||function(){p("Register - ACTION()")},a=a||{},a.create=a.create||function(){p("Unregister - CREATE")},a.dismiss=a.dismiss||function(){p("Unregister - DISMISS")},a.action=a.action||function(){p("Unregister - ACTION")},s=s||{},s.showMenu=s.showMenu||function(){p("Invoke - SHOWMENU")};var g=function(e){if(e.group=e.group||"__default",e.icon=e.icon||void 0,e.id=e.id||(e.text?e.text.replace(/\W/g,""):""),e.text=e.text||"",e.enabled=void 0!==e.enabled?e.enabled:!0,e.checked=void 0!==e.checked?e.checked:!1,e.callback=e.callback||function(){},e.customMenuItems=void 0!==e.subitems?e.subitems:void 0,void 0!==e.subitems)for(l=0;l<e.subitems.length;l++)e.subitems[l]=g(e.subitems[l]);return e},m=function(e,t){e.push(g(t))},v=function(e,t){var n;for(n=0;n<t.length;n++)t[n]instanceof Array?v(e,t[n]):m(e,t[n])},y=function(t,o,a){if(u=void 0,n.notify(e.createContextMenuEvent(e.CONTEXT_MENU_CREATE,t,o,void 0,a)),h.length>0){for(v(f,h),f.sort(function(e,t){return e.group<t.group?-1:e.group>t.group?1:0}),l=0;l<f.length;l++)void 0!==u&&u!==f[l].group&&(f.splice(l,0,{separator:!0}),l++),u=f[l].group;r.stopEvent(a),s.showMenu(t,o,f),i.log.trace("KernelWebContextMenu",function(e){e("createMenuHandler() called. items=",f)}),h=[],f=[]}},b=function(){},_=function(){},x={create:y,dismiss:b,action:_};c={enabled:!1,isEnabled:function(){return this.enabled},enableContextMenu:function(e){var t;if(e)for(t in o)o.hasOwnProperty(t)&&o[t].call(o[t],x[t]);else for(t in a)a.hasOwnProperty(t)&&a[t].call(a[t],x[t]);this.enabled=e},appendMenuItems:function(e){h.push(e)},showMenu:function(e,t,n){s.showMenu(e,t,n)}},d={};var w={publicInterface:c,internalInterface:d};return w}};return o}),define("oven/unvetted/kernel/web/kernelWebContextMenu",["oven/unvetted/contracts/events","oven/unvetted/kernel/kernelCSS","oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelUtil","oven/unvetted/kernel/kernelBrowserUtils","oven/unvetted/library/context/contextMenuProviderUtil"],function(e,t,n,i,r,o){var a=".ovencontextmenu {border:1px solid #666;background-color:rgb(67, 67, 67);min-width:200px;position: absolute;box-shadow: 1px 1px 1px black;border-top:1px solid #666;border-left:1px solid #666;border-bottom:1px solid #666;border-right:1px solid #666;}.ovencontextmenu ul {list-style:none;padding:0;margin:0;cursor:default;}.ovencontextmenu ul li {text-align:left;padding:5px 5px 5px 30px;margin:0;cursor:default;font-family:'Lucida Grande',Verdana;text-decoration:none;color:white;font-size:12px;font-weight:normal;}.ovencontextmenu ul li.selected,.ovencontextmenu ul li:hover {color:white;background-color:rgba(128,128,128,0.3);cursor:default;}.ovencontextmenu ul li.ovencontextmenudisabled,.ovencontextmenu ul li:hover.disabled {background-color: rgba(51, 51, 51, 0);color:#666;cursor:default;}",s="ovencontextmenu",l="ovencontextmenu",u="ovencontextmenu_overlay",c=2147483700,d=function(e,n){var i,o;return i=t.isCSSLoaded(s),i===!1&&t.loadDynamicCss(a),o=e.querySelector("#"+l+n),o||(r.createAndAppendElement(e,"<div id ='"+l+n+"' class='"+s+"' style='visibility: hidden; position: fixed'></div>"),o=e.querySelector("#"+l+n)),o},h=function(e){var t;return r.createAndAppendElement(e,"<div id ='"+u+"' class='oven-font-style' style='position: absolute; width: 100%; height: 100%; visibility: hidden'></div>"),t=e.querySelector("#"+u),t?t.style.zIndex=c:i.log.warn("kernelWebContextMenu",function(e){e("Unable to overlay for context menu")}),t},f=function(e){if(e.separator)return'<div style="height:1px; background:#555; border-bottom:1px solid #333"></div>';var t="",n="",i='<div style="position: absolute; left: 0px; top: 0px; width: 31px; height: 100%; background:rgb(54, 54, 54); border-right:1px solid black; z-index: -1">';return e.checked?t='<div style="opacity: '+(e.enabled?1:.2)+'; position: absolute; background: transparent; right: 10px; width: 8px; height: 3px; top: 8px; left: 12px; border: 2px solid #ccc; border-top: none; border-right: none; -webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -o-transform: rotate(-45deg); -ms-transform: rotate(-45deg); transform: rotate(-45deg);">&nbsp&nbsp&nbsp</div>':e.icon&&(t='<div style="opacity: '+(e.enabled?1:.2)+"; position: absolute; ",t+=0===e.icon.indexOf("<svg")?'left: 8px; top: 4px; width:19px;height:16px">'+e.icon+"</div>":"background: url(data:image/png;base64,"+e.icon+') no-repeat 0 center; left: 8px; top: 4px; width:19px;height:16px">&nbsp&nbsp&nbsp</div>'),e.customMenuItems&&(n='<div style="opacity: '+(e.enabled?1:.2)+'; position: absolute; width: 0; height: 0; right: 10px; bottom: 9px; border-top: 4px solid transparent; border-bottom: 4px solid transparent; border-left: 4px solid black;"/>'),'<li class="'+(e.enabled?"ovencontextmenuitem":"ovencontextmenudisabled")+'" style="position:relative">'+i+t+"</div>"+"&nbsp&nbsp&nbsp"+e.text+n+"</li>"},p=function(e){var t,n="<ul>";for(t=0;t<e.length;t++)n+=f(e[t]);return n+="</ul>"},g=function(e,t){var n,i=e.innerText.trim();for(n=0;n<t.length;n++)if(t[n].text===i)return t[n]};return{create:function(t,n){var a,s,u,f,m,v,y,b,_=[],x=function(e){m=h(t),t.addEventListener("contextmenu",function(t){e.call(e,t.x,t.y,t)},!1)},w=function(){},C=function(){m.style.visibility="visible"},T=function(){m.style.visibility="hidden"},E=function(o,h,x,w,S){var k=function(e){s=g(e.srcElement,x),s&&s.customMenuItems&&this!==e.srcElement&&(b(),E(this.offsetLeft+this.clientWidth,e.srcElement.offsetTop+this.offsetTop,s.customMenuItems,s.id,e.srcElement)),r.stopEvent(e)},A=function(t){s=g(t.srcElement,x),s&&s.enabled&&(s.callback?(s.callback.apply(null,t),y(),m.style.visibility="hidden"):n.notify(e.createContextMenuEvent(e.CONTEXT_MENU_ACTION,o,h,s,t)))},M=function(e){b(),r.stopEvent(e)},N=function(){y(),T()},D=function(e){v=e.toElement||e.relatedTarget,(!v||"ovencontextmenu"!==v.className&&"ovencontextmenuitem"!==v.className&&"ovencontextmenudisabled"!==v.className)&&(y(),T())};if(y=function(){for(a=0;a<_.length;a++)_[a].style.visibility="hidden",r.removeEventHandler(_[a],"mousemove",k),r.removeEventHandler(_[a],"mousedown",A);r.removeEventHandler(m,"mousemove",M),r.removeEventHandler(m,"mousedown",N),r.removeEventHandler(m,"mouseout",D)},b=function(){for(a=1;a<_.length;a++)_[a].style.visibility="hidden",r.removeEventHandler(_[a],"mousemove",k),r.removeEventHandler(_[a],"mousedown",A)},C(),f=p(x),u=t.querySelector("#"+l+w))u.innerHTML=f;else{if(_.push(d(t,w)),u=_[_.length-1],!u)return i.log.warn("kernelWebContextMenu",function(e){e("Unable to create root context menu")});u.innerHTML=f}r.showAndPositionElement(o,h,u,{parent:S,zIndex:c+1}),r.attachEventHandler(u,"mousemove",k),r.attachEventHandler(u,"mousedown",A),r.attachEventHandler(m,"mousemove",M),r.attachEventHandler(m,"mousedown",N),r.attachEventHandler(m,"mouseout",D)},S=function(e,t,n){E(e,t,n,"root")},k={create:x,dismiss:void 0,action:void 0},A={create:w,dismiss:void 0,action:void 0},M={showMenu:S},N=o.createContextMenuProvider(t,n,k,A,M);return N.publicInterface}}}),define("oven/unvetted/kernel/web/kernelWebExport",["oven/unvetted/kernel/kernelUtil"],function(e){return{create:function(){return{exportToClipboard:function(){e.log.error("kernelExport","exportToClipboard(): currently unsupported on the web")},exportToPng:function(){e.log.error("kernelExport","exportToPng(): currently unsupported on the web")},isSupported:function(){return!1}}}}}),define("oven/unvetted/library/utility/math",[],function(){return Math.log10=function(e){return Math.log(e)/Math.log(10)},Math}),define("oven/unvetted/library/axes/rangefinder",["oven/unvetted/library/utility/math"],function(e){var t;return t={findNiceIntervals:function(t){t=e.abs(t);var n,i,r=e.floor(e.log10(t)),o=e.pow(10,r),a=t/o;return a>5?(n=10,i=5):a>2?(n=5,i=2.5):a>1?(n=2,i=1):(n=1,i=.5),n*=o,i*=o,{major:n,minor:i}},findRange:function(e,t,n){var i,r,o,a,s,l=t,u=n,c=0;t>n&&(s=t,t=n,n=s);var d=n-t,h=d/e;.001>h?c=4:.01>h?c=3:.1>h?c=2:2>h&&(c=1);var f=this.findNiceIntervals(h);return i=f.major,r=f.minor,o=l,a={majorTickInterval:i,minorTickInterval:r,startMajorTick:o,num_decimals:c,start:l,end:u,minMajorTick:i*Math.floor(l/i),maxMajorTick:i*Math.ceil(u/i)}},findExactRange:function(e,t,n){var i,r,o,a,s,l,u;t>n&&(l=t,t=n,n=l);var c=n-t,d=c/e;.001>d?u=4:.01>d?u=3:.1>d?u=2:2>d&&(u=1);var h=this.findNiceIntervals(d);return i=h.major,r=h.minor,o=t-t%i,a=o,s={majorTickInterval:i,minorTickInterval:r,startMajorTick:a,num_decimals:u,start:t,end:n}}}}),define("oven/unvetted/kernel/web/numberFormatImpl",["oven/unvetted/library/axes/rangefinder"],function(e){var t={},n={getFormatter:function(e){var n=t[e];return n||(n=this.createFormatter(e),t[e]=n),n},format:function(e,t){return this.getFormatter(t).format(e)},createFormatter:function(e){var t=this.parse(e);return this.createFormatterWithParsedOptions(e,t)},createFormatterWithParsedOptions:function(t,n){var i=function(t){var i,r=+t,o="",a=n.right.rightMaxPlaces,s=n.left.leftCommaGrouping,l=n.left.leftSignAlways,u=n.left.leftAbbreviateThousands,c=n.pre,d=n.post;i=i||e.findNiceIntervals(t).minor,i>=1e12?(o="T",r/=1e12):i>=1e9?(o="B",r/=1e9):i>=1e6?(o="M",r/=1e6):i>=1e3&&u&&(o="k",r/=1e3),r=a||0===a?r.toFixed(a):0===r||Math.abs(r)>=10?r.toFixed(0):r.toFixed(1);var h=r.toString()+o;return s&&(h=h.replace(/\B(?=(\d{3})+(?!\d))/g,",")),l&&r>0&&(h="+"+h),c+h+d};return{format:function(e){return i(e)},getFormatString:function(){return t}}},createLeftFormatter:function(){return{format:function(){}}},createRightFormatter:function(){return{format:function(){}}},parse:function(e){var t=this.separateParts(e);if(!t)return!1;var n=this.parsePreOpts(t.pre),i=this.parsePostOpts(t.post),r=this.parseLeftOpts(t.left),o=this.parseRightOpts(t.right),a=this.parseGlobalOpts(t.global);return{left:r,right:o,global:a,pre:n,post:i}},parseNaturalNumber:function(e,t){for(var n=t,i=e.length,r="0123456789";i>n&&r.indexOf(e[n])>=0;)++n;return n===t?null:{result:parseInt(e.substring(t,n),10),endPos:n}},parseLeftOpts:function(e){var t=0,n=e.length;if("n"!==e.charAt(t))return null;var i=-1,r=-1,o=!1,a=!1,s=!1,l=!1,u=this.parseNaturalNumber(e,++t);if(u&&(t=u.endPos,i=u.result),"."===e.charAt(t))if(u=this.parseNaturalNumber(e,++t))t=u.endPos,r=u.result;else if(-1===i)return null;if(-1===r&&(r=0),-1===i&&(i=999),r>i)return null;for(;n>t;)switch(e.charAt(t++)){case"c":if(o)return null;o=!0;break;case"w":if(a)return null;a=!0;break;case"+":if(l)return null;l=!0;break;case"k":if(s)return null;s=!0;break;default:return null}return{leftMaxDigits:i,leftMinDigits:r,leftCommaGrouping:o,leftSignAlways:l,leftAbbreviateThousands:s}},parseRightOpts:function(e){switch(e.length||(e="d4"),e.charAt(0)){case"d":return this.parseRightOptsDecimal(e);case"x":return this.parseRightOptsFixed(e);case"f":return this.parseRightOptsFraction(e);case"s":return this.parseRightOptsSpecial(e)}return null},parseRightOptsDecimal:function(e){var t=0,n=e.length;if("d"!==e.charAt(t))return null;var i=-1,r=-1,o=this.parseNaturalNumber(e,++t);if(o&&(t=o.endPos,i=o.result),"."===e.charAt(t))if(o=this.parseNaturalNumber(e,++t))t=o.endPos,r=o.result;else if(-1===i)return null;return-1===i&&(i=16),-1===r&&(r=0),i>16&&(i=16),r>i&&(r=i),t>=n?{rightType:"d",rightMaxPlaces:i,rightMinPlaces:r}:null},parseRightOptsFraction:function(){return""},parseRightOptsFixed:function(){return""},parseRightOptsSpecial:function(){return""},parseGlobalOpts:function(){},parsePreOpts:function(e){return e.substring(0,15).replace(/[{}]/g,"")},parsePostOpts:function(e){return e.substring(0,15).replace(/[{}]/g,"")},separateParts:function(e){if(!e.length)return null;var t,n,i,r,o="",a="",s=e.indexOf("{"),l=e.lastIndexOf("}");if(s>-1&&l>-1)o=e.substr(0,s),l<=e.length-1&&(a=e.substr(l+1,e.length-l-1)),t=e.substr(s+1,l-s-1);else{if(-1!==s||-1!==l)return null;t=e}var u=t.split("|",4);return u.length>3?null:(n=u.length>0?u[0]:null,i=u.length>1?u[1]:null,r=u.length>2?u[2]:null,{pre:o,post:a,left:n,right:i,global:r,format:t})}};return n}),define("oven/unvetted/kernel/web/kernelWebNumFormat",["oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelUtil","oven/unvetted/kernel/web/numberFormatImpl"],function(e,t,n){return{create:function(){var t=e.numformat.get();return(void 0===t||void 0===t.numberToString)&&(t=t||{},t.numberToString=function(e,t){return n.format(e,t)}),{numberToString:function(e,n){return t.numberToString(e,n)}}}}}),define("oven/unvetted/library/context/tooltipProviderUtil",["oven/unvetted/contracts/events","oven/unvetted/kernel/kernelCSS","oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelUtil","oven/unvetted/kernel/kernelBrowserUtils"],function(e,t,n,i,r){var o,a=1,s="oventooltip",l="oventooltiptext",u="oventooltip",c={border:"1px solid #222244",color:"#000000",position:"fixed",left:"100px",top:"300px","z-index":"100",visibility:"hidden",fontFamily:"Bloomberg Prop Unicode I",fontSize:"12px",lineHeight:"1em",whiteSpace:"nowrap"},d={createTooltipManager:function(e,d){function h(e,t){var n,i;n=d.createDocumentFragment(),i=d.createElement("div"),i.innerHTML=t,n.appendChild(i.firstChild),e.appendChild(n)}function f(e){return w.text?(w.text.innerHTML=e,w.text.style.display="block",w.text.style.width="",w.text.style.height="",void 0):(i.log.warn("showText()","failed to initialize text div properly"),void 0)}function p(e,t,n,a,s,l){var c;_="string"==typeof n,y=!1,x=!1,e+=C.left,t+=C.top;for(c in w)if(w.hasOwnProperty(c)){if("parent"===c)continue;w[c]&&(w[c].style.display="none")}if(_)f(n);else if("object"==typeof n){if(b=n.contextChain.join("."),w.hasOwnProperty(b)===!1&&(h(w.parent,"<div id='"+b+"' class = '"+u+"' style='position: static; width: 100%; height: 100%; padding: 2px; background-color: rgba(0, 0, 0, 0.8)'></div>"),o=w[b]=w.parent.querySelector("#"+n.contextChain.join("\\.")),y=!0),null===o)return i.log.warn("showTooltip()","unable to create div for chain: "+b),void 0;n.propBag.getDiv=function(){return o},n.propBag.getParent=function(){return w.parent},n.propBag.isInit=function(){return y},n.propBag.getText=function(){return n.tooltipText},n.propBag.showTooltip=function(){w.parent.style.visibility="visible",l&&"function"==typeof l&&l.apply(null,[!0])},n.propBag.hideTooltip=function(){x=!0,l&&"function"==typeof l&&l.apply(null,[!1])},n.contextChain.push("Tooltip"),m=n.sharedContext.getContextManager().triggerResponse(n.contextChain,n.propBag),m>0?w[b].style.display="block":f(n.tooltipText)}v=a,s&&"function"==typeof s?s.apply(null,[w.parent,x]):r.showAndPositionElement(e,t,w.parent,{minOffsetRightX:8,minOffsetBottomY:16,maxOffsetRightX:8,maxOffsetBottomY:24,offsetTopY:8,offsetLeftX:8}),x&&(w.parent.style.visibility="hidden")}function g(e){e===v&&void 0!==w.parent&&(w.parent.style.display="none")}var m,v,y,b,_=!1,x=!1,w={},C={};d=d||n.document.get(),e=e||d.body,h(e,"<div id='"+(s+a)+"' class = '"+u+"'></div>"),w.parent=e.querySelector("#"+s+a),h(w.parent,"<div id='"+(l+a)+"' class = '"+u+"' style='background-color: rgba(255, 255, 225, 0.8); padding: 6px'></div>"),w.text=e.querySelector("#"+l+a),a++;var T=t.isElemCSSApplied(w.parent,"."+u);return T===!1&&t.addCSSStyleToElement(w.parent,c),C=r.getWindowOffset(e),r.attachEventHandler(e,"resize",function(){C=r.getWindowOffset(e)}),{showTooltip:p,hideTooltip:g}},parseTooltipParameters:function(e,t,n,r,o,a,s){var l;return n?(o?l={tooltipText:n,contextChain:r,propBag:o,sharedContext:a}:(l=n,s=r),{x:e,y:t,config:l,source:s}):(i.log.warn("showTooltip()","not enough parameters"),void 0)},getTooltipCSS:function(){return c}};return d}),define("oven/unvetted/kernel/web/kernelWebTooltips",["oven/unvetted/library/context/tooltipProviderUtil"],function(e){return{create:function(t){var n=e.createTooltipManager(t);return{showSupertip:function(t,i,r,o,a,s,l){var u=e.parseTooltipParameters(t,i,r,o,a,s,l);n.showTooltip(u.x,u.y,u.config,u.source)},showTooltip:n.showTooltip,hideTooltip:n.hideTooltip}}}}),define("oven/unvetted/library/adapters/webHostAdapter",["oven/unvetted/contracts/platform","oven/unvetted/browserPlatform/browserPlatform","oven/unvetted/browserPlatform/browserEventProvider","oven/unvetted/browserPlatform/benchmarkEventProvider","oven/unvetted/library/utility/queryString","oven/unvetted/kernel/web/kernelWebContextMenu","oven/unvetted/kernel/web/kernelWebExport","oven/unvetted/kernel/web/kernelWebNumFormat","oven/unvetted/kernel/web/kernelWebTooltips","oven/unvetted/kernel/kernelUtil"],function(e,t,n,i,r,o,a,s,l){var u={create:function(u,c,d){var h={Interactions:"enableInteractions",RunBenchmark:"benchmark"},f=u.canvasContainer,p=u.vizContainer,g=void 0===d?!1:d||r.getQueryVariable(h.RunBenchmark)===!0,m=g?i.createBenchmarkEventProvider(c):n.createBrowserEventProvider(u,c),v=t.createPlatform(f,m),y=-1===v.featureFlags.indexOf(e.VML)||"true"===r.getQueryVariable(h.Interactions),b=o.create(p,c),_=a.create(f),x=l.create(p),w=s.create(),C={getCanvasContainer:function(){return f},getInteractionsEnabled:function(){return y},getBenchmarkingEnabled:function(){return g},getPlatform:function(){return v},getPlatformProviders:function(){return{getEventProvider:function(){return m},getContextMenuProvider:function(){return b},getExportProvider:function(){return _},getTooltipProvider:function(){return x},getNumFormatProvider:function(){return w}}}};return C}};return u}),define("oven/framework/data/table/dataTable",["oven/library/utility/objects"],function(e){var t={create:function(t){var n=[],i=[],r={},o={setData:function(e){n=e},getRWData:function(){return n},appendRows:function(e){n=n.concat(e)},deleteRows:function(e,t){n.splice(e,t)},insertRows:function(e,t){var i=n.length;if(e===i)n=n.concat(t);else{if(!(i>e&&e>=0))throw new Error("startRow ("+e+") out of bounds, len = "+i);var r,o=t.length;for(r=0;o>r;++r)n.splice(e+r,0,t[r])}},setMetaBlock:function(e){i=e},setStatsBlock:function(e){r=e}},a={getData:function(){return n},getMetaBlock:function(){return i},getStatsBlock:function(){return r},debug:function(){return{_data:n,_metaBlock:i,_statsBlock:r}}};return t&&t(e.assimilate(a,o)),a}};return t}),define("oven/framework/data/view/fieldSchema",["oven/unvetted/kernel/kernelUtil"],function(){var e={create:function(){var e={},t=[],n={addField:function(n,i,r){e[n]={name:n,type:i,columnIdx:r},t.push(n)},getFieldIndex:function(t){var n=e[t];return n?n.columnIdx:void 0},getFieldType:function(t){var n=e[t];return n?n.type:void 0},getFieldNames:function(){return t},getField:function(t){var n=e[t];return n?n:void 0},getFields:function(){return e},getFieldMapping:function(){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t].columnIdx);return n}};return n}};return e}),define("oven/unvetted/library/utility/dateExtensions",[],function(){var e={copyDateFrom:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},initDate:function(e,t,n,i,r,o,a,s){return e.setMilliseconds(s||0),e.setSeconds(a||0),e.setMinutes(o||0),e.setHours(r||0),e.setFullYear(t),e.setMonth(n),e.setDate(i),e},getDayOfYear:function(e){var t=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=Math.round((n-t)/864e5);return i+1},getWeek:function(e,t){t="int"==typeof t?t:0;var n=new Date(e.getFullYear(),0,1),i=n.getDay()-t;i=i>=0?i:i+7;var r,o=this.getDayOfYear(e);return r=Math.floor((o+i-1)/7)}};return e}),define("oven/unvetted/library/axes/dateRangeFinder",["oven/unvetted/library/utility/dateExtensions","oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelUtil"],function(e,t){var n,i=86400,r=60,o=function(e){return e.MetaBlock.xAxisFieldIndex||0===e.MetaBlock.xAxisFieldIndex?e.MetaBlock.xAxisFieldIndex:e.MetaBlock.XAxisFieldIndex_int},a={INTERVAL_1MIN:60,INTERVAL_3MIN:180,INTERVAL_5MIN:300,INTERVAL_10MIN:600,INTERVAL_15MIN:900,INTERVAL_30MIN:1800,INTERVAL_60MIN:3600,INTERVAL_120MIN:7200,INTERVAL_240MIN:14400,INTERVAL_DATE:86400,INTERVAL_WEEKDAY:86401,INTERVAL_WEEKCOUNT:86402,INTERVAL_WEEK:604800,INTERVAL_HALFMONTH:1209600,INTERVAL_MONTH:2592e3,INTERVAL_3MONTH:7776e3,INTERVAL_QUARTER:7776e3,INTERVAL_YEAR:31536e3,monthTickTypes:{START:0,MID:1,END:2},createDateRangeFinder:function(t){var n,s,l,u,c,d,h,f,p,g,m,v,y,b,_,x,w,C,T=[],E=function(e){var t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+t.getDay()+1)/7)},S=new Date(1970,0,1),k=new Date(1970,0,1),A=new Date(1970,0,1),M=new Date(1970,0,1),N={findRange:function(e,t,i,r){return"object"==typeof t&&"object"==typeof i?(n=t,s=i):(n=new Date(t),s=new Date(i)),l=this.boundData(r,n,s,{}),this.findBoundedRange(e,n,s,r,l.startIndex,l.endIndex)},findBoundedRange:function(n,s,l,b,_,x,w){var C,M,N,D,P,I,O,R,L,B,F,j,H,V,z,$,U,W,q,G,X,Y,K,J,Q,Z,et=[],tt=[],nt=[],it=[],rt=null,ot=b.values.length,at=!0;if(f=o(b),ot>2&&(H=b.values[1][f].getTime()/1e3-b.values[0][f].getTime()/1e3,i>H&&(at=!1)),p="number"==typeof s?s:this.dateToEpochConverter(s),g="number"==typeof l?l:this.dateToEpochConverter(l),c=Math.ceil(g-p)/1e3,u=i>c?1:c/i,m=(g-p)/1e3,y=at===!0?m/i/n:m/r/n,t&&t.log&&t.log.verbose&&t.log.verbose("nDateTimeToMajorTickRatio: "+y),v=w||a.INTERVAL_WEEK,void 0===w)if(at===!0)v=15>=u||6>=y?a.INTERVAL_WEEK:60>=u||15>=y?a.INTERVAL_HALFMONTH:365>=u?31>y?a.INTERVAL_MONTH:182>y?a.INTERVAL_3MONTH:a.INTERVAL_YEAR:728>u&&40>y?a.INTERVAL_3MONTH:a.INTERVAL_YEAR;else if(v=a.INTERVAL_120MIN,q=120,y>0&&1>=y)v=a.INTERVAL_1MIN;else if(y>1&&3>=y)v=a.INTERVAL_3MIN;else if(y>3&&5>=y)v=a.INTERVAL_5MIN;else if(y>5&&10>=y)v=a.INTERVAL_10MIN;else if(y>10&&15>=y)v=a.INTERVAL_15MIN;else if(y>15&&30>=y)v=a.INTERVAL_30MIN;else if(y>30&&60>=y)v=a.INTERVAL_60MIN;else if(y>60&&120>=y)v=a.INTERVAL_120MIN;else if(y>120&&240>=y)v=a.INTERVAL_240MIN;else{if(!(u>3))throw new Error("ERROR: Invalid range (Not coded for). nDateTimeToMajorTickRatio="+y+", nNumOfDays="+u+", dataRange="+m+", idealNumMajorTicks="+n+", nSecondsRange="+c+", nTimeDelta="+H+", minDate="+s.toDateString()+", maxDate="+l.toDateString());q=240,v=a.INTERVAL_DATE}switch(N=0,v){case a.INTERVAL_WEEK:for(T=[],C=_,N=0;x>=C;C++,N++)M=b.values[C][f],W!==E(M)&&(et.push({date:this.dateToEpochConverter(M),index:N,data_index:C}),W=E(M));break;case a.INTERVAL_HALFMONTH:for(M=b.values[_][f],I=b.values[_][f].getMonth(),L=!1,B=!0,R=Math.floor(this.getWeekdaysInMonth(M.getFullYear(),M.getMonth())/2),F=M.getDate(),j=0,C=0;F>C;C++)this.isWeekday(M.getFullYear(),M.getMonth(),C+1)&&j++;for(F=_+R-j,R>j&&F<b.values.length&&et.push({date:this.dateToEpochConverter(b.values[F][f]),index:R-j,data_index:_+R-j}),C=_,D=1,N=0;x>=C;C++,N++)M=b.values[C][f],I!==M.getMonth()&&(R=Math.floor(this.getWeekdaysInMonth(M.getFullYear(),M.getMonth())/2),(!L||B)&&(et.push(tt.pop()),L=!0,B=!1),D=1,I=M.getMonth()),L&&0===D%R?(et.push({date:this.dateToEpochConverter(M),index:N,data_index:C}),L=!1):tt.push({date:this.dateToEpochConverter(M),index:N,data_index:C}),D++;break;case a.INTERVAL_MONTH:for(I=b.values[_][f].getMonth(),C=_,N=0;x>=C;C++,N++)M=b.values[C][f],I!==M.getMonth()&&(et.push(tt.pop()),I=M.getMonth()),tt.push({date:this.dateToEpochConverter(M),index:N,data_index:C});break;case a.INTERVAL_3MONTH:for(I=b.values[_][f].getMonth(),D=0,C=_;x>=C;C++,N++)M=b.values[C][f],I!==M.getMonth()&&(tt.push({date:this.dateToEpochConverter(rt),index:N,data_index:C}),0===D%3&&et.push(tt.pop()),D++,I=M.getMonth()),rt=M;break;case a.INTERVAL_YEAR:for(P=b.values[_][f],I=P.getMonth(),O=P.getFullYear(),D=0,S.setTime(P.getTime()),S.setMonth(0),S.setDate(1),et.push({date:this.dateToEpochConverter(S),index:N,data_index:_}),C=_;x>=C;C++,N++)M=b.values[C][f],I!==M.getMonth()&&(tt.push({date:this.dateToEpochConverter(rt),index:N,data_index:C}),I=M.getMonth(),D++),O!==M.getFullYear()&&(et.push({date:this.dateToEpochConverter(M),index:N,data_index:C}),O=M.getFullYear()),rt=M;break;case a.INTERVAL_DATE:for(P=b.values[_][f],Z=K=V=P.getHours(),z=P.getMinutes(),$=P.getDate(),X=P.getDay(),G=Y=0,J=60*K,void 0===q&&(q=v/60),D=0,S.setTime(P.getTime()),S.setMinutes(0),60>q&&(U=Math.floor(z/q)*q,S.setMinutes(U),J+=U),Q=J,_!==x&&et.push({date:this.dateToEpochConverter(S),index:N,data_index:_}),C=_;x>=C;C++,N++)M=b.values[C][f],z=M.getMinutes(),V=M.getHours(),X=M.getDay(),G=60*M.getHours()+M.getMinutes(),$!==M.getDate()&&(k.setTime(M.getTime()),k.setMinutes(0),1===X?et.push({date:this.dateToEpochConverter(k),index:N,data_index:C}):tt.push({date:this.dateToEpochConverter(k),index:N,data_index:C}),D++,$=M.getDate()),rt=M;et.length>0?(S.setTime(et[0].date),A.setTime(et[et.length-1].date)):(S=e.copyDateFrom(b.values[0][f]),A=e.copyDateFrom(b.values[b.values.length-1][f]));break;case a.INTERVAL_1MIN:case a.INTERVAL_3MIN:case a.INTERVAL_5MIN:case a.INTERVAL_10MIN:case a.INTERVAL_15MIN:case a.INTERVAL_30MIN:case a.INTERVAL_60MIN:case a.INTERVAL_120MIN:case a.INTERVAL_240MIN:for(P=b.values[_][f],Z=K=V=P.getHours(),z=P.getMinutes(),$=P.getDate(),G=Y=0,J=60*K,void 0===q&&(q=v/60),D=0,S.setTime(P.getTime()),60>q&&(U=Math.floor(z/q)*q,S.setMinutes(U),J+=U),Q=J,_!==x&&et.push({date:this.dateToEpochConverter(S),index:N,data_index:_}),C=_;x>=C;C++,N++)M=b.values[C][f],z=M.getMinutes(),V=M.getHours(),G=60*M.getHours()+M.getMinutes(),$!==M.getDate()?(k.setTime(M.getTime()),k.setMinutes(0),et.push({date:this.dateToEpochConverter(k),index:N,data_index:C}),$=M.getDate(),D++):Z!==V?(Z=V,k.setTime(M.getTime()),k.setMinutes(0),Q=60*M.getHours(),et.push({date:this.dateToEpochConverter(k),index:N,data_index:C}),D++):G>Q+q&&(k.setTime(M.getTime()),U=Math.floor(z/q)*q,k.setMinutes(U),Q+=q,tt.push({date:this.dateToEpochConverter(k),index:N,data_index:C}),D++),rt=M;et.length>0?(S.setTime(et[0].date),A.setTime(et[et.length-1].date)):(S=e.copyDateFrom(b.values[0][f]),A=e.copyDateFrom(b.values[b.values.length-1][f]))}return h=g,d=p,{majorTicks:et,minorTicks:tt,historical:at,start:d,end:h,interval:v,numDataPoints:x-_+1,padLeft:nt,padRight:it}},findMonths:function(e){var t,n,i,r,s=[],l=[];if(f=o(e),e.values.length>0){var u=e.values[0][f],c=u.getMonth(),d=u.getFullYear(),h=u;for(i=1,r=e.values.length;r>i;i++)u=e.values[i][f],c!==u.getMonth()&&(s.push(h.getTime()),t=c,c=u.getMonth()),d!==u.getFullYear()&&(l.push(h.getTime()),n=d,d=u.getFullYear()),h=u;t!==h.getMonth()&&s.push(h.getTime()),n!==h.getFullYear()&&l.push(h.getTime())}return{range:s,mjrRange:l,interval:a.INTERVAL_MONTH,mjrInterval:a.INTERVAL_YEAR,numDataPoints:s.length}},findDates:function(){var e,t=[];for(e=1;32>e;e++)t.push(new Date(1970,0,e).getTime());return{range:t,mjrRange:[],interval:a.INTERVAL_DATE,mjrInterval:"",numDataPoints:t.length}},findWeekdays:function(){var e,t=[];for(w=new Date(1970,0,3),e=1;38>e;e++)t.push(w.getTime()),w.setDate(w.getDate()+1);return{range:t,mjrRange:[],interval:a.INTERVAL_WEEKDAY,mjrInterval:"",numDataPoints:t.length}},findWeeks:function(t,n){var i,r,s,l,u=[],c=[],d=o(t);if(t.values.length>0)for(C=t.values[0][d],r=C.getFullYear(),w=new Date(r,0,1),l=w.getMonth(),s=0;53>s;s++)u.push(w.getTime()),i=w.getMonth(),l!==i&&(c.push(this.findMonthTick(u,l,r,n)),l=i),M=e.copyDateFrom(w),w.setDate(w.getDate()+7);return c.push(this.findMonthTick(u,l,r,n)),{range:u,mjrRange:c,interval:a.INTERVAL_WEEKCOUNT,mjrInterval:a.INTERVAL_MONTH,numDataPoints:u.length}},findWeekdayYears:function(e){f=o(e);var t,n,i=new Date(1970,0,1),r=_(e,i),s=[],l=[];for(x(i),t=0;r>t;t++){for(n=0;7>n;n++)s.push(i.getTime()),i.setDate(i.getDate()+b);l.push(s[s.length-7]),i.setFullYear(i.getFullYear()+b),i.setDate(1),x(i)}return{range:s,mjrRange:l,interval:a.INTERVAL_WEEKDAY,mjrInterval:a.INTERVAL_YEAR,numDataPoints:s.length+l.length-1}},findYears:function(e){f=o(e);var t,n=new Date(1970,0,1),i=_(e,n),r=[];for(t=0;i>t;t++)r.push(n.getTime()),n.setFullYear(n.getFullYear()+b);return{range:r,mjrRange:[],interval:a.INTERVAL_YEAR,mjrInterval:"",numDataPoints:i}},findYearMonths:function(e){f=o(e);var t,n=[];if(e.values.length>0){var i=e.values[0][f];for(t=1;12>=t;t++)n.push(new Date(i.getFullYear(),t,0).getTime())}return{range:n,mjrRange:[],interval:a.INTERVAL_MONTH,mjrInterval:"",numDataPoints:n.length}},findYearQuarters:function(e){f=o(e);var t,n=[];if(e.values.length>0){var i=e.values[0][f];for(t=1;12>=t;t+=3)n.push(new Date(i.getFullYear(),t,0).getTime())}return{range:n,mjrRange:[],interval:a.INTERVAL_QUARTER,mjrInterval:"",numDataPoints:n.length}},boundData:function(e,t,n,i){var r,a,s,l,u,c,d;if(f=o(e),d=e.values.length,d>0){if(c=e.values[0][f],l=e.values[0][f],u=e.values[d-1][f],l>=t&&u===n)r=0,a=d-1;else for(s=0;d>s&&(c=e.values[s][f],void 0===r&&c>=t&&(r=s),a=s,!(c>n));s++);return i.startIndex=r,i.endIndex=a,i}},dateToEpochConverter:function(e){return e.getTime()},epochToDateConverter:function(e){return new Date(e)},isValidDate:function(e){return"[object Date]"!==Object.prototype.toString.call(e)?!1:!isNaN(e.getTime())},stringToEpochConverter:function(e){return this.dateToEpochConverter(a.stringToDateConverter(e))},numDataPoints:function(e,t,n){f=o(n);var i,r,a,s,l;for(s=0,l=n.values.length;l>s&&(a=n.values[s][f],void 0===i&&a>=e&&(i=s),r=s,!(a>t));s++);return r-i},isWeekday:function(e,t,n){return n=new Date(e,t,n).getDay(),0!==n&&6!==n},getWeekdaysInMonth:function(e,t){var n,i=this.daysInMonth(e,t),r=0;for(n=0;i>n;n++)this.isWeekday(e,t,n+1)&&r++;return r},getWeekdaysInYear:function(e){var t,n,i,r=0;for(n=0;12>n;n++)for(t=this.daysInMonth(e,n),i=0;t>i;i++)this.isWeekday(e,n,i+1)&&r++;return r},daysInMonth:function(e,t){return 32-new Date(e,t,32).getDate()},getMajorTickDates:function(e,t){var n,i,r,o=this.getWeekdaysInMonth(e,t)/4,a=this.daysInMonth(e,t),s=[];for(i=0,r=0;a>i;i++)if(this.isWeekday(e,t,i+1)&&r++,n=s.length,0===n&&r===Math.round(o))r=0,s.push(new Date(e,t,i+1));else if(1===n&&r===Math.floor(o))r=0,s.push(new Date(e,t,i+1));else if(2===n&&r===Math.floor(o)){r=0,s.push(new Date(e,t,i+1)),s.push(new Date(e,t,a));
break}return s},nextMonth:function(e,t){var n=e.getYear(),i=e.getMonth();return new Date(n,i+1,t)},findMonthTick:function(e,t,n,i){var r=e.length-1,o=new Date(e[r]);o.setMonth(t);var s=N.daysInMonth(n,t);o.setDate(s);var l,u=o.getTime();if(i===a.monthTickTypes.END)l=u;else{o.setDate(1);var c=o.getTime();l=i===a.monthTickTypes.END?c:c+.5*(u-c)}for(o.setTime(e[r]);e[r]>l&&r;)r--;return e[r]}};return _=function(t,n){var i=1;if(t.values.length>0){var r=t.values[0][f],o=t.values[t.values.length-1][f],a=r.getFullYear(),s=o.getFullYear(),l=Math.max(a,s),u=Math.min(a,s);i=l-u+1,b=a===s?1:s-a,b/=Math.abs(b),e.initDate(n,a,0,1)}return i},x=function(e){if(b>0)for(;0!==e.getDay();)e.setDate(e.getDate()+b);else for(;0!==e.getDay()||e.getDate()<8;)e.setDate(e.getDate()-b);return e},N},stringToDateConverter:function(e){n||(n=t.window.get());var i,r,o,a,s,l,u=new Date;if(a=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,""!==e){if(s=e.match(a),!s){var c=n.Date.parse(e,"yyyy/MM/dd HH:mm:ss");return c?u=new Date(c):alert("Invalid date format: "+e),u}if(s[1]<1||s[1]>31)return alert("Invalid value for day: "+s[1]),u;if(s[2]<1||s[2]>12)return alert("Invalid value for month: "+s[2]),u;if(i=parseInt(s[3],10),r=parseInt(s[2]-1,10),o=parseInt(s[1],10),l=u.getFullYear(),1902>i||i>l)return alert("Invalid value for year: "+i+" - must be between 1902 and "+l),u;u=new Date(i,r,o)}return u}};return a}),define("oven/framework/data/view/dataView",["oven/unvetted/kernel/kernelUtil","oven/framework/data/table/dataTable","oven/framework/data/view/fieldSchema","oven/library/utility/objects","oven/unvetted/library/axes/dateRangeFinder","oven/unvetted/contracts/baseDataContract"],function(e,t,n,i,r,o){function a(e){var t,n,i,a,s=o.FieldTypes,l=e.values.length,u=e.DataTemplate.Fields.length;for(a=0;u>a;a+=1)if(i=e.DataTemplate.Fields[a],i&&i.type===s.DATE)for(t=0;l>t;t+=1)n=e.values[t],n&&("string"==typeof n[i.columnIdx]?n[i.columnIdx]=r.stringToDateConverter(n[i.columnIdx]):"number"==typeof n[i.columnIdx]&&(n[i.columnIdx]=new Date(Math.round(n[i.columnIdx]))))}function s(t,r,o,l,u,c){var d,h,f=c,p=l,g=u,m=r,v=o,y=t,b=!1;h={getViewName:function(){return m},getViewType:function(){return v},getDataViewSet:function(){return y},getDataTable:function(){return f},getDataSchema:function(){return p},getMetaBlockSchema:function(){return g},applyNewSchema:function(t,i,r,o){function a(i,a){var s,l,u=n.create();for(s=0,l=i.length;l>s;s++){var c=i[s].src,d=i[s].dest,h=a.getFieldIndex(c),f=a.getFieldType(c);if(void 0===h||void 0===d){var p="dataView::applyNewSchema() failed.  srcKey = "+c+" destKey = "+d+" columnIndex = "+h;throw e.log.error(p+" viewName = ",t," dataMap = ",r," metaBlockMap = ",o),new Error(p)}u.addField(d,f,h)}return u}var l=a(r,p),u=a(o,g),c=s(y,t,i,l,u,f);return c},getSwitchedOrder:function(){return b},getLegacyJSON:function(t){var n,i,r,o,s,l,u=1,c=0;if(t&&(d=void 0),void 0===d){d={},d.values=this.getData(),d.DataTemplate={},d.DataTemplate.DataTemplateType=1,d.DataTemplate.AuxFields=0,d.DataTemplate.Fields=[],n=p.getFields();for(r in n)n.hasOwnProperty(r)&&(o=n[r],d.DataTemplate.Fields.push({name:o.name,label:o.name,type:o.type,columnIdx:o.columnIdx,displayFormat:"204"}),u+=1,c+=1);for(d.DataTemplate.NumFields=c,l=this.getMetaBlock(),void 0!==g&&(i=g.getFields()),s={},u=0;u<l.length;u+=1)for(r in i)if(i.hasOwnProperty(r)&&(o=i[r],o.columnIdx===u)){s[o.name]=l[u];break}d.MetaBlock=s}return void 0===d.MetaBlock.xAxisFieldIndex&&(d.MetaBlock.xAxisFieldIndex=p.getFieldIndex("TIME"),void 0===d.MetaBlock.xAxisFieldIndex&&(d.MetaBlock.xAxisFieldIndex=p.getFieldIndex("XAXIS"))),a(d),d.values.length>0&&void 0!==d.MetaBlock.xAxisFieldIndex&&d.values[0][d.MetaBlock.xAxisFieldIndex].getTime&&d.values[0][d.MetaBlock.xAxisFieldIndex].getTime()>d.values[d.values.length-1][d.MetaBlock.xAxisFieldIndex].getTime()&&(e.log.warn("TODO: This is an error!  Someone should fix the datalayer table so the timeseries comes in the right order Dates: "+d.values[0][d.MetaBlock.xAxisFieldIndex]+" > "+d.values[d.values.length-1][d.MetaBlock.xAxisFieldIndex]),d.values.reverse(),b=!0),d.bDataReady=!0,d}};var _=i.assimilate(f,h);return y[m]=_,_}var l={create:function(e,n,i,r,o){var a={},l=t.create(o);return s(a,e,n,i,r,l)}};return l}),define("oven/framework/data/adapters/base/dataEventBuilder",["oven/unvetted/contracts/events"],function(e){function t(t,n){return{group:e.DATAEVENT_GROUP,type:s.RowChange,dataViewSet:t,data:n}}function n(e,t){return{rowIndex:e,columns:t}}function i(t,n){return{group:e.DATAEVENT_GROUP,type:s.RowInsert,dataViewSet:t,data:n}}function r(e,t){return{startRow:e,count:t}}function o(t){return{group:e.DATAEVENT_GROUP,type:s.TableClear,dataViewSet:t}}function a(t){return{group:e.DATAEVENT_GROUP,type:s.TableChange,dataViewSet:t}}var s={RowChange:e.ROW_CHANGES,RowInsert:e.ROW_INSERTS,RowMove:e.ROW_MOVES,RowDelete:e.ROW_DELETES,ColInsert:e.COLUMN_INSERTS,ColMove:e.COLUMN_MOVES,ColDelete:e.COLUMN_DELETES,TableChange:e.TABLE_CHANGE,TableClear:e.TABLE_CLEAR},l={createEventBuilder:function(e){var l,u=[],c={addRowChange:function(i,r){var o;void 0===l||l.type!==s.RowChange?(o=[],l=t(e,o),u.push(l)):o=l.data,o.push(n(i,r))},addRowInsert:function(t,n){var o;void 0===l||l.type!==s.RowInsert?(o=[],l=i(e,o),u.push(l)):o=l.data,o.push(r(t,n))},addTableChange:function(){var t=a(e);u=[t]},addTableClear:function(){u.push(o(e))},getEvents:function(){return u}};return c}};return l}),define("oven/unvetted/library/math/stats/baseStatsCalc",[],function(){var e={create:function(e,t,n,i){var r={};return r.calculate=e,r.rowChange=void 0!==t?t:e,r.rowInsert=void 0!==n?n:e,r.rowDelete=void 0!==i?i:e,r}};return e}),define("oven/unvetted/library/math/stats/statsCalcMinMaxAvg",["oven/unvetted/library/math/stats/baseStatsCalc","oven/unvetted/kernel/kernelUtil"],function(e,t){function n(e,t,n,i,r){return{minValue:e,minIndex:t,maxValue:n,maxIndex:i,meanAverage:r}}var i={create:function(i,r){function o(){var e,o,a=i.getData(),s=a.length;if(u=c=void 0,d=h=void 0,f=0,0===s)return t.log.warn("StatsCalcMinMaxAvg","Attempting to calculate StatsBlock on empty data set. Returning 'undefined'"),n(void 0,void 0,void 0,void 0,void 0);for(e=0;s>e;e++)o=a[e][r],(void 0===d||o>d)&&(d=o,h=e),(void 0===u||u>o)&&(u=o,c=e),f+=o;return f/=s,n(u,c,d,h,f)}function a(){return o()}function s(){return o()}function l(){return o()}var u,c,d,h,f;return e.create(o,a,s,l)}};return i}),define("oven/unvetted/library/math/stats/statsCalcMedian",["oven/unvetted/library/math/stats/baseStatsCalc","oven/unvetted/kernel/kernelUtil"],function(e,t){function n(e){return{medianValue:e}}var i={create:function(i,r){function o(e){var o,a,s,l=i.getData(),f=l.length,p=[];if(0===f)return t.log.warn("StatsCalcMedian","Attempting to calculate StatsBlock on empty data set. Returning 'undefined'"),n(void 0);if(e.hasOwnProperty(r)===!1||e[r].hasOwnProperty("minValue")===!1)throw new Error("ERROR: minValue is not already calculated. You must calculate first pass calculations before secondpass.");if(d===f&&h===e[r].minValue&&c===e[r].maxValue)return n(u);for(d=f,o=0;f>o;o++)a=l[o][r],void 0!==a&&p.push(a);return p.sort(function(e,t){return e-t}),f=p.length,s=f/2,1===f%2?(s=Math.floor(s),u=p[s]):u=(p[s-1]+p[s])/2,n(u)}function a(){return o()}function s(){return o()}function l(){return o()}var u,c,d,h;return e.create(o,a,s,l)}};return i}),define("oven/unvetted/library/math/stats/statsVarianceStdDev",["oven/unvetted/library/math/stats/baseStatsCalc","oven/unvetted/kernel/kernelUtil"],function(e,t){function n(e,t,n){return{varianceValue:e,stDevValue:t,skewnessValue:n}}var i={create:function(i,r){function o(e){var o,a,s=i.getData(),l=s.length,p=0;if(0===l)return t.log.warn("StatsVarianceStdDev","Attempting to calculate StatsBlock on empty data set. Returning 'undefined'"),n(void 0,void 0,void 0);if(e.hasOwnProperty(r)===!1||e[r].hasOwnProperty("meanAverage")===!1)throw new Error("ERROR: meanAverage is not already calculated. You must calculate first pass calculations before secondpass.");if(f===l&&h===e[r].meanAverage)return n(u,c,d);for(u=0,c=0,f=l,h=e[r].meanAverage,o=0;l>o;o++)a=s[o][r],u+=Math.pow(Math.abs(a-h),2),p+=Math.pow(a-h,3);return u/=l,c=Math.sqrt(u),d=p/((l-1)*Math.pow(c,3)),n(u,c,d)}function a(){return o()}function s(){return o()}function l(){return o()}var u,c,d,h,f;return e.create(o,a,s,l)}};return i}),define("oven/unvetted/library/math/stats/statsHistogram",["oven/unvetted/library/math/stats/baseStatsCalc","oven/unvetted/kernel/kernelUtil"],function(e,t){function n(e,t,n,i,r,o){return{traditionalBinValue:e,scottsBin:t,squareRootChoiceValue:n,sturgisValue:i,riceRuleValue:r,doanesValue:o}}var i={create:function(i,r){function o(e){var o,a,s,l,b=i.getData(),_=b.length;if(0===_)return t.log.warn("StatsHistogram","Attempting to calculate StatsBlock on empty data set. Returning 'undefined'"),n(void 0,void 0,void 0,void 0,void 0,void 0);if(e.hasOwnProperty(r)===!1||e[r].hasOwnProperty("varianceValue")===!1)throw new Error("ERROR: varianceValue is not already calculated. You must calculate second pass calculations before histogram");return h===_&&c===e[r].varianceValue?n(g,f,p,y,m,v):(h=_,d=e[r].meanAverage,u=e[r].stDevValue,c=e[r].varianceValue,o=e[r].maxValue,a=e[r].minValue,l=e[r].skewnessValue,g=Math.ceil((o-a)/_),f=Math.ceil(3.5*u/Math.pow(h,1/3)),p=Math.ceil(Math.sqrt(_)),y=Math.ceil(Math.log(_)/Math.log(2)),m=Math.ceil(2*Math.pow(_,1/3)),s=Math.sqrt(6*(_-2)/((_+1)*(_+3))),v=Math.ceil(1+y+Math.log(1+Math.abs(l)/s)/Math.log(2)),n(g,f,p,y,m,v))}function a(){return o()}function s(){return o()}function l(){return o()}var u,c,d,h,f,p,g,m,v,y;return e.create(o,a,s,l)}};return i}),define("oven/unvetted/library/math/stats/statsCalcFactory",["oven/unvetted/library/math/stats/statsCalcMinMaxAvg","oven/unvetted/library/math/stats/statsCalcMedian","oven/unvetted/library/math/stats/statsVarianceStdDev","oven/unvetted/library/math/stats/statsHistogram","oven/unvetted/kernel/kernelUtil"],function(e,t,n,i,r){var o={MinMax:0,MinMaxAvg:1,Median:2,VarianceStdDev:3,Histogram:4},a={StatsCalcType:o,create:function(a,s,l){switch(a){case o.MinMax:case o.MinMaxAvg:return e.create(s,l);case o.Median:return t.create(s,l);case o.VarianceStdDev:return n.create(s,l);case o.Histogram:return i.create(s,l);default:return r.log.error("StatsCalcFactory","Unknown statsCalcType passed in: type = "+a),void 0}}};return a}),define("oven/framework/data/adapters/base/baseDataAdapter",["oven/library/utility/objects","oven/framework/data/view/dataView","oven/framework/data/adapters/base/dataEventBuilder","oven/unvetted/contracts/events","oven/unvetted/library/math/stats/statsCalcFactory"],function(e,t,n,i,r){var o={create:function(i,o,a,s,l){function u(e,t){var n,i,o,a,s,l=e.getStatsInfo(t);for(i in l)l.hasOwnProperty(i)&&(o=l[i],a=m.getDataTable(),s=m.getDataSchema().getFieldIndex(o.fieldName),n=r.create(o.statsCalcType,a,s),_.push({name:i,columnIndex:s,calc:n}))}function c(){var e,t,n,i,r,o,a,s={};for(e=0,t=_.length;t>e;e++){n=_[e],i=n.columnIndex,r=n.calc.calculate(s),s.hasOwnProperty(i)||(s[i]={}),a=s[i];for(o in r)r.hasOwnProperty(o)&&(a[o]=r[o])}d.setStatsBlock(s)}var d,h,f=a.SeriesName,p=a.SeriesType,g=l,m=t.create(f,p,a.FieldSchema,a.MetaBlockSchema,function(e){d=e}),v=m.getDataViewSet(),y=o,b=s,_=[],x={createEventBuilder:function(){return n.createEventBuilder(v)},notifyDataEvent:function(e){var t,n,i;for(c(),t=0,n=e.length;n>t;t++)i=e[t],g.notify(i)},setData:function(e){d.setData(e),c()},getRWData:function(){return d.getRWData()},setMetaBlock:function(e){d.setMetaBlock(e)},appendRows:function(e){d.appendRows(e)},deleteRows:function(e,t){d.deleteRows(e,t)},insertRows:function(e,t){d.insertRows(e,t)}};return h={getDataView:function(){return m},getSeriesName:function(){return f},getSeriesType:function(){return p},hasData:function(){if(b)return b();throw new Error("Derived didn't implement hasDataCallback")},calculateStats:c,bindToDataContract:function(e,t){u(e,t),c()},destroy:function(){y&&y(),d=void 0,m=void 0,f=void 0,p=void 0,y=void 0,b=void 0}},i(e.assimilate(h,x)),h}};return o}),define("oven/framework/data/adapters/jstable/jsTableDataAdapter",["oven/framework/data/adapters/base/baseDataAdapter","oven/framework/data/view/fieldSchema","oven/library/utility/objects"],function(e,t,n){function i(t,i,r,o,a,s,l){function u(){h=void 0}function c(){return o&&o.length}function d(){function n(){o&&h.setData(o),s&&h.setMetaBlock(s)}var d={SeriesName:t,SeriesType:i,FieldSchema:r,MetaBlockSchema:a},f=e.create(function(e){h=e,n()},u,d,c,l);return f}var h=null,f={update:function(e){e.data&&this.setData(e.data),e.metaBlock&&this.setMetaBlock(e.metaBlock);var t=e.dataDeltas;if(t&&(t.cells&&this.updateRows(t.cells),t.rowInserts)){var n,i,r=t.rowInserts,o=r.length;for(n=0;o>n;++n)i=r[n],this.insertRows(i[0],i[1])}},setMetaBlock:function(e){var t=h.createEventBuilder();h.setMetaBlock(e),t.addTableChange(),h.notifyDataEvent(t.getEvents())},setData:function(e){var t=h.createEventBuilder();h.setData(e),t.addTableChange(),h.notifyDataEvent(t.getEvents())},clearRows:function(){var e=h.createEventBuilder();h.setData([]),e.addTableClear(),h.notifyDataEvent(e.getEvents())},appendRows:function(e){var t=h.createEventBuilder(),n=e.length,i=h.getDataView().getData().length;h.appendRows(e),t.addRowInsert(i,n),h.notifyDataEvent(t.getEvents())},insertRows:function(e,t){var n=h.createEventBuilder(),i=t.length;h.insertRows(e,t),n.addRowInsert(e,i),h.notifyDataEvent(n.getEvents())},deleteRows:function(e,t){var n=h.getDataView().getData().length,i=h.createEventBuilder();0===e&&t===n?(h.setData([]),i.addTableClear()):(h.deleteRows(e,t),i.addTableChange()),h.notifyDataEvent(i.getEvents())},updateRows:function(e){var t,n,i,r,o,a,s,l,u,c,d,f=h.getRWData(),p=h.createEventBuilder(),g=e.length;for(i=0;g>i;++i){for(n=e[i],l=n[0],o=n[1],a=o.length,d=[],t=f[l],s=0;a>s;++s)r=o[s],u=r[0],c=r[1],t[u]!==c&&(d.push(u),t[u]=c);d.length&&p.addRowChange(l,d)}h.notifyDataEvent(p.getEvents())}},p=n.assimilate(d(),f),g={publicInterface:p,internalInterface:{}};return g}function r(e,n){var r=function(e,t){var n;for(n=0;n<e.length;n+=1){var i=e[n];t.addField(i.inputName,i.type,i.columnIdx)}},o=e.Data,a=null,s=t.create(),l=e.MetaBlock,u=null,c=t.create();return r(o.InputMap,s),r(l.InputMap,c),o.Values&&(a=o.Values),l.Values&&(u=l.Values),i(e.Name,e.Type,s,a,c,u,n)}function o(e,t,n,r,o,a,s){return i(e,t,n,r,o,a,s)}var a={create:r,createWithSchemas:o};return a}),define("oven/framework/data/adapters/jstable/jsTableSeries",["oven/framework/data/view/fieldSchema"],function(){var e={create:function(e){var t=e.SeriesName,n=e.SeriesType,i=[],r=[],o=[],a=[],s={addField:function(e,t,n){o.push({inputName:e,type:t,columnIdx:n})},addMetaBlockField:function(e,t,n){a.push({inputName:e,type:t,columnIdx:n})},setInitialValues:function(e){i=e},setInitialMetaBlock:function(e){r=e},toConfigObj:function(){return{Name:t,Type:n,Data:{InputMap:o,Values:i},MetaBlock:{InputMap:a,Values:r}}},getName:function(){return t},getType:function(){return n},getFields:function(){return o},getInitialValues:function(){return i}};return s}};return e}),define("oven/unvetted/library/utility/bregUtil",[],function(){var e={},t={setBregValues:function(t){e=t}};return t}),define("oven/unvetted/kernel/native/kernelNativeDataLayer",["oven/unvetted/kernel/kernelUtil"],function(e){var t={create:function(t){function n(t){function n(t){this.guid=t,this.print=function(){e.log.trace("KernelNativeDataLayer","KernelNativeDataLayerTrace::print(). guid = "+this.guid)}}function i(e){var t;if(!h)throw new Error("ERROR: Attempted to call native API after object was destroyed.");var n=function(t){e(t)};return p.push(n),t=f.appendObserver(n)}function o(e){var t;if(!h)throw new Error("ERROR: Attempted to call native API after object was destroyed.");return t=f.removeObserver(e)}function a(e,t){var n;if(!h)throw new Error("ERROR: Attempted to call native API after object was destroyed.");return n=f.getCellValue(e,t)}function s(){var e;if(!h)throw new Error("ERROR: Attempted to call native API after object was destroyed.");return e=f.rows()}function l(){var e;if(!h)throw new Error("ERROR: Attempted to call native API after object was destroyed.");return e=f.columns()}function u(e){var t;if(!h)throw new Error("ERROR: Attempted to call native API after object was destroyed.");return t=f.columnName(e)}function c(){e.log.trace("KernelNativeDataLayer","KernelNativeDataLayer::destroy() called. guid = "+t),r.appendObserver=void 0,r.removeObserver=void 0,r.getCellValue=void 0,r.rows=void 0,r.columns=void 0,r.columnName=void 0,d=void 0,f=void 0,p=void 0,h=!1}var d,h=!0,f=BlpGetDataLayerView(t),p=[];d=new n(t),e.log.trace("KernelNativeDataLayer","KernelNativeDataLayer::create() called. guid = "+t);var g={destroy:c,appendObserver:i,removeObserver:o,getCellValue:a,rows:s,columns:l,columnName:u};return g}var i,r,o,a;return a=n(t),o=function(){a&&(a.destroy(),a=void 0,i=void 0)},i={appendObserver:function(e){return a.appendObserver(e)},removeObserver:function(e){return a.removeObserver(e)},getCellValue:function(e,t){return a.getCellValue(e,t)},rows:function(){return a.rows()},columns:function(){return a.columns()},columnName:function(e){return a.columnName(e)},destroy:o},r={},i}};return t}),define("oven/framework/data/adapters/datalayer/dataLayerView",["oven/unvetted/kernel/kernelUtil","oven/unvetted/kernel/native/kernelNativeDataLayer"],function(e,t){var n={create:function(n,i){function r(){var t,n,r,g,m,v;for(a=o.columns(),f=[],p=[],m=0;a>m;++m)t=m,n=o.columnName(t),s[n]=t,l[t]=n,c[t]=void 0,h[n]=void 0;for(m=0,v=i.length;v>m;++m)if(r=i[m],n=r.columnName,g=r.inputName,d[g]=n,h[n]=g,t=s[n],void 0!==t)f.push(t),u[g]=t,c[t]=g,p.push(n);else{var y,b,_="",x="";for(y in l)l.hasOwnProperty(y)&&(b=l[y],x+=b+",");for(y in d)d.hasOwnProperty(y)&&(b=d[y],_+=y+":"+b+",");e.log.error("ERROR: Expected columnName('"+n+"') not found on DataLayer table!. sInput="+_+"\n	Datalayer="+x),e.log.error("ERROR: _columnNameToColumnIndexMap=",s),e.log.error("ERROR: _columnIndexToColumnNameMap=",l),e.log.error("ERROR: _columnIndexToInputNameMap=",c),e.log.error("ERROR: _columnNameToInputNameMap=",h)}}e.log.trace("DataLayerView",function(e){e("create() called. guid =",n," inputMap =",i)});var o=t.create(n),a=o.columns(),s={},l={},u={},c={},d={},h={},f=[],p=[];r();var g={dlAppendObserver:o.appendObserver,dlRemoveObserver:o.removeObserver,dlGetCellValue:o.getCellValue,dlRows:o.rows,dlColumns:o.columns,dlColumnName:o.columnName,getNumColumns:function(){return a},getColumnNameToColumnIndexMap:function(){return s},getColumnIndexToColumnNameMap:function(){return l},getInputNameToColumnIndexMap:function(){return u},getColumnIndexToInputNameMap:function(){return c},getInputNameToColumnNameMap:function(){return d},getColumnNameToInputNameMap:function(){return h},getColumnIndicesFromInputMap:function(){return f},getColumnNamesFromInputMap:function(){return p},getColumnNameFromColumnIndex:function(e){return l[e]},getColumnIndexFromColumnName:function(e){return s[e]},getInputNameFromColumnIndex:function(e){return c[e]},getColumnIndexFromInputName:function(e){return u[e]},getInputNameFromColumnName:function(e){return h[e]},getColumnNameFromInputName:function(e){return d[e]},refreshMapping:r,destroy:function(){o.destroy()},_numColumns:a,_columnNameToColumnIndexMap:s,_columnIndexToColumnNameMap:l,_inputNameToColumnIndexMap:u,_columnIndexToInputNameMap:c,_inputNameToColumnNameMap:d,_columnNameToInputNameMap:h};return g}};return n}),define("oven/framework/data/adapters/datalayer/dataLayerDataAdapter",["oven/library/utility/objects","oven/unvetted/library/utility/debugUtil","oven/unvetted/library/utility/bregUtil","oven/framework/data/adapters/base/baseDataAdapter","oven/framework/data/view/fieldSchema","oven/framework/data/adapters/datalayer/dataLayerView","oven/unvetted/contracts/baseDataContract","oven/unvetted/kernel/kernelUtil","oven/unvetted/kernel/kernelEnvironment"],function(e,t,n,i,r,o,a,s,l){function u(e,t,n){function i(e,t,i){var r,o,a,s,l,u;for(t.hasOwnProperty(i)||(n[i]=[]),a=n[i],r=0,o=e.length;o>r;r++)s=e[r],l=s.columns,u=s.rows,a.push({rownum:u.start,rowlen:u.length,colnum:l.start,collen:l.length})}function r(e,t,i){var r,o,a,s;for(t.hasOwnProperty(i)||(n[i]=[]),a=n[i],r=0,o=e.length;o>r;r++)s=e[r],a.push({rownum:s.start,rowlen:s.length})}try{switch(t){case h.CellUpdates:i(e,n,"cellUpdates");break;case h.ColumnDeletes:r(e,n,"columnDeletes");break;case h.ColumnInserts:r(e,n,"columnInserts");break;case h.RowDeletes:r(e,n,"rowDeletes");break;case h.RowInserts:r(e,n,"rowInserts")}}catch(o){s.log.error("Error Caught exception="+o.stack),s.log.error("Exception nInType="+t+", inArray=",e),s.log.error("Exception oInUpdatesArray=",e)}}var c,d=!1,h={CellUpdates:1,ColumnDeletes:2,ColumnInserts:3,RowDeletes:5,RowInserts:6},f={create:function(t,n){function f(e,t,n){var i,r,o=[];try{for(i=0,r=n.length;r>i;++i){var a=n[i],l=e.dlGetCellValue(t,a);o.push(l)}}catch(u){s.log.error("ERROR: readRow(): Caught exception =",u)}return o}function p(e,t,n,i,r){var o,a,l,u,c;try{if(e.hasOwnProperty("dlGetTableBatch"))o=e.dlGetTableBatch(t,n,r);else for(o=[],a=t,l=t+n;l>a;++a){var d=[];for(u=0,c=i.length;c>u;++u){var h=i[u],f=e.dlGetCellValue(a,h);f instanceof Date&&(f=new Date(f.valueOf()+6e4*f.getTimezoneOffset())),d.push(f)}o.push(d)}}catch(p){s.log.error("ERROR: readRows(): Caught exception =",p)}return o}function g(e){var t,n=D.getColumnIndicesFromInputMap(),i=D.getColumnNamesFromInputMap(),r=0;d===!0&&void 0!==e&&s.log.error("readFieldsFull oInEvent="+s.log.dumpObj(e,2));try{r=D.dlRows(),d===!0&&s.log.error("readFieldsFull Full update. nTotalRows="+r),r>0?(t=p(D,0,r,n,i),V=!0,M.setData(t),G=t.length,d===!0&&(j="len:"+t.length+", data="+s.log.dumpObj(t,2,5),s.log.error("readFieldsFull oLastFullTable="+j))):(t=[],M.setData(t)),N()}catch(o){return s.log.error("ERROR: readFieldsFull(): Caught exception = ",o),0}return r}function m(){var e,t,n,i,r,o,a,l,u,c,d,h,f,g=D.getColumnIndicesFromInputMap(),m=D.getColumnNamesFromInputMap(),v=M.getDataView(),y=v.getSwitchedOrder(),b=D.dlRows(),_=0;for(e=v.getDataTable().getData(),t=e.length,n=t>0?e[0].length:0,o=p(D,0,b,g,m),a=o.length,l=a>0?o[0].length:0,y===!0&&o.reverse(),t!==a&&(f="DataValidationError: Number of rows does not match. dataNumRows = "+t+" "+"dlNumRows = "+a,s.log.error("DataLayerDataAdapter",f),_++),n!==l&&(f="DataValidationError: Number of rows does not match. dataNumColumns = "+n+" "+"dlNumColumns = "+l,s.log.error("DataLayerDataAdapter",f),_++),d=0;t>d;d++)for(h=0;n>h;h++)i=e[d][h],u=o[d][h],"[object Date]"===Object.prototype.toString.call(i)&&"[object Date]"===Object.prototype.toString.call(u)?(r=i.getTime(),c=u.getTime(),r!==c&&(f="DataValidationError: Values do not match. rowIndex = "+d+" "+"colIndex = "+h+" "+"dataValueAsTime = "+r+" "+"dlValueAsTime = "+c,s.log.error("DataLayerDataAdapter",f),_++)):i!==u&&(f="DataValidationError: Values do not match. rowIndex = "+d+" "+"colIndex = "+h+" "+"dataValue = "+i+" "+"dlValue = "+u,s.log.error("DataLayerDataAdapter",f),_++);return _>0&&(f="DataValidationError: Total number of errors = "+_,s.log.error("DataLayerDataAdapter",f)),_}function v(e,t){function n(e,t){var n,i,r=[];for(n=0,i=e.length;i>n;n++)e[n]!==t[n]&&r.push(n);return r}function i(e){var n,i,r,o,a,d,h,f,g,m,v;for(m=0,n=M.getRWData(),i=0,r=e.length;r>i;i++){if(o=e[e.length-i-1].rownum,a=e[e.length-i-1].rowlen,d=p(D,o+m,a,u,c),!d||0===d.length||0===d[0].length)throw v="ERROR: Unable to read data from dataLayer. Data = "+s.log.dumpObj(d),new Error(v);if(n[0].length!==d[0].length)throw v="ERROR: Column lengths are not equal. Problem with the last native event? outputData[0].length = "+n[0].length+", "+"rowsFromDataLayerTable[0].length = "+d[0].length,new Error(v);for(h=0,f=d.length;f>h;h++)g=l===!0?n.length-o-h+m:o+h+m,n.splice(g,0,d[h]);t.addRowInsert(o,a),m+=f}}function r(e){var i,r,o,a,d,h,f,g,m,v,y,b,_,x,w={};for(i=M.getRWData(),r=0,o=e.length;o>r;r++)if(a=e[r],d=a.rownum,h=a.rowlen,f=a.colnum,g=a.collen,!w.hasOwnProperty(d)){if(v=p(D,d,h,u,c),!v||0===v.length||0===v[0].length)throw x="ERROR: Bad read of data. data="+s.log.dumpObj(v),new Error(x);if(i[0].length!==v[0].length)throw x="ERROR: Column lengths are not equal. Problem with the last native event? outputData[0].length = "+i[0].length+", "+"rowsFromDataLayerTable[0].length = "+v[0].length,new Error(x);for(y=0,b=v.length;b>y;y++)_=l===!0?i.length-d-y:d+y,m=n(i[_],v[y]),w[_]=!0,i[_]=v[y],t.addRowChange(_,m)}}var o,a=M.getDataView(),l=a.getSwitchedOrder(),u=D.getColumnIndicesFromInputMap(),c=D.getColumnNamesFromInputMap();try{if(o=D.dlRows(),o>0?(e.hasOwnProperty("rowInserts")&&i(e.rowInserts),e.hasOwnProperty("cellUpdates")&&r(e.cellUpdates)):M.setData([]),d){var h=m();s.log.trace("VALIDATION: numErrors = "+h)}N()}catch(f){return s.log.error("ERROR: readFieldsFull(): Caught exception = ",f.stack),0}return o}function y(){var e=I.getColumnIndicesFromInputMap();try{var t=I.dlRows();if(t>0){var n=f(I,0,e);$=!0,M.setMetaBlock(n)}N()}catch(i){s.log.error("ERROR: readMetaBlock(): Caught exception = ",i)}}function b(){var e=R.getColumnIndicesFromInputMap();try{var t=R.dlRows();if(t>0){var n=f(R,0,e),i=n[0];void 0!==i&&null!==i&&(i===!0||1===i||"true"===i.toString().toLowerCase())&&(q=!0)}N()}catch(r){s.log.error("Caught exception = ",r)}}function _(e){U&&c.setTimeout(function(){try{M.notifyDataEvent(e)}catch(t){s.log.error("ERROR: On notifystack = "+t.stack)}},0)}function x(){var e=M.createEventBuilder();e.addTableChange(),_(e.getEvents())}function w(e){try{d&&s.log.trace("fieldsTableEventHandler() :: event = ",e);var t,n,i,r,o,a,l,c=0,f={},p=!1,m=M.createEventBuilder();n=e.columnDeletes.length,n>0&&(p=!0,D.refreshMapping(),u(e.columnDeletes,h.ColumnDeletes,f)),i=e.columnInserts.length,i>0&&(p=!0,D.refreshMapping(),u(e.columnInserts,h.ColumnInserts,f)),r=e.columnMoves.length,o=e.rowDeletes.length,o>0&&(p=!0,u(e.rowDeletes,h.RowDeletes,f)),a=e.rowInserts.length,a>0&&(p=!0,u(e.rowInserts,h.RowInserts,f)),l=e.rowMoves.length,t=e.cellUpdates.length,t>0&&(p=!0,u(e.cellUpdates,h.CellUpdates,f)),(r>0||l>0)&&s.log.error("Erik I got a error so I am not processing something nCellUp="+t+", nColDel="+n+", nColIns="+i+", nColMove="+r+", nRowDel="+o+", nRowIns="+a+", nRowMove="+l+", Evt="+s.log.dumpObj(e,2)),d===!0&&s.log.error("Processing myevt nLastRowLength="+G+", myevt="+s.log.dumpObj(f)),p?(void 0!==f.columnDeletes||void 0!==f.columnInserts||void 0!==f.columnMoves||void 0!==f.rowDeletes||void 0!==f.rowMoves||void 0!==f.rowInserts&&0===G||V!==!0?(c=g(f),m.addTableChange()):c=v(f,m),G=c,_(m.getEvents())):(t>0||n>0||i>0||r>0||o>0||a>0||l>0)&&s.log.error("FATAL ERROR. Tell me(Erik) if you see this so he can code up this test case.  We didnt process nCellUp="+t+", nColDel="+n+", nColIns="+i+", nColMove="+r+", nRowDel="+o+", nRowIns="+a+", nRowMove="+l+", Evt="+s.log.dumpObj(e,2)),d&&(B=s.log.dumpObj(e,2),F=s.log.dumpObj(f,2))}catch(y){s.log.error("Exception Error: Error processing native(fieldsTableEventHandler) event="+s.log.dumpObj(e,2)+", ex.stack="+y.stack)}}function C(e){try{var t,n,i,r,o,a,l,c={},d=!1;t=e.cellUpdates.length,t>0&&(d=!0,u(e.cellUpdates,1,c)),n=e.columnDeletes.length,i=e.columnInserts.length,i>0&&I.refreshMapping(),r=e.columnMoves.length,o=e.rowDeletes.length,a=e.rowInserts.length,a>0&&(d=!0,u(e.rowInserts,6,c)),l=e.rowMoves.length,d&&(y(c),x())}catch(h){s.log.error("Exception Error: Error processing native(metaBlockEventHandler) event="+s.log.dumpObj(e,2)+", ex.stack="+h.stack)}}function T(){try{b(),x()}catch(e){s.log.error("Error: ex.stack="+e.stack)}}function E(){var e=!1;try{var t=1,n=0;I&&(t=I.dlRows()),n=D.dlRows(),t>0&&n>0&&(e=!0)}catch(i){s.log.error("ERROR: ex="+i.stack)}return e}function S(){H&&g(),z&&y(),W&&b(),x()}function k(){H&&(D.dlRemoveObserver(P),H=void 0,V=void 0,D.destroy(),D=void 0,P=void 0),z&&(I.dlRemoveObserver(O),z=void 0,$=void 0,I.destroy(),I=void 0,O=void 0),U=void 0,W&&(R.dlRemoveObserver(L),W=void 0,q=void 0,R.destroy(),R=void 0,L=void 0)}function A(e){function t(){W?b():S()}var s,l,u,c,d=a.FieldTypes,h=e.DataSeries.Fields,f=r.create(),p=r.create(),g=e.DataSeries.MetaBlock,m=e.DataSeries.IsReady;if(h)for(l=h.DataLayerGuid,u=h.InputMap,H=!0,D=void 0!==e.DataAdapter?e.DataAdapter:o.create(l,u),P=D.dlAppendObserver(w),s=0;s<h.InputMap.length;s++)h.InputMap.hasOwnProperty(s)&&(c=d.UNKNOWN,"TIME"===u[s].inputName&&(c=d.DATE),f.addField(u[s].inputName,c,s));if(g)for(l=g.DataLayerGuid,u=g.InputMap,z=!0,I=e.DataAdapter?e.DataAdapter:o.create(l,u),O=I.dlAppendObserver(C),s=0;s<u.length;s++)u.hasOwnProperty(s)&&(c=d.UNKNOWN,"TIME"===u[s].inputName&&(c=d.DATE),p.addField(u[s].inputName,c,s));m&&(l=m.DataLayerGuid,u=m.InputMap,W=!0,R=o.create(l,u),L=R.dlAppendObserver(T));var v={SeriesName:e.SeriesName,SeriesType:e.SeriesType,FieldSchema:f,MetaBlockSchema:p};return i.create(function(e){M=e,t()},k,v,E,n)}c||(c=l.window.get());var M,N,D,P,I,O,R,L,B,F,j,H=!1,V=!1,z=!1,$=!1,U=!1,W=!1,q=!1,G=0;N=function(){U||(W&&q?(U=!0,S()):(H&&V&&z&&$||H&&V&&z===!1||H===!1&&z&&$||H===!1&&z===!1)&&(U=!0))};var X=e.assimilate(A(t),{}),Y={publicInterface:X,internalInterface:{}};return Y}};return f}),define("oven/framework/data/adapters/dataAdapterFactory",["oven/framework/data/adapters/jstable/jsTableDataAdapter","oven/framework/data/adapters/jstable/jsTableSeries","oven/framework/data/adapters/datalayer/dataLayerDataAdapter","oven/unvetted/kernel/kernelUtil"],function(e,t,n,i){function r(n,i,r){var o,s,l,u={SeriesName:n,SeriesType:i.type},c=t.create(u),d=i.mapping;for(s=0,l=d.length;l>s;++s)o=d[s],c.addField(o[a.IDX_FIELD],o[a.IDX_TYPE],o[a.IDX_COL]);var h=i.metaBlockMapping;if(h)for(s=0,l=h.length;l>s;++s)o=h[s],c.addMetaBlockField(o[a.IDX_FIELD],o[a.IDX_TYPE],o[a.IDX_COL]);i.data&&c.setInitialValues(i.data),i.metaBlock&&c.setInitialMetaBlock(i.metaBlock);var f=e.create(c.toConfigObj(),r);return f}function o(e,t,i){var r={SeriesName:e,SeriesType:t.type,DataSeries:t.mapping,DataAdapter:t.adapter};return n.create(r,i)}var a={IDX_FIELD:0,IDX_TYPE:1,IDX_COL:2},s={create:function(e,t,n,a){switch(e){case"jsTable":return r(t,n,a);case"dataLayer":return o(t,n,a);default:return i.log.error("ERROR: Unsupported DataAdapter type: ",e),void 0}}};return s}),define("oven/library/sharedContext",[],function(){var e={create:function(e,t,n,i,r,o,a,s,l){var u=e,c=t,d=n,h=i,f=r,p=o,g=a,m=s,v=l,y=function(e){return function(){return e}};return{getPlatform:y(u),getDataManager:y(d),getEventManager:y(c),getConfigManager:y(h),getResourceManager:y(f),getToolbarManager:y(p),getContextManager:y(g),getRootElement:y(v),getEventProvider:y(m.getEventProvider()),getTooltipProvider:y(m.getTooltipProvider()),getExportProvider:y(m.getExportProvider()),getContextMenuProvider:y(m.getContextMenuProvider()),getNumFormatProvider:y(m.getNumFormatProvider())}}};return e}),define("oven/framework/data/dataManager",[],function(){var e={create:function(e){var t={},n={},i=e;return{addDataAdapter:function(e){var n=e.getSeriesName();t[n]=e,i.addManagedObject(e),this.addDataView(n,e.getDataView())},removeDataAdapter:function(e){void 0!==t[e]&&(i.releaseManagedObject(t[e]),delete t[e])},getDataAdapter:function(e){if(!t.hasOwnProperty(e)){var n,i="";for(n in t)t.hasOwnProperty(n)&&(i+=n+",");if(i.length>0)throw new Error("Cant find required dataadapter:"+e+" in input list:"+i)}return t[e]},getAllDataAdapters:function(){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},hasDataAdapter:function(e){return t.hasOwnProperty(e)},hasAllAdaptersGotData:function(){var e,n=!0;for(e in t)t.hasOwnProperty(e)&&t[e].hasData()===!1&&(n=!1);return n},removeAllDataAdapters:function(){for(var e in t)this.removeDataAdapter(e)},updateDataAdapter:function(e,t){var n=this.getDataAdapter(e);void 0!==n&&n.update(t)},addDataView:function(e,t){n[e]=t},getDataView:function(e){return n[e]}}}};return e}),define("oven/framework/config/configManager",["oven/unvetted/kernel/kernelUtil","oven/unvetted/contracts/events","oven/framework/config/schema/configSchemaBuilder","oven/library/utility/objects"],function(e,t,n,i){function r(e){var t,i,r="";for(t in e)if(e.hasOwnProperty(t)){var o=e[t];for(i in o)o.hasOwnProperty(i)&&(r+=n.makeConfigId(t,i)+", ")}return r}var o={create:function(o){var a={},s={},l=o,u={_config:a,_collections:s,addConfig:function(e,t){var i=n.splitConfigId(e);return this.addConfigByTypeId(i.typeId,i.instanceId,t)},addConfigByTypeId:function(i,r,o){void 0===r&&(r=""),e.log.trace("ConfigManager",function(e){e("addConfig() called. typeId =",i,", instanceId =",r," config =",o)});var u=!1;if(a.hasOwnProperty(i)&&a[i].hasOwnProperty(r)?e.log.trace("ConfigManager",function(e){e("addConfig():: set with typeId = ",i," instanceId = ",r," already exists!")}):(a.hasOwnProperty(i)||(a[i]={}),a[i][r]=o,void 0===s[i]?s[i]=[r]:s[i].push(r),u=!0),u){var c=n.makeConfigId(i,r);
l.notify(t.createPropertyChangedEvent_v2(t.PROPERTY_ADD,[{typeId:i,instanceId:r,configId:c,properties:o}]))}return u},updateConfig:function(e,t){var i=n.splitConfigId(e);return this.updateConfigByTypeId(i.typeId,i.instanceId,t)},getDeltasOnConfigUpdate:function(e,t){this.updateConfigByTypeIdOriginal=this.updateConfigByTypeId,this.updateConfigByTypeId=function(e,n,r){if(void 0!==t&&a.hasOwnProperty(e)&&a[e].hasOwnProperty(n)){var o=i.getObjectDeltaModificationsOnly(a[e][n],r);void 0===o&&(o={}),void 0!==t&&t(e,n,o)}return this.updateConfigByTypeIdOriginal(e,n,r)}},updateConfigByTypeId:function(i,r,o){function s(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]instanceof Array?e[n]=t[n]:e[n]instanceof Object?s(e[n],t[n]):e[n]=t[n])}void 0===r&&(r=""),e.log.trace("ConfigManager",function(e){e("updateConfig() called. typeId =",i,", instanceId = ",r,", config =",o)});var u=!1;if(a.hasOwnProperty(i)&&a[i].hasOwnProperty(r)?(s(a[i][r],o),u=!0):e.log.trace("ConfigManager",function(e){e("updateConfig():: set with typeId = ",i,", instanceId =",r," does not exist!")}),u){var c=n.makeConfigId(i,r);l.notify(t.createPropertyChangedEvent_v2(t.PROPERTY_UPDATE,[{typeId:i,instanceId:r,configId:c,properties:o}]))}return u},removeConfig:function(i,r){void 0===r&&(r=""),e.log.trace("ConfigManager",function(e){e("removeConfig() called. typeId =",i,", instanceId =",r)});var o=!1;if(a.hasOwnProperty(i)&&a[i].hasOwnProperty(r)){var u=a[i];delete u[r];var c=s[i];if(1===c.length)delete s[i];else{var d=c.indexOf(r);c.splice(d,1)}o=!0}else e.log.trace("ConfigManager",function(e){e("removeConfig():: set with typeId = ",i,", instanceId =",r," does not exist!")});if(o){var h=n.makeConfigId(i,r);l.notify(t.createPropertyChangedEvent_v2(t.PROPERTY_REMOVE,[{configId:h,typeId:i,instanceId:r}]))}return o},getConfig:function(e){var t=n.splitConfigId(e);return this.getConfigByTypeId(t.typeId,t.instanceId)},getConfigByTypeId:function(e,t){if(void 0===t&&(t=""),this.hasConfigByTypeId(e,t))return a[e][t];throw new Error("Can't find required config: typeId = "+e+", instanceId = "+t+" in config: "+r(a))},hasConfig:function(e){var t=n.splitConfigId(e);return this.hasConfigByTypeId(t.typeId,t.instanceId)},hasConfigByTypeId:function(e,t){void 0===t&&(t="");var n=a.hasOwnProperty(e)&&a[e].hasOwnProperty(t);return n},hasConfigCollection:function(e){return s.hasOwnProperty(e)},getConfigCollection:function(e){var t=s[e];if(void 0===t){var n,i="";for(n in s)s.hasOwnProperty(n)&&(i+=n+",");if(i.length>0)throw new Error("Cant find required collection:"+e+" in input list:"+i)}return t}};return u}};return o}),define("oven/unvetted/library/utility/resourceManager",["oven/library/utility/objects","oven/3rdparty/canvg/canvg","oven/unvetted/kernel/kernelEnvironment"],function(e,t,n){var i,r,o;return o={create:function(o){var a,s,l=[];return i||(i=n.window.get(),r=n.document.get()),a=function(e,n,o){var a,u,c,d,h;for(n=Math.floor(n),o=Math.floor(o),a=0;a<l.length;a+=1)if(l[a].name===e&&l[a].width===n&&l[a].height===o)return l[a].image;return u=s.getResource(e),c=r.createElement("canvas"),t.drawSvg(c.getContext("2d"),u,0,0,n,o),d=new i.Image,d.width=n,d.height=o,d.src=c.toDataURL("image/png"),h={name:e,width:n,height:o,image:d},l.push(h),h.image},s={deepCopy:!1,addResource:function(t,n,i){i=i||this.deepCopy;var r=i?e.clone(n):n;this._resources[t]=r},getResource:function(e){return this._resources[e]},getResourceAsImage:function(e){return{name:e,call:a}},addImage:function(t,n,i){i=i||this.deepCopy;var r=i?e.clone(n):n;this._images[t]=r,r.texture=this._renderImage(r)},getImage:function(e){if(!this._images[e])return void 0;var t=this._images[e];return t.texture||(t.texture=this._renderImage(t)),t.texture},hasImage:function(e){return this._images.hasOwnProperty(e)},hasResource:function(e){return this._resources.hasOwnProperty(e)},_resources:{},_images:{},_renderImage:function(e){var t=o.createCanvas();t.hide();var n=t.getContext("2d"),r=new i.Image;return r.onload=function(){n.drawImage(r,0,0)},r.src=e.url,t}}}}}),define("oven/library/domButtonbar/buttonList/domButtonList",["oven/unvetted/kernel/kernelBrowserUtils","oven/unvetted/kernel/kernelEnvironment"],function(e,t){function n(){this.id="",this.styleClass="",this.isHorizontal=!0,this.isCondensable=!0}function i(e,n){var i=null,r=null,o={},a=!1;!function(){var o=t.document.get();r=o.createElement("ul"),n&&(i=o.createElement("div"),i.id=e.id,i.className+=" "+e.styleClass+"-div-relative",r.id=e.styleClass,i.appendChild(r))}(),this.addListButton=function(e){var t=e.getHTMLLIElement();o[t.id]=e,r.appendChild(t),e.setCondensed(a)},this.removeListButton=function(e){var t=o[e];if(!t)throw new Error("The list button (id = "+e+") "+"does not exist.");var n=t.getHTMLLIElement();r.removeChild(n),delete o[e]},this.replaceListButton=function(e,t){var n=o[e];if(!n)throw new Error("The old list button (id = "+e+") "+"does not exist.");var i=n.getHTMLLIElement(),a=t.getHTMLLIElement();r.replaceChild(a,i),o[a.id]=t},this.getListButton=function(e){var t=o[e];if(!t)throw new Error("The list button (id = "+e+") "+"does not exist.");return t},this.show=function(){r.style.visibility="visible"},this.hide=function(){r.style.visibility="hidden"},this.appendTo=function(e){e.appendChild(i)},this.setCondensed=function(e){var t;for(t in o)o.hasOwnProperty(t)&&o[t].setCondensed(e);a=e},this.isCondensable=function(){return e.isCondensable},this.isCondensed=function(){return a},this.getWidth=function(){var t,n;if(e.isHorizontal){var i=0;for(t in o)o.hasOwnProperty(t)&&(n=o[t].getHTMLLIElement(),i+=n.offsetWidth);return i}var r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(t in o)o.hasOwnProperty(t)&&(n=o[t].getHTMLLIElement(),r>n.offsetLeft&&(r=n.offsetLeft),a<n.offsetLeft+n.offsetWidth&&(a=n.offsetLeft+n.offsetWidth));return a-r},this.getHeight=function(){var e,t,n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(t in o)o.hasOwnProperty(t)&&(e=o[t].getHTMLLIElement(),n>e.offsetTop&&(n=e.offsetTop),i<e.offsetTop+e.offsetHeight&&(i=e.offsetTop+e.offsetHeight));return i-n},this.getHTMLDivElement=function(){return i},this.getHTMLULElement=function(){return r}}return{createDomButtonListDesc:function(){return new n},createRootDomButtonList:function(e){return new i(e,!0)},createSubDomButtonList:function(e){return new i(e,!1)}}}),define("oven/library/domButtonbar/buttonList/domListButton",["oven/unvetted/kernel/kernelBrowserUtils","oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelCSS"],function(e,t,n){function i(){this.id="",this.styleClass="",this.label="",this.iconImage=null,this.isClickable=!0,this.isToggleable=!1,this.isCondensed=!1,this.isHighlighted=!1,this.isDisabled=!1,this.isHorizontal=!0,this.isSelected=!1}function r(e){function i(e){var i=null;if(e.data){var r=e.data;i="url('data:image/"+r.type,r.encoding&&(i+=";"+r.encoding),i+=","+t.window.get().encodeURIComponent(r.image)+"')"}i&&(i+=" no-repeat 0 center",n.addCSSStyleToElement(a,{background:i}))}var r=null,o=null,a=null,s=null,l=this,u=null;!function(){var s=t.document.get();r=s.createElement("li"),r.id=e.id,r.className+=e.styleClass,o=s.createElement("a"),o.id=e.id+"_a",r.appendChild(o),a=s.createElement("span"),a.id=e.id+"_span",a.innerHTML=e.label,o.appendChild(a),e.hasChildren&&(u=s.createElement("div"),n.addCSSClassToElement(u,"arrow-down"),a.appendChild(u)),e.iconImage&&(o.className+=e.isCondensed?" icon_condensed":" icon",i(e.iconImage)),e.isHighlighted&&(o.className+=" highlighted"),e.isDisabled&&(o.className+=" disabled"),e.isSelected&&(o.className+=" selected")}(),this.getHTMLLIElement=function(){return r},this.isDisabled=function(){return e.isDisabled},this.isClickable=function(){return e.isClickable},this.isHighlighted=function(){return e.isHighlighted},this.isToggleable=function(){return e.isToggleable},this.isCondensed=function(){return e.isCondensed},this.onMouseOver=function(e){r.addEventListener("mouseover",function(t){e(l,t)})},this.onMouseOut=function(e){r.addEventListener("mouseout",function(t){e(l,t)})},this.onMouseDown=function(e){r.addEventListener("mousedown",function(t){e(l,t)})},this.onMouseUp=function(e){r.addEventListener("mouseup",function(t){e(l,t)})},this.setSubButtonList=function(e){s=e,r.appendChild(e.getHTMLULElement())},this.setLabelText=function(t){a.innerHTML=t,e.label=t},this.setIcon=function(t){e.iconImage=t,i(t)},this.setBlink=function(e,n,i){var r=t.window.get();void 0===a.blink?a.blink={origColor:a.style.color}:(r.clearTimeout(a.blink.timer),r.clearTimeout(a.blink.interval)),a.style.color=e,a.blink.interval=r.setInterval(function(){a.style.color=a.style.color===e?a.blink.origColor:e},i/(2*n)),a.blink.timer=r.setTimeout(function(){a.style.color=a.blink.origColor,r.clearTimeout(a.blink.interval)},i+1)},this.setHighlighted=function(t){e.isHighlighted=t,t?o.className+=" highlighted":o.className=o.className.replace(/\bhighlighted\b/,"")},this.setCondensed=function(t){t&&!e.isCondensed?(a.innerHTML="",e.isCondensed=!0,o.className=o.className.replace(/\bicon\b/,"icon_condensed")):e.isCondensed&&(a.innerHTML=e.label,e.isCondensed=!1,o.className=o.className.replace(/\bicon_condensed\b/,"icon"))},this.setToolTip=function(){}}return{createDomListButtonDesc:function(){return new i},createDomListButton:function(e){return new r(e)}}}),define("oven/unvetted/kernel/kernelButtonbar",["oven/unvetted/kernel/kernelCSS","oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelBrowserUtils","oven/library/domButtonbar/buttonList/domButtonList","oven/library/domButtonbar/buttonList/domListButton","oven/unvetted/contracts/events"],function(e,t,n,i,r,o){function a(u,c,d,h,f){function p(t,n){var i=r.createDomListButtonDesc();i.id=t.id,i.label=t.label,i.iconImage=t.icon,i.isClickable=t.onclick,i.isToggleable=t.toggle,i.isHighlighted=t.active,i.isDisabled=t.disabled,i.isSelected=t.selected,i.hasChildren=t.hasChildren;var a=r.createDomListButton(i);return a.onMouseDown(function(e,t){var i=t.currentTarget,r={itemId:i.id,source:n||_,type:o.BUTTON_CLICK};e.isDisabled()||(e.isToggleable()&&(e.isHighlighted()?(e.setHighlighted(!1),r.toggled=!1):(e.setHighlighted(!0),r.toggled=!0)),e.isClickable()&&h&&h(r))}),a.onMouseOver(function(t,i){var r,a,s,l,u,c,d=i.currentTarget;t.isDisabled()||(c={itemId:d.id,source:n||_,type:o.HIGHLIGHT,x:i.pageX,y:i.pageY},d.childNodes&&y&&y[0]&&(r=d.childNodes[1],r&&(s=y[0].offsetHeight-d.offsetTop-_.offsetTop,a=Math.min(r.scrollHeight,s),u=Math.max(0,r.scrollHeight-s),l=-Math.min(u,d.offsetTop),e.addCSSStyleToElement(r,{position:"absolute",top:l+"px",height:Math.min(r.scrollHeight,a-l)+"px"}))),h&&h(c))}),a.onMouseOut(function(e,t){var i=t.currentTarget,r={itemId:i.id,source:n||_,type:o.UNHIGHLIGHT,x:t.x,y:t.y};e.isDisabled()||h&&h(r)}),t.children&&a.setSubButtonList(x("","",t.children,!1,n)),a}function g(e,t,n){var i,r;for(i=0,r=t.length;r>i;++i)e.addListButton(p(t[i],n))}function m(i){var r=t.window.get(),o=t.document.get(),a=u+f;if(o.getElementById(a))return s[a];var h=e.isCSSLoaded(c);if(h===!1&&e.loadDynamicCss(l[c]),v=x(u,c,d.root_buttonbars,!0,i),y=f?n.findElement(o,"#"+f):n.findElement(o,".oven-font-style"),0===y.length&&(y=n.findElement(o,".blp-oven"),r.console.error("element=",y)),0!==y.length){var p=n.findElement(y[0],".oven-dock-top");if(0!==p.length)p[0].appendChild(v.getHTMLDivElement());else{var g=n.findElement(o,".oven-widget-root");0!==g.length?g[0].prependChild(v.getHTMLDivElement()):y[0].prependChild(v.getHTMLDivElement())}}else o.body.prependChild(v.getHTMLDivElement());return _=v.getHTMLDivElement(),i.oButtonBarElement=_,s[a]=i,b=v.getWidth(),v.isCondensable()&&(!v.isCondensed()&&b>r.innerWidth&&v.setCondensed(!0),r.addEventListener("resize",function(){!v.isCondensed()&&b>r.innerWidth?v.setCondensed(!0):v.isCondensed()&&b<=r.innerWidth&&v.setCondensed(!1)})),i}var v,y,b,_,x;x=function(e,t,n,r,o){var a=i.createDomButtonListDesc();a.id=e,a.styleClass=t,a.isHorizontal="ovenbuttonbar"===t;var s=r?i.createRootDomButtonList(a):i.createSubDomButtonList(a);return g(s,n,o),s},function(e){m(e)}(this),this.hide=function(){v.hide()},this.getDimensions=function(){return{width:v.getWidth(),height:v.getHeight()}},this.getButtonElement=function(e){return v.getListButton(e).getHTMLLIElement()},this.show=function(e,n){void 0===_&&m(this);var i=t.window.get(),r=i.getComputedStyle(_,null),o=0,a=0,s=parseInt(r.getPropertyValue("width"),10),l=parseInt(r.getPropertyValue("height"),10);0>n-l-a&&(n=l+a),e+s+o>i.innerWidth&&(e=i.innerWidth-s-o),_.style.left=e+o+"px",_.style.top=n-a+"px",_.style.zIndex=100,v.show()},this.rebuild=function(){return _?(_.parentNode.removeChild(_),_=void 0,new a(u,c,d,h,f)):null},this.updateButton=function(e){void 0!==_&&(v.replaceListButton(e.id,p(e)),v.isCondensed()&&(v.setCondensed(!1),b=v.getWidth(),v.setCondensed(!0)))},this.blinkButton=function(e,t,n,i){v.getListButton(e).setBlink(t,n,i)},this.dockLeft=function(t){var i;i=n.findElement(y[0],"."+c+"-div-relative"),e.addCSSStyleToElement(i[0],{width:t+"px"}),i=n.findElement(y[0],".oven-canvas-container"),e.addCSSStyleToElement(i[0],{marginLeft:t+"px"})},this.isCondensed=function(){return v.isCondensed()}}var s={},l={ovenbuttonbar:"a {\n    /*color: #333;    */\n   color: #FFF\n}\n\n.ovenbuttonbar-div-relative {\n   position: relative;\n   /*left: 200px; */\n   z-index: 1000;\n   /*opacity: .9; */\n}\n\n.ovenbuttonbar-div-fixed {\n   width: 100%;\n   z-index: 1000;\n   /*opacity: .9; */\n}\n\n#ovenbuttonbar {\n   z-index:  1000;\n   margin: 0;\n   padding: 0;\n   line-height: 100%;\n   /*background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #111), color-stop(1, #444));*/\n   background-image: -moz-linear-gradient(bottom, #262626 0%, #3B3B3B 100%);\n   background-image: -ms-linear-gradient(bottom, #262626 0%, #3B3B3B 100%);\n   background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #262626), color-stop(1, #3B3B3B));\n   filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#3B3B3B', endColorstr='#262626');/*For IE7-8-9*/\n   -webkit-touch-callout: none;\n   -webkit-user-select: none;\n   -khtml-user-select: none;\n   -moz-user-select: none;\n   -ms-user-select: none;\n   user-select: none;\n}\n\n/* clearfix */\n#ovenbuttonbar:after {\n    content: '.';\n    display: block;\n    clear: both;\n    visibility: hidden;\n    line-height: 0;\n    height: 0;\n    z-index:1000;\n}\nhtml[xmlns] #ovenbuttonbar {\n    display: block;\n}\n\n* html #ovenbuttonbar {\n    height: 0.5%;\n};\n\n#ovenbuttonbar:hover {\n   z-index:1000;\n   /*opacity: .9; */\n}\n\n#ovenbuttonbar li {\n    float: left;\n    position: relative;\n    list-style: none;\n    z-index:1000;\n}\n\n#ovenbuttonbar > li {\n   border-right: solid 1px black;\n\n   /*\n   border-top: solid 1px black;\n   border-bottom: solid 1px black;\n   */\n}\n\n#ovenbuttonbar > li:last-child {\n   border-right: solid 1px black;\n   /*\n   border-top: solid 1px black;\n   border-bottom: solid 1px black;\n   */\n}\n\n/* main level link */\n#ovenbuttonbar a {\n   cursor: pointer;\n   font-family:'BB.Proportional';\n   font-size: 12px;\n   color: #e7e5e5;\n   text-decoration: none;\n   display: block;\n   padding: 2px 8px;\n   margin: 0;\n   z-index:1000;\n}\n\n#ovenbuttonbar a.icon {\n   padding-left: 8px;\n}\n\n#ovenbuttonbar a.icon_condensed {\n   padding-left: 5px;\n   padding-right: 5px;\n}\n\n#ovenbuttonbar a.icon span {\n   padding-left: 22px;\n}\n\n#ovenbuttonbar a.icon_condensed span {\n   padding-left: 16px;\n}\n\n#ovenbuttonbar a:hover {\n    background: #000;\n    color: #fff;\n    z-index:1000;\n}\n\n#ovenbuttonbar .highlighted {\n   z-index: 1000;\n   /*background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #0b61a4), color-stop(1, #3f92d2));*/\n   /*background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #03528F), color-stop(1, #105285));*/\n   background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #2F5775), color-stop(1, #2F5775));\n   background-image: -moz-linear-gradient(bottom, #2F5775 0%, #2F5775 100%);\n   background-image: -ms-linear-gradient(bottom, #2F5775 0%, #2F5775 100%);\n   filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#2F5775', endColorstr='#2F5775');/*For IE7-8-9*/\n}\n\n/* Hover states for highlighted and unhighlighted main links */\n#ovenbuttonbar .current a, #ovenbuttonbar li:hover > a {\n   z-index:1000;\n   /*background: -webkit-gradient(linear, left top,left bottom,from(#505050),to(#808080)); */\n   background: -webkit-gradient(linear, left top,left bottom,from(#615E5E),to(#808080));\n   background-image: -moz-linear-gradient(bottom, #615E5E 0%, #808080 100%);\n   background-image: -ms-linear-gradient(bottom, #615E5E 0%, #808080 100%);\n   filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#808080', endColorstr='#615E5E');/*For IE7-8-9*/\n}\n\n#ovenbuttonbar .current a.highlighted, #ovenbuttonbar li:hover > a.highlighted {\n   z-index:1000;\n   /*background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #3f92d2), color-stop(1, #66a3d2)); */\n   background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #457DA8), color-stop(1, #457DA8));\n   background-image: -moz-linear-gradient(bottom, #457DA8 0%, #457DA8 100%);\n   background-image: -ms-linear-gradient(bottom, #457DA8 0%, #457DA8 100%);\n   filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#457DA8', endColorstr='#457DA8');/*For IE7-8-9*/\n}\n\n/* sub levels link hover */\n#ovenbuttonbar ul li:hover a, #ovenbuttonbar li:hover li a {\n   background: none;\n   border: none;\n   color: #fff;\n   z-index:1000;\n   -webkit-box-shadow: none;\n}\n#ovenbuttonbar ul a:hover {\n   background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #3f92d2), color-stop(1, #66a3d2)) !important;\n   background-image: -moz-linear-gradient(bottom, #3f92d2 0%, #66a3d2 100%);\n   background-image: -ms-linear-gradient(bottom, #3f92d2 0%, #66a3d2 100%);\n   filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#66a3d2', endColorstr='#3f92d2');/*For IE7-8-9*/\n   color: #fff !important;\n   z-index:1000;\n   -webkit-border-radius: 0;\n}\n\n/* dropdown */\n#ovenbuttonbar li:hover > ul {\n   display: block;\n   z-index:1000;\n   background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #111), color-stop(1, #444));\n   background-image: -moz-linear-gradient(bottom, #111 0%, #444 100%);\n   background-image: -ms-linear-gradient(bottom, #111 0%, #444 100%);\n   filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#444', endColorstr='#111');/*For IE7-8-9*/\n}\n\n/* level 2 list */\n#ovenbuttonbar ul {\n    display: none;\n    margin: 0;\n    padding: 0;\n    width: 181px;\n    position: absolute;\n    top: 22px;\n    left: 0;\n    background: #ddd url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABQAA) repeat-x 0 0;\n    border: solid 1px #b4b4b4;\n    z-index:1000;\n}\n\n#ovenbuttonbar ul li {\n    float: none;\n    margin: 0;\n    padding: 4px;\n    z-index:1000;\n}\n\n#ovenbuttonbar ul a {\n    font-weight: normal;\n    z-index:1000;\n}\n\n/* level 3 list */\n#ovenbuttonbar ul ul {\n    left: 181px;\n    top: -1px;\n    z-index:1000;\n}\n",ovenPalette:"a { /*color: #333;    */\n    color: #FFF;\n}\n\n.oven-canvas-container {\n    /* default z-index conflicts with flyout menus.  0 causes canvas to be unpickable in FF.  1 seems to work everywhere. */\n    z-index: 1;\n}\n\n.ovenPalette-div-relative {\n    position: relative;\n    width: 27px;\n    z-index: 999;\n    /*opacity: 0.5;*/\n}\n\n.ovenPalette-div-float {\n    float: left;\n    margin-top: 32px;\n    width: 32px;\n    z-index: 1000;\n    /*opacity: 0.5;*/\n}\n\n.ovenPalette-div-fixed {\n    position: fixed;\n    left: 0px;\n    top: 42px;\n    width: 26px;\n    z-index: 1000;\n    /*opacity: .9; */\n}\n\n#ovenPalette {\n    z-index: 1000;\n    margin: 0;\n    padding: 0;\n    line-height: 110%;\n    /*background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #111), color-stop(1, #444));*/\n    background-image: -moz-linear-gradient(bottom, #262626 0%, #3B3B3B 100%);\n    background-image: -ms-linear-gradient(bottom, #262626 0%, #3B3B3B 100%);\n    background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #262626), color-stop(1, #3B3B3B));\n    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#3B3B3B', endColorstr='#262626');/*For IE7-8-9*/\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\n#ovenPalette li {\n    /*background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #111), color-stop(1, #444));*/\n    background-image: -moz-linear-gradient(bottom, #262626 0%, #3B3B3B 100%);\n    background-image: -ms-linear-gradient(bottom, #262626 0%, #3B3B3B 100%);\n    background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #262626), color-stop(1, #3B3B3B));\n    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#3B3B3B', endColorstr='#262626');/*For IE7-8-9*/\n    float: left;\n    position: relative;\n    list-style: none;\n}\n\n\n#ovenPalette>li {\n    border-right: solid 1px black;\n\n    /*\nborder-top: solid 1px black;\n           border-bottom: solid 1px black;\n           */\n}\n\n#ovenPalette>li:last-child {\n    border-right: solid 1px black;\n    /*\nborder-top: solid 1px black;\n           border-bottom: solid 1px black;\n           */\n}\n\n/* main level link */\n#ovenPalette a {\n    cursor: pointer;\n    font-family: 'BB.Proportional';\n    font-size: 12px;\n    color: #e7e5e5;\n    text-decoration: none;\n    display: block;\n    padding: 2px 2px;\n    margin: 0;\n    z-index: 1000;\n}\n\n#ovenPalette a.disabled {\n    cursor: default;\n    opacity:0.5;\n}\n\n#ovenPalette a.icon {\n    padding-left: 4px;\n}\n\n/* Pure-css down triangle */\n.arrow-down {\n    width: 0;\n    height: 0;\n    border-left: 3px solid transparent;\n    border-right: 3px solid transparent;\n    border-top: 4px solid #fff;\n    position: absolute;\n    right: 0;\n    bottom: 0;\n}\n\n#ovenPalette a.icon span {\n    padding-left: 20px;\n}\n\n#ovenPalette a:hover {\n    background: #000;\n    color: #fff;\n    z-index: 1000;\n}\n\n#ovenPalette .highlighted {\n    z-index: 1000;\n    /*background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #0b61a4), color-stop(1, #3f92d2));*/\n    /*background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #03528F), color-stop(1, #105285));*/\n    background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #2F5775), color-stop(1, #2F5775));\n    background-image: -moz-linear-gradient(bottom, #2F5775 0%, #2F5775 100%);\n    background-image: -ms-linear-gradient(bottom, #2F5775 0%, #2F5775 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#2F5775', endColorstr='#2F5775');/*For IE7-8-9*/\n}\n\n/* Hover states for highlighted and unhighlighted main links */\n#ovenPalette .current a,#ovenPalette li:hover>a {\n    z-index: 1000;\n    /*background: -webkit-gradient(linear, left top,left bottom,from(#505050),to(#808080)); */\n    background: -webkit-gradient(linear, left top,left bottom,from(#615E5E),to(#808080));\n    background-image: -moz-linear-gradient(bottom, #615E5E 0%, #808080 100%);\n    background-image: -ms-linear-gradient(bottom, #615E5E 0%, #808080 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#808080', endColorstr='#615E5E');/*For IE7-8-9*/\n}\n\n#ovenPalette .current a.highlighted, #ovenPalette li:hover > a.highlighted {\n    z-index: 1000;\n    /*background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #3f92d2), color-stop(1, #66a3d2)); */\n    background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #457DA8), color-stop(1, #457DA8));\n    background-image: -moz-linear-gradient(bottom, #457DA8 0%, #457DA8 100%);\n    background-image: -ms-linear-gradient(bottom, #457DA8 0%, #457DA8 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#457DA8', endColorstr='#457DA8');/*For IE7-8-9*/\n}\n\n/* flat color for flyout menu */\n#ovenPalette li li {\n    background: #333;\n}\n\n/* highlight color for flyout menu */\n#ovenPalette li li:hover {\n    background: -webkit-gradient(linear, left top,left bottom,from(#615E5E),to(#808080));\n    background-image: -moz-linear-gradient(bottom, #615E5E 0%, #808080 100%);\n    background-image: -ms-linear-gradient(bottom, #615E5E 0%, #808080 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#808080', endColorstr='#615E5E');/*For IE7-8-9*/\n}\n\n#ovenPalette a.selected {\n    background: #457DA8;\n}\n\n/* sub levels link hover */\n#ovenPalette ul li:hover a {\n    background: none;\n    border: none;\n    color: #fff;\n    z-index: 1000;\n    -webkit-box-shadow: none;\n}\n\n#ovenPalette li:hover li a {\n    border: none;\n    color: #fff;\n    z-index: 1000;\n    -webkit-box-shadow: none;\n}\n\n#ovenPalette .current a.disabled {\n    z-index:1000;\n    /*background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #3f92d2), color-stop(1, #66a3d2)); */\n    background: black;\n    opacity:0.5;\n}\n\n/* dropdown item highlight */\n#ovenPalette ul a:hover {\n    /*background: -webkit-gradient(linear, left top,left bottom,from(#615E5E),to(#808080)) !important;*/\n    /*background-image: -moz-linear-gradient(bottom, #615E5E 0%, #808080 100%);*/\n    /*background-image: -ms-linear-gradient(bottom, #615E5E 0%, #808080 100%);*/\n    /*filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#808080', endColorstr='#615E5E');*//*For IE7-8-9*/\n    color: #fff !important;\n    z-index: 1000;\n    -webkit-border-radius: 0;\n}\n\n/* dropdown */\n#ovenPalette li:hover>ul {\n    display: block;\n    background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #111), color-stop(1, #444));\n    background-image: -moz-linear-gradient(bottom, #111 0%, #444 100%);\n    background-image: -ms-linear-gradient(bottom, #111 0%, #444 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#444', endColorstr='#111');/*For IE7-8-9*/\n    position:absolute;\n    /*left: -80px;    */\n    z-index: 1002;\n}\n\n/* dismiss dropdown when clicked */\n#ovenPalette li:active>ul {\n    display: none;\n}\n\n/* level 2 list */\n#ovenPalette ul {\n    display: none;\n    margin: 0;\n    padding: 0;\n    width: 181px;\n    position: absolute;\n    left: 27px;\n    top: 0;\n    background: #ddd url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABQAA) repeat-x 0 0;\n    border: solid 1px #b4b4b4;\n    z-index: 1000;\n    overflow:auto;\n}\n\n#ovenPalette ul li {\n    float: none;\n    margin: 0;\n    padding: 4px;\n    z-index: 1000;\n}\n\n#ovenPalette ul a {\n    font-weight: normal;\n    z-index: 1001;\n    /*background: red;*/\n}\n\n/* level 3 list */\n#ovenPalette ul ul {\n    /*left: 181px;*/\n    top: -1px;\n    z-index: 1002;\n}\n\n/* clearfix */\n#ovenPalette:after {\n    content: '.';\n    display: block;\n    /*clear: both;*/\n    visibility: hidden;\n    line-height: 0;\n    height: 0;\n    z-index: 1000;\n}\n\n#ovenPalette {\n    float: left;\n}\n\nhtml[xmlns] #ovenPalette {\n    display: block;\n}\n\n* html #ovenPalette {\n    height: 0.5%;\n}\n"};return{createButtonbar:function(e,t,n,i,r){return new a(e,t,n,i,r)}}}),define("oven/unvetted/library/utility/toolbarManagerConfig",["oven/framework/config/schema/configSchemaBuilder"],function(e){var t="ToolbarConfig",n={Top:"DockTop",Left:"DockLeft",Right:"DockRight",Float:"Float"},i={ButtonBar:"ovenbuttonbar",Palette:"ovenPalette"},r=e.createConfigSet(t,{id:e.createStringProperty(i.ButtonBar),cssClass:e.createStringProperty(i.ButtonBar),dockType:e.createEnumProperty(n,n.Top)}),o={name:t,configSet:r,dockTypes:n,toolbarClasses:i,getConfigSchema:function(){return e.createSchema([r],[])}};return o}),define("oven/unvetted/library/utility/toolbarManager",["oven/unvetted/kernel/kernelButtonbar","oven/unvetted/kernel/kernelBrowserUtils","oven/unvetted/kernel/kernelEnvironment","oven/library/utility/objects","oven/unvetted/contracts/events","oven/unvetted/library/utility/toolbarManagerConfig"],function(e,t,n,i,r,o){var a;return a={createToolbarManager:function(){var a,s=[];return a={createToolbar:function(a,l,u){var c,d,h,f,p,g,m={width:0,height:0},v=a.getEventManager(),y=a.getTooltipProvider(),b=a.getRootElement(),_=function(e){(l||v).notify(e)};return c={root_buttonbars:[]},h=function(){var e,t,n,i=0,r=0,a=s.length;for(e=0;a>e;e++)n=s[e],t=n.buttonBar,n.barDimensions=n.barDimensions||t.getDimensions(),n.dockType===o.dockTypes.Left||n.dockType===o.dockTypes.Right?i+=n.isVisible?n.barDimensions.width:0:r+=n.isVisible?n.barDimensions.height:0;return{width:i,height:r}},f=function(e,n){var i,a,s,l;n=isFinite(n)?n:m.height,e=isFinite(e)?e:m.width,m=h(),a=t.getHeight(b),s=a-4*m.height,i=t.getWidth(b),u.cssClass===o.toolbarClasses.Palette?(l=m.height*c.root_buttonbars.length,l>=s&&(m.width*=Math.ceil(l/s))):u.cssClass===o.toolbarClasses.ButtonBar&&(l=m.width*c.root_buttonbars.length,l>i&&(m.height*=Math.ceil(l/i))),(m.height!==n||m.width!==e)&&(u.dockType===o.dockTypes.Left&&d.buttonBar.dockLeft(Math.max(0,m.width)),a-=m.height,i-=m.width,g=r.createResizeEvent(i,a),v.notify(g))},p=function(e,t){n.window.get().setTimeout(function(){f(e,t)},1)},d={buttonEventHandler:function(e){var t,n,i=d.toolbarButtons[e.itemId],a=e.type;if(a===r.HIGHLIGHT&&i&&i.tooltip){if(u.dockType===o.dockTypes.Left){if(t=m.width,t<e.x)return y.hideTooltip(d),!0}else t=e.x;return n=u.dockType===o.dockTypes.Left?e.y-(b.offsetTop+m.height):0,y.showTooltip(t,n,i.tooltip,d),!0}return a!==r.UNHIGHLIGHT||e.source!==d.buttonBar&&e.source!==d.buttonBar.oButtonBarElement?a===r.BUTTON_CLICK?_(e):!1:(y.hideTooltip(d),!0)},dockType:u.dockType,isVisible:!1,height:0,width:0,toolbarButtons:{},addButton:function(e){c.root_buttonbars.push(e)},addButtons:function(e){c.root_buttonbars.push(e),c.root_buttonbars=i.consolidateArrays(c.root_buttonbars)},clear:function(){c.root_buttonbars=[]},createButton:function(e,t,n,i,o,a,s,l,u,c){var h={hasChildren:u,id:e,label:t,onclick:!i,toggle:n,active:!1,disabled:i,selected:!1,wasDisabled:i,update:function(){d.buttonBar&&(this.parent?d.buttonBar.updateButton(this.parent):d.buttonBar.updateButton(this))},setActive:function(e){this.active=e,this.updateUI(),this.update()},setDisabled:function(e){this.disabled=e,this.onclick=!e,this.update()},setSelected:function(e){this.selected=e,this.update()},updateUI:function(){_({type:r.TOOLBAR_UPDATE_UI,itemId:this.id,source:this})},getElement:function(){return d.buttonBar.getButtonElement(e)},setIcon:function(e){this.icon={data:0===e.indexOf("<svg")?{encoding:"",type:"svg+xml",image:e}:{encoding:"base64",type:"png",image:e}}},setToolTip:function(e){this.tooltip=e},allowedXAxisTypes:s,allowedYAxisTypes:l};return h.setToolTip(a),h.setIcon(o),c?(c.children||(c.children=[]),c.children.push(h),h.parent=c):this.toolbarButtons[e]=h,h},hide:function(){this.isVisible&&(d.buttonBar.hide(),this.isVisible=!1,f())},show:function(){return this.isVisible?this:(this.isVisible=!0,d.buttonBar?d.buttonBar.show():d.buttonBar=e.createButtonbar(u.id,u.cssClass,c,this.buttonEventHandler,a.getRootElement().id),p(),this)},rebuild:function(){var e,t,n=s.length;for(e=0;n>e;e++)t=s[e],t.buttonBar=t.buttonBar.rebuild(),t.isVisible||t.buttonBar.hide();m={width:0,height:0},t.onResize(null)},removeButton:function(e){var t=c.root_buttonbars.indexOf(e);t>=0&&c.root_buttonbars.splice(t,1)},setEventHandler:function(e){_=e},onResize:function(e){e!==g&&p(0,0)},hasButton:function(e){var t=c.root_buttonbars.indexOf(e);return t>=0},getMenuPosition:function(e){var t,n,i;switch(e?(t=this.buttonBar.getButtonElement(e),n=t.offsetLeft,i=t.offsetTop+this.buttonBar.oButtonBarElement.offsetTop):(t=this.buttonBar.oButtonBarElement,n=t.offsetLeft,i=t.offsetTop),this.dockType){case o.dockTypes.Left:return{x:n+m.width,y:i+m.height};case o.dockTypes.Right:return{x:n,y:i+m.height};default:return{x:0,y:0}}},isCondensed:function(){return this.buttonBar.isCondensed()}},s.push(d),d},removeToolbar:function(e){var t;for(t=0;t<s.length;t++)if(e===s[t])return s.splice(t,1),void 0}}},configContract:function(){return o}}}),define("oven/unvetted/library/utility/signalManager",[],function(){var e={create:function(){var e=[],t={},n={signalFire:function(n,i){function r(){var e,r,o=t[n];
if(o)for(r=o.length,e=0;r>e;++e){var a=o[e];a&&a(i)}}function o(){var t,r;for(r=e.length,t=0;r>t;++t){var o=e[t];o&&o(n,i)}}r(),o()},signalConnect:function(e,n){t.hasOwnProperty(e)||(t[e]=[]);var i=t[e].push(n)-1;return i},signalDisconnect:function(e,n){var i=t[e];i&&n<i.length&&(i[n]=null)},signalConnectGlobal:function(t){var n=e.push(t)-1;return n},signalDisconnectGlobal:function(t){e&&t<e.length&&(e[t]=null)}};return n}};return e}),define("oven/unvetted/library/context/contextSchemaUtil",["oven/library/utility/objects","oven/unvetted/library/utility/debugUtil"],function(e,t){function n(n){function i(){function e(t){for(o in t)t[o].hasOwnProperty("key")?(h.Contexts[o]=o,t[o].nextContext&&e(t[o].nextContext)):h.Responses[o]=o}for(r=0;r<n.length;r++)a=n[r],c[a.key]=a,h.ContextChain[a.key]=a.key,e(a.contextChains)}var r,o,a,s,l,u,c={},h={ContextChain:{},Contexts:{},Responses:{}},f={_chains:c,Definitions:h,getContextChain:function(e){return c[e]},validateResponse:function(n,i){function o(e,t){e=e.response||e;for(r in e){if(l=e[r],l.isRequired&&!t.hasOwnProperty(r))return!1;if(!p(l,r,t))return!1}return!0}function h(e,t){return Array.isArray(t)?t.every(function(t){return o(e,t)}):!1}function f(t,n){return e.isEmpty(n)||Array.isArray(n)?void 0:Object.keys(n).every(function(e){return o(t,n[e])})}function p(e,t,n){if(u=n[t],null!==u&&void 0!==u)switch(e.propertyType){case d.Integer:u=parseInt(u,10);break;case d.Double:u=parseFloat(u);break;case d.Boolean:u=1===u||"true"===u||"1"===u;break;case d.Enum:u=e.fromString(u);break;case d.DateTime:u=new Date(u);break;case d.Array:return h(e.schema,u);case d.Collection:return f(e.schema,u)}return!0}for(r=0,a=c,r=0;r<n.length;r++){if(!a.hasOwnProperty(n[r]))return t.error("contextSchemaUtil",function(e){e("Chain was not found in the context schema. chainPath =",n)}),!1;a=a[n[r]].contextChains||a[n[r]].nextContext||a[n[r]].response}return s=a,s?0===Object.keys(s).length?!0:o(s,i):(t.error("contextSchemaUtil",function(e){e("Response had incorrect format. chainName =",n," properties =",i)}),!1)}};return i(),f}function i(e){var t,n={};for(t in e)e[t].hasOwnProperty("key")?n[e[t].key]=e[t]:c.hasOwnProperty(t)&&(n[c[t]]=e[t]);return n}function r(e,t){return{key:e,contextChains:i(t)}}function o(e,t){return{key:e,nextContext:i(t)}}function a(e){return{response:e}}function s(e,t){return{propertyType:d.Collection,schema:e,isRequired:t}}function l(e,t){return{propertyType:d.Array,schema:e,isRequired:t}}function u(e,t){return{propertyType:e,isRequired:t}}var c={Selection:"Selection",Hover:"Hover",ContextMenu:"ContextMenu",Tooltip:"Tooltip"},d={String:1,Integer:2,Double:3,Color:4,Boolean:5,Enum:6,DateTime:7,Array:8,Collection:9},h={ResponseTypes:c,PropertyType:d,createContextChain:r,createContext:o,createContextResponse:a,createResponseCollection:s,createResponseArray:l,createStringProperty:function(e){return u(d.String,e)},createIntegerProperty:function(e){return u(d.Integer,e)},createDoubleProperty:function(e){return u(d.Double,e)},createColorProperty:function(e){return u(d.Color,e)},createBooleanProperty:function(e){return u(d.Boolean,e)},createDateTimeProperty:function(e){return u(d.DateTime,e)},createEnumProperty:function(e,t){return u(d.Enum,t)},createSchema:n};return h}),/**
Copyright 2011 by Steven Littiebrant - changes and communication about use
appreciated but not required: https://github.com/Groxx/PubSub
 **/
define("oven/3rdparty/pubsub/pubsub",[],function(){var e=function(e,t,n){var i="_sub",r=!1,o=this;"string"==typeof n?i=n:"string"==typeof t?i=t:"string"==typeof e&&(i=e),"boolean"==typeof t?r=t:"boolean"==typeof e&&(r=e),("object"==typeof e||"function"==typeof e)&&(o=e);var a={};a[i]=[];var s=function(e,t){for(var n=0;n<e[i].length;n++)(void 0===t||null===t||e[i][n]===t)&&(e[i].splice(n,1),n--)},l=function(e,t){for(sub in e)"object"==typeof e[sub]&&sub!==i&&e.hasOwnProperty(sub)&&l(e[sub],t);s(e,t)};o.publish=function(e,t){var n;n=arguments.length>2?Array.prototype.slice.apply(arguments,[1]):t?t:[],void 0===n.length&&(n=[n]);var s=a,l=[];e=e||"";var u=e.split(".");r&&n.push(u),l.push(s);for(var c=0;c<u.length&&""!==u[c]&&void 0!==s[u[c]];c++)s=s[u[c]],l.push(s);for(var d,h=!1;d=l.pop();){for(var f=0;f<d[i].length;f++)d[i][f].apply(this,n)===!1&&(h=!0);if(h)break}return o},o.subscribe=function(e,t){var n=a;e=e||"";for(var r=e.split("."),s=0;s<r.length&&""!==r[s];s++)n[r[s]]||(n[r[s]]={},n[r[s]][i]=[]),n=n[r[s]];return n[i].push(t),o},o.unsubscribe=function(e,t,n){var i=a;if(e=e||"",""!=e)for(var r=e.split("."),u=0;u<r.length&&""!==r[u];u++){if(void 0===i[r[u]])return;i=i[r[u]]}return"boolean"==typeof t&&(n=t,t=null),n?l(i,t):s(i,t),o}};return e}),define("oven/unvetted/library/context/contextManager",["oven/unvetted/library/utility/debugUtil","oven/unvetted/library/context/contextSchemaUtil","oven/3rdparty/pubsub/pubsub"],function(e,t,n){var i,r,o,a={},s={createContextManager:function(s,l){function u(e,t){return e.toLowerCase()+t.toLowerCase()}var c,d,h,f,p={},g={};n(g,!0);var m=function(e,n,i,r){e.details={},e.details.path=i,e.details.properties=r,n===t.ResponseTypes.ContextMenu?e.details.contextmenu={addItems:d.appendMenuItems}:n===t.ResponseTypes.Tooltip&&(e.details.tooltip={getDiv:e.details.properties.getDiv,getParent:e.details.properties.getParent,isInit:e.details.properties.isInit,getText:e.details.properties.getText,showTooltip:e.details.properties.showTooltip,hideTooltip:e.details.properties.hideTooltip},delete e.details.properties.getDiv,delete e.details.properties.getParent,delete e.details.properties.isInit,delete e.details.properties.getText,delete e.details.properties.showTooltip,delete e.details.properties.hideTooltip)},v=function(t,n,s){t||n||s?(s||"function"!=typeof n||(s=n,n=void 0),p[u(t,n)]=function(){arguments.length<=1?e.error("contextManager",function(e){e("subscribe() callback has incomplete arguments. arguments = ",arguments)}):(i=arguments[0],r=arguments[1],o=r.slice().join(".").replace(t,""),(!n||new RegExp(n).test(o))&&(f++,m(a,r[r.length-1],r,i),s.apply(null,[a,i,r[r.length-1],r.slice().splice(0,r.length-1).join(".")])))},g.subscribe(t,p[u(t,n)])):e.error("contextManager",function(e){e("bind() invalid parameters. chain = ",t," selector =",n," callback =",s)})},y=function(e,t){p.hasOwnProperty(u(e,t))&&(g.unsubscribe(e,p[u(e,t)]),delete p[u(e,t)])},b=function(t,n){return n=n||{},f=0,c&&c.validateResponse(t,n)?g.publish(t.join("."),[n]):e.error("contextManager",function(e){e("trigger() failed validation. schemas = ",c,"chain =",t," properties = ",n)}),f},_=function(){return c};return d=l.getContextMenuProvider(),h=l.getTooltipProvider(),s&&(c=s.getContextSchema()),{bindResponse:v,removeResponse:y,triggerResponse:b,getContextSchema:_}}};return s}),define("oven/unvetted/library/utility/managedObjectCollection",[],function(){var e={createManagedObjectCollection:function(){function e(e){var n=t.indexOf(e);n>=0&&t.splice(n,1)}var t=[];return{addManagedObject:function(e){t.indexOf(e)<0&&t.push(e)},releaseManagedObject:function(t){t.destroy&&t.destroy(),e(t)},releaseAll:function(){t.forEach(function(e){e.destroy&&e.destroy()}),t=[]}}}};return e}),define("oven/3rdparty/sys-jscore/jscore",[],function(){var e={};return e.inherits=function(e,t){return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype},e.partial=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=Array.prototype.slice.call(arguments);return n.unshift.apply(n,t),e.apply(this,n)}},e.mixin=function(e){for(var t,n,i=1;i<arguments.length;++i){n=arguments[i];for(t in n)e[t]=n[t]}return e},e.typeOf=function(e){var t=typeof e;if("object"===t){if(!e)return"null";var n=Object.prototype.toString.call(e);"[object Array]"===n&&(t="array")}return t},e.isArray=function(t){return"array"===e.typeOf(t)},e.isArrayLike=function(t){var n=e.typeOf(t);return"array"===n||"object"===n&&"number"==typeof t.length},e.isBoolean=function(t){return"boolean"===e.typeOf(t)},e.isFunction=function(t){return"function"===e.typeOf(t)},e.isNull=function(e){return null===e},e.isNumber=function(t){return"number"===e.typeOf(t)},e.isObject=function(t){return"object"===e.typeOf(t)},e.isString=function(t){return"string"===e.typeOf(t)},Object.freeze(e),e}),define("oven/3rdparty/sys-jscore/privatestate",[],function(){function e(){return{makeInstance:function(e){return e},getValue:function(e){return e}}}return e}),define("oven/3rdparty/sys-jscore/class2",["./privatestate","./jscore"],function e(t,e){function n(e){return e&&Object.getOwnPropertyNames(e).length}function i(e,t){function n(){var n=H.getValue(this.___instance)[e];return t.apply(n,arguments)}return n}function r(e,t){function n(){var n=H.getValue(this.___instance).bases[e];return t.apply(n,arguments)}return n}function o(e){function t(){var t=H.getValue(this.___instance),n=t.___vtable[e];return n.func.apply(t[n.key],arguments)}return t}function a(e){function t(){var t=H.getValue(this.___instance),n=t.___vtable[e];return n.get.call(t[n.key])}return t}function s(e){function t(t){var n=H.getValue(this.___instance),i=n.___vtable[e];return i.set.call(n[i.key],t)}return t}function l(e,t){function n(){return H.getValue(this.___instance)[e][t]}return n}function u(e,t){function n(n){H.getValue(this.___instance)[e][t]=n}return n}function c(e,t){function n(){return H.getValue(this.___instance).bases[e][t]}return n}function d(e,t){function n(n){H.getValue(this.___instance).bases[e][t]=n}return n}function h(e,t){function n(){return t.call(H.getValue(this.___instance).bases[e])}return n}function f(e,t){function n(n){t.call(H.getValue(this.___instance).bases[e],n)}return n}function p(e){function t(t){return H.getValue(t.___instance)[e]}return t}function g(e,t,n,i,r,o,a){function s(){if(r!==this||n[e])throw new Error("Illegal call to initSuper");i.apply(n,arguments),n[e]=this,n.bases[t]=this,n.___vtable=a}return s}function m(e){function t(){var t,n,i=Object.create(s,{publicThis:{value:this.publicThis},___instance:{value:this.___instance},"super":{value:a?Object.create(a.superProto,{___instance:{value:this.___instance}}):null},initSuper:{value:null,writable:!0}});switch(h){case 10:n=d[9],i[n.key]=new n.ctor;case 9:n=d[8],i[n.key]=new n.ctor;case 8:n=d[7],i[n.key]=new n.ctor;case 7:n=d[6],i[n.key]=new n.ctor;case 6:n=d[5],i[n.key]=new n.ctor;case 5:n=d[4],i[n.key]=new n.ctor;case 4:n=d[3],i[n.key]=new n.ctor;case 3:n=d[2],i[n.key]=new n.ctor;case 2:n=d[1],i[n.key]=new n.ctor;case 1:n=d[0],i[n.key]=new n.ctor;case 0:break;default:for(t=h;--t>=0;)n=d[t],i[n.key]=new n.ctor}if(a)if(e.init){if(i.initSuper=g(o,f,this,c,i,s,u),e.init.apply(i,arguments),!this[o]){var r="Superclass NOT initialized. 'this.initSuper(..)' must be called in init(usually before other code).";throw new Error(r)}}else c.apply(this,arguments),this[o]=i,this.bases[f]=i,this.___vtable=u;else this[o]=i,this.bases[f]=i,this.___vtable=u,e.init&&e.init.apply(i,arguments)}function n(){if(T(i)!==e)throw new Error("Class has been tampered with!");Object.freeze(l),Object.freeze(e.superProto),p=void 0}function i(){var e;p&&p();var n={publicThis:this,note:"I_AM_THE_GEMINI",bases:[],___instance:null,___vtable:null,cast:{}};for(n.___instance=H.makeInstance(n),e=0;f>=e;++e)n.bases.push($);this.___instance=n.___instance,Object.freeze(this),t.apply(n,arguments),Object.freeze(n),Object.freeze(n.bases)}function r(){throw new Error("Attempt to instantiate abstract type! '"+e.abstractKey+"' not implemented!")}var o=e.KEY,a=e.baseClass,s=e.privateProto,l=e.publicProto,u=e.vtable,c=a?a.initInstance:void 0,d=e.initializers,h=d.length,f=e.DEPTH,p=n;return i.prototype=l,e.constructor=e.isAbstract?r:i,e.initInstance=t,e.constructor}function v(e,t,n,i,o,a,s,l,u,p){function g(){for(var e="Error processing class function/property '"+m+"'; ",t=0;t<arguments.length;++t)e+=arguments[t];throw new Error(e)}var m,v,y;for(m in n){var b,_=Object.getOwnPropertyDescriptor(n,m);b="value"in _?_.value:_;var x=z(b);switch(m in a&&g("Already defined in ",a[m],"."),a[m]=s,v=!1,x){case"object":var w=Object.getOwnPropertyNames(b);w.length?1===w.length&&"prop"===w[0]?(b=Object.getOwnPropertyDescriptor(b,"prop"),"value"in b&&g("'prop' must have setter/getter"),Object.defineProperty(i,m,b)):(y="value"in b,v="get"in b||"set"in b,y||v||g("Must be a function, an empty object or a ","valid property spec(must have get/set, or ","value). To initialize complex properties, ","set them in your 'init' function."),Object.defineProperty(i,m,b)):(i[m]=b,o&&o.push({key:m,ctor:Object}));break;case"array":b.length&&g("Only empty array initializers allowed. ","Use 'null' instead and set in 'init' method."),o&&o.push({key:m,ctor:Array});break;default:i[m]=b}if(l)if("function"===x)u[m]=l[m]=r(t,b),p&&(p[m]=l[m]);else{var C,T;v?(C=b.set?f(t,b.set):void 0,T=b.get?h(t,b.get):void 0):(C=d(t,m),T=c(t,m)),Object.defineProperty(u,m,{enumerable:!0,set:C,get:T}),Object.defineProperty(l,m,{enumerable:!0,set:C,get:T}),p&&Object.defineProperty(p,m,{enumerable:!0,set:C,get:T})}}}function y(){throw new Error("Pure virtual function called!")}function b(e,t,n,r,c,d,h,f){function p(){for(var e="Error processing virtual function/property '"+g+"'; ",t=0;t<arguments.length;++t)e+=arguments[t];throw new Error(e)}var g;for(var g in t){var m,v=Object.getOwnPropertyDescriptor(t,g);m="value"in v?v.value:v;var b=z(m);g in n&&p("Name already defined in ",n[g],"."),n[g]=r;var _={key:e};if("object"===b){var x=!1;for(var w in m)x=!0,"get"!==w&&"set"!==w&&p("Virtual properties must have a getter ","and/or a setter!"),null!==m[w]&&"function"!==z(m[w])&&p("Getter/setter must be either ","null(abstract), or a function!");if(x||p("Virtual properties must have a getter ","and/or a setter!"),(null===m.get&&m.set||null===m.get&m.get)&&p("Getter/Setter must both either null(abstract)"," or functions!"),"get"in m&&(null===m.get?(_.get=m.get,_.isAbstract=!0):_.get=y),"set"in m&&(null===m.set?(_.set=y,_.isAbstract=!0):_.set=m.set),d&&("set"in m||"get"in m)&&Object.defineProperty(d,g,{enumerable:!0,get:"get"in m?null===m.get?y:l(e,m.get):void 0,set:"set"in m?null===m.set?y:u(e,m.set):void 0}),h){var C=s(g),T=a(g);Object.defineProperty(h,g,{enumerable:!0,set:C,get:T}),f&&Object.defineProperty(f,g,{enumerable:!0,set:C,get:T})}}else if(null===m||"function"===b){if(null===m?(_.func=y,_.isAbstract=!0,d&&(d[g]=y)):(_.func=m,d&&(d[g]=i(e,m))),h){var E=o(g);h[g]=E,f&&(f[g]=E)}}else p("Only functions, abstract functions(e.g.,'{func:null}'),","properties(e.g., '{prop: { get: function(){...} } }'), ","and abstract properties (e.g., '{prop: { get:null, ","set:null} }' allowed!'");d||(_.private=!0),c[g]=_}}function _(e,t,n,r,o){for(var a in t){var s,l=Object.getOwnPropertyDescriptor(t,a);if(s="value"in l?l.value:l,!(o&&a in o))throw new Error("Attempt to override unknown virtual function '"+a+"'. Superclass has no such virtual function!");var u=n[a]={key:e};if(o[a].private&&(u.private=!0),"func"in o[a]){if("function"!==z(s))throw new Error("Attempt to override virtual function '"+a+"' with non-function value '"+s+"'.");u.func=s,u.private||(r[a]=i(e,s))}else{if("object"!==z(s))throw new Error("Attempt to override virtual property '"+a+"' with non-property object of type '"+z(s)+"'.");for(var c in s){if("get"!==c&&"set"!==c)throw new Error("Invalid property override '"+a+"'. Unexpected property '"+c+"'!");if(!(c in o[a]))throw new Error("Invalid override property '"+a+"'. Base property does not define a "+"virtual "+c+"ter!");if("function"!==z(s[c]))throw new Error("Invalid override property '"+a+"'. "+c+" must be a function!");"get"===c?u.get=s.get:u.set=s.set,u.private||("get"===c?Object.defineProperty(r,a,{enumerable:!0,get:s.get}):Object.defineProperty(r,a,{set:s.set}))}if("get"in o[a]&&!u.get||"set"in o[a]&&!u.set)throw new Error("Invalid override property '"+a+"'. 'getter', and/or 'setter' not specifed")}}}function x(e,t,n){for(var r in t){var o=t[r];if(r in n)throw new Error("Duplicate event declaration; '"+r+"' already exists.");var a=z(o);if("object"!==a)throw new Error("Invalid event spec for event '"+r+"'; Object expected!");var s={};for(var l in o)switch(l){case"add":case"remove":case"preFire":case"postFire":var u=o[l];if("function"!=typeof u){var c="Event property '"+l+"' for event '"+r+"' must be a function.";throw new Error(c)}s[l]=i(e,u);break;case"key":s.key=o[l];break;case"bubbles":case"cancelable":break;default:throw new Error("Invalid event property '"+l+"' for event + '"+r+"'.")}n[r]=s}}function w(e,t,n){for(var i=Object.getOwnPropertyNames(t),r=i.length,o=0;r>o;++o){var a=i[o];if(a in e){if(n)throw new Error(n+": '"+a+"'.")}else{var s=Object.getOwnPropertyDescriptor(t,a);s.configureable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,a,s)}}return null}function C(e,t){return e.__classInfo=H.makeInstance(t)}function T(e){return H.getValue(e.__classInfo)}function E(e){var t=Array.prototype.slice.call(arguments,1);return this.super[e].apply(this,t)}function S(e){return this.super[e]}function k(e,t){return this.super[e]=t}function A(e,t,n){var i=H.getValue(this.___instance),r=i.___vtable.___events[e];if(!r)throw new Error("Unknown event type '"+e+"'.");if(r.key&&r.key!==n)throw new Error("Illegal attempt to fire event'"+e+"'.");var o=i.___eventHandlers;if(o){var a=o[e];if(a){var s=a.length>1?a.slice():a,l=!1;for(var u in s){var c=s[u];r.preFire&&r.preFire.call(i.publicThis,c.handler),c.handler.call(i.publicThis,t)===!0&&(l=!0),r.postFire&&r.postFire.call(i.publicThis,c.handler)}return l}}}function M(e,t,n,i){var r=H.getValue(this.___instance),o=r.___vtable.___events[e];if(!o)throw new Error("Unknown event type '"+e+"'.");if(o.key&&o.key!==i)throw new Error("Illegal attempt to add event handler '"+e+"'.");void 0===n&&(n=t);var a=r.___eventHandlers;a||(a={},r.___eventHandlers=a);var s=a[e];s||(s=[],a[e]=s),s.push({handler:t,correlator:n}),o.add&&o.add.call(r.publicThis,t)}function N(e,t,n){function i(e,i){var a=r.___vtable.___events[e];if(!a)throw new Error("Unknown event type '"+e+"'.");if(a.key&&a.key!==n){if(i)return;throw new Error("Illegal attempt to remove event handler '"+e+"'.")}var s=o[e];if(s)for(var l=0;l<s.length;++l){var u=s[l];u.correlator===t&&(s.splice(l,1),a.remove&&a.remove.call(r.publicThis,u.handler))}}var r=H.getValue(this.___instance),o=r.___eventHandlers;if(o){if(void 0===e){var o=r.___eventHandlers;return o&&(r.___eventHandlers={}),void 0}if("string"==typeof e)i(e);else{if(void 0!==t)throw new Error("Illegal arguments - arg1 must be a event name or correlator!");t=e;for(n in o)i(n,!0)}}}function D(e){return function(){this.initSuper.apply(this,arguments),e.apply(this,arguments)}}function P(e,t,i){function r(){return Object.create(e?e.vtable:null,{})}switch(arguments.length){case 2:i=t,t={};break;case 1:i=e,t={},e=void 0}if(e&&(e=T(e),e.extensionKey&&(!t||t.accessKey!==e.extensionKey)))throw new Error("Illegal attempt to extend class! Key required.");var o,a,s,l=V++,u=e?e.DEPTH+1:0,c=Object.create(e?e.publicProto:null,{___classId:{value:l}}),d=Object.create(e?e.protectedProto:null,{}),h=Object.create(d,{___classId:{value:l}}),f=Object.create(e?e.superProto:null,{}),g=[],y={};if(e){s=e.eventMap;var P=e.superProto;for(var I in P)y[I]="Super Class";e.statics&&(a={},w(a,e.statics))}for(var I in i)switch(I){case"private":v(l,u,i.private,h,g,y,"Private Section");break;case"public":v(l,u,i.public,h,g,y,"Public Section",f,d,c);break;case"protected":v(l,u,i.protected,h,g,y,"Protected Section",f,d);break;case"virtual":case"init":case"statics":case"events":break;default:var O="Unexpected key '"+I+"'. Only "+"'private,public,protected,virtual,events,init,";throw new Error(O)}if(i.virtual)for(var I in i.virtual)switch(n(i.virtual[I])&&(o||(o=r())),I){case"private":b(l,i.virtual.private,y,"virtual.private Section",o,void 0,h);break;case"public":b(l,i.virtual.public,y,"virtual.public Section",o,f,d,c);break;case"protected":b(l,i.virtual.protected,y,"virtual.protected Section",o,f,d);break;case"override":var R=e?e.vtable:void 0;_(l,i.virtual.override,o,f,R);break;default:var O="Unexpected key 'virtual."+I+"'. Only "+"'virtual.[private|public|protected|override]' allowed.";throw new Error(O)}n(i.events)&&(s||(s={},o||(o=r()),o.___events||(f.on=c.on=M,f.off=c.off=N,f.fireEvent=d.fireEvent=A,f.__fireEvent=d.__fireEvent=A),o.___events=s),x(l,i.events,s)),h.castToSelf=p(l);var L=i.init;e&&(t.compatibilityMode&&(L&&(L=D(L)),h.__super=E,h.__superGet=S,h.__superSet=k),e.statics&&w(a,e.statics),!o&&e.vtable&&(o=e.vtable)),i.statics&&(a||(a={}),w(a,i.statics,"Static property already defined in superclass"));var B,F=!1;if(o)for(var I in o)if(o[I].isAbstract){F=!0,B=I;break}var j={init:i.init,constructor:null,friendKey:t.friendKey,extensionKey:t.extensionKey,baseClass:e,publicProto:c,protectedProto:d,privateProto:h,vtable:o,superProto:f,statics:a,eventMap:s,KEY:l,initializers:g,isAbstract:F,abstractKey:B,DEPTH:u},H=m(j);return a&&w(H,a,"Static property already defined"),C(H,j),H}function I(e,t){return e===t.publicThis||e.___classId&&t[e.___classId]===e||t.cast&&t.cast[e.___classId]===e}function O(e,t,n){try{var i=T(e),r=H.getValue(t.___instance);if(n&&i.friendKey!==n)return null;var o=r[i.KEY];if(!o)return null;if(!I(t,r))return null;if(n)return o;r.cast||(r.cast={});var a=r.cast[i.KEY];return a||(a=Object.create(i.publicProto,{___instance:{value:t.___instance},___classId:{value:i.KEY}}),r.cast[i.KEY]=a,Object.freeze(a)),a}catch(s){return null}}function R(e,t){try{var n=T(e),i=H.getValue(t.___instance);return I(t,i)?n.KEY in i:!1}catch(r){return!1}}function L(e,t,n){void 0===n&&void 0===t&&(t=e,e=null),e&&"object"==typeof e&&(n=t,t=e,e=null);var i={extensionKey:n,accessKey:n,compatibilityMode:!1};return P(e,i,t)}function B(){return{"private":{},"public":{},"protected":{},events:{},statics:{},virtual:{"private":{},"public":{},"protected":{},override:{}}}}function F(t){function n(e,t,n){var i,r,o;for(i=0,r=n.length;r>i;++i)o=n[i][e],o&&t.push(o);return t}function i(t,i,r){var o,a,s,l=t.length;for(o=0;l>o;++o)a=t[o],s=[i[a]||{}],s=n(a,s,r),i[a]=e.mixin.apply(null,s);return i}var r;return r=Array.prototype.slice.call(arguments,1),i(["private","public","protected","events","statics"],t,r),r=n("virtual",[],r),t.virtual=i(["private","public","protected","override"],t.virtual||{},r),t}var j={create:P,define:L,isInstanceOf:R,castTo:O,createSpec:B,mixinSpec:F,getClassInfo:T},H=new t,V=0,z=e.typeOf,$={},U=[];return Object.freeze($),Object.freeze(U),j}),define("oven/3rdparty/sys-jscore/main",["./jscore","./class2","./privatestate"],function(e,t,n){var i={Class:t,PrivateState:n};return e.mixin(i,e),i}),define("oven/unvetted/library/utility/algorithm",[],function(){function e(t,n,i,r){var o,a=1,s=0,l=0;return l=t instanceof e?t.len():t.length,void 0===n?n=0:(n=0>n?0:n,n=l>n?n:l),void 0===i?i=l:(i=0>i?0:i,i=l>i?i:l),void 0===r?(r=1,l=i-n):(r=1>r?1:r,l=Math.ceil((i-n)/r)),t instanceof e?(a=r*t.m_a,s=r*t.m_b+n,t=t.array):(a=r,s=n),o=Object.create(e.prototype,{array:{value:t},m_a:{value:a},m_b:{value:s},m_length:{value:l,writable:!0}})}function t(e,n,i,r){var o,a,s,l,u,c=1,d=0,h=0;return h=e.len(),void 0===n?n=0:(n=0>n?0:n,n=h>n?n:h),void 0===i?i=h:(i=0>i?0:i,i=h>i?i:h),void 0===r?(r=1,h=i-n):(r=1>r?1:r,h=Math.ceil((i-n)/r)),e instanceof t?(c=r*e.a,d=r*e.b+n,e=e.array):(c=r,d=n),o=this instanceof t?this:Object.create(t.prototype),a=e,s=c,l=d,u=h,Object.defineProperties(o,{array:{value:a},a:{value:s},b:{value:l},len:{value:u}}),o.at=function(e){return a[e*s+l]},o.put=function(e,t){a[e*s+l]=t},o.swap=function(e,t){var n=e*s+l,i=t*s+l,r=a[n];a[n]=a[i],a[i]=r},o.view=function(e,n,i){return t(this,e,n,i)},o.toArrayIndex=function(e){return e*s+l},o.fromArrayIndex=function(e){return Math.floor((e-l)/s)},o}function n(e,t,i,r){var o,a,s,l,u,c=1,d=0,h=0;return h=e.len(),void 0===t?t=0:(t=0>t?0:t,t=h>t?t:h),void 0===i?i=h:(i=0>i?0:i,i=h>i?i:h),void 0===r?(r=1,h=i-t):(r=1>r?1:r,h=Math.ceil((i-t)/r)),e instanceof n?(c=r*e.a,d=r*e.b+t,e=e.array):(c=r,d=t),a=e,s=c,l=d,u=h,o=function(e,t){return 1===arguments.length?a[e*s+l]:(a[e*s+l]=t,void 0)},o.prototype=n.prototype,Object.defineProperties(o,{array:{value:a},a:{value:s},b:{value:l},len:{value:u}}),o.at=function(e){return a[e*s+l]},o.put=function(e,t){a[e*s+l]=t},o.swap=function(e,t){var n=e*s+l,i=t*s+l,r=a[n];a[n]=a[i],a[i]=r},o.view=function(e,t,i){return n(this,e,t,i)},o.toArrayIndex=function(e){return e*s+l},o.fromArrayIndex=function(e){return Math.floor((e-l)/s)},o}var i;e.prototype={at:function(e){return this.array[e*this.m_a+this.m_b]},put:function(e,t){this.array[e*this.m_a+this.m_b]=t},len:function(){return this.m_length},view:function(t,n,i){return e(this,t,n,i)},swap:function(e,t){var n=this.array,i=this.m_a,r=this.m_b,o=e*i+r,a=t*i+r,s=n[o];n[o]=n[a],n[a]=s},toArrayIndex:function(e){return e*this.m_a+this.m_b},fromArrayIndex:function(e){return Math.floor((e-this.m_b)/this.m_a)},insert:function(e,t){var n,i=this.m_a;if(1===i)Array.prototype.splice.call(this.array,this.toArrayIndex(e),1,t);else{for(n=[this.toArrayIndex(e),i,t];i>1;--i)n.push(void 0);Array.prototype.splice.apply(this.array,n)}this.m_length+=1},erase:function(e){Array.prototype.splice.call(this.array,this.toArrayIndex(e),this.m_a),this.m_length-=1}},t.prototype={},n.prototype={},i=e;var r={view:i,equal_to:function(e,t){return e===t},not_equal_to:function(e,t){return e!==t},greater:function(e,t){return e>t},less:function(e,t){return t>e},greater_equal:function(e,t){return e>=t},less_equal:function(e,t){return t>=e},for_each:function(e,t){for(var n=0,i=e.len();n!==i;n+=1)t(e.at(n))},find_if:function(e,t){for(var n,i=0,r=e.len();i!==r;i+=1)if(n=e.at(i),!1!==t(n))return i;return r},heapsort:function(e,t){function n(n,i){var r,o,a,s,l,u=n;for(l=2*u+1;i>=l&&(r=l,o=u,a=e.at(o),s=e.at(r),t(a,s)&&(o=r,a=s),i>=r+1&&(s=e.at(r+1),t(a,s)&&(o=r+1,a=s)),o!==u);l=2*u+1)e.swap(u,o),u=o}var i,o,a;t=t||r.less,i=e.len();for(var o=Math.floor((i-2)/2);o>=0;)n(o,i-1),o-=1;for(a=i-1;a>0;)e.swap(a,0),a-=1,n(0,a)},lower_bound:function(e,t,n){n=n||r.less;for(var i,o,a=0,s=e.len(),l=s-a;l>0;)i=a,o=Math.floor(l/2),i+=o,n(e.at(i),t,0)?(a=++i,l-=o+1):l=o;return a},upper_bound:function(e,t,n){n=n||r.less;for(var i,o,a=0,s=e.len(),l=s-a;l>0;)i=a,o=Math.floor(l/2),i+=o,n(t,e.at(i),1)?l=o:(a=++i,l-=o+1);return a},equal_range:function(e,t,n){return[r.lower_bound(e,t,n),r.upper_bound(e,t,n)]},binary_search:function(e,t,n){n=n||r.less;var i=r.lower_bound(e,t,n),o=e.len();return i!==o&&!n(t,e.at(i))},binary_find:function(e,t,n,i){n=n||r.less,i=i||r.equal_to;var o=r.lower_bound(e,t,n),a=e.len();return o!==a&&i(e.at(o),t,0)?o:a},merge:function(e,t,n,i){var o=0,a=e.len(),s=0,l=t.len(),u=e.at(o),c=t.at(s);for(i=i||r.less;o!==a;)s===l&&r.copy(r.view(e,o,a),n),i(c,u,1)?(n(c),s+=1,c=t.at(s)):(n(u),o+=1,u=e.at(o));r.copy(r.view(t,s,l),n)},includes:function(e,t,n){n=n||r.less;for(var i,o=0,a=e.len(),s=0,l=t.len(),u=t.at(s);s!==l;++o){if(i=e.at(o),o===a||n(u,i,1))return!1;n(i,u,0)||(++s,u=t.at(s))}return!0},set_union:function(e,t,n,i){function o(e){n(e,void 0,0)}function a(e){n(void 0,e,1)}var s=0,l=e.len(),u=0,c=t.len(),d=e.at(s),h=t.at(u);for(i=i||r.less;s!==l;)u===c&&r.copy(r.view(e,s,l),o),i(h,d,1)?(n(h,d,1),u+=1,h=t.at(u)):(n(d,h,0),i(d,h,0)||(u+=1,h=t.at(u)),s+=1,d=e.at(s));r.copy(r.view(t,u,c),a)},set_intersection:function(e,t,n,i){var o=0,a=e.len(),s=0,l=t.len(),u=e.at(o),c=t.at(s);for(i=i||r.less;o!==a&&s!==l;)i(u,c,0)?(o+=1,u=e.at(o)):(i(c,u,1)||(n(u,c,0),o+=1,u=e.at(o)),s+=1,c=t.at(s))},set_difference:function(e,t,n,i){var o=0,a=e.len(),s=0,l=t.len(),u=e.at(o),c=t.at(s);for(i=i||r.less;o!==a;){if(s===l){r.copy(r.view(e,o,a),n);break}i(u,c,0)?(n(u,0),o+=1,u=e.at(o)):(i(c,u,1)||(o+=1,u=e.at(o)),s+=1,c=t.at(s))}},set_symmetric_difference:function(e,t,n,i){var o=0,a=e.len(),s=0,l=t.len(),u=e.at(o),c=t.at(s);for(i=i||r.less;o!==a;){if(s===l){r.copy(r.view(e,o,a),n);break}i(u,c,0)?(n(u,0),o+=1,u=e.at(o)):(i(c,u,1)?n(c,1):(o+=1,u=e.at(o)),s+=1,c=t.at(s))}r.copy(r.view(t,s,l),n)},lexicographical_compare:function(e,t,n){var i,o,a=0,s=e.len(),l=0,u=t.len();for(n=n||r.less;l!==u;a+=1,l+=1){if(i=e.at(a),o=t.at(l),a===s||n(i,o,0))return!0;if(n(o,i,1))return!1}return!1}};return r.copy=r.for_each,r.sort=r.heapsort,r}),define("oven/visualizations/baseVisualization",["oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelUtil","oven/library/utility/objects","oven/library/sharedContext","oven/unvetted/contracts/events","oven/framework/data/dataManager","oven/framework/config/configManager","oven/unvetted/library/utility/resourceManager","oven/unvetted/library/utility/toolbarManager","oven/unvetted/library/utility/signalManager","oven/unvetted/library/context/contextManager","oven/unvetted/library/utility/managedObjectCollection","oven/3rdparty/sys-jscore/main","oven/unvetted/library/utility/algorithm"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f){var p,g={createVisualizationBase:function(g,m,v,y,b){function _(){function e(e){var n,i,s,l=Object.getOwnPropertyDescriptor(o,e);"___classId"!==e&&f.binary_search(r,e)&&(a.hasOwnProperty(e)||(l.hasOwnProperty("value")||l.hasOwnProperty("writable")?(n=l.value,"function"==typeof n?Object.defineProperty(a,e,{configurable:l.configurable,enumerable:l.enumerable,value:function(){return n.apply(t,arguments)},writable:l.writable}):Object.defineProperty(a,e,l)):(i=l.hasOwnProperty("get")?l.get:void 0,s=l.hasOwnProperty("set")?l.set:void 0,Object.defineProperty(a,e,{configurable:l.configurable,enumerable:l.enumerable,get:i?function(){return i.apply(t,arguments)}:void 0,set:s?function(){return s.apply(t,arguments)}:void 0}))))}var t,i,r,o,a={};if(t=new g(K),t.setSignalManager(J),B={initialPaint:function(e,n){t.initialPaint(e,n)}},i=h.Class.getClassInfo(g),r=Object.getOwnPropertyNames(i.publicProto),r&&r.length>0)for(r=f.view(r),f.sort(r,function(e,t){return t>e}),o=t;o;o=Object.getPrototypeOf(o))Object.getOwnPropertyNames(o).forEach(e);O=n.assimilate(O,a)}function x(){var e=g.createVisualizationDerived(R,K);B=e.protectedInterface,O=n.assimilate(O,e.publicInterface)}function w(){var e=z.getEventProvider();return e.getCanvasContainerDimensions()}function C(){function e(){try{var e=w();B.initialPaint(e.width,e.height),i=!0}catch(n){t.log.error("ERROR: Exception caught during initialPaint. stack = "+n.stack)}}var n,i=!1;t.log.trace("BaseVisualization","CHRT-PERF: initialPaint() called."),B.hasOwnProperty("prePaint")?(n={notify:function(t){i===!1&&t.group===r.STATE_CHANGE_GROUP&&t.type===r.STATE_VISUALIZATION_READY&&p.setTimeout(function(){e()},1)}},$.register(n,50,r.STATE_CHANGE_GROUP),$.register(n,50,r.BASEEVENTS_GROUP),B.prePaint()):W.hasAllAdaptersGotData()===!0?e():(n={notify:function(t){i===!1&&t.group===r.DATAEVENT_GROUP&&W.hasAllAdaptersGotData()===!0&&(i=!0,p.setTimeout(function(){$.unregister(n),e()},1))}},$.register(n,50,r.DATAEVENT_GROUP),$.register(n,50,r.BASEEVENTS_GROUP)),t.log.trace("BaseVisualization","CHRT-PERF: initialPaint() finished.")}function T(){var e=w();t.log.trace("BaseVisualization",function(t){t("postInitialPaint() called. width = "+e.width+" height ="+e.height)}),$.notify(r.createResizeEvent(e.width,e.height))}function E(){Q=!1;var e=new t.OvenPerformanceTimer;e.start(),t.log.perfBuffered("BaseVisualization",function(e){e("starting draw()")}),n.iterate(O.getVislets(),function(e){e.isDirty()&&e.actions.draw(),e.isDirty()&&t.log.error("vislet '"+e.getId()+"' did not unset its dirty flag after draw")}),B.draw(),e.end(),t.log.perfBuffered("BaseVisualization",function(t){t("ending draw(): "+e.result()+"ms (synthetic "+(1e3/e.result()).toFixed(1)+" fps)")}),t.log.perfFlush()}function S(e){if(Q===!1)if(Q=!0,t.log.trace("BaseVisualization","CHRT-PERF: queueDraw() called, and queued"),e!==!0)p.setTimeout(function(){try{t.log.trace("BaseVisualization","CHRT-PERF: queueDraw().setTimeout() called."),E(),t.log.trace("BaseVisualization","CHRT-PERF: queueDraw().setTimeout() finished.")}catch(e){t.log.error("ERROR: Exception "+e.stack)}},8);else try{t.log.trace("BaseVisualization","CHRT-PERF: queueDraw().immediate() called."),E(),t.log.trace("BaseVisualization","CHRT-PERF: queueDraw().immediate() finished.")}catch(n){t.log.error("ERROR: Exception "+n.stack)}}function k(e){Z.push(e)}function A(){return Z}function M(e,n){t.log.trace("BaseVisualization",function(t){t("addConfig() called. configId =",e," config =",n)});var i=e.split(":"),r=i[0],o=e.substr(r.length+1,e.length),a=H.validateConfigSet(r,n,!0);t.log.trace("BaseVisualization",function(e){e("addConfig():: calling visualization: typeId =",r," instanceId =",o," validatedConfig =",a)}),q.addConfigByTypeId(r,o,a)}function N(e,n){t.log.trace("BaseVisualization",function(t){t("updateConfig() called. configId = ",e," config =",n)});var i=e.split(":"),r=i[0],o=e.substr(r.length+1,e.length),a=H.validateConfigSet(r,n,!1);t.log.trace("BaseVisualization",function(e){e("updateConfig():: calling visualization: typeId =",r," instanceId =",o," validatedConfig =",a)}),q.updateConfigByTypeId(r,o,a)}function D(e,n){t.log.trace("BaseVisualization",function(t){t("removeConfig() called. typeId = ",e," instanceId = ",n)}),q.removeConfig(e,n)}function P(e,t,n){Y.bindResponse(e,t,n)}function I(e,t){Y.removeResponse(e,t)}p||(p=e.window.get());var O,R,L,B,F=g.hasOwnProperty("__classInfo"),j=g.configContract(),H=j.getConfigSchema(),V=g.contextContract?g.contextContract():void 0,z=y,$=m,U=d.createManagedObjectCollection(),W=o.create(U),q=a.create($),G=s.create(v),X=l.createToolbarManager(),Y=c.createContextManager(V,z),K=i.create(v,$,W,q,G,X,Y,z,b),J=u.create(),Q=!1,Z=[];Z=[],O={addConfig:M,updateConfig:N,removeConfig:D,getVislets:A,signalConnect:J.signalConnect,signalDisconnect:J.signalDisconnect,signalConnectGlobal:J.signalConnectGlobal,signalDisconnectGlobal:J.signalDisconnectGlobal,bindContext:P,removeContext:I},R=n.assimilate(O,{postInitialPaint:T,queueDraw:S,addVislet:k,signalFire:J.signalFire}),L={initialPaint:C,addDataAdapter:function(e){var n=g.hasOwnProperty("dataContract")?g.dataContract():void 0,i=void 0!==n&&n.hasOwnProperty("getDataContractSchema")?n.getDataContractSchema():void 0;if(void 0!==n&&void 0!==i){var r=e.getSeriesName(),o=e.getSeriesType(),a=e.getDataView();t.log.trace("BaseVisualization",function(e){e("addDataAdapter: about to validate dataAdapter: name = "+r+", type = "+o)});var s=i.validateDataContract(o,a);t.log.trace("BaseVisualization",function(e){e("addDataAdapter: validation result: isValid = "+s)}),e.bindToDataContract(i,o)}W.addDataAdapter(e)},updateDataAdapter:function(e,t){W.updateDataAdapter(e,t)},removeDataAdapter:function(e){W.removeDataAdapter(e)},removeAllDataAdapters:function(){W.removeAllDataAdapters()},getResourceManager:function(){return G},destroy:function(){U.releaseAll()}},F?_():x();var et={publicInterface:O,internalInterface:L};return et}};return g}),define("oven/visualizations/visualizationHost",["oven/oven_bootstrap","oven/unvetted/kernel/kernelUtil","oven/unvetted/kernel/kernelBrowserUtils","oven/unvetted/kernel/kernelEnvironment","oven/framework/events/eventManager","oven/library/utility/objects","oven/unvetted/library/adapters/webHostAdapter","oven/framework/data/adapters/dataAdapterFactory","oven/visualizations/baseVisualization","oven/unvetted/library/utility/debugUtil"],function(e,t,n,i,r,o,a,s,l){var u=function(e){var t=e.id,r=t+"-Canvases",o=t+"-Root",a=t+"-DockTop",s="oven-widget-root",l="oven-canvas-container",u="oven-dock-top",c=i.document.get(),d=c.createElement("div");d.id=o,d.className=s;var h=c.createElement("div");h.id=a,h.className=u;var f=c.createElement("div");return f.id=r,f.className=l,f.style.position="absolute",f.style["min-width"]="100%",f.style["min-height"]="100%",d.appendChild(h),d.appendChild(f),e.appendChild(d),n.addClass(e,"oven-font-style"),{vizContainer:e,rootContainer:d,canvasContainer:f,dock:{top:h}}},c=function(t,i,r){e.bootstrap.init({elem:t});var o=null,a=n.findElement(t,".oven-widget-root");if(a&&a.length){var s=n.findElement(a[0],".oven-canvas-container");s&&s.length&&(o=s[0])}var l=null;return l=o?{vizContainer:t,rootContainer:a,canvasContainer:o}:u(t),r.create(l,i)},d={createVisualizationHostBuilder:function(e){var n,u=e;return n={createVisualizationHost:function(e,n){function d(){S=r.create(),w=c(e,S,M),C=w.getPlatform(),T=w.getPlatformProviders().getEventProvider(),k=w.getPlatformProviders(),A=i.window.get();
var t=l.createVisualizationBase(u,S,C,k,e);x=t.internalInterface,E=x.getResourceManager(),_=o.assimilateSafe(_,t.publicInterface)}function h(e,n){t.log.trace("VisualizationHost",function(t){t("initialPaint() called. inputWidth=",e," inputHeight=",n)});var i,r,o,a=e,s=n;if(!a||!s){var l=T.getCanvasContainerDimensions();a=l.width,s=l.height}if(a&&s||t.log.error("VisualizationHost",function(e){e("Zero width/height detected: width = ",a," height = ",s)}),i=a>0&&s>0,N===!0?(r=!1,o=!1):i===!0?(r=!0,o=!1):i===!1&&(r=!1,o=10>D?!0:!1),t.log.trace("VisualizationHost",function(e){e("InitialPaintQueue: readyForInitialPaint = "+i+" callInitialPaint = "+r+" deferInitialPaint = "+o+" _initialPaintQueueCount = "+D)}),r)try{N=!0,x.initialPaint(a,s)}catch(u){throw t.log.error("VisualizationHost",function(e){e("ERROR: Ex= "+u.stack)}),u}else o&&(A.setTimeout(h,Math.pow(2,D)),D+=1)}function f(){return T}function p(e,n,i){t.log.trace("VisualizationHost",function(t){t("addDataSource() called. type=",e," name=",n," config=",i)});var r=s.create(e,n,i,S);x.addDataAdapter(r.publicInterface)}function g(e,n){t.log.trace("VisualizationHost",function(t){t("updateDataSource() called. name =",e," config =",n)}),x.updateDataAdapter(e,n)}function m(e){t.log.trace("VisualizationHost",function(t){t("removeDataSource() called. name =",e)}),x.removeDataAdapter(e)}function v(){t.log.trace("VisualizationHost",function(e){e("removeAllDataSources() called.")}),x.removeAllDataAdapters()}function y(e,n,i,r){switch(t.log.trace("VisualizationHost",function(t){t("addResource() called. type =",e,"name =",n)}),e){case"resource":E.addResource(n,i,r);break;case"image":E.addImage(n,i,r)}}function b(){x.destroy()}var _,x,w,C,T,E,S,k,A,M=void 0===n?a:n,N=!1,D=1;return _={initialPaint:h,getEventInterface:f,addDataSource:p,updateDataSource:g,removeDataSource:m,removeAllDataSources:v,addResource:y,destroy:b},d(),_},getConfigContract:function(e){return u.configContract(e)},getDataContract:function(e){return u.dataContract(e)},getContextContract:function(e){return u.contextContract(e)}}}};return d}),define("oven/unvetted/contracts/configDefaults",[],function(){var e="'BB.Proportional'",t=e+",Verdana,Calibri,Arial,Helvetica-Light,Helvetica,ArialMT,sans-serif",n=8,i=12,r=15,o=i+"px "+t,a={DEFAULT_FONT:o,DEFAULT_FONT_FAMILY:t,DEFAULT_FONT_SIZE_SMALL:n,DEFAULT_FONT_SIZE:i,DEFAULT_FONT_SIZE_LARGE:r,DEFAULT_FONT_COLOR:"white"};return a}),define("oven/visualizations/multiLevelPie/colorRampDefs",[],function(){var e={ThreePoint:0,FivePoint:1,Brewer:2,MutedThreePoint:3},t={ColorRampType:e};return t}),define("oven/visualizations/multiLevelPie/multiLevelPieVisualizationConfig",["oven/framework/config/schema/configSchemaBuilder","oven/unvetted/contracts/configDefaults","oven/visualizations/multiLevelPie/colorRampDefs","oven/unvetted/contracts/commonConfig"],function(e,t,n,i){var r=n.ColorRampType,o="yellow",a={Group:0,Single:1},s={SingleOutline:0,SingleFill:1,AllFill:2},l={HighlightMode:a,ZoomAnimationMode:s,ColorRampType:r,getConfigSchema:function(){var n={group:a.Group,single:a.Single},l={singleOutline:s.SingleOutline,singleFill:s.SingleFill,allFill:s.AllFill},u={threePoint:r.ThreePoint,fivePoint:r.FivePoint,brewer:r.Brewer,mutedThreePoint:r.MutedThreePoint},c=e.createConfigSet("MultiLevelPie",{fontSize:e.createIntegerProperty(t.DEFAULT_FONT_SIZE),fontFamily:e.createStringProperty(t.DEFAULT_FONT_FAMILY),fontColor:e.createColorProperty(t.DEFAULT_FONT_COLOR),backgroundGradientStartColor:e.createColorProperty("#073844"),backgroundGradientEndColor:e.createColorProperty("#071824"),drawPieCrust:e.createBooleanProperty(!0),maxRadiusScale:e.createDoubleProperty(1),numVisibleLevels:e.createIntegerProperty(4),sortByWeight:e.createBooleanProperty(!0),outerRingBackgroundColor:e.createColorProperty("grey"),rootBorderColor:e.createColorProperty("rgba(255, 255, 255, 1.0)"),rootBorderThickness:e.createDoubleProperty(2),rootBorderOverhangColor:e.createColorProperty("rgb(255, 255, 255)"),rootBorderOverhangLength:e.createDoubleProperty(0),rootBorderOverhangThickness:e.createDoubleProperty(3),childBorderColor:e.createColorProperty("rgba(128, 128, 128, 1.0)"),childBorderThickness:e.createDoubleProperty(1),rootNodeRadiusScale:e.createDoubleProperty(void 0),rootNodeTint:e.createDoubleProperty(void 0),rootLabelFont:e.createStringProperty(void 0),rootLabelFormat:e.createStringProperty("{NAME}\n{COLOR}%"),innerLabelFormat:e.createStringProperty("{NAME}"),outerLabelFormat:e.createStringProperty("{NAME} {COLOR~%}"),useOuterLabels:e.createBooleanProperty(!0),useInnerLabels:e.createBooleanProperty(!0),richTextTooltips:e.createBooleanProperty(!0),richTextOuterLabels:e.createBooleanProperty(!0),coloredTextPositiveColor:e.createColorProperty("green"),coloredTextNegativeColor:e.createColorProperty("red"),coloredTextUnchangedColor:e.createColorProperty("white"),wordWrapOuterLabelsToSlice:e.createBooleanProperty(!1),clipOuterLabelsToSlice:e.createBooleanProperty(!1),outerLabelFontColor:e.createColorProperty(t.DEFAULT_FONT_COLOR),outerLabelHighlighting:e.createBooleanProperty(!1),outerLabelHighlightColor:e.createColorProperty(o),outerLabelSelectionPixelTolerance:e.createIntegerProperty(5),outerLabelShowsTooltip:e.createBooleanProperty(!1),minOuterLabelDistance:e.createDoubleProperty(5),maxOuterLabelDistance:e.createDoubleProperty(25),maxLabelVerticalPushes:e.createIntegerProperty(2),tooltipFontColor:e.createColorProperty("white"),tooltipBorderColor:e.createColorProperty(void 0),tooltipBackgroundColor:e.createColorProperty("black"),tooltipFormat:e.createStringProperty("{NAME}\n% Chg: {COLOR~}"),rootNodeTooltipSuffix:e.createStringProperty(""),centerNodeTooltipSuffix:e.createStringProperty(""),innerNodeTooltipSuffix:e.createStringProperty(""),leafNodeTooltipSuffix:e.createStringProperty(""),showColorRamp:e.createBooleanProperty(!0),colorRampType:e.createEnumProperty(u,"threePoint"),colorRampExponent:e.createDoubleProperty(1),colorRampValueLabelFormat:e.createStringProperty("{VALUE}%"),colorRangeStdDevLimit:e.createIntegerProperty(),colorRangeComputeFromData:e.createBooleanProperty(!1),colorRangeRecomputeOnUpdate:e.createBooleanProperty(!1),desaturationGammaRamp:e.createDoubleProperty(1),desaturationMin:e.createDoubleProperty(0),desaturationMax:e.createDoubleProperty(1),selectionHilightBorderColor:e.createColorProperty("rgba(255, 255, 55, 1.0)"),selectionHilightMode:e.createEnumProperty(n,"group"),enableInteractions:e.createBooleanProperty(!0),animateOnDataEvent:e.createBooleanProperty(!1),enableAutoDrillOnClick:e.createBooleanProperty(!0),enableResetInteraction:e.createBooleanProperty(!0),animateWithAnnulus:e.createBooleanProperty(!0),allowLeafDrillDown:e.createBooleanProperty(!1),clickOuterLabelToDrill:e.createBooleanProperty(!0),zoomDurationMilliseconds:e.createIntegerProperty(400),drillInAnimationMode:e.createEnumProperty(l,"singleFill"),drillOutAnimationMode:e.createEnumProperty(l,"allFill"),othersNodeAggregationThreshold:e.createDoubleProperty(0),othersNodeThresholdIsRelative:e.createBooleanProperty(!0),othersNodeTooltipFormat:e.createStringProperty("{NAME}\nWeight (%): {SIZE}"),othersNodeLabelFormat:e.createStringProperty("Others"),othersNodeName:e.createStringProperty("Others"),showDebuggingVisuals:e.createBooleanProperty(!1),showPerformanceStats:e.createBooleanProperty(!1),performanceFrameCount:e.createIntegerProperty(20),benchmarkTest:e.createBooleanProperty(!1),benchmarkDuration:e.createIntegerProperty(3),labelFormatDecimalPrecision:e.createIntegerProperty(2),abbreviateThousands:e.createBooleanProperty(!1),stringTable:i.createDefaultStringTable()});return e.createSchema([c],[])}};return l}),define("oven/unvetted/contracts/signals",["oven/library/utility/objects","oven/unvetted/contracts/events"],function(e,t){var n;return n={signalTypes:{RANGE_CHANGE:"SIGNAL_RANGE_CHANGE",FOCUS_CHANGE:"SIGNAL_FOCUS_CHANGE",COLUMN_FILTER:"SIGNAL_COLUMN_FILTER",USER_HIGHLIGHT_DATA:"SIGNAL_USER_HIGHLIGHT_DATA"},rangeTypes:{RANGE_TYPE_INDEX:0,RANGE_TYPE_PROPORTION:1,RANGE_TYPE_TIME:2},createSignal:function(e,n,i){return{group:t.BASEEVENTS_GROUP,type:e,source:n,layerId:i,isSignal:!0,isHandled:!1}},createFocusChangeSignal:function(t,n,i,r,o){return e.assimilate(this.createSignal(this.signalTypes.FOCUS_CHANGE,t,n),{rangeType:i,focus:r,originalEvent:o})},createRangeChangeSignal:function(t,n,i,r,o,a){return e.assimilate(this.createSignal(this.signalTypes.RANGE_CHANGE,t,n),{rangeType:i,start:r,end:o,originalEvent:a})},createColumnFilterSignal:function(t,n,i,r,o,a){return e.assimilate(this.createSignal(this.signalTypes.COLUMN_FILTER,t,n),{columnName:i,start:r,end:o,originalEvent:a})},createUserHighlightDataSignal:function(t,n,i){return e.assimilate(this.createSignal(this.signalTypes.USER_HIGHLIGHT_DATA,t,t?t.id:null),{value:n,highlight:i})}}}),define("oven/vislets/multiLevelPie/multiLevelPieSignals",["oven/library/utility/objects","oven/unvetted/contracts/signals"],function(e,t){var n={USER_CLICK_SET_ROOT_NODE:"IMAP_USER_CLICK_SET_ROOT_NODE",FORCE_SET_ROOT_NODE:"IMAP_FORCE_SET_ROOT_NODE",NEW_ROOT_NODE:"IMAP_NEW_ROOT_NODE",TOGGLE_DEBUG_VISUALS:"TOGGLE_DEBUG_VISUALS",NAV_ANIMATION_BEGIN:"NAV_ANIMATION_BEGIN",NAV_ANIMATION_END:"NAV_ANIMATION_END",NODE_CLICKED:"NODE_CLICKED",createForceSetRootNodeSignal:function(n,i,r,o){return e.assimilate(t.createSignal(this.FORCE_SET_ROOT_NODE,n,o),{sliceId:i,isAnimated:r})},createUserClickSetRootNodeSignal:function(n,i,r){return e.assimilate(t.createSignal(this.USER_CLICK_SET_ROOT_NODE,n,r),{sliceId:i})},createNodeClickedSignal:function(n,i,r){return e.assimilate(t.createSignal(this.NODE_CLICKED,n,r),{sliceId:i})},createNewRootNodeSignal:function(n,i,r){return e.assimilate(t.createSignal(this.NEW_ROOT_NODE,n,r),{sliceId:i})},createNavAnimationBeginSignal:function(e){return t.createSignal(this.NAV_ANIMATION_BEGIN,e)},createNavAnimationEndSignal:function(e){return t.createSignal(this.NAV_ANIMATION_END,e)}};return n}),define("oven/framework/data/schema/dataSchemaBuilder",["oven/unvetted/library/math/stats/statsCalcFactory","oven/unvetted/kernel/kernelUtil"],function(e,t){function n(e){function n(){for(var t=0;t<e.length;++t){var n,i,r,l=e[t],u=l.contractName,c={},d={},h={};for(n in l.fieldDefs)c[n]=n;for(i in l.metaBlockDefs)d[i]=i;for(r in l.statsBlockDefs)h[r]=r;a[u]=u,o[u]=l,s[u]={Fields:c,MetaBlock:d,StatsBlock:h}}}function i(e,n){function i(i,r){var o=!0;for(var a in r){var s=r[a],l=i.getFieldIndex(a);i.getFieldType(a),s.isRequired&&void 0===l&&(t.log.error("DataContractUtil",function(t){t("Missing required field: '"+a+"'. contractType = "+e+", dataView = ",n)}),o=!1)}return o}if(!o.hasOwnProperty(e))return t.log.error("DataContractUtil",function(t){var n="";for(var i in o)n+=i+", ";t("Invalid DataContract: contractName = '"+e+"'. Supported contractNames = "+n)}),!1;var r=n.getDataSchema(),a=n.getMetaBlockSchema(),s=o[e],l=i(r,s.fieldDefs),u=i(a,s.metaBlockDefs),c=l&&u;return c}function r(e){return o.hasOwnProperty(e)?o[e].statsBlockDefs:void 0}var o={},a={},s={},l={Contracts:a,Definitions:s,validateDataContract:i,getStatsInfo:r};return n(),l}function i(e,t,n,i){return{contractName:e,fieldDefs:t,metaBlockDefs:n,statsBlockDefs:i}}function r(e,t){return{fieldType:e,isRequired:t}}function o(e,t){return{statsCalcType:e,fieldName:t}}var a={String:1,Integer:2,Double:3,Color:4,Date:5,Boolean:6},s={StatsCalcType:e.StatsCalcType,createDataContract:i,createDataContractSchema:n,createStringField:function(e){return r(a.String,e)},createIntegerField:function(e){return r(a.Integer,e)},createDoubleField:function(e){return r(a.Double,e)},createColorField:function(e){return r(a.Color,e)},createDateField:function(e){return r(a.Date,e)},createBooleanField:function(e){return r(a.Boolean,e)},addStatsField:function(e,t){return o(e,t)}};return s}),define("oven/vislets/multiLevelPie/multiLevelPieDataContract",["oven/unvetted/contracts/baseDataContract","oven/framework/data/schema/dataSchemaBuilder"],function(e,t){var n=t.StatsCalcType,i={ID:"ID",PARENT_ID:"PARENT_ID",NAME:"NAME",LEVEL:"LEVEL",SIZE:"SIZE",COLOR:"COLOR",IS_NOT_SELECTABLE:"IS_NOT_SELECTABLE",IS_LEAF:"IS_LEAF",CUSTOM_TOOLTIP_FORMAT:"CUSTOM_TOOLTIP_FORMAT",CUSTOM_LABEL_FORMAT:"CUSTOM_LABEL_FORMAT"},r={HierPieData:"HierPieData"},o={FieldNames:i,FieldTypes:e.FieldTypes,SeriesTypes:r,getDataContractSchema:function(){var e=t.createDataContract(r.HierPieData,{ID:t.createStringField(!0),PARENT_ID:t.createStringField(!0),NAME:t.createStringField(!0),LEVEL:t.createIntegerField(!0),SIZE:t.createDoubleField(!0),COLOR:t.createDoubleField(!0),IS_NOT_SELECTABLE:t.createBooleanField(!1),IS_LEAF:t.createBooleanField(!1),CUSTOM_TOOLTIP_FORMAT:t.createStringField(!1),CUSTOM_LABEL_FORMAT:t.createStringField(!1)},{},{ColorRange:t.addStatsField(n.MinMaxAvg,"COLOR"),ColorStdDev:t.addStatsField(n.VarianceStdDev,"COLOR")});return t.createDataContractSchema([e])}};return o}),define("oven/vislets/pie/pieConfig",["oven/unvetted/contracts/commonConfig"],function(e){var t={HILIGHT_GROUP_MODE:0,HILIGHT_SINGLE_MODE:1,ANIMATE_SINGLE_OUTLINE:0,ANIMATE_SINGLE_FILL:1,ANIMATE_ALL_FILL:2,createConfig:function(n,i,r,o,a,s,l,u,c,d,h,f,p,g,m,v,y,b,_,x,w,C,T,E,S,k,A,M,N,D,P,I,O,R,L,B,F,j,H,V,z,$,U,W,q,G,X,Y,K,J,Q,Z,et,tt,nt,it,rt,ot,at,st,lt,ut,ct,dt,ht,ft,pt){return{fontColor:n||"rgb(255, 255, 255)",fontFamily:i||"Verdana,Helvetica-Light,Helvetica",fontSize:0===r?0:r||12,fontModifiers:o||[],showPerformanceStats:a,performanceTextAlign:s||"right",performanceFrameCount:l||20,colorRampType:u||e.COLOR_RAMP_TYPE_3POINT,zoomDurationMilliseconds:0===c?0:c||400,rootBorderColor:d||"rgba(255, 255, 255, 1.0)",childBorderColor:h||"rgba(128, 128, 128, 1.0)",rootBorderThickness:0===f?0:f||2,childBorderThickness:0===p?0:p||1,enableInteractions:g!==!1,tooltipFormat:m||"{NAME}\n% Chg: {COLOR~}",labelFormat:v||"{NAME}",rootLabelFormat:y||"{NAME}\n{COLOR}%",outerLabelFormat:b||"{NAME} {COLOR~%}",useOuterLabels:_===!1?!1:!0,minOuterLabelDistance:x||5,maxOuterLabelDistance:w||25,numVisibleLevels:C||4,selectionHilightBorderColor:T||"rgba(255, 255, 55, 1.0)",selectionHilightMode:E||t.HILIGHT_GROUP_MODE,drillInAnimationMode:S||t.ANIMATE_SINGLE_FILL,drillOutAnimationMode:k||t.ANIMATE_ALL_FILL,sortByWeight:void 0!==A?A:!0,benchmarkTest:M,benchmarkDuration:N||3,stringTable:e.createDefaultStringTable(),backgroundGradientStartColor:D||"#073844",backgroundGradientEndColor:P||"#071824",showColorRamp:void 0!==I?I:!0,outerLabelFontColor:O||"rgb(255,255,255)",desaturationGammaRamp:R||1,desaturationMin:L||0,desaturationMax:B||1,colorRampExponent:F||1,outerRingBackgroundColor:j||"grey",useInnerLabels:H!==!1,rootBorderOverhang:V||0,rootBorderOverhangColor:z||"rgb(255, 255, 255)",rootBorderOverhangThickness:0===$?0:$||3,drawPieCrust:void 0!==U?U:!0,maxRadiusScale:W||1,maxLabelVerticalPushes:q||2,showDebuggingVisuals:void 0!==X?X:!1,richTextTooltips:void 0!==Y?Y:!0,richTextOuterLabels:void 0!==K?K:!0,coloredTextPositiveColor:J||"green",coloredTextNegativeColor:Q||"red",coloredTextUnchangedColor:Z||"white",animateWithAnnulus:void 0!==et?et:!0,abbreviateThousands:void 0!==tt?tt:!1,allowLeafDrillDown:nt!==!1,rootNodeTooltipSuffix:it||"",centerNodeTooltipSuffix:rt||"",innerNodeTooltipSuffix:ot||"",leafNodeTooltipSuffix:at||"",wordWrapOuterLabelsToSlice:void 0!==st?st:!1,clipOuterLabelsToSlice:void 0!==lt?lt:!1,outerLabelHighlighting:void 0!==G?G:!1,outerLabelHighlightColor:ut||"yellow",outerLabelSelectionPixelTolerance:ct||5,animateOnDataEvent:void 0!==dt?dt:!1,enableAutoDrillOnClick:ht!==!1,enableResetInteraction:ft!==!1,labelFormatDecimalPrecision:pt||2}}};return t}),define("oven/unvetted/library/animation",["oven/unvetted/kernel/kernelUtil"],function(e){var t=function(e,t,n,i,r){var o,a,s=[];for(o=0,a=t.length;a>o;o++)s[o]=r(e,t[o],n[o],i);return s},n=function(e,t){var n,i,r=[];for(n=0,i=e.length;i>n;n++)r[n]=t[n]-e[n];return r},i={createAnimationTrack:function(r,o,a,s,l){var u,c=r.getPlatform();return u={isComplete:!1,run:function(r){var u,d,h=this,f=n(o,a),p=new Date,g=p.getTime();this.isComplete=!1,d=g+r,u=r;var m=function(n){try{if(!h.isComplete){var r=new Date;n=r.getTime(),n>=d?(h.isComplete=!0,s(a)):(c.requestAnimationFrame(m),s(t(n-g,o,f,u,l||i.customEase)))}}catch(p){e.log.error("ERROR: ex="+p.stack)}};c.requestAnimationFrame(m)},abort:function(){this.isComplete=!0}}},customEase:function(e,t,n,i){var r=-.25,o=.25,a=1,s=-2.5,l=2.5,u=(e/=i)*e,c=u*e;return t+n*(r*c*u+o*u*u+a*c+s*u+l*e)},easeInCirc:function(e,t,n,i){return-n*(Math.sqrt(1-(e/=i)*e)-1)+t},easeOutCirc:function(e,t,n,i){return n*Math.sqrt(1-(e=e/i-1)*e)+t},lerp:function(e,t,n,i){return t+e/i*n},smoothPanAndZoom:function(e,t){function n(e){return(Math.exp(e)+Math.exp(-e))/2}function i(e){return(Math.exp(e)-Math.exp(-e))/2}function r(e){return i(e)/n(e)}function o(e){var t=e*T;if(C){var o=n(x),l=d/(s*y)*(o*r(a*t+x)-i(x));return[u+l*g,c+l*m,d*o/n(a*t+x)]}return[u+e*g,c+e*m,d*Math.exp(a*t)]}var a=Math.SQRT2,s=2,l=4,u=e[0],c=e[1],d=e[2],h=t[0],f=t[1],p=t[2],g=h-u,m=f-c,v=g*g+m*m,y=Math.sqrt(v),b=(p*p-d*d+l*v)/(2*d*s*y),_=(p*p-d*d-l*v)/(2*p*s*y),x=Math.log(Math.sqrt(b*b+1)-b),w=Math.log(Math.sqrt(_*_+1)-_),C=w-x,T=(C||Math.log(p/d))/a;return o}};return i}),define("oven/unvetted/library/axes/labelFormatter",["oven/unvetted/library/utility/dateExtensions","oven/unvetted/library/axes/dateRangeFinder","oven/unvetted/library/axes/rangefinder","oven/unvetted/contracts/commonConfig"],function(e,t,n,i){var r,o=0;return r={createLabelFormatter:function(r){r=r||{},r.stringTable||(r.stringTable=i.createDefaultStringTable());var a,s=r.stringTable.monthNamesShort,l=r.stringTable.dayNamesInitial,u=r.stringTable.quarterNamesShort,c=new Date(1970,0,1);return a={id:"labelFormatter"+(o+=1),formatNumber:function(e,t,i,o){var a,s=+e,l="";return t=t||n.findNiceIntervals(e).minor,t>=1e12?(l=r.stringTable.trillionsInitial||"T",s/=1e12):t>=1e9?(l=r.stringTable.billionsInitial||"B",s/=1e9):t>=1e6?(l=r.stringTable.millionsInitial||"M",s/=1e6):t>=1e3&&r.abbreviateThousands&&(l=r.stringTable.thousandsInitial||"k",s/=1e3),s=i||0===i?s.toFixed(i):0===s||Math.abs(s)>=10?s.toFixed(0):s.toFixed(1),a=s.toString()+l,o&&s>0&&(a="+"+a),a},formatDate:function(n,i){var r;if(n)switch("number"==typeof n?c.setTime(n):c=e.copyDateFrom(n),i){case t.INTERVAL_WEEK:r=(c.getMonth()+1).toString()+"/"+c.getDate().toString();break;case t.INTERVAL_HALFMONTH:r=s[c.getMonth()]+" "+c.getDate().toString();break;case t.INTERVAL_MONTH:r=s[c.getMonth()];break;case t.INTERVAL_3MONTH:r=s[c.getMonth()];break;case t.INTERVAL_QUARTER:r=u[Math.floor(c.getMonth()/3)];break;case t.INTERVAL_YEAR:r=c.getFullYear();break;case t.INTERVAL_DATE:r=n.getDate().toString()+"/"+s[c.getMonth()];break;case t.INTERVAL_WEEKDAY:r=l[c.getDay()];break;case t.INTERVAL_WEEKCOUNT:r=e.getWeek(c,0)+1;break;case t.INTERVAL_1MIN:case t.INTERVAL_3MIN:case t.INTERVAL_5MIN:case t.INTERVAL_10MIN:case t.INTERVAL_15MIN:case t.INTERVAL_30MIN:case t.INTERVAL_60MIN:case t.INTERVAL_120MIN:case t.INTERVAL_240MIN:r=n.getHours().toString()+":",n.getMinutes()<9&&(r+="0"),r+=n.getMinutes().toString();break;default:r=""}else r="";return r}}}}}),define("oven/unvetted/library/utility/outerLabelRenderer",["oven/unvetted/library/textRendering","oven/unvetted/library/charting"],function(e){var t={SPLITTABLE_CHARS:[" ","/","-","&"],createOuterLabelRenderer:function(n,i,r,o,a){var s,l,u,c,d,h,f,p,g,m=[],v=n&&n.fontModifiers?n.fontModifiers:null,y=a?a.getContext("2d"):null,b=i.measureString(" "),_=0,x=null,w="rgb(255,0,0)",C="rgb(0,255,0)",T="rgb(0,0,255)",E="rgb(255,100,0)",S="ANCHOR_TOPLEFT",k="ANCHOR_BOTTOMLEFT",A="ANCHOR_TOPRIGHT",M="ANCHOR_BOTTOMRIGHT",N=n&&n.showDebuggingVisuals===!0,D=null,P={},I=15,O=7,R={toggleDebugVisuals:function(){N=!N},setPie:function(e,t,n,i){s=e,l=t,u=n,c=i},placeOuterLabel:function(t,o,a,u,c){var d,h=s,f=l,p=e.parseFormattedString(c.customLabelFormat||n.outerLabelFormat,x,c.data,r,n),g=c.label||p.fullText;if(n.richTextOuterLabels&&(d=p.coloredPieces),0!=a){var v=a+(u-a)/2,y=c.startAngle+(c.endAngle-c.startAngle)/2;h=s+v*Math.cos(y),f=l+v*Math.sin(y)}var b=i.measureString(g),_=i.getFontHeight(),w=L(h,f,b,_,g,c);return w.richText=d,w.stringPosition=0,m.push(w),w},repositionOuterLabels:function(){o.beginGroup("MultiLevelPie (repositionOuterLabels)");var e,r,a,c,d=i.getCanvasWidth(),h=i.getCanvasHeight(),f=8,p=function(e,t){var n=e.weight,i=t.weight;return i>n?1:n==i?0:-1};m.sort(p);var g,v,b,_=[],x=[],w="0123456789.";for(e=0;e<m.length;e++)c=m[e],K(c,f,d,h);for(_.length=0,x.length=0,e=0;e<m.length;e++)if(U(s,l,u,m[e])||W(m[e])){m[e].debugStroke="rgb(0,255,0)";var C=[],T=0,E=!1,S=m[e].text,k=S.length;for(r=0;k>r;r++){if(t.SPLITTABLE_CHARS.indexOf(S[r])>=0){if(!(k-1>r&&w.indexOf(S[r+1])>=0)){var A=" "==S[r],M=A?r:r+1;C.push({text:S.substring(T,M),addNewLine:E,nonSpaceSep:!A}),T=r+1,E=!1}}else"\n"==S[r]&&(C.push({text:S.substring(T,r),addNewLine:E}),E=!0,T=r+1);r==k-1&&r!=T&&(C.push({text:S.substring(T,k),addNewLine:E}),E=!1)}if(1==C.length)continue;g=[];var D,P=m[e].left,R=m[e].top,F=m[e].height;for(b=0,r=0;r<C.length;r++){D=i.measureString(C[r].text);var V=P+D/2,q=R+F/2;v=L(V,q,D,F,C[r].text,m[e].pieSlice,C[r].addNewLine),v.richText=m[e].richText,v.stringPosition=b,v.nonSpaceSep=C[r].nonSpaceSep,b+=v.text.replace("\n","").length,K(v,f,d,h),g.push(v)}for(a=0;a<g.length;a++){for(r=a;r<g.length;r++)a!=r&&(g[r].linkedLabels.push(g[a]),g[a].linkedLabels.push(g[r]));for(r=0;r<m[e].linkedLabels.length;r++)g[a].linkedLabels.push(m[e].linkedLabels[r]),m[e].linkedLabels[r].linkedLabels.push(g[a])}g.length>0&&Y(g),_.push(e),x.push(g)}else{c=m[e],g=[];var G=c.text.split("\n");q=c.top,V=c.left;var X=0,Q=0;if(b=0,G.length>1){for(r=0;r<G.length;r++)v=L(V,q,i.measureString(G[r]),c.height,G[r],c.pieSlice),v.richText=c.richText,v.stringPosition=b,b+=v.text.replace("\n","").length,v.moveToLeftTop(V,q),g.push(v),q+=c.height+2,X+=v.width,Q+=c.height+2;for(a=0;a<g.length;a++)for(r=a;r<g.length;r++)a!=r&&(g[r].linkedLabels.push(g[a]),g[a].linkedLabels.push(g[r]));_.push(e),x.push(g)}else(void 0==G[0]||""==G[0])&&_.push(e);m[e].debugStroke="rgb(255,0,0)"}if(0!=x.length&&0!=_.length)for(e=0;e<x.length;e++){var tt=m.slice(0,_[e]),nt=m.slice(_[e]+1);for(m=tt.concat(x[e]).concat(nt),r=e+1;r<_.length;r++)_[r]+=x[e].length-1}for(et(!0),Z(),e=0;e<m.length;e++)c=m[e],K(c,f,d,h);for(var it=0;I>=it;){if(I>it)for(e=0;e<m.length;e++){if(c=m[e],U(s,l,u,c))switch(c.quadrant){case 1:case 2:c.move(0,-1*O,!0);break;case 3:case 4:c.move(0,O,!0)}if(c.numTimesPushed<n.maxLabelVerticalPushes)for(r=0;r<m.length;r++)if(e!=r&&z(m[e],m[r])){var rt=m[e].weight<m[r].weight?m[e]:m[r];switch(rt.quadrant){case 1:case 2:rt.move(0,-1*O,!0),rt.numTimesPushed++;break;case 3:case 4:rt.move(0,O,!0),rt.numTimesPushed++}}}else for(e=0;e<m.length;e++)c=m[e],U(s,l,u,c)&&m[e].hide();it++}for(et(!1),e=0;e<m.length;e++)m[e].quadrant=B(m[e].x,m[e].y),m[e].anchor=H(m[e].quadrant);if(n.clipOuterLabelsToSlice)for(e=0;e<m.length;e++)m[e].visible&&m[e].isPrimaryLabelPiece&&J(m[e]);for(e=m.length-1;e>=0;e--)if(m[e].visible)for(r=e-1;r>0;r--)m[r].visible&&z(m[e],m[r])&&m[e]!=m[r]&&m[e].pieSlice.id!=m[r].pieSlice.id&&m[e].hide();for(e=0;e<m.length;e++){var ot=j(m[e]);$(ot.x,ot.y)&&m[e].hide()}for(e=0;e<m.length;e++)c=m[e],K(c,f,d,h,!0);if(N&&y)for(y.strokeStyle="rgb(0,255,0)",y.beginPath(),y.arc(s,l,u,0,2*Math.PI,!1),y.closePath(),y.stroke(),e=0;e<m.length;e++){for(r=0;r<m.length;r++)e!=r&&z(m[e],m[r]);U(s,l,u,m[e])&&(m[e].debugStroke="rgb(0,255,0)")}o.endGroup()},resetOuterLabelPosition:function(){m.length=0},setDataSource:function(e,t){x=e,d=t},highlightOuterLabel:function(t){var r=P[t.id];if(D=r,r.visible){var o=e.buildFontString(n.fontSize,n.fontFamily,v);st(r);for(var a=0;a<r.linkedLabels.length;a++){var s=r.linkedLabels[a];st(s)}for(var a=0;a<r.linkedLabels.length;a++)i.drawString(s.left,s.y,s.text,o,n.outerLabelHighlightColor,e.TEXTALIGN_LEFT);i.drawString(r.left,r.y,r.text,o,n.outerLabelHighlightColor,e.TEXTALIGN_LEFT)}},clearHighlightedOuterLabel:function(){this.clearOuterLabels(),this.drawOuterLabels(),D=null},getPieForLabel:function(e,t){var i;for(i=0;i<m.length;i++)if(it(e,t,m[i],n.outerLabelPixelTolerance))return m[i].pieSlice;return null},isOuterLabelHighlighted:function(e){return e?D==P[e.id]:null!=D},isOuterLabelVisible:function(e){return e?P[e.id]?P[e.id].visible:!1:!1},clearOuterLabels:function(){for(var e=0;e<m.length;e++)st(m[e])},drawOuterLabels:function(t){var r,o;nt();var a=e.buildFontString(n.fontSize,n.fontFamily,v);for(i.setRenderState(a,n.outerLabelFontColor,null,e.TEXTALIGN_CENTER),P={},r=0;r<m.length;r++)o=m[r],rt(o,t),o.visible&&(P[o.pieSlice.id]=o)}},L=function(e,t,n,i,r,o,a,s){var l=B(e,t),u=H(l),c=e,h=t,f=n/2,p=i/2;switch(u){case S:c+=f,h+=p;break;case A:c-=f,h+=p;break;case k:c+=f,h-=p;break;case M:c-=f,h-=p}return{id:_++,x:c,y:h,left:c-f,right:c+f,top:h-p,bottom:h+p,text:r,width:n,height:i,weight:o.data[d],startAngle:o.startAngle,endAngle:o.endAngle,highlighted:!1,isPrimaryLabelPiece:void 0!==s?s:!0,numTimesPushed:0,visible:!0,addLineBreak:a||!1,pieSlice:o,anchor:u,quadrant:l,debugStroke:"rgb(0,255,100)",linkedLabels:[],move:function(e,t,n){if(this.x+=e,this.left+=e,this.right+=e,this.y+=t,this.top+=t,this.bottom+=t,this.quadrant=B(this.x,this.y),this.debugStroke="rgb(255,0,0)",n)for(var i=0;i<this.linkedLabels.length;i++)this.linkedLabels[i].move(e,t)},moveTo:function(e,t,n){if(this.x=e,this.y=t,this.left=e-f,this.right=e+f,this.top=t-p,this.bottom=t+p,this.quadrant=B(this.x,this.y),this.debugStroke="rgb(255,0,0)",n)for(var i=0;i<this.linkedLabels.length;i++)this.linkedLabels[i].moveTo(e,t)},moveToLeftTop:function(e,t,r){if(this.left=e,this.top=t,this.x=this.left+f,this.y=this.top+p,this.right=this.left+n,this.bottom=this.top+i,this.quadrant=B(this.x,this.y),this.debugStroke="rgb(255,0,0)",r)for(var o=0;o<this.linkedLabels.length;o++)this.linkedLabels[o].moveToLeftTop(e,t)},show:function(){this.visible=!0;for(var e=0;e<this.linkedLabels.length;e++)this.linkedLabels[e].visible=!0},hide:function(){this.visible=!1;for(var e=0;e<this.linkedLabels.length;e++)this.linkedLabels[e].visible=!1}}},B=function(e,t){return e>=s?t>=l?4:1:t>=l?3:2},F=function(e){e.debugStroke=1==e.quadrant?w:2==e.quadrant?C:3==e.quadrant?T:E},j=function(e,t,n){var i=e.anchor;if(t&&n){var r=B(t,n);switch(r){case 1:i=k;break;case 2:i=M;break;case 3:i=A;break;case 4:i=S}}switch(i){case k:return{x:e.left,y:e.bottom};case M:return{x:e.right,y:e.bottom};case S:return{x:e.left,y:e.top};case A:return{x:e.right,y:e.top};case void 0:return{x:e.x,y:e.y}}},H=function(e){switch(e){case 1:return k;case 2:return M;case 3:return A;case 4:return S}},V=function(e,t,n){return t>e?t:e>=n?n:e},z=function(e,t){return 0==e.visible||0==t.visible?!1:(e.left<=t.right&&e.right>=t.left||e.right>=t.left&&e.left<=t.right)&&e.top<=t.bottom&&e.bottom>=t.top?!0:!1},$=function(e,t){return u*u>(e-s)*(e-s)+(t-l)*(t-l)},U=function(e,t,n,i){var r=i.width/2,o=i.height/2,a=Math.abs(e-i.left-r),s=Math.abs(t-i.top-o);if(a>r+n)return!1;if(s>o+n)return!1;if(r>=a)return!0;if(o>=s)return!0;var l=(a-r)*(a-r)+(s-o)*(s-o);return n*n>=l},W=function(e){var t=j(e);return!at(t.x,t.y,s,l,0,Number.MAX_VALUE,e.pieSlice.startAngle,e.pieSlice.endAngle)},q=function(e){var t=U(s,l,u,e)&&e.right+b<c.right,i=!1;return n.wordWrapOuterLabelsToSlice&&(i=W(e)),!t&&!i},G=function(e){var t,n=e[0].left,i=e[0].height+2,r=e[0].nonSpaceSep?.001:b,o=n+e[0].width+r,a=e[0].top;for(t=1;t<e.length;t++)e[t].moveToLeftTop(o,a),(!q(e[t])||e[t].addLineBreak)&&(a=e[t].top+i,o=n,e[t].moveToLeftTop(o,a)),o+=e[t].width+r},X=function(e){var t,n=e.length,i=1,r=e[0].height+2,o=0;for(t=0;t<e.length;t++)o+=e[t].width,t!=e.length-1&&(o+=b);for(;n>i&&!a;){for(t=0;t<e.length;t++)e[t].move(0,-1*i*r);G(e);var a=!0;for(t=0;t<e.length;t++)U(s,l,u,e[t])&&(a=!1);i++}},Y=function(e){var t=e[0].quadrant;4==t||3==t?G(e):1==t||2==t?X(e,t):G(e)},K=function(e,t,n,i,r){var o=V(e.left,t,n-t);if(e.left<o){if(r)return e.hide(),void 0;e.move(o-e.left,0,!0)}var a=V(e.right,t,n-t);if(e.right>a){if(r)return e.hide(),void 0;e.move(a-e.right,0,!0)}var s=V(e.top,t,i-t);if(s>e.top){if(r)return e.hide(),void 0;e.move(0,s-e.top,!0)}var l=V(e.bottom,t,i-t);if(e.bottom>l){if(r)return e.hide(),void 0;e.move(0,l-e.bottom,!0)}},J=function(e){Q(e)||e.hide()},Q=function(e){var t=j(e);return at(t.x,t.y,s,l,0,Number.MAX_VALUE,e.pieSlice.startAngle,e.pieSlice.endAngle)?!0:!1},Z=function(){var e,t,n,r,o=[],a={},s=function(e,t){if(""==e||""==t)return!1;var n=e.substring(e.length-1,e.length),i=t.substring(0,1),r=e.substring(e.length-2,e.length),o=!1;return r&&" "==r[0]&&" "!=r[1]&&(o=!0),n.match("^[a-zA-Z0-9()@%]+$")&&i.match("^[a-zA-Z0-9()@%]+$")||1==t.length||o};for(e=0;e<m.length;e++)if(r=m[e],!a[r.id]){a[r.id]=!0;var l=[r];for(t=0;t<r.linkedLabels.length;t++)n=r.linkedLabels[t],r.y==n.y&&(l.push(n),a[n.id]=!0);l.length>1&&o.push(l)}var u=[];for(e=0;e<o.length;e++){var c=o[e][0];for(t=1;t<o[e].length;t++)o[e][t].left<c.left&&(c=o[e][t]);for(t=0;t<o[e].length;t++)o[e][t].id!=c.id&&(c.text+=s(c.text,o[e][t].text)?" "+o[e][t].text:o[e][t].text,u.push(o[e][t]));c.width=i.measureString(c.text),c.right=c.left+c.width}for(e=0;e<u.length;e++)tt(u[e])},et=function(e){var t,i,r,o,a,c,d,v,y,b,_={},x=u+n.minOuterLabelDistance,w=u+n.maxOuterLabelDistance;for(t=0;t<m.length;t++)if(i=m[t],i.isPrimaryLabelPiece=!1,r=i.pieSlice.id,c=_[r],void 0!=c){var C=j(c),T=j(i);o=Math.sqrt((s-C.x)*(s-C.x)+(l-C.y)*(l-C.y)),a=Math.sqrt((s-T.x)*(s-T.x)+(l-T.y)*(l-T.y)),o>a&&(_[r]=i)}else _[r]=i;for(d in _)_.hasOwnProperty(d)&&(i=_[d],i.isPrimaryLabelPiece=!0,e&&(h=x+(w-x)/2,f=i.pieSlice.startAngle+(i.pieSlice.endAngle-i.pieSlice.startAngle)/2,p=s+h*Math.cos(f),g=l+h*Math.sin(f),b=j(i,p,g),v=p-b.x,y=g-b.y,i.move(v,y,!0)))},tt=function(e){var t,n;for(n=0;n<m.length;n++)t=m[n].linkedLabels.indexOf(e),-1!=t&&m[n].linkedLabels.splice(t,1);t=m.indexOf(e),-1!=t&&m.splice(t,1)},nt=function(){o.beginGroup("MultiLevelPie (colorizeOuterLabels)");var e,t,n,r,a;for(e=0;e<m.length;e++)for(r=m[e],r.textColor=void 0,t=0;t<r.richText.length;t++)-1!==r.richText[t].text.indexOf(r.text)?r.textColor=r.richText[t].color:-1!=r.richText[t].text.replace(" ","").indexOf(r.text.replace(" ",""))&&(r.textColor=r.richText[t].color);var s=[],l=[];for(e=0;e<m.length;e++)if(m[e].visible)for(r=m[e],a=r.richText,t=0;t<a.length;t++)if(-1!=r.text.indexOf(a[t].text))if(r.stringPosition<a[t].stringPosition&&a[t].stringPosition<r.text.length){var u=r.text.split(a[t].text),c=[],d=r.height;for(n=0;n<u.length;n++)c.push(i.measureString(u[n]));var h=r.left,f=L(r.x,r.y,c[0],d,u[0],r.pieSlice);f.moveToLeftTop(h,r.top),f.textColor=r.textColor,h+=f.width;var p=i.measureString(a[t].text),g=L(h,r.y,p,d,a[t].text,r.pieSlice);g.moveToLeftTop(h,r.top),g.textColor=a[t].color;var v=L(h+c[1]/2,r.y,c[1],d,u[1],r.pieSlice);for(v.textColor=r.textColor,n=0;n<r.linkedLabels.length;n++)f.linkedLabels.push(r.linkedLabels[n]),v.linkedLabels.push(r.linkedLabels[n]);f.linkedLabels.push(v),f.linkedLabels.push(g),g.linkedLabels.push(f),g.linkedLabels.push(v),v.linkedLabels.push(f),v.linkedLabels.push(g),s.push(r),l.push(f),l.push(g),l.push(v)}else r.textColor=a[t].color;for(e=0;e<s.length;e++)tt(s[e]);for(e=0;e<l.length;e++)m.push(l[e]);o.endGroup()},it=function(e,t,n,i){var r=0;return i&&(r=i),e<n.left-r?!1:e>n.right+r?!1:t<n.top-r?!1:t<n.bottom+r},rt=function(t,r){if(t.visible||r){var o;if(o=void 0===t.textColor||r&&!t.visible?"yellow":null===t.textColor?n.outerLabelFontColor:t.textColor,i.drawString(t.left,t.y,t.text,e.buildFontString(n.fontSize,n.fontFamily,v),o,e.TEXTALIGN_LEFT),N&&y&&(F(t),y.beginPath(),y.strokeStyle=t.debugStroke,y.rect(t.left,t.top,t.width,t.height),y.closePath(),y.stroke(),t.isPrimaryLabelPiece)){var a=j(t);y.moveTo(a.x,a.y),y.lineTo(s,l),y.stroke()}}},ot=function(e,t,n,i,r){var o=Math.asin(i/r);return(0>n&&i>0||0>n&&0>i)&&(o=Math.PI-o),o>=e&&t>=o},at=function(e,t,n,i,r,o,a,s){var l=e-n,u=t-i,c=Math.sqrt(l*l+u*u);return c>r&&o>c?ot(a,s,l,u,c):!1},st=function(e){i.clear(e.left-2,e.top-2,e.width+4,e.height+4)};return R}};return t}),define("oven/unvetted/dataAdapters/dataAdapterUtil",["oven/framework/data/view/fieldSchema"],function(e){function t(t){var n,i=e.create(),r=t.getFields();for(n in r)if(r.hasOwnProperty(n)){var o=r[n];i.addField(o.name,o.type,o.columnIdx)}return i}function n(e){return e.map(function(e){return e.slice(0)})}var i={copyDataValues:n,copyFieldSchema:t};return i}),define("oven/vislets/multiLevelPie/multiLevelPieDataAggregator",[],function(){return{aggregate:function(e,t,n,i,r,o,a,s){var l,u,c,d=[],h={},f={},p={},g=!1,m=function(t){var n,i;for(n=0;n<e.length;n++)if(i=e[n],i[o]==t&&void 0!=h[i[r]]&&void 0==p[i[r]])return h[e[n][r]];return null},v=function(){var t,n=-1;for(t=0;t<e.length;t++)e[t][o]>n&&(n=e[t][o]);return n},y=function(e,n,i){var r=e[t];if(i){var o=h[e[a]];if(o){var s=o[t];r=100*(r/s)}}return n>r},b=function(e){var t,n=function(e,t){var i=f[e[r]];
if(i)for(var o=0;o<i.length;o++)t.push(i[o][r]),n(h[i[o][r]],t);t.push(e[r])},i=[];for(n(e,i),t=0;t<i.length;t++)h[i[t]]=void 0};for(u=v(),l=0;l<e.length;l++)h[e[l][r]]=e[l];for(var _ in h)h[_].otherNode=void 0,h[_].otherNodeCount=void 0;for(l=0;l<e.length;l++){var x=e[l][a];if(x){var w=f[x];void 0==w&&(w=[],f[x]=w),w.push(e[l])}}if(!g){for(var C=1;u>=C;C++)for(c=m(C);c;)y(c,n,i)&&(x=h[c[a]],x&&(x.otherNodeCount=(x.otherNodeCount||0)+1)),p[c[r]]=c,c=m(C);p={}}for(var T=[],C=1;u>=C;C++)for(c=m(C);c;){if(y(c,n,i)&&(x=h[c[a]],x&&(g||x.otherNodeCount&&x.otherNodeCount>1))){if(void 0===x.otherNode){var E=s.slice();E[r]="OTHER_"+c[r],E[a]=x[r],E[t]=c[t],E[o]=C,x.otherNode=E,T.push(E);var S=[],k=0;for(l=C+1;u>=l;l++){var A=s.slice();A[o]=l,A[r]=E[r]+"_"+l,A[t]=c[t],0==k?(A[a]=E[r],E.otherNode=A):(S[k-1].otherNode=A,A[a]=S[k-1][r]),k++,S.push(A)}for(l=0;l<S.length;l++)T.push(S[l])}else{x.otherNode[t]+=c[t];for(var M=x.otherNode.otherNode;M;)M[t]+=c[t],M=M.otherNode}b(c)}p[c[r]]=c,c=m(C)}for(l=0;l<T.length;l++)h[T[l][r]]=T[l];for(var N in h)h.hasOwnProperty(N)&&(c=h[N],void 0!=c&&d.push(c));return d}}}),define("oven/vislets/multiLevelPie/multiLevelPieLayer",["oven/unvetted/contracts/events","oven/vislets/pie/pieConfig","oven/vislets/multiLevelPie/multiLevelPieDataContract","oven/unvetted/library/boundingBox","oven/unvetted/library/charting","oven/unvetted/kernel/kernelCSS","oven/legacy/library/layers/layer","oven/unvetted/library/animation","oven/vislets/multiLevelPie/multiLevelPieSignals","oven/library/utility/objects","oven/unvetted/library/axes/labelFormatter","oven/unvetted/contracts/platform","oven/unvetted/library/textRendering","oven/unvetted/library/utility/outerLabelRenderer","oven/unvetted/dataAdapters/dataAdapterUtil","oven/framework/data/adapters/jstable/jsTableDataAdapter","oven/vislets/multiLevelPie/multiLevelPieDataAggregator","oven/unvetted/library/utility/compatibility"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p,g,m){var v=0,y=2*Math.PI,b=-Math.PI/2,_=y+b,x=12,w=6.22,C=4,T=f.SPLITTABLE_CHARS,E={createPie:function(o,E,S,k,A,M,N,D){var P,I,O,R,L,B,F,j,H,V,z,$,U,W,q,G,X,Y,K,J=M&&M.log&&M.log.verbose,Q=M&&M.log&&M.log.debug,Z=o.getPlatform(),et=o.getEventManager(),tt=void 0,nt=void 0,it=void 0,rt=void 0,ot=void 0,at=void 0,st=void 0,lt=void 0,ut=void 0,ct=o.getDataManager(),dt=null,ht=null,ft=null,pt=E.getContext("2d"),gt=S.getContext("2d"),mt=k?k.getContext("2d"):pt,vt=Z.createTooltip(o,A,M),yt=c.createLabelFormatter(M),bt=h.createTextRenderer(k,M),_t=f.createOuterLabelRenderer(M,bt,yt,Z,k),xt=null,wt=0,Ct=0,Tt=1,Et=0,St=0,kt=0,At=0,Mt=0,Nt={},Dt=null,Pt=null,It=null,Ot=[],Rt=[],Lt=null,Bt=null,Ft=7,jt=null,Ht=0,Vt=0,zt=!1,$t=!1,Ut=bt.measureString(" "),Wt=u.assimilate(a.createLayer(o,E),{id:"multiLevelPie"+v++,boundingBox:i.createBoundingBox(0,0,E.width,E.height),select:function(e,t){Z.beginGroup("MultiLevelPie (select)");var n=this.findSelectedPie(e,t);return this.boundingBox.contains(e,t)&&n||!xt?(xt!=n&&(xt&&(this.drawBackgroundCircle(gt),xt=null),n&&this.drawPieSlice(gt,n,!0)),xt=n,Z.endGroup(J),void 0):(this.drawBackgroundCircle(gt),xt=null,void 0)},createAggregatedData:function(e,t){var i=e.getDataView(),r=i.getDataSchema(),o=i.getDataTable(),a=o.getData(),s=i.getMetaBlockSchema(),l=o.getMetaBlock(),u=a[0].length,c=p.copyFieldSchema(r),d=n.FieldNames,h=n.FieldTypes;c.addField(d.IS_NOT_SELECTABLE,h.BOOLEAN,u++),c.addField(d.IS_LEAF,h.BOOLEAN,u++),c.addField(d.CUSTOM_TOOLTIP_FORMAT,h.STRING,u++),c.addField(d.CUSTOM_LABEL_FORMAT,h.STRING,u);var f=c.getFieldIndex(d.SIZE),v=c.getFieldIndex(d.ID),y=c.getFieldIndex(d.NAME),b=c.getFieldIndex(d.LEVEL),_=c.getFieldIndex(d.PARENT_ID);u=a[0].length;for(var x=[],w=0;u>w;++w)x.push(0);x[v]="OTHERID_",x[_]="",x[y]=M.othersNodeName,x[b]=-1,x.push(!0),x.push(!0),x.push(M.othersNodeTooltipFormat),x.push(M.othersNodeLabelFormat);var C=p.copyDataValues(a),T=m.aggregate(C,f,M.othersNodeAggregationThreshold,M.othersNodeThresholdIsRelative,v,b,_,x),E=g.createWithSchemas(e.getSeriesName(),e.getSeriesType(),c,T,p.copyFieldSchema(s),p.copyDataValues(l),t);return E},updateDataMapping:function(){var e=n.FieldNames,t=dt.getDataView(),i=t.getDataSchema();tt=i.getFieldIndex(e.COLOR),nt=i.getFieldIndex(e.ID),it=i.getFieldIndex(e.PARENT_ID),rt=i.getFieldIndex(e.LEVEL),ot=i.getFieldIndex(e.SIZE),at=i.getFieldIndex(e.IS_NOT_SELECTABLE),st=i.getFieldIndex(e.IS_LEAF),lt=i.getFieldIndex(e.CUSTOM_TOOLTIP_FORMAT),ut=i.getFieldIndex(e.CUSTOM_LABEL_FORMAT)},setDataSource:function(e){ft=null,ht=e,dt=e,M.othersNodeAggregationThreshold>0&&(ft=this.createAggregatedData(e,et),dt=ft.publicInterface),this.updateDataMapping(dt),_t.setDataSource(dt,ot),qt()},isStructuralDataUpdate:function(t){switch(t.type){case e.ROW_CHANGES:var n,i,r,o,a,s=t.data,l=s.length;for(n=0;l>n;++n)for(r=s[n],o=r.length,i=0;o>i;++i)if(a=r[i],a===nt||a===it||a===rt)return!0;return!1;case e.ROW_DELETES:case e.ROW_INSERTS:case e.ROW_MOVES:case e.COLUMN_DELETES:case e.COLUMN_INSERTS:case e.COLUMN_MOVES:case e.TABLE_CHANGE:case e.TABLE_CLEAR:default:return!0}},updateData:function(e){if(this.isStructuralDataUpdate(e)){M.othersNodeAggregationThreshold>0&&(ft=this.createAggregatedData(ht,et),dt=ft.publicInterface,this.updateDataMapping(dt));var t=Pt;qt();var n=null;t&&Nt.hasOwnProperty(t.id)&&(n=Nt[t.id]),Wt.resetView(n),M.animateOnDataEvent&&Pn(Pt)}else{for(var i,r,o=dt.getDataView(),a=o.getDataTable(),s=a.getData(),l=e.data,u=l.length,c=0;u>c;++c)i=l[c].rowIndex,r=s[i],Xt(Nt[r[nt]],r);null===jt&&(kn(Pt||Dt),Wt.draw(),Lt&&Bt&&this.showToolTip(Bt[0],Bt[1]))}},setupData:function(){var e=ct.getAllDataAdapters();for(var t in e)if(e.hasOwnProperty(t)){this.setDataSource(e[t]);break}},updateConfig:function(e){e.numVisibleLevels&&(qt(),kn(Pt||Dt))},drawBackgroundCircle:function(e){Z.beginGroup("MultiLevelPie (clear background circle)"),e.clearRect(0,0,this.boundingBox.width,this.boundingBox.height),N.redraw(),Z.endGroup(J)},draw:function(e,t,n){this.drawInternal(e||this.boundingBox,t,n)},drawInternal:function(e,t,n){D&&!n&&D.startFrame(),Z.beginGroup("MultiLevelPie"),e&&Ot&&Ot.length&&(pt.save(),e.clearRect(pt),bt.clear(),M.drawPieCrust&&kt>At+Mt&&ln(pt,Et,St),t||bt.setRenderState(M.fontSize+"px "+M.fontFamily,M.fontColor,null,h.TEXTALIGN_CENTER,h.TEXTBASELINE_MIDDLE),N.draw(),fn(!t),mn(),t||(_t.repositionOuterLabels(),_t.drawOuterLabels($t)),pt.restore()),Z.endGroup(J),D&&!n&&D.endFrame()},updateCursor:function(e){Rn(e)?zt||(A.pushCursor(d.CURSOR_POINTER),zt=!0):zt&&(A.popCursor(),zt=!1)},updateOuterLabelHighlight:function(e,t,n){var i;if(-1===e&&-1===t)return this.drawBackgroundCircle(gt),_t.clearHighlightedOuterLabel(),void 0;if(n>=wt){if(i=_t.getPieForLabel(e,t),i&&_t.isOuterLabelHighlighted(i))return;_t.isOuterLabelHighlighted()&&(_t.clearHighlightedOuterLabel(),this.drawBackgroundCircle(gt)),i&&!_t.isOuterLabelHighlighted(i)&&(_t.clearHighlightedOuterLabel(),_t.highlightOuterLabel(i),gt.save(),gt.lineWidth=M.rootBorderThickness+1,gt.strokeStyle=M.selectionHilightBorderColor,I=Math.min(wt,Rt[hn()]),R=Math.max(0,Rt[i.levelIndex]),gt.beginPath(),un(gt,i),gt.stroke(),gt.closePath(),gt.restore())}},showToolTip:function(e,t,n){if(Z.beginGroup("MultiLevelPie (showToolTip)"),Lt=n?n:this.findSelectedPie(e-this.offsetX,t-this.offsetY)){var i=Lt.customTooltipFormat||M.tooltipFormat;M&&(Lt===Pt?i+=Pt===Dt?M.rootNodeTooltipSuffix:M.centerNodeTooltipSuffix:Lt.isLeaf||!Lt.children.length?i+=M.leafNodeTooltipSuffix:Lt!==Pt&&Lt.children.length&&(i+=M.innerNodeTooltipSuffix));var r=h.parseFormattedString(i,dt,Lt.data,yt,M);M&&M.richTextTooltips?vt.show(e,t,r):(vt.setText(r.fullText),vt.draw())}else vt.hide();Z.endGroup(J)},setBoundingBox:function(e){var t=M?M.maxRadiusScale:1;this.boundingBox=e,I=this.boundingBox.width/2,Et=this.boundingBox.left+I,O=this.boundingBox.height/2,St=this.boundingBox.top+O,wt=(Math.min(I,O)-2*x)*t,Ct=C+wt,kn(Pt||Dt)},findSelectedPie:function(e,t){var n,i;if($=e-Et,U=t-St,I=Math.sqrt($*$+U*U),wt>I&&(n=Sn(I),G=Ot[n]))for(i=G.length,q=0;i>q;q++)if(cn(G[q].startAngle,G[q].endAngle,$,U,I))return G[q];return null},notify:function(t){t.x&&t.y&&(Bt=[t.x,t.y]);var n;if(null===jt)switch(t.type){case e.HIGHLIGHT:D&&D.startFrame();var i=t.x-this.offsetX-Et,r=t.y-this.offsetY-St,o=Math.sqrt(i*i+r*r);this.updateCursor(t),this.showToolTip(t.x,t.y),this.select(t.x-this.offsetX,t.y-this.offsetY),M&&M.outerLabelHighlighting&&this.updateOuterLabelHighlight(t.x,t.y,o),M&&M.outerLabelShowsTooltip&&this.showToolTip(t.x,t.y,_t.getPieForLabel(t.x,t.y)),D&&D.endFrame();break;case e.UNHIGHLIGHT:Lt&&vt&&vt.hide(),this.showToolTip(-1,-1),this.select(-1,-1),M&&M.outerLabelHighlighting&&this.updateOuterLabelHighlight(-1,-1);break;case e.MOUSE_UP:t.button===e.MOUSE_BUTTON_LEFT&&(D&&D.startFrame(),Lt&&vt&&vt.hide(),this.handleNodeClicked(t),D&&D.endFrame());break;case e.MOUSE_DOUBLECLICK:case e.RESET_VIEW:M.enableResetInteraction&&(D&&D.startFrame(),this.resetView(),D&&D.endFrame());break;case l.USER_CLICK_SET_ROOT_NODE:if(M.enableAutoDrillOnClick){if(t.pieId&&t.pieId!==this.id)return;n=this.findPie(t.sliceId),void 0!=n&&this.setSliceAsRoot(n)}break;case l.FORCE_SET_ROOT_NODE:if(t.layerId&&t.layerId!==this.id)return;n=this.findPie(t.sliceId),void 0!=n&&n!==Pt&&(t.isAnimated?this.setSliceAsRoot(n):this.setSliceAsRootNoAnimate(n));break;case l.TOGGLE_DEBUG_VISUALS:$t=!$t,_t.toggleDebugVisuals(),this.drawInternal(this.boundingBox,!1,!0)}else t.type===e.RESET_VIEW?M.enableResetInteraction&&(D&&D.startFrame(),P.abort(),jt=null,It=Dt,Mt=0,this.resetView(),D&&D.endFrame()):t.type===e.MOUSE_LEAVE&&(zt&&(A.popCursor(),zt=!1),this.showToolTip(t.x,t.y))},handleNodeClicked:function(e){var t=In(e);t&&(et.notify(l.createNodeClickedSignal(this,t.id,this.id)),M.enableAutoDrillOnClick?On(t)&&et.notify(l.createUserClickSetRootNodeSignal(this,t.id,this.id)):et.notify(l.createUserClickSetRootNodeSignal(this,t.id,this.id)))},findPie:function(e){return Nt[e]},setSliceAsRootNoAnimate:function(e){P&&P.abort(),jt=null,It=e,kn(e),et.notify(l.createNewRootNodeSignal(this,It.id,this.id)),this.drawBackgroundCircle(gt),this.drawInternal(this.boundingBox,!1,!0)},setSliceAsRoot:function(e){var t,n=!1,i=e.ancestorPathDepth(Pt);if(It=e,e&&e!==Pt&&i>0){if(It=e,n=!0,t=Dn,0>i||i>=At)return Pn(e),void 0}else if(Pt!==Dt){if(e.children.indexOf(Pt)>=0&&(e=It=Pt),An(It,Pt))It=Pt.parent||Dt;else if(e.children.indexOf(Pt)<0)return Pn(e),void 0;n=!1,t=function(e){var t=e.data[rt],n=It.data[rt]-1,i=e.isVisible||en(t,n)||t-n===At&&e.containsAncestor(It);return e.isVisible=i,i}}It&&It!==Pt&&this.startZoomAnimation(t,e||Pt,n)},startZoomAnimation:E.isVML?function(){kn(It),this.drawBackgroundCircle(gt),this.drawInternal(this.boundingBox,!1,!0)}:function(e,t,n){et.notify(l.createNavAnimationBeginSignal(this));var i=[],r=[],a=n?1:0,u=Pt;jt=t,i.push(jt.startAngle),i.push(jt.endAngle),i.push(a),yn(i),kn(It),r.push(jt.startAngle),r.push(jt.endAngle),r.push(1-a),yn(r),n&&kn(u);var c=this,d=function(e){c.setZoom(e,n)};P=s.createAnimationTrack(o,i,r,d,s.customEase),this.drawBackgroundCircle(gt),bt.clear(),D&&D.reset(),P.run(M.zoomDurationMilliseconds)},setZoom:function(e,n){if(P.isComplete)kn(It),jt=null,this.drawInternal(this.boundingBox,!P.isComplete,!0),et.notify(l.createNewRootNodeSignal(this,It.id,this.id)),et.notify(l.createNavAnimationEndSignal(this));else{var i=n?M.drillInAnimationMode:M.drillOutAnimationMode;i===t.ANIMATE_SINGLE_OUTLINE?Cn(e,this):Tn(e,this,i)}},drawPieAnnulus:function(e,t,n){var i;if(!this.drawPieBorder(e,t,n)){var r=t.levelIndex;I=Rt[r+1],I>0&&(R=Math.max(0,Rt[r]),e.beginPath(),n?(e.lineWidth=M.childBorderThickness+1,e.strokeStyle=M.selectionHilightBorderColor,un(e,t),e.stroke()):(e.lineWidth=1,e.fillStyle=n?M.selectionHilightBorderColor:t.color,i=n?M.selectionHilightBorderColor:M.childBorderColor,e.strokeStyle=M&&!M.animateWithAnnulus?e.fillStyle:i,L=Math.round(Et+I*Math.cos(t.startAngle)),B=Math.round(St+I*Math.sin(t.startAngle)),e.arc(Et,St,I,t.startAngle,t.endAngle,!1),e.arc(Et,St,R,t.endAngle,t.startAngle,!0),e.lineTo(L,B),e.fill(),t.isLeaf&&(e.strokeStyle=e.fillStyle),e.stroke(),e.closePath(),t.isLeaf&&M&&M.animateWithAnnulus&&(e.beginPath(),e.strokeStyle=i,e.moveTo(Math.round(Et+R*Math.cos(t.startAngle)),Math.round(St+R*Math.sin(t.startAngle))),e.lineTo(Math.round(Et+I*Math.cos(t.startAngle)),Math.round(St+I*Math.sin(t.startAngle))),e.moveTo(Math.round(Et+R*Math.cos(t.endAngle)),Math.round(St+R*Math.sin(t.endAngle))),e.lineTo(Math.round(Et+I*Math.cos(t.endAngle)),Math.round(St+I*Math.sin(t.endAngle))),e.stroke()),jt||an(Et,St,R,I,t)))}},drawGroupPieAnnulus:function(e,t,n){var i;if(this.drawPieBorder(e,t,n))return M&&M.useOuterLabels&&M.outerLabelHighlighting&&!jt&&_t.clearHighlightedOuterLabel(),void 0;if(n){if(e.lineWidth=M.rootBorderThickness+1,e.strokeStyle=M.selectionHilightBorderColor,I=Math.min(wt,Rt[hn()]),R=Math.max(0,Rt[t.levelIndex]),e.beginPath(),un(e,t),e.stroke(),e.closePath(),M&&M.useOuterLabels&&M.outerLabelHighlighting&&!jt){_t.clearOuterLabels(),_t.drawOuterLabels();for(var r=t;r&&r.levelIndex-Pt.levelIndex>1;)r=r.parent;null!==r&&_t.isOuterLabelVisible(r)?_t.highlightOuterLabel(r):_t.clearHighlightedOuterLabel()}}else this.drawPieBranchAnnulus(e,t,n),jt||(1===t.levelIndex-Mt?(e.strokeStyle=M.rootBorderColor,e.lineWidth=M.rootBorderThickness,e.beginPath(),gn(e,t,t.startAngle),gn(e,t,t.endAngle),pn(),e.stroke(),e.closePath()):(i=Nn(t),(i[0]!==!1||i[1]!==!1)&&(e.strokeStyle=M.rootBorderColor,e.lineWidth=M.rootBorderThickness,e.beginPath(),i[0]!==!1&&gn(e,t.parent,i[0]),i[1]!==!1&&gn(e,t.parent,i[1]),e.stroke(),e.closePath())))},drawPieBorder:function(e,t,n){return An(t,Pt)?(n?M.drawPieCrust?ln(e,Et,St,M.selectionHilightBorderColor):sn(e,Et,St,wt,M.selectionHilightBorderColor):this.drawBackgroundCircle(e),!0):!1},drawPieSlice:function(e,n,i){for(var r=M.selectionHilightMode;n.parent&&n.parent.isLeaf;)n=n.parent;switch(r){case t.HILIGHT_SINGLE_MODE:this.drawPieAnnulus(e,n,i);break;case t.HILIGHT_GROUP_MODE:this.drawGroupPieAnnulus(e,n,i)}},drawPieBranchAnnulus:function(e,t,n){this.drawPieAnnulus(e,t,n);var i=Math.min(kt,Mt+At)-1;if(!(t.levelIndex>=i))for(var r=0,o=t.children.length;o>r;r++)this.drawPieBranchAnnulus(e,t.children[r],n)},resetView:function(e){e=e||Dt;var t=!An(e,Pt);kn(e),this.drawBackgroundCircle(gt),this.drawInternal(this.boundingBox,!1,!0),t&&et.notify(l.createNewRootNodeSignal(this,e.id,this.id))}}),qt=function(){kt=0,Ot=[],Nt={};for(var e,t=dt.getDataView(),n=t.getDataTable(),i=n.getData(),r=0,o=i.length;o>r;r++)e=i[r],Nt[e[nt]]=Gt(e);Yt()},Gt=function(e){return{data:e,children:[],startAngle:null,endAngle:null,levelIndex:0,isVisible:!0,parent:null,color:N.getColor(e[tt],!1),id:e[nt],isSelectable:!e[at],isLeaf:e[st],customTooltipFormat:e[lt],customLabelFormat:e[ut],containsAncestor:function(e){return this.id===e.id?!0:this.parent?this.parent.containsAncestor(e):!1},ancestorPathDepth:function(e,t){return this.id===e.id?t||0:this.parent?this.parent.ancestorPathDepth(e,(t||0)+1):-1}}},Xt=function(e,t){e.color=N.getColor(t[tt],!1),e.isSelectable=!t[at],e.customTooltipFormat=t[lt],e.customLabelFormat=t[ut],e.data=t},Yt=function(){vn(function(e){var t=e.data[it];if(null!=t&&""!=t){var n=Nt[e.data[it]];n.children.push(e),e.parent=n,e.isSelectable=e.isSelectable&&n.isSelectable}else Dt=e}),M&&M.sortByWeight&&Jt(Dt),Kt(Dt),kt+=1,At=M?M.numVisibleLevels||kt:kt,At=Math.min(At,kt)},Kt=function(e){var t=e.levelIndex;t>kt&&(kt=t);for(var n=0,i=e.children.length;i>n;n++)e.children[n].levelIndex=t+1,Kt(e.children[n])},Jt=function(e){e.children.sort(rn);for(var t=0,n=e.children.length;n>t;t++)Jt(e.children[t])},Qt=function(e,t,n,i,r){var o=t*(e.data[ot]/n);e.startAngle=i,e.endAngle=i+o+r;var a=Math.abs(e.endAngle-e.startAngle);return a>w&&y>a?(r=a-w,e.endAngle-=r):r=0,r},Zt=function(e){for(var t,n=e.startAngle,i=e.endAngle-e.startAngle,r=0,o=e.data[ot],a=0,s=e.children.length;s>a;a++)t=e.children[a],r=Qt(t,i,o,n,r),Zt(t),n=t.endAngle},en=function(e,t){return e>=t&&At>e-t},tn=function(e,t){for(var n=0;kt>n;n++){if(t[n]=[],nn(n,e,t[n]),void 0!==M.rootNodeRadiusScale){var i=M.rootNodeRadiusScale,r=Tt*i;if(n-1===Mt)I=r;else{var o=(wt-r)/Math.min(At,kt-Mt),a=n-Mt,s=a*o;I=a>0?r+s:-s}}else I=Tt*(n-Mt);Rt[n]=I}Rt[kt]=wt},nn=function(e,t,n){if(t.data[rt]===e+1)return t.isVisible=!0,n.push(t),void 0;for(var i=0,r=t.children.length;r>i;i++)nn(e,t.children[i],n)},rn=function(e,t){var n=e.data[ot],i=t.data[ot];return i>n?1:n==i?0:-1},on=function(e){var t=function(e,t){var n=e.length,i=0,r=0,o=[],a="0123456789.";for(r=0;n>r;++r){var s=e[r];if(T.indexOf(s)>=0){var l=n-1>r&&a.indexOf(e[r+1])>=0;l&&"-"==s||(o.push(e.substring(i,r)),t.push(s),i=r+1)}}return r!==i&&o.push(e.substring(i,n)),o},n=Math.sqrt(2)*Rt[Mt+1];if($t){var i=Rt[Mt+1];mt.save(),mt.strokeStyle="blue",mt.beginPath(),mt.moveTo(Et,St+i),mt.lineTo(Et,St-i),mt.moveTo(Et-i,St),mt.lineTo(Et+i,St),mt.stroke(),mt.restore()}for(var r=M.rootLabelFont,o=!1,a=M.fontSize,s=.5,l=M.fontSize-3;!o&&a>=l;){r?(bt.setFontString(r),o=!0):bt.setFontString(h.buildFontString(a,M.fontFamily));var u=bt.getFontHeight()+4;j=Et,H=St;var c,d,f,p,g=[],m="",v=[],y=[],b=t(e,v),_=0;for(c=0;c<b.length;c++){f=b[c].split("\n");var x=c<b.length-1?v[c]:" ";for(d=0;d<f.length;d++)p=bt.measureString(f[d])+Ut,(0!==d||p+_>n)&&m.length>0?(y.push(_),_=p,g.push(m),m=f[d]+x):(_+=p,m+=f[d]+x)}for(g.push(m),y.push(_),c=0;c<g.length;c++)g[c]=g[c].replace(/\s+$/,"");H-=u*(g.length-1)/2,St-n/2>H?a-=s:o=!0}if(o){var w=H;for(c=0;c<g.length;c++)bt.drawBatchString(j,H,g[c]),H+=u;for(c=0;c<g.length;c++){if($t){var C=y[c]/2,E=u/2,S=j-C,k=w-E;mt.save(),mt.beginPath(),mt.strokeStyle="red",Q&&M.log.debug("Drawing l: "+S+" t: "+k+" w: "+y[c]+" h: "+u),mt.rect(S,k,y[c],u),mt.moveTo(j,k),mt.lineTo(j,k+u),mt.closePath(),mt.stroke(),mt.restore()}w+=u}}},an=function(e,t,n,i,r){var o=bt.getFontHeight()+4;if(j=e,H=t,r==Pt)return V=r.label||h.parseFormattedString(M.rootLabelFormat,dt,r.data,yt,M).fullText,on(V),void 0;V=r.label||h.parseFormattedString(M.innerLabelFormat,dt,r.data,yt,M).fullText,0!=n&&(O=n+(i-n)/2,F=r.startAngle+(r.endAngle-r.startAngle)/2,j=e+O*Math.cos(F),H=t+O*Math.sin(F));var a,s=V.split("\n");for(H-=o*s.length/2,a=0;a<s.length;a++)z=bt.measureString(s[a])/2,dn(j+z,H+Ft,e,t,n,i,r.startAngle,r.endAngle)&&dn(j-z,H+Ft,e,t,n,i,r.startAngle,r.endAngle)&&dn(j+z,H-Ft,e,t,n,i,r.startAngle,r.endAngle)&&dn(j-z,H-Ft,e,t,n,i,r.startAngle,r.endAngle)&&bt.drawBatchString(j,H,s[a]),H+=o},sn=function(e,t,n,i,o,a){r.drawCircle(e,t,n,i,null,o||"grey",a||2)},ln=function(e,t,n,i,r){Ct>0&&sn(e,t,n,Ct,i,r)},un=function(e,t){L=Math.round(Et+I*Math.cos(t.startAngle)),B=Math.round(St+I*Math.sin(t.startAngle)),e.arc(Et,St,I,t.startAngle,t.endAngle,!1),e.arc(Et,St,R,t.endAngle,t.startAngle,!0),e.lineTo(L,B)},cn=function(e,t,n,i,r){return F=Math.asin(i/r),(0>n&&i>0||0>n&&0>i)&&(F=Math.PI-F),F>=e&&t>=F},dn=function(e,t,n,i,r,o,a,s){return $=e-n,U=t-i,I=Math.sqrt($*$+U*U),I>r&&o>I?cn(a,s,$,U,I):!1},hn=function(){return Math.min(Mt+At,kt)},fn=function(e){var t,n,i,r=hn()-1;for(_t.resetOuterLabelPosition(),W=r;W>=0;W--)if(G=Ot[W],t=Rt[W+1],!(0>=t)){for(n=Rt[W],q=0;q<G.length;q++)i=G[q],i.isVisible&&(X=i.startAngle,Y=i.endAngle,Y>X&&(pt.fillStyle=i.color,pt.beginPath(),pt.moveTo(Et,St),Math.abs(X-Y)===y?pt.arc(Et,St,t,0,y,!1):pt.arc(Et,St,t,i.startAngle,i.endAngle,!1),pt.fill()));if(W===Mt&&W!==r&&void 0!==M.rootNodeTint&&(pt.fillStyle="rgba(255, 255, 255, "+M.rootNodeTint+")",pt.arc(Et,St,t,0,y,!1),pt.fill()),e)for(_t.setPie(Et,St,wt,Wt.boundingBox),q=0;q<G.length;q++)i=G[q],i.isVisible&&(X=i.startAngle,Y=i.endAngle,Y>X&&(M&&M.useInnerLabels||An(i,Pt))&&an(Et,St,n,t,i),1==i.levelIndex-Pt.levelIndex&&M&&M.useOuterLabels&&_t.placeOuterLabel(Et,St,wt+M.minOuterLabelDistance,wt+M.maxOuterLabelDistance,i));if((!jt||M&&M.animateWithAnnulus)&&pt.lineWidth>0){for(pt.strokeStyle=M.childBorderColor,pt.lineWidth=M.childBorderThickness,pt.beginPath(),q=0;q<G.length;q++)i=G[q],i.isVisible&&(X=i.startAngle,Y=i.endAngle,Y>X&&W>Mt&&(pt.moveTo(Et,St),W===r||i.parent&&!i.isLeaf?pt.arc(Et,St,t,i.startAngle,i.endAngle,!1):(Ht=Math.round(Et+t*Math.cos(i.startAngle)),Vt=Math.round(St+t*Math.sin(i.startAngle)),pt.lineTo(Ht,Vt)),An(i.parent,Pt)&&(pt.moveTo(Et,St),pt.arc(Et,St,n,i.startAngle,i.endAngle,!0))));pt.stroke()}t=n}},pn=function(){if(Tt>0){var e=Rt[Mt+1];pt.moveTo(Et+e,St),pt.arc(Et,St,e,0,y,!1)}},gn=function(e,t,n){t.isVisible&&(X=t.startAngle,Y=t.endAngle,R=Rt[Mt+1],Y>X&&(n=n||X,Ht=Math.round(Et+R*Math.cos(n)),Vt=Math.round(St+R*Math.sin(n)),e.moveTo(Ht,Vt),Ht=Math.round(Et+wt*Math.cos(n)),Vt=Math.round(St+wt*Math.sin(n)),e.lineTo(Ht,Vt)))},mn=function(){var e;if(K=M?M.rootBorderThickness:2,e=(pt.lineWidth<K||M.rootBorderColor!==M.childBorderColor)&&K>0,pt.lineWidth=K,pt.strokeStyle=M.rootBorderColor,e&&(W=Mt+1,G=Ot[W])){for(R=Rt[W],pt.beginPath(),q=0;q<G.length;q++)gn(pt,G[q]);e&&pt.stroke()}K>0&&(pn(),pt.stroke())},vn=function(e){var t;for(t in Nt)Nt.hasOwnProperty(t)&&e(Nt[t])},yn=function(e){var t,n;for(t=0,n=hn();n>t;t++)e.push(Rt[t])},bn=function(e,t,n,i,r,o){var a=o*t*(e.data[ot]/n);e.startAngle=i,e.endAngle=Math.max(i+a,r)},_n=function(e,t,n,i,r,o){var a=o*t*(e.data[ot]/n);e.endAngle=i,e.startAngle=Math.min(i-a,r)},xn=function(e,t,n,i,r){var o,a,s,l,u,c,d,h,f=i-e.endAngle,p=n-e.startAngle;if(e.startAngle=n,e.endAngle=i,t||Zt(e),s=e.parent){for(u=s.children.indexOf(e),c=s.children.length,d=s.endAngle-s.startAngle,h=s.data[ot],a=e.endAngle,o=u+1;c>o;o++)l=s.children[o],l!==t&&(bn(l,d,h,a,e.startAngle,r),a=l.endAngle,Zt(l));for(a=e.startAngle,o=u-1;o>=0;o--)l=s.children[o],l!==t&&(_n(l,d,h,a,e.endAngle,r),a=l.startAngle,Zt(l));s!==Pt&&xn(s,e,Math.max(b,s.startAngle+p),Math.min(_,s.endAngle+f),r)}},wn=function(e,t){var n=e[t++],i=e[t++],r=e[t++];return xn(jt,null,n,i,r),t},Cn=function(e,t){D&&D.startFrame();var n,i,r=0;t.drawBackgroundCircle(pt),jt.startAngle=e[r++],jt.endAngle=e[r++],i=e[r++];var o;for(n=0,o=kt+1;o>n;n++)Rt[n]=e[r++];t.drawPieSlice(pt,jt,!0),D&&D.endFrame()},Tn=function(e,n,i){D&&D.startFrame();var r,o,a=0;for(a=wn(e,a),r=0,o=hn();o>r;r++)Rt[r]=e[a++];n.drawBackgroundCircle(pt),i===t.ANIMATE_SINGLE_FILL?n.drawPieSlice(pt,jt,!1,e[2]):fn(!1),n.drawPieSlice(pt,jt,!0,e[2]),D&&D.endFrame()},En=function(){Tt=wt/Math.min(At,kt-Mt)},Sn=function(e){for(var t=kt-1;t>=0;--t)if(Rt[t]<e&&Rt[t+1]>e)return t;return 0},kn=function(e,t,n){null!==e&&(Z.beginGroup("MultiLevelPie (reroot)"),Pt=e,Mt=e.data[rt]-1,En(),e.startAngle=t||b,e.endAngle=n||_,Zt(e),tn(e,Ot),Z.endGroup(J),xt=null)},An=function(e,t){return e.id===t.id},Mn=function(e,t){e.levelIndex===Mt+1?(X===e.startAngle&&(t[0]=X),Y===e.endAngle&&(t[1]=Y)):Mn(e.parent,t)},Nn=function(e){var t=[!1,!1];return X=e.startAngle,Y=e.endAngle,Mn(e.parent,t),t},Dn=function(e){var t=e.data[rt]-1,n=en(t,Mt)||e.containsAncestor(It);return e.isVisible=n,n},Pn=function(e){et.notify(l.createNavAnimationBeginSignal(this));var t=[0],n=[1],i=function(t){Wt.drawBackgroundCircle(pt),P.isComplete?(Wt.setSliceAsRootNoAnimate(e),et.notify(l.createNavAnimationEndSignal(this))):r.drawCircle(pt,Et,St,Math.max(.001,Math.abs(Math.cos(Math.PI*t[0])))*wt,null,M.selectionHilightBorderColor,M.rootBorderThickness)};P=s.createAnimationTrack(o,t,n,i,s.customEase),bt.clear(),D&&D.reset(),P.run(M.zoomDurationMilliseconds)},In=function(e){var t=Wt.findSelectedPie(e.x-Wt.offsetX,e.y-Wt.offsetY);return!t&&M.clickOuterLabelToDrill&&(t=_t.getPieForLabel(e.x,e.y)),t},On=function(e){if(e){if(!e.isSelectable)return!1;if(e.children.length||M.allowLeafDrillDown)return!0;if(An(Pt,e)&&!An(Pt,Dt))return!0}return!1},Rn=function(e){var t=In(e);return t&&On(t)?t:null};return Wt.setupData(),Wt}};return E}),define("oven/library/vislet",["oven/legacy/library/layers/layer","oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelUtil"],function(e,t,n){var i,r=0,o=1023,a={createVislet:function(a,s,l,u,c,d){var h=a.getPlatform();i||(i=t.window.get());var f=e.createLayer(a,h.createCanvas(u),s?h.createCanvas(c):null,l?h.createCanvas(d):null);return f.canvas.setZIndex(r++),s&&f.overlay.setZIndex(r++),l&&f.textOverlay.setZIndex(r++),f.setPosition=function(e,t,r,a){var s=this.canvas.width!==r||this.canvas.height!==a;this.canvas.setPosition(e,t,r,a);var l,u,c,d,h=i.devicePixelRatio;return s&&h>1&&this.canvas.isHiRes&&(r=Math.min(o,this.canvas.width),a=this.canvas.height,l=r,u=a,n.log.trace("vislet","setting canvas width: "+r*h),this.canvas.width=r*h,this.canvas.height=a*h,this.canvas.style.width=l+"px",this.canvas.style.height=u+"px",c=this.canvas.getContext("2d"),c.scale(h,h)),this.overlay&&(d=this.overlay.width!==Math.max(0,r)||this.overlay.height!==Math.max(0,a),this.overlay.setPosition(e,t,Math.max(0,r),Math.max(0,a)),d&&h>1&&this.overlay.isHiRes&&(r=Math.min(o,this.overlay.width),a=this.overlay.height,l=r,u=a,this.overlay.width=r*h,this.overlay.height=a*h,this.overlay.style.width=l+"px",this.overlay.style.height=u+"px",c=this.overlay.getContext("2d"),c.scale(h,h))),this.textOverlay&&(d=this.textOverlay.width!==Math.max(0,r)||this.textOverlay.height!==Math.max(0,a),this.textOverlay.setPosition(e,t,Math.max(0,r),Math.max(0,a)),d&&h>1&&this.textOverlay.isHiRes&&(r=Math.min(o,this.textOverlay.width),a=this.textOverlay.height,l=r,u=a,this.textOverlay.width=r*h,this.textOverlay.height=a*h,this.textOverlay.style.width=l+"px",this.textOverlay.style.height=u+"px",c=this.textOverlay.getContext("2d"),c.scale(h,h))),this.offsetX=e,this.offsetY=t,this.applyOffsetsToLayers&&this.applyOffsetsToLayers(),this},f.contentLayers=[],f.leftAxes=[],f.topAxes=[],f.rightAxes=[],f.bottomAxes=[],f}};return a}),define("oven/unvetted/library/interaction",["oven/library/utility/objects"],function(e){var t;return t={INACTIVE:0,PAN:"pan",ZOOM:"zoom",RESET:"reset",TOUCH_HOLD:"touch_hold",MAP:"map",BUTTON:"button",FILTER:"filter",ANNOTATE:"annotate",SELECT:"select",createInteraction:function(t){var n={state:this.INACTIVE,behavior:null,layer:null,boundingBox:null,interactionType:t,bindBehavior:function(e){this.behavior=e,e.interactions&&e.interactions.push(this)},bindComponent:function(e){this.layer=e,e.interactions||(e.interactions=[]),e.interactions[this.interactionType]=this},bindLayer:function(e){this.bindComponent(e)},bindVislet:function(t){var n=this;return e.iterate(t.contentLayers,function(e){n.bindLayer(e)}),this}};return n}}}),define("oven/unvetted/library/interactions/panInteraction",["oven/unvetted/contracts/events","oven/unvetted/contracts/platform","oven/unvetted/library/interaction","oven/library/utility/objects"],function(e,t,n,i){var r=0,o={PANNING:1,AWAITING_CLICK:2,createPanInteraction:function(o){var a,s=this,l=o.getPlatform(),u=o.getEventManager(),c=i.assimilate(n.createInteraction(),{id:"panInteraction"+r++,interactionType:n.PAN,startX:null,startY:null,currentX:null,currentY:null,notify:function(i){if(i.button!==e.MOUSE_BUTTON_LEFT)return!1;switch(i.type){case e.MOUSE_DOWN:if(this.state===n.INACTIVE)return this.state=s.PANNING,this.startX=i.x,this.startY=i.y,this.currentX=i.x,this.currentY=i.y,u.notify(e.createInteractionEvent(e.INTERACTION_CAPTURE,this,i.source,i)),!0;break;case e.MOUSE_UP:if(this.state===s.PANNING)return this.startX===this.currentX&&this.startY===this.currentY?-1===l.featureFlags.indexOf(t.DRAG)?(this.state=s.AWAITING_CLICK,!0):(this.state=n.INACTIVE,!1):(this.onPanEnd(i),!0);if(this.state===s.AWAITING_CLICK)return this.startX===this.currentX&&this.startY===this.currentY?(this.state=n.INACTIVE,!1):(this.onPanEnd(i),!0);break;case e.MOUSE_MOVE:case e.HIGHLIGHT:if(!(this.state!==s.PANNING&&this.state!==s.AWAITING_CLICK||i.x===this.currentX&&i.y===this.currentY))return a=e.createPanEvent(e.CHART_PAN,i.x-this.currentX,i.y-this.currentY,this.layer),(this.behavior||u).notify(a),this.currentX=i.x,this.currentY=i.y,!0}return!1},setBoundingBox:function(e){this.boundingBox=e},onPanEnd:function(t){this.state=n.INACTIVE,a=e.createPanEvent(e.CHART_PAN_END,t.x-this.currentX,t.y-this.currentY,this.layer),(this.behavior||u).notify(a)}});return c}};return o}),define("oven/legacy/library/layers/splitter",["oven/unvetted/library/boundingBox","oven/legacy/library/layers/layer","oven/unvetted/library/interactions/panInteraction","oven/unvetted/contracts/events","oven/unvetted/contracts/platform","oven/unvetted/contracts/commonConfig","oven/library/utility/objects","oven/unvetted/library/utility/compatibility"],function(e,t,n,i,r,o,a){var s=0,l={SPLITTER_HORIZONTAL:1,SPLITTER_VERTICAL:2,createSplitter:function(o,l,u,c,d){var h=l.getContext("2d"),f=n.createPanInteraction(o,l),p=this,g=!1,m=!1,v=a.assimilate(t.createLayer(o,l),{id:"splitter"+s++,orientation:d,backgroundGradient:null,highlightGradient:null,draw:function(e){e=e?e.intersection(this.boundingBox):this.boundingBox,e&&(h.fillStyle=m?this.highlightGradient:this.backgroundGradient,e.fillRect(h))},drawResizingImages:function(e){var t=a.clone(this.boundingBox);t.offset(this.offsetX||0,this.offsetY||0),e.fillStyle=m?this.highlightGradient:this.backgroundGradient,t.fillRect(e)},setBoundingBox:function(n){n!==this.boundingBox&&(this.boundingBox&&this.boundingBox.clearRect(h),this.buildGradient(n),this.boundingBox=n,f.setBoundingBox(n),-1!==platform.featureFlags.indexOf(r.TOUCH)&&(this.pickBoundingBox=e.createBoundingBox(this.orientation===p.SPLITTER_HORIZONTAL?this.boundingBox.left:this.boundingBox.left-t.touchPaddingRadius,this.orientation===p.SPLITTER_HORIZONTAL?this.boundingBox.top-t.touchPaddingRadius:this.boundingBox.top,this.orientation===p.SPLITTER_HORIZONTAL?this.boundingBox.width:this.boundingBox.width+t.touchPadding,this.orientation===p.SPLITTER_HORIZONTAL?this.boundingBox.height+t.touchPadding:this.boundingBox.height)))},notify:function(e){var t=!1,n=m,o=!1;return(e.isMouseEvent||e.type===i.CHART_PAN_END)&&(e.type===i.MOUSE_LEAVE||e.type===i.CHART_PAN_END?(c&&c.log&&c.log.verbose&&c.log.verbose("Splitter mouse leave / pan end"),g&&(g=!1,u.popCursor())):e.isMouseEvent&&!g&&(t=g=!0,u.pushCursor(this.orientation===p.SPLITTER_HORIZONTAL?r.CURSOR_RESIZE_ROW:r.CURSOR_RESIZE_COL)),o=f.notify(e),m=o&&g,n!==m&&this.draw()),o||t},setOrientation:function(e){this.orientation=e||p.SPLITTER_HORIZONTAL,this.boundingBox&&this.buildGradient(this.boundingBox)},buildGradient:function(e){this.orientation===p.SPLITTER_HORIZONTAL?(this.backgroundGradient=h.createLinearGradient(e.left,e.top,e.left,e.bottom),this.highlightGradient=h.createLinearGradient(e.left,e.top,e.left,e.bottom)):(this.backgroundGradient=h.createLinearGradient(e.left,e.top,e.right,e.top),this.highlightGradient=h.createLinearGradient(e.left,e.top,e.right,e.top)),this.backgroundGradient.addColorStop(0,c.splitterBorderColor||"#555"),this.backgroundGradient.addColorStop(.25,c.splitterColor||"#aaa"),this.backgroundGradient.addColorStop(.75,c.splitterColor||"#aaa"),this.backgroundGradient.addColorStop(1,c.splitterBorderColor||"#555"),this.highlightGradient.addColorStop(0,c.splitterColor||"#555"),this.highlightGradient.addColorStop(.25,c.splitterBorderColor||"#aaa"),this.highlightGradient.addColorStop(.75,c.splitterBorderColor||"#aaa"),this.highlightGradient.addColorStop(1,c.splitterColor||"#555")}});return v.setOrientation(d),f.bindLayer(v),v}};return l}),define("oven/legacy/library/layers/performance",["oven/legacy/library/layers/layer","oven/library/utility/objects","oven/unvetted/library/utility/arrays","oven/legacy/library/utility/queue","oven/unvetted/library/charting"],function(e,t,n,i,r){var o=0,a={initialize:function(n,a,s){var l,u,c,d=this,h=a.getContext("2d"),f=s.showPerformanceStats,p=s.performanceFrameCount||20,g=Math.max(r.fontSizeMin,s&&s.fontSize?s.fontSize:r.fontSize),m=s&&s.fontFamily?s.fontFamily:r.fontFamily,v=g,y=s&&s.performanceTextAlign||"right";return l=f?d.createPerformanceTracker(function(){this.startTime=+new Date},function(){this.frames.push(+new Date-this.startTime),d.updateMetrics(this),this.frame++,this.render()},function(){return this.frames=i.createQueue(p),this.frame=0,this},function(){h&&this.boundingBox&&(h.save(),u&&h.clearRect(this.boundingBox.left,this.boundingBox.top,this.boundingBox.width,this.boundingBox.height),h.textAlign=y,h.textBaseline="top",u=d.getMetricString(this),v=r.getFontForText(h,u,Math.min(a.width,this.boundingBox.width),m,g),c=h.measureText(u).width,this.boundingBox.width=Math.max(this.boundingBox.width,c),h.fillStyle="white",h.fillText(u,this.boundingBox[y],this.boundingBox.top),h.restore())},function(e){this.boundingBox&&h&&(h.clearRect(this.boundingBox[h.textAlign],this.boundingBox.top,this.boundingBox.width,this.boundingBox.height),u=null),this.boundingBox=e}):d.createPerformanceTracker(function(){},function(){},function(){return this},function(){},function(){}),l.id="performance"+o++,t.assimilate(e.createLayer(n,a),l)},createPerformanceTracker:function(e,t,n,i,r){var o={startFrame:e,endFrame:t,reset:n,render:i,setBoundingBox:r,notify:function(){return!1}};return o.reset()
},updateMetrics:function(e){return e.mean=e.frames.average(),e.variance=e.frames.variance(e.mean),e.stddev=e.frames.stddev(e.variance),e.cv=e.frames.cv(e.stddev,e.mean),e},getMetricString:function(e){var t=[];return t.push("Mean: ",e.mean.toFixed(2),"ms    Max: ",e.frames.max().toFixed(0),"ms    Min: ",e.frames.min().toFixed(0),"ms    StdDev: ",e.stddev.toFixed(2),"ms    CV: ",e.cv.toFixed(2)),t.join("")},getGroupString:function(e){var t=[],n=e.average(),i=e.variance(n),r=e.stddev(i),o=n?e.cv(r,n):0;return t.push("Mean: ",n.toFixed(2),"ms    StdDev: ",r.toFixed(2),"ms    CV: ",o.toFixed(2)),t.join("")}};return a}),define("oven/unvetted/library/utility/numberFormat",[],function(){var e={isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},readNumber:function(e){var t=parseFloat(e.replace(/\,/g,""));return isNaN(t)?0:t},addOrdinalSuffix:function(e){if(-1===[11,12,13].indexOf(e%100))switch(e%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},createNumberFormat:function(){return{format:function(e,t){this.NumberFormat(),this.setInputDecimal("."),this.setNumber(e),this.setCurrencyValue("$"),this.setCurrencyPosition(this.LEFT_OUTSIDE),this.setNegativeFormat(this.LEFT_DASH),this.setNegativeRed(!1),this.setSeparators(!0,",",",");var n;if(t&&t.length>0){var i=t.indexOf(".");this.setPlaces(i>-1?t[i+1]:0,!1),this.setCurrency(t.indexOf("$")>-1),n=this.toFormatted(),e>0&&t.indexOf("+")>-1&&(n="+"+n),t.indexOf("%")>-1&&(n+="%")}else this.setPlaces(0,!1),this.setCurrency(!1),n=this.toFormatted();return n},NumberFormat:function(e,t){this.VERSION="Number Format v1.5.4",this.COMMA=",",this.PERIOD=".",this.DASH="-",this.LEFT_PAREN="(",this.RIGHT_PAREN=")",this.LEFT_OUTSIDE=0,this.LEFT_INSIDE=1,this.RIGHT_INSIDE=2,this.RIGHT_OUTSIDE=3,this.LEFT_DASH=0,this.RIGHT_DASH=1,this.PARENTHESIS=2,this.NO_ROUNDING=-1,this.num=null,this.numOriginal=null,this.hasSeparators=!1,this.separatorValue=null,this.inputDecimalValue=null,this.decimalValue=null,this.negativeFormat=null,this.negativeRed=null,this.hasCurrency=null,this.currencyPosition=null,this.currencyValue=null,this.places=null,this.roundToPlaces=null,this.truncate=null,null==t?this.setNumber(e,this.PERIOD):this.setNumber(e,t),this.setCommas(!0),this.setNegativeFormat(this.LEFT_DASH),this.setNegativeRed(!1),this.setCurrency(!1),this.setCurrencyPrefix("$"),this.setPlaces(2)},setInputDecimal:function(e){this.inputDecimalValue=e},setNumber:function(e,t){null!=t&&this.setInputDecimal(t),this.numOriginal=e,this.num=this.justNumber(e)},toUnformatted:function(){return this.num},getOriginal:function(){return this.numOriginal},setNegativeFormat:function(e){this.negativeFormat=e},setNegativeRed:function(e){this.negativeRed=e},setSeparators:function(e,t,n){this.hasSeparators=e,null==t&&(t=this.COMMA),null==n&&(n=this.PERIOD),this.decimalValue=t==n?n==this.PERIOD?this.COMMA:this.PERIOD:n,this.separatorValue=t},setCommas:function(e){this.setSeparators(e,this.COMMA,this.PERIOD)},setCurrency:function(e){this.hasCurrency=e},setCurrencyValue:function(e){this.currencyValue=e},setCurrencyPrefix:function(e){this.setCurrencyValue(e),this.setCurrencyPosition(this.LEFT_OUTSIDE)},setCurrencyPosition:function(e){this.currencyPosition=e},setPlaces:function(e,t){this.roundToPlaces=!(e==this.NO_ROUNDING),this.truncate=null!=t&&t,this.places=0>e?0:e},addSeparators:function(e,t,n,i){e+="";var r=e.indexOf(t),o="";-1!=r&&(o=n+e.substring(r+1,e.length),e=e.substring(0,r));for(var a=/(\d+)(\d{3})/;a.test(e);)e=e.replace(a,"$1"+i+"$2");return e+o},toFormatted:function(){var e,t=this.num;new Array(2),this.roundToPlaces?(t=this.getRounded(t),e=this.preserveZeros(Math.abs(t))):e=this.expandExponential(Math.abs(t)),e=this.hasSeparators?this.addSeparators(e,this.PERIOD,this.decimalValue,this.separatorValue):e.replace(new RegExp("\\"+this.PERIOD),this.decimalValue);var n="",i="",r="",o="",a="",s="",l="",u="",c=this.negativeFormat==this.PARENTHESIS?this.LEFT_PAREN:this.DASH,d=this.negativeFormat==this.PARENTHESIS?this.RIGHT_PAREN:this.DASH;return this.currencyPosition==this.LEFT_OUTSIDE?(0>t&&((this.negativeFormat==this.LEFT_DASH||this.negativeFormat==this.PARENTHESIS)&&(o=c),(this.negativeFormat==this.RIGHT_DASH||this.negativeFormat==this.PARENTHESIS)&&(a=d)),this.hasCurrency&&(n=this.currencyValue)):this.currencyPosition==this.LEFT_INSIDE?(0>t&&((this.negativeFormat==this.LEFT_DASH||this.negativeFormat==this.PARENTHESIS)&&(i=c),(this.negativeFormat==this.RIGHT_DASH||this.negativeFormat==this.PARENTHESIS)&&(l=d)),this.hasCurrency&&(r=this.currencyValue)):this.currencyPosition==this.RIGHT_INSIDE?(0>t&&((this.negativeFormat==this.LEFT_DASH||this.negativeFormat==this.PARENTHESIS)&&(i=c),(this.negativeFormat==this.RIGHT_DASH||this.negativeFormat==this.PARENTHESIS)&&(l=d)),this.hasCurrency&&(s=this.currencyValue)):this.currencyPosition==this.RIGHT_OUTSIDE&&(0>t&&((this.negativeFormat==this.LEFT_DASH||this.negativeFormat==this.PARENTHESIS)&&(o=c),(this.negativeFormat==this.RIGHT_DASH||this.negativeFormat==this.PARENTHESIS)&&(a=d)),this.hasCurrency&&(u=this.currencyValue)),e=n+i+r+o+e+a+s+l+u,this.negativeRed&&0>t&&(e='<span style="color:red">'+e+"</span>"),e},toPercentage:function(){var e=100*this.num;return e=this.getRounded(e),e+"%"},getZeros:function(e){var t,n="";for(t=0;e>t;t++)n+="0";return n},expandExponential:function(e){if(isNaN(e))return e;var t,n=parseFloat(e)+"",i=n.toLowerCase().indexOf("e");if(-1!=i){var r=n.toLowerCase().indexOf("+"),o=n.toLowerCase().indexOf("-",i),a=n.substring(0,i);-1!=o?(t=n.substring(o+1,n.length),a=this.moveDecimalAsString(a,!0,parseInt(t))):(-1==r&&(r=i),t=n.substring(r+1,n.length),a=this.moveDecimalAsString(a,!1,parseInt(t))),n=a}return n},moveDecimalRight:function(e,t){var n="";return n=null==t?this.moveDecimal(e,!1):this.moveDecimal(e,!1,t)},moveDecimalLeft:function(e,t){var n="";return n=null==t?this.moveDecimal(e,!0):this.moveDecimal(e,!0,t)},moveDecimalAsString:function(e,t,n){var i=arguments.length<3?this.places:n;if(0>=i)return e;var r,o=e+"",a=this.getZeros(i),s=new RegExp("([0-9.]+)");if(t)o=o.replace(s,a+"$1"),r=new RegExp("(-?)([0-9]*)([0-9]{"+i+"})(\\.?)"),o=o.replace(r,"$1$2.$3");else{var l=s.exec(o);null!=l&&(o=o.substring(0,l.index)+l[1]+a+o.substring(l.index+l[0].length)),r=new RegExp("(-?)([0-9]*)(\\.?)([0-9]{"+i+"})"),o=o.replace(r,"$1$2$4.")}return o=o.replace(/\.$/,"")},moveDecimal:function(e,t,n){var i="";return i=null==n?this.moveDecimalAsString(e,t):this.moveDecimalAsString(e,t,n),parseFloat(i)},getRounded:function(e){return e=this.moveDecimalRight(e),e=this.truncate?e>=0?Math.floor(e):Math.ceil(e):Math.round(e),e=this.moveDecimalLeft(e)},preserveZeros:function(e){var t;if(e=this.expandExponential(e),this.places<=0)return e;var n=e.indexOf(".");if(-1==n)for(e+=".",t=0;t<this.places;t++)e+="0";else{var i=e.length-1-n,r=this.places-i;for(t=0;r>t;t++)e+="0"}return e},justNumber:function(e){var t=e+"",n=!1;-1!=t.indexOf("%")&&(t=t.replace(/\%/g,""),n=!0);var i=new RegExp("[^\\"+this.inputDecimalValue+"\\d\\-\\+\\(\\)eE]","g");t=t.replace(i,"");var r=new RegExp("["+this.inputDecimalValue+"]","g"),o=r.exec(t);if(null!=o){var a=t.substring(o.index+o[0].length);t=t.substring(0,o.index)+this.PERIOD+a.replace(r,"")}return t.charAt(t.length-1)==this.DASH?(t=t.substring(0,t.length-1),t="-"+t):t.charAt(0)==this.LEFT_PAREN&&t.charAt(t.length-1)==this.RIGHT_PAREN&&(t=t.substring(1,t.length-1),t="-"+t),t=parseFloat(t),isFinite(t)||(t=0),n&&(t=this.moveDecimalLeft(t,2)),t}}}};return e}),define("oven/unvetted/library/utility/benchmark",["oven/legacy/library/layers/layer","oven/library/utility/objects","oven/unvetted/library/utility/arrays","oven/unvetted/library/utility/numberFormat","oven/unvetted/kernel/kernelEnvironment"],function(e,t,n,i,r){var o,a,s=function(e){if(e.average){var t=e.average(),n=e.variance(t),i=e.stddev(n),r=t?e.cv(i,t):0;return{min:e.min(e),max:e.max(e),mean:t,variance:n,deviation:i,cv:r,hits:e.length()}}},l={initialize:function(n,l,u){o||(o=r.window.get(),a=r.document.get());var c,d=u&&u.benchmarkTest&&u.benchmarkDuration>0;if(c=d?this.createBenchmark(function(){0===this.framesRendered&&(this.benchmarkStart=(new Date).getTime(),this.renderStart=o.mozPaintCount||0),this.canvasWidth=l.width||l.offsetWidth,this.canvasHeight=l.height||l.offsetHeight,this.tickStart=(new Date).getTime()},function(){var e=(new Date).getTime(),n=e-this.tickStart;this.framesRendered++,this.tickFrames[this.tickFrames.length]=n,this.distribution[Math.floor(n/10)]|=0,this.distribution[Math.floor(n/10)]++,o.performance&&o.performance.memory&&this.memories.push(t.clone(o.performance.memory)),e>this.benchmarkStart+this.benchmarkTimeout&&(platform.eventProvider.stopTest&&platform.eventProvider.stopTest(),this.displayResults(),this.startFrame=this.endFrame=this.reset=this.render=function(){})},function(){return this.distribution=[],this.tickFrames=[],this.memories=[],this.benchmarkTimeout=1e3*u.benchmarkDuration,this.enabled=!0,this.framesRendered=0,this},function(){}):this.createBenchmark(function(){},function(){},function(){return this},function(){}),void 0!=l){var h,f;void 0==this._document().getElementById("results")&&(h=this._document().createElement("div"),h.id="results",h.style.display="none",h.style.position="relative",h.style.zIndex=e.MAX_Z,h.style.background="black",l.offsetParent.appendChild(h)),void 0==this._document().getElementById("resultstoggle")&&(f=this._document().createElement("div"),f.id="resultstoggle",f.innerHTML="Show Benchmark Results",f.style.backgroundColor="orange",f.style.textAlign="center",f.style.padding="3px",f.style.border="grey 1px solid",f.style.display="none",f.style.zIndex=e.MAX_Z,f.style.position="relative",f.onclick=function(){f.style.display="none",h.style.display="block"},l.offsetParent.appendChild(f))}return c.displayResults=function(){var e,t,n,i,r,l,u,c,d,h,f,p,g=this.distribution,m=this.tickFrames,v=platform.getGroups(),y=o.mozPaintCount?o.mozPaintCount-this.renderStart:this.framesRendered,b=a.getElementById("results"),_=a.createElement("table");_.insertRow(-1).insertCell(-1).innerHTML="Browser FPS",_.rows[_.rows.length-1].insertCell(-1).innerHTML=(1e3*(y/this.benchmarkTimeout)).toFixed(2),_.rows[_.rows.length-1].cells[_.rows[_.rows.length-1].cells.length-1].style.color="#99FF00",o.mozPaintCount||(_.rows[_.rows.length-1].cells[_.rows[_.rows.length-1].cells.length-1].style.fontStyle="italic",_.rows[_.rows.length-1].cells[_.rows[_.rows.length-1].cells.length-1].innerHTML+=" (APPROX.)"),_.insertRow(-1).insertCell(-1).innerHTML="Browser Frames",_.rows[_.rows.length-1].insertCell(-1).innerHTML=y,_.insertRow(-1).insertCell(-1).innerHTML="Canvas Resolution",_.rows[_.rows.length-1].insertCell(-1).innerHTML=this.canvasWidth+"x"+this.canvasHeight,_.rows[_.rows.length-1].cells[_.rows[_.rows.length-1].cells.length-1].style.color="#99FF00",_.insertRow(-1).insertCell(-1).innerHTML="Benchmark Duration",_.rows[_.rows.length-1].insertCell(-1).innerHTML=this.benchmarkTimeout/1e3,_.rows[_.rows.length-1].cells[_.rows[_.rows.length-1].cells.length-1].style.color="#99FF00",_.insertRow(-1).insertCell(-1).innerHTML="Total Ticks",_.rows[_.rows.length-1].insertCell(-1).innerHTML=m.length,_.rows[_.rows.length-1].cells[_.rows[_.rows.length-1].cells.length-1].style.color="#99FF00",b.appendChild(_),o.performance&&o.performance.memory&&this.insertMemoryInfo(b),c=this._document().createElement("table"),c.border=1,c.style.textAlign="right",l=c.createTHead(),l.style.color="white",n=l.insertRow(0),p=n.insertCell(-1),p.innerHTML="Group",p.style.textAlign="center",n.insertCell(-1).innerHTML="Min",n.insertCell(-1).innerHTML="Max",n.insertCell(-1).innerHTML="Mean",n.insertCell(-1).innerHTML="StdDev",n.insertCell(-1).innerHTML="CV",n.insertCell(-1).innerHTML="Hits",c.appendChild(l);var x=[];for(e in v)t=s(v[e]),t&&(n=this._document().createElement("tr"),n.style.color="white",n.insertCell(-1).innerHTML=e,n.cells[0].style.textAlign="left",n.cells[0].style.fontStyle="italic",n.insertCell(-1).innerHTML=t.min.toFixed(2),n.insertCell(-1).innerHTML=t.max.toFixed(2),n.insertCell(-1).innerHTML=t.mean.toFixed(2),n.cells[n.cells.length-1].style.color="red",n.insertCell(-1).innerHTML=t.deviation.toFixed(2),n.insertCell(-1).innerHTML=t.cv.toFixed(2),n.insertCell(-1).innerHTML=t.hits,x[x.length]=n);x.sort(function(e,t){var n=e.cells[3].innerHTML,i=t.cells[3].innerHTML;return n==i?t.cells[6].innerHTML-e.cells[6].innerHTML:i-n});var w=x[0].cells[3].innerHTML;for(u=0;u<x.length;u++)x[u].cells[3].innerHTML==w&&(x[u].style.color="black",x[u].style.backgroundColor="yellow"),c.appendChild(x[u]);for(b.appendChild(c),d=this._document().createElement("table"),d.border=1,d.style.textAlign="center",d.align="center",l=d.createTHead(),n=l.insertRow(0),n.insertCell(-1).innerHTML="",n.insertCell(-1).innerHTML="Distribution",d.appendChild(l),u=0;u<g.length;u++)g[u]>0&&(n=this._document().createElement("tr"),i=this._document().createElement("td"),r=this._document().createElement("td"),i.innerHTML=10*u+"-"+10*(u+1)+" ms",i.style.textAlign="right",r.innerHTML=g[u],r.style.textAlign="right",n.appendChild(i),n.appendChild(r),d.appendChild(n));b.appendChild(d),h=this._document().createElement("input"),h.value=m,b.appendChild(h),b.appendChild(this._document().createElement("br")),b.appendChild(this._document().createElement("hr")),f=this._document().getElementById("resultstoggle"),f.style.display="block"},c.insertMemoryInfo=function(t){var n,r,o,a,s,l,u,c,d,h,f,p,g=this._document().createElement("table"),m=i.createNumberFormat();g.border=1,g.style.textAlign="center",g.align="center",r=g.createTHead(),n=r.insertRow(-1),o=n.insertCell(-1),o.innerHTML="Memory Usage",o.style.textAlign="center",o=n.insertCell(-1),o.innerHTML="Initial",o.style.textAlign="center",o=n.insertCell(-1),o.innerHTML="Min",o.style.textAlign="center",o=n.insertCell(-1),o.innerHTML="Max",o.style.textAlign="center",o=n.insertCell(-1),o.innerHTML="Mean",o.style.textAlign="center",o=n.insertCell(-1),o.innerHTML="Final",o.style.textAlign="center",o.colSpan=2,g.appendChild(r);for(attr in performance.memory)if(performance.memory.hasOwnProperty(attr)){for(f=this.memories[0][attr],p=performance.memory[attr],n=r.insertRow(-1),o=n.insertCell(-1),o.innerHTML=attr,o.style.fontStyle="italic",a=this.memories.length,l=0,u=e.MAX_Z,c=0,s=0;a>s;s++)d=this.memories[s][attr],l+=d,u=Math.min(d,u),c=Math.max(d,c);h=l/a,o=n.insertCell(-1),o.innerHTML=m.format(f),o.style.textAlign="right",p>f?o.style.color="#99ff00":f>p&&(o.style.color="red"),o=n.insertCell(-1),o.innerHTML=m.format(u),o.style.textAlign="right",h>u&&(o.style.color="#99ff00"),o=n.insertCell(-1),o.innerHTML=m.format(c),c>h&&(o.style.color="red"),o=n.insertCell(-1),o.innerHTML=m.format(h,".2"),o.style.textAlign="right",(h<performance.memory[attr]||c>h)&&(o.style.color="#99ff00"),o=n.insertCell(-1),o.innerHTML=m.format(p),o.style.textAlign="right",p>f?o.style.color="red":f>p&&(o.style.color="#99ff00")}t.appendChild(g)},c},createBenchmark:function(e,t,n,i){var r={startFrame:e,endFrame:t,reset:n,render:i};return r.reset()}};return l}),define("oven/legacy/library/layers/gridLayoutContainer",["oven/unvetted/library/boundingBox","oven/unvetted/library/interaction","oven/legacy/library/layers/layer","oven/legacy/library/layers/splitter","oven/unvetted/library/charting","oven/unvetted/contracts/events","oven/unvetted/contracts/commonConfig","oven/legacy/library/layers/performance","oven/library/utility/objects","oven/unvetted/library/utility/benchmark","oven/unvetted/kernel/kernelUtil"],function(e,t,n,i,r,o,a,s,l,u,c){var d,h,f=0;return d={SIZE_ABSOLUTE:0,SIZE_RELATIVE:1,SIZE_REMAINDER:2,createContainer:function(d,p,g,m,v){var y,b,_,x,w,C,T,E,S,k,A,M,N,D,P,I,O,R,L=[],B=[],F=[],j=[],H=this,V=p.getContext("2d"),z=(g||p).getContext("2d"),$=d.getPlatform(),U=m&&m.log&&m.log.verbose,W=m&&m.log&&m.log.error,q=m&&m.log&&m.log.debug;return D=l.assimilate(n.createLayer(d,p),{id:"grid"+(f+=1),rows:[],columns:[],addRow:function(e,t){return this.rows.push({height:e,type:t,desiredSize:e}),this},addColumn:function(e,t){return this.columns.push({width:e,type:t,desiredSize:e}),this},insertRow:function(e,t){return this.rows.splice(0,0,{height:e,type:t,desiredSize:e}),l.iterate(F,function(e){e.row+=1}),this},insertColumn:function(e,t){return this.columns.splice(0,0,{width:e,type:t,desiredSize:e}),l.iterate(F,function(e){e.column+=1}),this},addVislet:function(e,t,n,i,r){return y(e,L,t,n,i,r),this},addLayer:function(e,t,n,i,r){return y(e,L,t,n,i,r),this},addTopLayer:function(e,t,n,i,r){return y(e,B,t,n,i,r),this},hasLayer:function(e){for(P=0;P<F.length;P+=1)if(F[P].layer===e)return!0;return!1},removeLayer:function(e){var t;for(t=0;t<F.length;t+=1)F[t].layer===e&&F.splice(t,1);for(t=0;t<L.length;t+=1)L[t].layer===e&&L.splice(t,1);for(t=0;t<B.length;t+=1)B[t].layer===e&&B.splice(t,1);return this},applyOffsetsToLayers:function(){var e,t=F.length;for(e=0;t>e;e++)F[e].layer.offsetX=this.offsetX,F[e].layer.offsetY=this.offsetY},draw:function(){var e,t;this.parent||($.startFrame(),this.perf&&this.perf.startFrame(),p.isVML&&V.clearRect(0,0,this.boundingBox.width,this.boundingBox.height)),l.iterate(F,function(e){e.layer.draw&&e.layer.isVisible!==!1&&e.layer.draw(null,!1,!0)}),m.showDebuggingVisuals&&this.drawOutlines(),this.parent||(p.isVML&&!m.enableInteractions&&(z.textBaseline="alphabetic",z.fillStyle="yellow",z.textAlign="right",e=m&&m.fontSize?m.fontSize:r.fontSize,t=m&&m.fontFamily?m.fontFamily:r.fontFamily,z.font=e+"px "+t,z.fillText("Note: This content requires an HTML5-compliant browser.",this.boundingBox.right-60,this.boundingBox.top+1.25*e)),this.perf&&this.perf.endFrame())},drawOutlines:function(){var e,t,n;this.boundingBox&&(V.save(),V.strokeStyle="blue",V.lineWidth=2,e=this.boundingBox,t=this,n=e.top,l.iterate(this.rows,function(i){var r=e.left;l.iterate(t.columns,function(e){V.strokeRect(r,n,e.pixels,i.pixels),r+=e.pixels}),n+=i.pixels}),V.restore())},notify:function(i){var r=null;if(i.type===o.WINDOW_RESIZE&&!this.parent)return this.setBoundingBox(e.createBoundingBox(0,0,i.width,i.height)),this.draw(),!0;if(i.type===o.WINDOW_INVALIDATE&&!this.parent)return this.draw(),!0;if(i.isSignal===!0){for(I=L.length,P=I-1;P>=0;P--)R=L[P].layer,R.notify&&R.notify(i);return!0}if(m.enableInteractions){if(i.type===o.INTERACTION_START)return this.activateInteraction(i.interaction),!0;if(i.type===o.INTERACTION_CAPTURE)return this.activeInteraction=i.interaction,!0;if(i.type===o.INTERACTION_END)return this.deactivateInteraction(i.interaction),!0;if(i.isMouseEvent){for(this.generateMouseLeaveEvents(r,i),I=B.length,P=I-1;P>=0;P--)if(R=B[P].layer,n.hitTest(R,i,!0,m))return r=R,!0;if(this.activeInteraction&&(P=this.activeInteraction.notify(i),this.activeInteraction&&this.activeInteraction.state===t.INACTIVE&&this.deactivateInteraction(this.activeInteraction),P))return!0;if(!this.activeInteraction){for(P=0,I=j.length;I>P;P++)if(O=j[P],n.hitTest(O,i,!0,m))return r=O,O.state===t.INACTIVE&&this.deactivateInteraction(O),!0;for(I=L.length,P=I-1;P>=0;P--)if(R=L[P].layer,n.hitTest(R,i,!0,m))return r=R,!0}}}return!1},generateMouseLeaveEvents:function(e,t){for(I=F.length,P=I-1;P>=0;P--)R=F[P].layer,R!==e&&n.notifyIfMouseLeaving(R,t,m)},setBoundingBoxAndPosition:function(t){return this.setPosition?(this.setPosition(t.left,t.top,t.width,t.height,this.zIndex),this.boundingBox=e.createBoundingBox(0,0,t.width,t.height)):this.boundingBox=t,this.arrange()},setBoundingBoxOnly:function(e){return this.boundingBox=e,this.flatArrange()},flatArrange:function(){var e;return l.iterate(F,function(e){var t=e.layer;t.setBoundingBoxAndPosition&&t.setBoundingBoxOnly&&(t.setBoundingBox=t.setBoundingBoxOnly)}),e=this.arrange(),l.iterate(F,function(e){var t=e.layer;t.setBoundingBoxAndPosition&&t.setBoundingBoxOnly&&(t.setBoundingBox=t.setBoundingBoxAndPosition)}),e},arrange:function(){var t=this;return b(this.rows,this.boundingBox.height),b(this.columns,this.boundingBox.width),_(this.rows,this.boundingBox.top),_(this.columns,this.boundingBox.left),l.iterate(F,function(n){var i,r,o,a,s,l,u;if(i=n.layer,i.setBoundingBox){for(r=t.rows[n.row],o=t.columns[n.column],a=0,s=0,u=Math.min(n.row+n.rowSpan,t.rows.length),l=n.row;u>l;l++)s+=t.rows[l].pixels;for(u=Math.min(n.column+n.columnSpan,t.columns.length),l=n.column;u>l;l++)a+=t.columns[l].pixels;i.offsetX=t.offsetX,i.offsetY=t.offsetY,o?i.setBoundingBox(e.createBoundingBox(o.start,r.start,a,s)):c.log.trace("gridLayoutContainer","null column "+n.column)}}),this},drawResizingImage:function(e,t,n,i){e.drawImage(t,0,0,t.width,t.height,n,i,this.boundingBox.width,this.boundingBox.height)},drawResizingImages:function(e){var t,n,i=!1;return this.parent||(this.perf.startFrame(),$.beginGroup("gridLayoutContainer (resizing images)")),l.iterate(F,function(t){var n=t.layer;n.drawResizingImages&&(n.drawResizingImages(e),i=!0)}),!i&&this.canvas&&!this.canvas.isVML&&this.canvas.width>0&&this.canvas.height>0&&(t=(this.offsetX||0)+this.boundingBox.left,n=(this.offsetY||0)+this.boundingBox.top,this.drawResizingImage(e,this.canvas,t,n)),this.parent||($.endGroup(U),this.perf.endFrame()),this},activateInteraction:function(e){return j.splice(0,0,e),this},deactivateInteraction:function(e){var t=j.indexOf(e);return t>-1&&j.splice(t,1),this.activeInteraction=null,this},offsetSplitter:function(e,t){var n,r,o,s,u,c,d,h,f,p,g=null,v=0;if(l.iterate(F,function(e){e.layer===t.source&&(g=e)}),g&&(r=g.layer,r.orientation===i.SPLITTER_HORIZONTAL?(n=this.rows,o=g.row,u="height",v=t.offsetY,h=r.parent.boundingBox.top-r.boundingBox.top,f=r.parent.boundingBox.bottom-r.boundingBox.bottom):(n=this.columns,o=g.column,u="width",v=t.offsetX,h=r.parent.boundingBox.left-r.boundingBox.left,f=r.parent.boundingBox.right-r.boundingBox.right),v>0?v=Math.max(0,Math.min(v,f)):0>v&&(v=Math.min(0,Math.max(v,h))),0!==v&&o>0&&o<n.length-1&&(p=w(n),c=Math.abs(v),q&&!c&&m.log.debug("gridLayoutContainer: div by zero risk (absOffset): "+c),d=v/c,h=T(n,u,c,d,p,1,0,o)))){for(T(n,u,c,d,p,-1,o+1,n.length),U&&m.log.verbose("Splitter offset requested: "+(t.offsetX||t.offsetY)+" clamped: "+v+"  top/left: "+h+"  bottom/right: "+f+" Error: "+(h+f)),p=w(n),s=0;s<n.length;s++)E(n,s,u,p);m.splitterMode===a.SPLITTER_DRAWIMAGE?(e.fillStyle="black",e.fillRect(this.offsetX||0,this.offsetY||0,this.canvas.width,this.canvas.height),this.flatArrange(),this.drawResizingImage(e,r.canvas,this.boundingBox.left,this.boundingBox.top),this.drawResizingImages(e)):(this.arrange(),this.draw())}return this},setCanvas:function(e){V=e.getContext("2d"),z=V},restoreCanvasses:function(){V=p.getContext("2d"),z=(g||p).getContext("2d")}}),y=function(e,t,n,i,r,o){if(n+(r-1)>=D.rows.length||i+(o-1)>=D.columns.length){var a="";n+(r-1)>=D.rows.length&&(a+="Attempted to add a component to non-existent row of the layout. rowIndex("+n+"), rowSpanCount("+r+") out of bounds of rows.length="+D.rows.length+". "),i+(o-1)>=D.columns.length&&(a+="Attempted to add a component to non-existent column of the layout. columnIndex("+i+"), columnSpanCount("+o+") out of bounds of columns.length="+D.columns.length),c.log.trace("gridLayoutContainer",a)}for(P=0;P<F.length;P++)F[P].layer===e&&F.splice(P,1);var s={layer:e,row:n||0,column:i||0,rowSpan:r||1,columnSpan:o||1};return t.push(s),F.push(s),e.parent=D,D},b=function(e,t){var n=x(e,M,t);return n=A(e,t,H.SIZE_RELATIVE,n),n=A(e,t,H.SIZE_REMAINDER,n)},w=function(e){var t=0;return x(e,function(e){e.type!==H.SIZE_ABSOLUTE&&(t+=e.pixels)}),t},C=function(e,t,n){return!t&&e.pixels>0||t&&e[n]<e.desiredSize},T=function(e,t,n,i,r,o,a,s){for(var l,u,c,d,h,f=0,p=0,g=-o,v=1===o?s-1:a,y=1===o?a-1:s,b=i===o,_=0;Math.abs(f)<n&&(_+=1)<2;){for(d=0,h=0,l=a;s>l;l++)e[l].type!==H.SIZE_ABSOLUTE&&(b||e[l].pixels>0)&&(d++,h+=e[l].pixels);if(p=d,b||n>h)for(l=a;s>l;l++)e[l].type===H.SIZE_ABSOLUTE&&C(e[l],b,t)&&p++;if(!(p>0))return Math.round(f);for(c=n-Math.abs(f),q&&!p&&m.log.debug("gridLayoutContainer: div by zero risk (liveCells): "+p),u=c/p*i*o,l=v;l!==y&&Math.abs(f)<n;l+=g)(e[l].type!==H.SIZE_ABSOLUTE||b||n>h)&&(c=S(e[l],u,b),f+=c);f=Math.round(f)}return f},S=function(e,t,n){var i=Math.max(0,e.pixels+t);return n&&e.type===H.SIZE_ABSOLUTE&&(i=Math.min(e.desiredSize,i)),i-=e.pixels,e.pixels+=i,i},E=function(e,t,n,i){var r=e[t];r.type===H.SIZE_ABSOLUTE?r[n]=r.pixels:i&&(q&&!i&&m.log.debug("gridLayoutContainer: div by zero risk (totalRelativePixels): "+i),r[n]=Math.max(0,r.pixels)/i)},x=function(e,t,n){var i,r=e.length,o=0;for(i=0;r>i;i++)o+=t(e[i],n);return o},N=function(e,t){return x(e,function(e){return e.type===t?1:0})},A=function(e,t,n,i){var r=N(e,n);return r>0&&(i+=x(e,k,[n,t-i])),i},M=function(e){return e.type===H.SIZE_ABSOLUTE?(h=Math.max(0,e.width||e.height||0),e.pixels=Math.floor(h),W&&isNaN(e.pixels)&&m.log.error("NaN cell.pixels"),e.pixels):0},k=function(e,t){return e.type===t[0]?(h=Math.max((e.width||e.height||0)*t[1],0),e.pixels=Math.floor(h),W&&isNaN(e.pixels)&&m.log.error("NaN cell.pixels"),e.pixels):0},_=function(e,t){return l.iterate(e,function(t,n,i){t.start=0===i?n:e[i-1].start+e[i-1].pixels},t),this},v?D.perf=v:m&&(D.perf=m.benchmarkTest?u.initialize(d,g||p,m):s.initialize(d,g||p,m)),D.setBoundingBox=D.setBoundingBoxAndPosition,D}}}),define("oven/unvetted/library/interactions/resetInteraction",["oven/unvetted/contracts/events","oven/unvetted/contracts/platform","oven/unvetted/library/interaction","oven/library/utility/objects","oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelUtil"],function(e,t,n,i,r,o){var a,s=0,l={states:{AWAITING_FIRST_UP:2,AWAITING_SECOND_UP:4},createResetInteraction:function(u){var c,d,h,f=u.getEventManager(),p=u.getPlatform(),g=function(){c&&(a.clearTimeout(c),c=null)};return a=a||r.window.get(),h=i.assimilate(n.createInteraction(),{id:"resetInteraction"+s++,interactionType:n.RESET,boundingBox:null,behavior:null,vislet:null,doubleTapTime:500,bindBehavior:function(e){this.behavior=e,e.interactions&&e.interactions.push(this)},bindVislet:function(e){this.vislet=e},notify:-1===p.featureFlags.indexOf(t.DOUBLECLICK)?function(t){if(t===d)return!1;switch(t.type){case e.RESET_VIEW:return o.log.trace("resetInteraction",h.id+" RESET_VIEW: calling createResetEvent"),(this.behavior||f).notify(e.createResetEvent(this,t));case e.MOUSE_UP:if(this.state===l.states.AWAITING_FIRST_UP)this.state=l.states.AWAITING_SECOND_UP,d=t,c=a.setTimeout(function(){h.state=l.states.AWAITING_FIRST_UP},this.doubleTapTime);else if(this.state===l.states.AWAITING_SECOND_UP)return o.log.trace("resetInteraction",h.id+": calling createResetEvent"),g(),this.state=l.states.AWAITING_FIRST_UP,(this.behavior||f).notify(e.createResetEvent(this,t)),!0;break;case e.MOUSE_MOVE:case e.MOUSE_LEAVE:g(),this.state=l.states.AWAITING_FIRST_UP}return!1}:function(t){return t.type===e.RESET_VIEW||t.type===e.MOUSE_DOUBLECLICK?(this.behavior||f).notify(e.createResetEvent(this,t)):!1},setBoundingBox:function(e){this.boundingBox=e}}),h.state=l.states.AWAITING_FIRST_UP,h}};return l}),define("oven/unvetted/library/interactions/touchHoldInteraction",["oven/unvetted/kernel/kernelEnvironment","oven/unvetted/contracts/events","oven/unvetted/contracts/platform","oven/unvetted/library/interaction","oven/library/utility/objects"],function(e,t,n,i,r){var o,a,s=0,l=500;return o={touchHoldStates:{INACTIVE:0,TOUCH_HOLD_CAPTURE:1},createTouchHoldInteraction:function(n,u){var c,d,h,f=n.getPlatform(),p=n.getEventManager(),g=f.isTouch;return u=u||{releaseHoldOnMove:!0},a=a||e.window.get(),c=r.assimilate(i.createInteraction(),{id:"touchHoldInteraction"+(s+=1),interactionType:i.TOUCH_HOLD,mouseDownTimerId:-1,state:o.touchHoldStates.INACTIVE,notify:function(e){var n,i;switch(e.type){case t.MOUSE_DOWN:if(g&&-1===this.mouseDownTimerId&&d!==e)return d=e,this.mouseDownTimerId=a.setInterval(function(){var n;return-1!==c.mouseDownTimerId?(n=t.createMouseEvent(t.HIGHLIGHT,e.x,e.y,0,this,e,d.button),p.notify(n),a.clearInterval(c.mouseDownTimerId),c.mouseDownTimerId=-1,c.state=o.touchHoldStates.TOUCH_HOLD_CAPTURE,!0):!1},l),!0;break;case t.MOUSE_UP:if(i=d&&d.button,d=null,h())return!1;if(this.state===o.touchHoldStates.TOUCH_HOLD_CAPTURE)return n=t.createMouseEvent(t.UNHIGHLIGHT,e.x,e.y,0,this,e,i),p.notify(n),this.state=o.touchHoldStates.INACTIVE,!0;break;case t.MOUSE_MOVE:if(!g||this.state===o.touchHoldStates.TOUCH_HOLD_CAPTURE)return p.notify(t.createMouseEvent(t.HIGHLIGHT,e.x,e.y,0,this,e,d&&d.button)),h(),!0;if(u.releaseHoldOnMove&&g&&d)return h(),p.notify(d),d=null,p.notify(e),!0}return!1},setBoundingBox:function(e){this.boundingBox=e}}),h=function(){return-1!==c.mouseDownTimerId?(a.clearInterval(c.mouseDownTimerId),c.mouseDownTimerId=-1,!0):!1},c}}}),define("oven/unvetted/library/utility/baseInterpolator",["oven/unvetted/library/utility/mathUtil","oven/library/utility/objects"],function(e,t){var n={interpolate:function(e){return e}},i=function(e,t){var i={_impl:e||n,stops:[],setMinMax:function(e,t){void 0!==this._impl&&(this._impl.min=e,this._impl.max=t)},getMinMax:function(){return{min:this._impl.min,max:this._impl.max}},setValues:function(e){this.stops=[],e=e||[];for(var t=0;t<e.length;t++)this.addPercentStop(t/(e.length-1),e[t])},setStops:function(e){e=e||[];for(var t=0;t<e.length;t++)this.addPercentStop(e[t].position,e[t].value)},addPercentStop:function(e,t){var n=t.at||t,i=t.down,r=t.up;this.stops.push({position:e,at:n,up:r,down:i}),this.stops.sort(function(e,t){return t.position<e.position?1:-1})},addPositionStop:function(e,t){if(void 0!==this._impl&&void 0!==this._impl.min&&void 0!==this._impl.max){var n=(e+this._impl.min)/(this._impl.max-this._impl.min);this.addPercentStop(n,t)}}};return t=t||{},i.setMinMax(t.min,t.max),i.setValues(t.values),i.setStops(t.stops),i},r={createDiscrete:function(e,n){return t.assimilate(i(e,n),{interpolate:function(e){if(0!==this.stops.length){if(e<this._impl.min)return{value:this._impl.interpolate(this.stops[0].at,void 0,0),position:0};if(e>this._impl.max)return{value:this._impl.interpolate(this.stops[this.stops.length-1].at,void 0,0),position:1};for(var t=this._impl.max-this._impl.min,n=0;n<this.stops.length;n++)if(e<=this._impl.min+this.stops[n].position*t)return{value:this._impl.interpolate(this.stops[n].at,void 0,0),position:this.stops[n].position};return{value:this._impl.interpolate(this.stops[this.stops.length-1].at,void 0,0),position:this.stops[this.stops.length-1].position}}}})},createLinear:function(e,n){return t.assimilate(i(e,n),{interpolate:function(e){if(0!==this.stops.length){for(var t=this._impl.max-this._impl.min,n=this.stops,i=this.stops.length-1,r=0;r<n.length;r++)if(e<this._impl.min+n[r].position*t){i=r;break}i>0&&i--;var o=n[i].at,a=n[i+1].at,s=this._impl.min+n[i].position*t,l=this._impl.min+n[i+1].position*t,u=1-(l-e)/(l-s),c=(e-this._impl.min)/t;return e<this._impl.min?c=u=0:e>this._impl.max?c=u=1:u=Math.min(Math.max(u,0),1),{value:this._impl.interpolate(o,a,u),position:c}}}})},createDiverging:function(n,r){return t.assimilate(i(n,r),{interpolate:function(n){if(0===this.stops.length)return void 0;var i,r,o,a,s=this._impl.max-this._impl.min,l=this.stops,u=(n-this._impl.min)/s;if(this._impl.divergePosition=u,1===l.length){var c=this._impl.min<0&&this._impl.max>0,d=Math.abs(this._impl.min)+Math.abs(this._impl.max),h=0;l[0].position>0&&(h=e.lerp(this._impl.min,this._impl.max,l[0].position),c=!1,this._impl.mirror=!0),n===h?(i=l[0].at,r=l[0].at,o=0,a=1):h>n?(i=t.clone(l[0].down||l[0].at),r=t.clone(i),o=this._impl.min,a=h,c&&(this._impl.divergePosition=.5-Math.abs(n)/Math.abs(2*this._impl.min),u=Math.abs(this._impl.min)/d-Math.abs(n)/d)):n>h&&(i=t.clone(l[0].up||l[0].at),r=t.clone(i),o=h,a=this._impl.max,c&&(this._impl.divergePosition=.5+n/Math.abs(2*this._impl.max),u=Math.abs(this._impl.min)/d+n/d))}else for(var f=0;f<l.length;f++)if(n<this._impl.min+l[f].pos*s){i=l[f].up||l[f].at,r=l[f+1].down||l[f].at,o=l[f].position*s,a=l[f+1].position*s;break}var p=1-(a-n)/(a-o);return n<this._impl.min?u=p=0:n>this._impl.max?u=p=1:p=Math.min(Math.max(p,0),1),{value:this._impl.interpolate(i,r,p),position:u}}})}};return r}),define("oven/unvetted/library/utility/colorInterpolator",["oven/library/utility/objects","oven/unvetted/kernel/kernelColor","oven/unvetted/library/utility/baseInterpolator"],function(e,t,n){var i={min:void 0,max:void 0,position:void 0,interpolate:function(e,n,i){return t.interpolate_hsl(e,n,i)}},r=e.assimilate(i,{interpolate:function(e,n,i){var r=this.min<0&&this.max>0||this.mirror;return r?this.divergePosition>0&&this.divergePosition<.5?n=t.create(n).scale(.4):this.divergePosition>.5&&this.divergePosition<1&&(e=t.create(e).scale(.4)):n=t.create(n).scale(.3),t.interpolate_hsl(e,n,i)}}),o={createDiscrete:function(e){return n.createDiscrete(i,e)},createLinear:function(e){return n.createLinear(i,e)},createDiverging:function(e){var t=n.createDiverging(r,e);return t.setMinMax=function(e,t){if(0>e&&t>0){var n=Math.abs(e),i=Math.abs(t),r=Math.max(n,i);
e=e/n*r,t=t/i*r}void 0!==this._impl&&(this._impl.min=e,this._impl.max=t)},t}};return o}),define("oven/unvetted/kernel/kernelResourceManager",["oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelUtil"],function(e){var t,n,i=0,r=0;return t={canvases:[],createBackBuffer:function(e,t){if(!e||!t)throw"[ResourceManager] exception: insufficient parameters passed to createBackBuffer()";var n=this.createCanvas("backbuffer"+(r+=1));return n.width=e,n.height=t,n},createCanvas:function(t){if(!t)throw new Error("[ResourceManager] exception: insufficient parameters passed to createCanvas()");n||(n=e.document.get());var r=n.createElement("canvas");return r.id="canvas"+(i+=1),r.name=t,r.setZIndex=function(e){this.style.zIndex=e},r.setPosition=function(e,t,n,i,r){(e||0===e)&&(this.style.left=e+"px"),(t||0===t)&&(this.style.top=t+"px"),(n||0===n)&&(this.width=+n),(i||0===i)&&(this.height=+i),(r||0===r)&&(this.style.zIndex=r||this.style.zIndex)},this.canvases.push(r),r},createImage:function(t,n){var i;return t||(i=e.window.get(),t=new i.Image),t.src=n,t}}}),define("oven/components/baseComponent",["oven/unvetted/library/boundingBox"],function(e){var t,n=0;return t={createComponent:function(t,i,r){if(!t||!i||!r)throw new Error("[baseComponent] createComponent() failed: insufficient parameters");var o,a;return a=t.getEventManager(),o={identification:{id:"component"+(n+=1),name:r,getType:function(){return"component"}},form:{canvas:i,geometries:null,rasters:null,glyphs:null,boundingBox:e.createBoundingBox(0,0,i.width,i.height),height:function(){return this.form.boundingBox.height},width:function(){return this.form.boundingBox.width}},data:{common:{visible:!0,sensitive:!0,dirty:!0},"native":{},user:{}},actions:{draw:function(){throw new Error("[baseComponent] Exception: all components must implement their own custom draw method")},notify:function(e){switch(e.type){case 0:}},show:function(){return o.data.common.visible=!0,this.dirty(),a.redrawDirtyScreenAsync(this),o},hide:function(){return o.data.common.visible=!1,a.redrawDirtyScreenAsync(this),o},isVisible:function(){return o.data.common.visible},flipVisibility:function(){return this.isVisible()?this.hide():this.show()},setData:function(e){o.data.native.bin=e},getData:function(){return o.data.native.bin},getId:function(){return o.identification.id},getName:function(){return o.identification.name},dirty:function(){o.common.dirty=!0},undirty:function(){o.common.dirty=!1},isDirty:function(){return o.common.dirty},isAxis:function(){return!1},setBoundingBox:function(e){this.boundingBox=e,this.dirty()}}},o.id=o.identification.id,o.name=o.identification.name,o.canvas=o.form.canvas,o.boundingBox=o.form.boundingBox,o.common=o.data.common,o.native=o.data.native,o.user=o.data.user,o.draw=o.actions.draw,o.notify=o.actions.notify,o.show=o.actions.show,o.hide=o.actions.hide,o.getData=o.actions.getData,o.setData=o.actions.setData,o.getId=o.actions.getId,o.getType=o.actions.getType,o.getName=o.actions.getName,o.dirty=o.actions.dirty,o.undirty=o.actions.undirty,o.isDirty=o.actions.isDirty,o.setBoundingBox=o.actions.setBoundingBox,o}}}),define("oven/components/colorRamp/colorRampConfig",["oven/framework/config/schema/configSchemaBuilder","oven/unvetted/contracts/commonConfig"],function(e,t){var n={Vertical:0,Horizontal:1},i={Top:t.ALIGNMENT_TOP,Bottom:t.ALIGNMENT_BOTTOM},r={Discrete:0,Continuous:1,Diverging:2},o={ColorValueConfig:"ColorValueConfig",ColorStopConfig:"ColorStopConfig",GradientConfig:"GradientConfig",ColorRampConfig:"ColorRampConfig"},a={Alignment:i,Orientation:n,GradientTypes:r,ConfigNames:o,getConfigSchema:function(){var t=e.createConfigSet(o.ColorValueConfig,{at:e.createColorProperty(""),down:e.createColorProperty(""),up:e.createColorProperty("")}),n=e.createConfigSet(o.ColorStopConfig,{position:e.createDoubleProperty(!0),value:t}),a=e.createConfigSet(o.GradientConfig,{useDataBoundMin:e.createBooleanProperty(!0),useDataBoundMax:e.createBooleanProperty(!0),minValue:e.createDoubleProperty(0),maxValue:e.createDoubleProperty(0),type:e.createEnumProperty(r,"discrete"),colorStops:e.createConfigArray(n)}),s=e.createConfigSet(o.ColorRampConfig,{fontColor:e.createColorProperty("rgb(255, 255, 255)"),fontFamily:e.createStringProperty("Verdana, Calibri, Arial, Helvetica-Light, ArialMT"),fontSize:e.createIntegerProperty(12),title:e.createStringProperty(""),textAlignment:e.createEnumProperty(i,"Top"),isPercent:e.createBooleanProperty(!1),showLabels:e.createBooleanProperty(!0),labelFormat:e.createStringProperty("n|d2.2"),markerColor:e.createColorProperty("yellow"),markerTextColor:e.createColorProperty("yellow"),endCapLineColor:e.createColorProperty("white"),enableFilter:e.createBooleanProperty(!1),sliderDefaultColor:e.createColorProperty("white"),sliderSelectColor:e.createColorProperty("yellow"),gradient:a});return e.createSchema([s],[])}};return a}),define("oven/components/colorRamp/colorRampDataContract",["oven/framework/data/schema/dataSchemaBuilder","oven/unvetted/contracts/baseDataContract"],function(e,t){var n=e.StatsCalcType,i={ColorRampData:"colorRampData"},r={DataContractNames:i,FieldTypes:t.FieldTypes,getDataContractSchema:function(){var t=e.createDataContract(i.ColorRampData,{Value:e.createDoubleField(!0)},{MinValue:e.createDoubleField(!0),MaxValue:e.createDoubleField(!0)},{MinMax:e.addStatsField(n.MinMax,"Value")});return e.createDataContractSchema([t])}};return r}),define("oven/components/colorRamp/colorRampSignals",["oven/library/utility/objects","oven/unvetted/contracts/signals"],function(e,t){var n={COLOR_RAMP_FILTER:"COLOR_RAMP_FILTER",createFilterSignal:function(n,i){return e.assimilate(t.createSignal(this.USER_MAP_SELECT,i,1),{type:n})}};return n}),define("oven/unvetted/library/utility/pixelAccessor",["oven/unvetted/kernel/kernelEnvironment"],function(e){function t(){return r||(r=e.window.get().ImageData),r}function n(e,i,r,o,a){var s,l,u,c,d=e.width,h=e.height;return i=void 0===i?0:Math.min(Math.max(i,0),d),r=void 0===r?0:Math.min(Math.max(r,0),h),o=void 0===o?d-i:Math.min(o,d-i),a=void 0===a?h-r:Math.min(a,h-r),s=Object.create(n.prototype),s.width=o,s.height=a,e instanceof t()?(s.imageData=e,l=e.data,u=4*d,c=r*u+4*i):e instanceof n&&(s.imageData=e.imageData,l=e.imageData.data,u=e.stride,c=e.offset+r*u+4*i),Object.defineProperties(s,{pixels:{value:l},stride:{value:u},offset:{value:c}}),s.setPixel=function(e,t,n,i,r,o){var a=c+t*u+4*e;l[a]=n,l[a+1]=i,l[a+2]=r,l[a+3]=o},s.getPixel=function(e,t){var n=c+t*u+4*e;return[l[n],l[n+1],l[n+2],l[n+3]]},Object.freeze(s),s}var i,r;return n.prototype={},i={create:n}}),define("oven/components/colorRamp/colorRamp",["oven/unvetted/kernel/kernelDraw","oven/unvetted/kernel/kernelResourceManager","oven/unvetted/contracts/events","oven/unvetted/contracts/platform","oven/components/baseComponent","oven/components/colorRamp/colorRampConfig","oven/components/colorRamp/colorRampDataContract","oven/components/colorRamp/colorRampSignals","oven/unvetted/library/boundingBox","oven/unvetted/library/textRendering","oven/library/utility/objects","oven/unvetted/library/utility/pixelAccessor"],function(e,t,n,i,r,o,a,s,l,u,c,d){var h,f=0,p=16,g=25,m=.5*p,v=1*g/4,y=3*g/4,b=5,_=10,x=25,w=10,C=5,T=0,E=1,S=2,k=3,A=4,M=5,N=6;return h={createColorRamp:function(l,h,D,P,I,O,R){var L,B,F,j,H,V,z,$,U,W,q,G,X,Y,K,J,Q=null,Z=i.CURSOR_DEFAULT,et=!1,tt=l.getConfigManager().getConfig(I),nt=l.getPlatform(),it=l.getEventManager(),rt=l.getNumFormatProvider(),ot=tt&&tt.log&&tt.log.verbose;L="colorRamp"+(f+=1),F=r.createComponent(l,h,L),F.state=0;var at,st,lt,ut,ct=function(){at=t.createBackBuffer(F.boundingBox.width,1),st=at.getContext("2d"),lt=st.createImageData(F.boundingBox.width,F.boundingBox.height),ut=d.create(lt)};ct();var dt=tt.fontSize,ht=tt.fontFamily,ft=(tt.fontColor,u.buildFontString(dt,ht)),pt=u.createTextRenderer(h,tt),gt=pt.getFontHeight(),mt=function(){var e,t;if(tt.gradient.useDataBoundMin||tt.gradient.useDataBoundMax){var n=l.getDataManager().getDataView(O),i=a.getDataContractSchema(),r=i.Definitions.colorRampData.MetaBlock,o=n.getMetaBlockSchema(),s=o.getFieldIndex(r.MinValue),u=o.getFieldIndex(r.MaxValue),c=n.getMetaBlock(),d=n.getDataSchema(),h=i.Definitions.colorRampData.Fields,f=d.getFieldIndex(h.Value),p=n.getStatsBlock();p&&p.hasOwnProperty(f)?(e=p[f].minValue,t=p[f].maxValue):c&&(e=c[s],t=c[u])}tt.gradient.useDataBoundMin&&e||(e=tt.gradient.minValue),tt.gradient.useDataBoundMax&&t||(t=tt.gradient.maxValue),P.setMinMax(e,t),G=P.getMinMax()};mt();var vt=function(){F.boundingBox.width>0&&F.boundingBox.height>0&&F.boundingBox.width!==at.width&&ct();for(var t=(G.max-G.min)/F.boundingBox.width,n=0,i=0;n<=F.boundingBox.width;n++){i=0|n;var r=G.min+n*t,o=P.interpolate(r),a=o.value;ut.setPixel(i,0,a.r,a.g,a.b,255)}e.setContext(st),e.putPixels(0,0,lt)};vt();var yt=function(e){var n=t.createBackBuffer(p,g),i=n.getContext("2d"),r=i.createLinearGradient(0,0,p,0);return r.addColorStop(0,e),r.addColorStop(1,"grey"),i.fillStyle=r,tt.textAlignment===o.Alignment.Bottom&&(i.translate(0,n.height-2),i.scale(1,-1)),i.moveTo(m,0),i.lineTo(p,v),i.lineTo(p,y),i.lineTo(0,y),i.lineTo(0,v),i.moveTo(m,0),i.fill(),n},bt=yt(tt.sliderDefaultColor),_t=yt(tt.sliderSelectColor),xt=function(e,t){var n=1,i=function(e){return Math.max(0,Math.min(1,e))},r=G.max-G.min,o=G.min+.5*r,a=j.left+.5*(j.width-0),s=function(e){return Math.abs(e-a)<=n?o:(e=i((e-j.left)/(j.width-0)),G.min+e*r)};return e=s(e),t=s(t),[e,t]},wt=function(e){return V=T,(tt.textAlignment===o.Alignment.Top&&e.y<j.bottom+v&&e.y>j.bottom-y||tt.textAlignment===o.Alignment.Bottom&&e.y>j.top-v&&e.y<j.top+y)&&(e.x>F.filterStart-m&&e.x<F.filterStart+m?V=E:e.x>F.filterEnd-m&&e.x<F.filterEnd+m?V=S:(F.filterStart!==j.left||F.filterEnd!==j.right)&&e.x>F.filterStart&&e.x<F.filterEnd&&(V=k)),V!==T},Ct=function(){B=s.createFilterSignal(s.COLOR_RAMP_FILTER,F),it.notify(B)},Tt=function(e){var t=i.CURSOR_DEFAULT;switch(e){case E:case S:case A:case M:t=i.CURSOR_POINTER;break;case k:case N:t=i.CURSOR_MOVE}et&&t!==Z&&D.popCursor(),t===i.CURSOR_DEFAULT?(Z=i.CURSOR_DEFAULT,et=!1):t!==Z&&(et=!0,D.pushCursor(t),Z=t)},Et=function(){et&&(et=!1,D.popCursor(),Z=i.CURSOR_DEFAULT)},St=function(e){return rt.numberToString(e,tt.labelFormat)};F.draw=function(t,n,i){if(lt){!i&&R&&R.startFrame(),nt.beginGroup("colorRamp");var r=h.getContext("2d");if(e.setContext(r),this.boundingBox.clearRect(r),this.common.visible!==!1&&this.user.visible!==!1){e.drawImage(j.left,j.top,j.width,j.height,at),G=P.getMinMax();var a=xt(F.filterStart,F.filterEnd),s=a[0]===G.min,l=a[1]===G.max,u=St(a[0]),c=St(a[1]),d=tt.isPercent;d&&(u+="%",c+="%"),pt.setRenderState(ft,null!==Q&&Q<=G.min&&s?tt.markerTextColor:"white","none","start","alphabetic");var f=pt.measureString(u),y=pt.measureString(c);if(tt.showLabels&&j.left+f/2<j.right-y/2){var b=tt.textAlignment!==o.Alignment.Bottom?j.top-gt:this.boundingBox.bottom-gt/2;pt.drawBatchString(j.left-f/2,b,u),pt.setRenderState(ft,null!==Q&&Q>=G.max&&l?tt.markerTextColor:"white"),pt.drawBatchString(j.right-y/2,b,c)}if(r.fillStyle="rgba(0,0,0,0.5)",r.fillRect(j.left,j.top,F.filterStart-j.left,j.height),r.fillRect(F.filterEnd,j.top,j.right-F.filterEnd,j.height),void 0!==Q&&null!==Q){var _={};_.diverging=!0;var x;if(_.discrete){x=P.interpolate(Q),value===G.min?x.position=0:value===this.interpolator.max&&(x.position=1);var T=this.boundingBox.width/this.interpolator.stops.length,D=x.position*this.boundingBox.width;0!==x.position&&1!==x.position&&(D+=T/2),x.position=D/this.boundingBox.width}else _.continuous?x=P.interpolate(Q):_.diverging&&(x=P.interpolate(Q));if(void 0!==x){var D=j.left+x.position*j.width;D>>=0,e.setFillStyle(tt.markerColor),tt.textAlignment===o.Alignment.Top?e.drawTriangle(D,j.bottom,D-3,j.bottom+5,D+3,j.bottom+5,!0):tt.textAlignment===o.Alignment.Bottom&&e.drawTriangle(D,j.top,D-3,j.top-5,D+3,j.top-5,!0);var I=St(Q);if(d&&(I+="%"),Q>G.min&&Q<G.max){var O=pt.measureString(I);pt.setRenderState(ft,tt.markerTextColor),tt.textAlignment===o.Alignment.Top?pt.drawBatchString(D-O/2,j.bottom-C,I):tt.textAlignment===o.Alignment.Bottom&&pt.drawBatchString(D-O/2,j.top-w,I)}}}if(e.setStrokeStyle(null!==Q&&Q<=G.min?tt.markerTextColor:tt.endCapLineColor),e.setLineWidth(null!==Q&&Q<=G.min?4:2),e.drawLine(j.left,j.top-2,j.left,j.bottom+2),e.setStrokeStyle(null!==Q&&Q>=G.max?tt.markerTextColor:tt.endCapLineColor),e.setLineWidth(null!==Q&&Q>=G.max?4:2),e.drawLine(j.right,j.top-2,j.right,j.bottom+2),tt.enableFilter){var L=V===E||V===A||V===k||V===N,B=V===S||V===M||V===k||V===N,H=tt.textAlignment!==o.Alignment.Bottom?j.bottom-v-3:j.top-v-3;e.drawImage(F.filterStart-m,H,p,g,L?_t:bt),e.drawImage(F.filterEnd-m,H,p,g,B?_t:bt)}var z=tt.title&&tt.title.length>0;if(z){var O=pt.measureString(tt.title);if(O<j.width-(f+y))switch(pt.setRenderState(ft,tt.fontColor),tt.textAlignment){case o.Alignment.Top:pt.drawBatchString(this.boundingBox.left+(this.boundingBox.width/2-O/2),j.top-gt,tt.title);break;case o.Alignment.Bottom:pt.drawBatchString(this.boundingBox.left+(this.boundingBox.width/2-O/2),this.boundingBox.bottom-gt/2,tt.title)}}nt.endGroup(ot),!i&&R&&R.endFrame(),this.undirty()}}},F.setMarkerValue=function(e){Q=e},F.setBoundingBox=function(e){var t=function(e,t,n){return(e-t.left)/t.width*n.width+n.left};H=c.clone(e),Y=x,X=b+gt+w,K=x,J=_+gt,Y+K>=e.width||X+J>=e.height?this.user.visible=!1:(this.user.visible=!0,H.deflate(Y,X,K,J),void 0!==this.boundingBox&&void 0!==this.filterStart&&void 0!==this.filterEnd&&(this.filterStart=t(this.filterStart,j,H),this.filterEnd=t(this.filterEnd,j,H)),void 0===this.filterStart&&(this.filterStart=H.left),void 0===this.filterEnd&&(this.filterEnd=H.right),this.boundingBox=e,j=H)};var kt=function(e){switch(e.group){case n.BASEEVENTS_GROUP:e.type===n.MOUSE_DOWN?(this.state===E||this.state===S||this.state===k)&&(z=e.x,this.state+=A-E,it.notify(n.createInteractionEvent(n.INTERACTION_CAPTURE,this,e.source,e))):e.type===n.MOUSE_UP?(V=this.state=T,this.draw(),it.notify(n.createInteractionEvent(n.INTERACTION_END,this,e.source,e))):e.type===n.MOUSE_MOVE?(this.state===A||this.state===M||this.state===N?($=e.x-(this.offsetX||0),this.state===A?this.filterStart=Math.min(Math.max($,j.left),this.filterEnd-p):this.state===M?this.filterEnd=Math.min(Math.max($,this.filterStart+p),j.right):this.state===N&&(U=$-z,W=j.clampHorizontal(this.filterStart+U),q=j.clampHorizontal(this.filterEnd+U),U=Math.abs(W-this.filterStart)>Math.abs(q-this.filterEnd)?q-this.filterEnd:W-this.filterStart,this.filterStart=j.clampHorizontal(this.filterStart+U),this.filterEnd=j.clampHorizontal(this.filterEnd+U),z=this.boundingBox.clampHorizontal($)),Ct(e)):wt(e)?Tt(this.state=V):Et(),this.draw()):e.type===n.MOUSE_DOUBLECLICK?this.reset():e.type===n.MOUSE_LEAVE&&(V=this.state=T,Et(),this.draw())}};return F.notify=tt.enableFilter?kt:function(){},F.updateData=function(){mt(),vt()},F.setInterpolator=function(e){P=e,mt(),vt()},F.getFilter=function(){return tt.enableFilter?xt(F.filterStart,F.filterEnd):[G.min,G.max]},F.hasFilter=function(){return F.filterStart!==j.left||F.filterEnd!==j.right},F.setFilter=function(e,t){e=Math.min(0,Math.max(1,e)),t=Math.min(0,Math.max(1,t)),V=this.state=T,this.filterStart=j.left+e*j.width,this.filterEnd=j.right-t*j.width,Et(),Ct()},F.reset=function(){F.setFilter(0,1)},F}}}),define("oven/vislets/multiLevelPie/multiLevelPieVislet",["oven/vislets/multiLevelPie/multiLevelPieLayer","oven/vislets/multiLevelPie/multiLevelPieDataContract","oven/library/vislet","oven/legacy/library/layers/gridLayoutContainer","oven/unvetted/library/interactions/resetInteraction","oven/library/utility/objects","oven/unvetted/library/interactions/touchHoldInteraction","oven/unvetted/library/utility/colorInterpolator","oven/components/colorRamp/colorRamp","oven/components/colorRamp/colorRampDataContract","oven/components/colorRamp/colorRampConfig","oven/visualizations/multiLevelPie/colorRampDefs"],function(e,t,n,i,r,o,a,s,l,u,c,d){var h=-5,f=5,p=55,g=d.ColorRampType,m=t.FieldNames.COLOR,v={createVislet:function(t,u,d,v){var y=!0,b=!0,_=!0,x=!0,w=!0,C=n.createVislet(t,y,b,_,x,w),T=t.getDataManager(),E=t.getConfigManager(),S={isPercent:!0,labelFormat:"n|d2.2",enableFilter:!1,gradient:{useDataBoundMin:!1,useDataBoundMax:!1,minValue:h,maxValue:f}},k=c.ConfigNames.ColorRampConfig,A=c.getConfigSchema(),M=A.validateConfigSet(k,S,!0);E.addConfig(k,M);var N;switch(d.colorRampType){case g.MutedThreePoint:N={at:"#555555FF",down:"#EA2F2DFF",up:"#089808FF"};break;default:N={at:"#555555",down:"red",up:"#00ff00"}}var D=s.createDiverging({stops:[{position:0,value:N}]});D.draw=D.redraw=function(){},D.getColor=function(e){var t=D.interpolate(e).value;return t.toString()};var P=l.createColorRamp(t,C.canvas,u,D,k,void 0,v);P.setLabelFormat=function(e){var t=-1!==e.indexOf("%");t!==S.isPercent&&(S.isPercent=t,E.updateConfig(k,{isPercent:t}))};var I=e.createPie(t,C.canvas,C.overlay,C.textOverlay,u,d,D,v),O=o.assimilate(C,i.createContainer(t,C.canvas,C.overlay,d,v)),R=r.createResetInteraction(t);R.bindLayer(I);var L=a.createTouchHoldInteraction(t);return L.bindLayer(I),O.addRow(1,i.SIZE_REMAINDER),O.addRow(p,i.SIZE_ABSOLUTE),O.addColumn(.25,i.SIZE_RELATIVE),O.addColumn(1,i.SIZE_REMAINDER),O.addColumn(.25,i.SIZE_RELATIVE),O.addLayer(I,0,0,1,3),O.addLayer(P,1,1,1,1),O.addLayer(R,0,0,2,3),O.addLayer(L,0,0,2,3),O.interactions=I.interactions,O.contentLayers.push(I),O.contentLayers.push(P),O.updateInterpolator=function(){var e=1/0,t=-1/0;if(d.colorRangeComputeFromData){var n,i,r,o,a,s,l,u,c,p=d.colorRangeStdDevLimit,g=T.getAllDataAdapters();for(i in g)g.hasOwnProperty(i)&&(n=g[i],r=n.getDataView(),o=r.getDataSchema(),a=r.getStatsBlock(),s=o.getFieldIndex(m),s>=0&&a&&a.hasOwnProperty(s)&&(l=a[s],void 0===p||-1===p?(e=Math.min(e,l.minValue),t=Math.max(t,l.maxValue)):(u=l.meanAverage,c=l.stDevValue,e=Math.min(e,u-p*c),t=Math.max(t,u+p*c))))}else e=h,t=f;D.setMinMax(e,t)},O.updateLayout=function(){d.showColorRamp?(P.isVisible=!0,O.rows[1].height=p):(O.rows[1].height=0,P.isVisible=!1)},O.updateRampConfig=function(){P&&P.setLabelFormat(d.colorRampValueLabelFormat)},O.updateConfig=function(e){void 0!==e.showColorRamp&&(O.updateLayout(),O.arrange()),I.updateConfig(e),O.updateRampConfig(),O.draw()},O.updateData=function(e){d.colorRangeRecomputeOnUpdate&&(O.updateInterpolator(),P.draw()),I.updateData(e)},O.updateRampConfig(),O.updateLayout(),O.updateInterpolator(),O}};return v}),define("oven/vislets/gridLayoutVislet",["oven/library/vislet","oven/legacy/library/layers/gridLayoutContainer","oven/library/utility/objects"],function(e,t,n){var i;return i={SIZE_ABSOLUTE:t.SIZE_ABSOLUTE,SIZE_RELATIVE:t.SIZE_RELATIVE,SIZE_REMAINDER:t.SIZE_REMAINDER,createVislet:function(i,r,o,a,s,l,u){var c,d=e.createVislet(i,!0,a,s||!1,l!==!1,u||!1);return c=n.assimilate(d,t.createContainer(i,d.canvas,d.overlay,r,o))}}}),define("oven/vislets/seasonality/appViews",[],function(){var e={GPC_VIEW:0,SEASON_DATE_VIEW:2,SEASON_WEEKDAY_VIEW:3,SEASON_CALENDAR_VIEW:4,SEASON_WEEKLY_VIEW:5,SEASON_MONTHLY_VIEW:6,SEASON_QUARTERLY_VIEW:7,isDailyView:function(e){return e<this.SEASON_WEEKLY_VIEW},isMonthlyView:function(e){return e===this.SEASON_MONTHLY_VIEW}};return e}),define("oven/legacy/library/layers/plotArea",["oven/unvetted/contracts/commonConfig","oven/unvetted/contracts/events","oven/vislets/seasonality/appViews","oven/unvetted/library/charting","oven/legacy/library/layers/layer","oven/library/utility/objects"],function(e,t,n,i,r,o){var a,s,l=1280,u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABQAAAAABCAYAAACBgAP1AAAAAXNSR0IArs4c6QAAAChJREFUWMPtxzERADAIADGc89JZqqKXbJlqq53H3d3d3d3d3d3d//kBeoH9vZqhh90AAAAASUVORK5CYII=",c=1024,d="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAQACAYAAAAgBjM/AAAAAXNSR0IArs4c6QAAACpJREFUWMPtyLENAAAIAyDj4/Z0Z18wMFJJputyzjnnnHPOOeecc869uAVFhgEf83TLswAAAABJRU5ErkJggg==",h=[],f=0,p={createPlotArea:function(p,g,m,v){var _,x,w,C,T,E,S,k,A,M,N,D,P,I,O,R,L,B,F,j,H,V,z,$,U,W=0,q=0,G="rgba(128, 128, 128, 0.5)",X=m&&m.log&&m.log.verbose,Y=g.getContext("2d"),K=p.getPlatform(),J=p.getEventManager(),Q=o.assimilate(r.createLayer(p,g),{id:"plotArea"+f++,pixelMapper:null,axisX:null,axisY:null,boundingBox:null,backgroundGradient:null,horizontalDashGradient:null,verticalDashGradient:null,view:n.GPC_VIEW,topColor:"#22323C",bottomColor:"black",draw:function(e,t,i,r){return(this.boundingBox||e)&&(K.beginGroup(this.id),e=e?e.intersection(this.boundingBox):this.boundingBox,N=e.left,D=e.right,Y=r||Y,this.view===n.GPC_VIEW?(K.beginGroup("plotArea background gradient"),Y.fillStyle=this.backgroundGradient,Y.fillRect(N,e.top,e.width,e.height),K.endGroup(X)):this.view!==n.SEASON_CALENDAR_VIEW&&(e.equals(this.boundingBox)?(e.clearRect(Y),this.drawBorder(Y)):this.drawPartialBorder(Y,e)),!t&&this.axisX&&this.axisY&&(K.beginGroup("plotArea grid lines"),this.view===n.GPC_VIEW?this.drawGridLines(this,N,D):(K.beginGroup("plotArea season gridlines"),(this.view===n.SEASON_DATE_VIEW||this.view===n.SEASON_WEEKDAY_VIEW||this.view===n.SEASON_WEEKLY_VIEW)&&tt(e),K.endGroup(X)),K.endGroup(X)),K.endGroup(X)),this},drawBorder:function(e){return e.strokeStyle=m&&m.gridLineColor||"white",e.lineWidth=1,this.boundingBox.strokeRect(e),this},drawPartialBorder:function(e,t){e.strokeStyle=m&&m.gridLineColor||"white",e.lineWidth=1,e.beginPath(),t.left===this.boundingBox.left&&i.drawBatchLine(e,t.left,t.top,t.left,t.bottom),t.right===this.boundingBox.right&&i.drawBatchLine(e,t.right-.5,t.top,t.right-.5,t.bottom),i.drawBatchLine(e,this.boundingBox.left,this.boundingBox.bottom,this.boundingBox.right,this.boundingBox.bottom),e.stroke()},setBoundingBox:function(t){this.boundingBox&&this.view!==n.GPC_VIEW&&this.view!==n.SEASON_CALENDAR_VIEW&&!t.equals(this.boundingBox)&&Y.clearRect(Math.floor(this.boundingBox.left-1),Math.floor(this.boundingBox.top-1),this.boundingBox.width,Math.ceil(this.boundingBox.height+2)),this.boundingBox=t,this.backgroundGradient=Y.createLinearGradient(t.left,t.top,t.left,t.bottom),this.backgroundGradient.addColorStop(0,this.topColor),this.backgroundGradient.addColorStop(1,this.bottomColor),m&&m.gridLineColor&&(G=m.gridLineColor),m&&m.dashLineRenderer===e.DASH_RENDERER_GRADIENT&&(this.horizontalDashGradient=y(Y,t,G),this.verticalDashGradient=b(Y,t,G))},notify:function(){return!1},drawGradientGridLines:function(e,t,n,i){return K.beginGroup("plotArea gridlines (gradient)"),Y.lineWidth=1,this.axisX&&this.axisX.range&&(Y.strokeStyle=this.verticalDashGradient,Y.beginPath(),et(e,this.axisX.range,t,n,i),Y.stroke(),Y.closePath()),this.axisY&&this.axisY.range&&(Y.strokeStyle=this.horizontalDashGradient,Y.beginPath(),et(e,this.axisY.range,!1,n,i),Y.stroke(),Y.closePath()),K.endGroup(X),this},setBackgroundGradient:function(e,t){return this.topColor=e,this.bottomColor=t,this}}),Z=function(e,t,n){K.beginGroup("plotArea gridlines"),Y.strokeStyle=m&&m.gridLineColor?m.gridLineColor:"rgba(128, 128, 128, 0.5)",Y.lineWidth=1,Y.beginPath(),e.axisX&&e.axisX.range&&et(e.boundingBox,e.axisX.range,e.axisX.dateDataWindow,t,n),e.axisY&&e.axisY.range&&et(e.boundingBox,e.axisY.range,!1,t,n),Y.stroke(),Y.closePath(),K.endGroup(X)},et=function(e,t,n,i,r){if(k=!!n,S=Math.round(e.bottom),E=Math.round(e.top),k){for(A=t.majorTicks,M=e.left+n.startPixelOffset,W=M,q=M,O=A.length,C=i||e.left,T=r||e.right,o=0;O>o;o++)w=Math.round(M+A[o].index*n.dx),w>C&&T>w&&U(w,S,w,E,2),0===o&&(W=w),q=w;if(n.startPixelOffset>n.dx)for(O>0&&(M+=W-M),H=t.padLeft,O=H.length,I=0;O>I&&(V=H[I].range*n.dx,z=Math.round(M-V),z>C);I++)z<e.right&&U(z,S,z,E,2),M-=V;if(n.dx<n.endPixelOffset)for(H=t.padRight,O=H.length,I=0;O>I&&(V=H[I].range*n.dx,z=Math.round(q+V),T>z);I++)U(z,S,z,E,2),q+=V}else{C=Math.round(i||e.left),T=Math.round(r||e.right);for(var o=t.startMajorTick;o<=t.end;o+=t.majorTickInterval)w=Math.round(Q.axisY.pixelMapper.mapVertical(o)),w>e.top&&w<e.bottom&&$(C,w,T,w,2)}},tt=function(e){Y.strokeStyle=m&&m.gridLineColor?m.gridLineColor:"rgba(128, 128, 128, 0.5)",Y.lineWidth=1,Y.beginPath(),Q.axisX.range&&(et(e,Q.axisX.range,Q.axisX.dateDataWindow,N,D),it(e,Q.axisX.range,Q.pixelMapper.deltaX)),Q.axisY.range&&nt(e,Q.axisY.range,Q.pixelMapper.deltaY),Y.stroke(),Y.closePath()},nt=function(e,t,n){var i,r,o,a,s,l=Math.round(e.left),u=Math.round(e.right),c=t.range,d=t.mjrRange,h=Q.pixelMapper.offsetY+.5*n,f=d.length-1;for(s=.5,r=0,o=0,a=c.length;a>r&&f>o;r++)i=h+r*n,c[r]===d[o]&&(i=Math.round(i+n*s),i>e.top&&i<e.bottom&&$(l,i,u,i,2),o++)},it=function(e,t,n){var i,r,o,a,s=Math.round(e.top),l=Math.round(e.bottom),u=t.range,c=t.mjrRange,d=Q.pixelMapper.offsetX+.5*n,h=d,f=c.length-1;for(i=t.mjrRange[0],r=t.mjrRange[t.mjrRange.length-1],a=r>i?.5:1.5,i=0,r=0,o=u.length;o>i&&f>r;i++)if(h=d+i*n,u[i]===c[r]){if(h=Math.round(h+n*a),h>=e.right)return;h>e.left&&U(h,s,h,l,2),r++}},rt=function(e,n){return e||(e=new Image,e.onload=function(){J.notify(t.createInvalidateEvent(Q.boundingBox,g.style.zIndex,null))},e.src=n),e};return $=function(e,t,n,i){Y.moveTo(e,t),Y.lineTo(n,i)},U=$,Q.drawGridLines=function(e,t,n){Z(this,t,n)},!m||m.gridLineStyle&&m.gridLineStyle!==e.GRIDLINE_DASHED||(Y.dashStyle?($=function(e,t,n,i,r){Y.dashStyle=r+" "+r,Y.moveTo(e,t),Y.lineTo(n,i)},U=$):m&&m.dashLineRenderer===e.DASH_RENDERER_GRADIENT?Q.drawGridLines=function(e,t,n){this.drawGradientGridLines(this,t,n)}:m&&m.dashLineRenderer===e.DASH_RENDERER_DRAWIMAGE?(a=rt(a,u),s=rt(s,d),Q.drawGridLines=function(e,t,n){K.beginGroup("plotArea gridlines (image pattern)"),e.axisX&&e.axisX.range&&et(e.boundingBox,e.axisX.range,e.axisX.dateDataWindow,t,n),e.axisY&&e.axisY.range&&et(e.boundingBox,e.axisY.range,!1,t,n),K.endGroup(X)},$=function(e,t,n,i){for(R=Math.abs(n-e),P=0,B=R,F=Math.min(n,e),j=Math.min(i,t);B>0;)_=Math.min(B,l),_>0&&Y.drawImage(a,0,0,_,1,P+F,j,_,1),B-=l,P+=l},U=function(e,t,n,i){for(L=Math.abs(i-t),P=0,B=L,F=Math.min(n,e),j=Math.min(i,t);B>0;)x=Math.min(B,c),x>0&&Y.drawImage(s,0,0,1,x,F,P+j,1,x),B-=c,P+=c}):($=function(e,t,n,r,o){i.dashedHorizontalLineTo(Y,e,t,n,r,o)},U=function(e,t,n,r,o){i.dashedVerticalLineTo(Y,e,t,n,r,o)})),v&&h.push(v),Q}},g=4,m="rgba(0,0,0,0)",v=function(e,t,n){for(var i,r=0,o=1/t,a=.5*o,s=0,l=a,u=0;t>u;u++)e.addColorStop(s,n),e.addColorStop(l,n),e.addColorStop(l+r,m),i=s+o-r,e.addColorStop(i,m),s+=o,l+=o;return e},y=function(e,t,n){var i=Math.floor(t.width/g),r=i*g,o=e.createLinearGradient(t.left,t.top,t.left+r,t.top);return v(o,i,n)},b=function(e,t,n){var i=Math.floor(t.height/g),r=i*g,o=e.createLinearGradient(t.left,t.top,t.left,t.top+r);return v(o,i,n)};return p}),define("oven/unvetted/library/behavior",["oven/unvetted/kernel/kernelUtil","oven/library/utility/objects","oven/unvetted/contracts/events"],function(e,t){var n={drawTargets:function(e,n,i,r){var o=e.getEventManager();n=t.consolidateArrays(n),t.iterate(n,function(e){e.dirty?e.dirty():e.parent.dirty?e.parent.dirty():e.draw&&(e.canvas.isVML&&(r=!0),e.draw())}),o.redrawDirtyScreenAsync(this)},notifyTargets:function(e,n,i,r){n=t.consolidateArrays(n),t.iterate(n,function(e){e.notify&&e.notify(r)})}};return n}),define("oven/legacy/library/layers/toolbar",["oven/unvetted/library/charting","oven/unvetted/library/boundingBox","oven/legacy/library/layers/layer","oven/unvetted/contracts/events","oven/unvetted/contracts/platform","oven/library/utility/objects"],function(e,t,n,i,r,o){var a=0,s=4.5,l={INACTIVE:0,HOVERED:1,CLICKED:2,SELECTED:4,PADDING_Y:1,buttonWidth:64,inactiveStrokeColor:"rgb(128, 128, 128)",inactiveColor:"rgb(50, 50, 50)",activeStrokeColor:"rgb(255, 255, 255)",hoverBackgroundTopColor:"#323232",hoverBackgroundBottomColor:"#555",selectedBackgroundTopColor:"#555",selectedBackgroundBottomColor:"#AAA",createToolbar:function(l,u,c){var d,h,f=this,p=u.getContext("2d"),g=c&&c.fontSize?c.fontSize:e.fontSize,m=c&&c.fontFamily?c.fontFamily:e.fontFamily,v=g+"px "+m,y=0,b=o.assimilate(n.createLayer(l,u),{id:"toolbar"+a++,buttons:[],createToolbarButton:function(e){var s,c,d,h=o.assimilate(n.createLayer(l,u),{id:"toolbar button"+a++,index:this.buttons.length,state:f.INACTIVE,parent:this,draw:function(){if(this.isVisible&&this.boundingBox){switch(p.save(),p.strokeStyle=f.inactiveStrokeColor,p.font=v,p.textAlign="center",p.textBaseline="middle",this.state){case f.INACTIVE:p.fillStyle=f.inactiveColor;break;case f.HOVERED:p.fillStyle=s;break;case f.CLICKED:p.fillStyle=s,p.strokeStyle=f.activeStrokeColor;break;case f.SELECTED:p.fillStyle=c}p.fillRect(this.boundingBox.left,this.boundingBox.top,this.boundingBox.width,this.boundingBox.height),p.lineWidth=1,p.strokeRect(this.boundingBox.left,this.boundingBox.top,this.boundingBox.width,this.boundingBox.height),p.fillStyle="white",p.fillText(e,this.boundingBox.left+.5*this.boundingBox.width,this.boundingBox.top+.5*this.boundingBox.height,this.boundingBox.width),p.restore()}},notify:function(e){if(this.isVisible)switch(e.type){case i.MOUSE_DOWN:return-1!==platform.featureFlags.indexOf(r.TOUCH)?(this.state=f.SELECTED,d&&d(e,this)):this.state=f.CLICKED,this.draw(),!0;case i.MOUSE_UP:if(this.state===f.CLICKED)return this.state=f.SELECTED,d&&d(e,this),this.draw(),!0;break;case i.MOUSE_MOVE:if(this.state===f.INACTIVE)return this.state=f.HOVERED,this.draw(),!0;break;case i.MOUSE_LEAVE:if(this.state!==f.SELECTED&&this.state!==f.INACTIVE)return this.state=f.INACTIVE,this.draw(),!0}return!1},setBoundingBox:function(e){this.boundingBox=t.createBoundingBox(e.left+this.index*f.buttonWidth,e.top,f.buttonWidth,e.height),-1!==platform.featureFlags.indexOf(r.TOUCH)&&(this.pickBoundingBox=t.createBoundingBox(e.left+this.index*f.buttonWidth,Math.max(0,e.top-y),f.buttonWidth,e.height+y)),s=p.createLinearGradient(0,0,0,this.boundingBox.height),s.addColorStop(0,f.hoverBackgroundTopColor),s.addColorStop(1,f.hoverBackgroundBottomColor),c=p.createLinearGradient(0,0,0,this.boundingBox.height),c.addColorStop(0,f.selectedBackgroundTopColor),c.addColorStop(1,f.selectedBackgroundBottomColor)},setVisible:function(e){return this.isVisible=e,this.boundingBox&&(e?this.draw():(this.state=f.INACTIVE,this.boundingBox.clearRect(p),u.isVML&&this.parent.draw())),this},setCallback:function(e){return d=e,this}});return this.buttons.push(h),h},removeToolbarButton:function(e){this.buttons.splice(e.index,1)},draw:function(){if(this.boundingBox)for(d=0,h=this.buttons.length;h>d;d++)this.buttons[d].draw()},notify:function(e){if(e.isMouseEvent){if(h=this.buttons.length,e.type===i.MOUSE_LEAVE){for(d=0;h>d;d++)n.notifyIfMouseLeaving(this.buttons[d],e,c);return!0}for(d=0;h>d;d++)if(n.hitTest(this.buttons[d],e,!0,c))return!0}return!1},setBoundingBox:function(e){this.boundingBox=t.createBoundingBox(e.left,e.top,Math.max(1,this.buttons.length)*f.buttonWidth,e.height),-1!==platform.featureFlags.indexOf(r.TOUCH)&&(y=e.height*s,this.pickBoundingBox=t.createBoundingBox(e.left,Math.max(0,e.top-y),Math.max(1,this.buttons.length)*f.buttonWidth,e.height+y)),o.iterate(this.buttons,function(e,t){e.setBoundingBox(t.boundingBox),e.offsetX=t.offsetX,e.offsetY=t.offsetY},this)}});return b}};return l}),define("oven/unvetted/library/behaviors/resetBehavior",["oven/unvetted/library/behavior","oven/legacy/library/layers/toolbar","oven/unvetted/contracts/events","oven/library/utility/objects"],function(e,t,n,i){var r,o=0;return r={createBehavior:function(t,r,a,s){var l,u,c,d,h,f,p,g=t.getEventManager(),m=null,v=null,y=[];return u={id:"resetBehavior"+(o+=1),interactions:[],bindLayer:function(e){y.push(e)},bindAxis:function(e){return v=e,this},bindToolbarButton:function(e){return m=e,m.setCallback(l),this},notify:function(e){return(v||y.length)&&e.type===n.RESET_VIEW?(l(e),!0):!1}},l=function(r){var o=n.createResetEvent(u,r);if(a&&a.log&&a.log.verbose&&a.log.verbose(u.id+" onReset"),m&&m.setVisible(!1),i.iterate(u.interactions,function(e){g.notify(n.createInteractionEvent(n.INTERACTION_END,e,m,r))}),v){for(c=[v.rangeOutputs],f=[v],v.dateDataWindow=null,v.setBoundingBox(v.boundingBox),d=0,p=v.rangeOutputs.length;p>d;d+=1)h=v.rangeOutputs[d],h.axisY&&(h.axisY.rescale(h),h.axisY.pixelMapper&&h.axisY.pixelMapper.resetOffset(),f.push(h.axisY));c.push(f),e.drawTargets(t,c,this,!1,s)}i.iterate(y,function(e){e.notify(o)})},u}}}),define("oven/visualizations/multiLevelPie/multiLevelPieVisualization",["oven/visualizations/multiLevelPie/multiLevelPieVisualizationConfig","oven/vislets/multiLevelPie/multiLevelPieSignals","oven/vislets/multiLevelPie/multiLevelPieDataContract","oven/unvetted/contracts/events","oven/vislets/multiLevelPie/multiLevelPieVislet","oven/vislets/gridLayoutVislet","oven/legacy/library/layers/gridLayoutContainer","oven/legacy/library/layers/plotArea","oven/legacy/library/layers/layer","oven/unvetted/library/interaction","oven/unvetted/library/behaviors/resetBehavior","oven/library/utility/objects","oven/unvetted/contracts/commonConfig"],function(e,t,n,i,r,o,a,s,l,u,c,d,h){var f={configContract:function(){return e},dataContract:function(){return n},createVisualizationDerived:function(e,n){function f(e){var t=o.createVislet(n,e);
t.overlay.setZIndex(l.MAX_Z);var i=s.createPlotArea(n,t.canvas,e,null,t.perf).setBackgroundGradient(e.backgroundGradientStartColor,e.backgroundGradientEndColor);w.eventProvider.registerMouseEvents(t.overlay);var d=r.createVislet(n,t.overlay,e,t.perf),h=c.createBehavior(n,t.overlay,e,t.perf);return h.bindLayer(d.contentLayers[0]),d.interactions[u.RESET]&&d.interactions[u.RESET].bindBehavior(h),t.addRow(16,a.SIZE_ABSOLUTE),t.addRow(1,a.SIZE_REMAINDER),t.addColumn(1,a.SIZE_REMAINDER),t.addLayer(i,0,0,2,1),t.addLayer(d,0,0,2,1),t.addLayer(t.perf,0,0,1,1),t.updateConfig=function(e){d.updateConfig(e)},t.updateData=function(e){d.updateData(e)},t}function p(){return{notify:function(e){switch(e.group){case i.BASEEVENTS_GROUP:m(e);break;case i.DATAEVENT_GROUP:g(e);break;case i.PROPERTYEVENT_GROUP:v(e)}}}}function g(e){E.updateData(e)}function m(e){var n;switch(e.type){case t.NODE_CLICKED:n={sliceId:e.sliceId},x.signalFire("node_clicked",n);break;case t.USER_CLICK_SET_ROOT_NODE:n={sliceId:e.sliceId},x.signalFire("user_click_set_root_node",n);break;case t.NEW_ROOT_NODE:n={sliceId:e.sliceId},x.signalFire("new_root_node",n);break;case t.NAV_ANIMATION_BEGIN:x.signalFire("nav_animation_begin");break;case t.NAV_ANIMATION_END:x.signalFire("nav_animation_end")}}function v(e){var t=!1;switch(e.type){case i.PROPERTY_ADD:case i.PROPERTY_UPDATE:for(var n=0;n<e.events.length;++n){var r=e.events[n],o=r.typeId;if("MultiLevelPie"===o){var a=r.properties;E.updateConfig(a),t=!0}}break;case i.PROPERTY_REMOVE:}t&&x.queueDraw()}function y(){var e=C.getConfig("MultiLevelPie");e.stringTable=h.createDefaultStringTable();var t=f(e);T.register(t);var n=p(),r=[i.BASEEVENTS_GROUP,i.DATAEVENT_GROUP,i.PROPERTYEVENT_GROUP];return r.forEach(function(e){T.register(n,50,e)}),t}function b(e,t){E=y(),x.postInitialPaint(e,t)}function _(){E.draw()}var x=e,w=n.getPlatform(),C=n.getConfigManager(),T=n.getEventManager(),E=null,S={setRootNode:function(e,n){var i=t.createForceSetRootNodeSignal(this,e,n!==!1);T.notify(i)}};return{publicInterface:d.assimilate(S,{}),protectedInterface:{initialPaint:b,draw:_}}}};return f}),define("oven/unvetted/library/utility/idServer",[],function(){var e;return e={create:function(e){var t=e,n=0;return{create:function(e){return e&&""!==e?e:t+ ++n}}}}}),define("oven/library/collections/linkedList",[],function(){var e;return e={nodeCreate:function(){return{prev:null,next:null}},nodeAdd:function(e,t,n){e.next=n,e.prev=t,n.prev=e,t.next=e},nodeRemove:function(e){e.next.prev=e.prev,e.prev.next=e.next,e.next=null,e.prev=null},nodeSwap:function(e,t){var n=e.prev,i=e.next;e.next=null,e.prev=null,nodeAdd(t,n,i)},create:function(){var e=this.nodeCreate();return e.prev=e,e.next=e,e},removeAll:function(e,t){var n,i;if(t)for(n=e.next;n!==e;n=i)t(n),i=n.next,n.prev=null,n.next=null;else for(n=e.next;n!==e;n=i)i=n.next,n.prev=null,n.next=null;e.prev=e,e.next=e},forEach:function(e,t){var n;for(n=e.next;n!==e;n=n.next)t(n)},forEachReverse:function(e,t){var n;for(n=e.prev;n!==e;n=n.prev)t(n)}}}),/**
 * @file      A module containing a functional interface for matrix
 *            transformations in R2.
 * @author    Bret Alfieri <balfieri2@bloomberg.net>,
 *            Alex Betts <abetts3@bloomberg.net>
 * @copyright Bloomberg LP 2014
 */
define("oven/library/math/algebra/mat3d",["oven/library/math/base/mathExt","oven/library/math/base/typedArrays"],function(e,t){function n(e,t,n){var i=null,r=e[0],o=e[1],a=e[2],s=e[3],l=e[4],u=e[5],c=e[6],d=e[7],h=e[8],f=l*h-u*d,p=s*h-u*c,g=s*d-l*c,m=o*h-a*d,v=r*h-a*c,y=r*d-o*c,b=o*u-a*l,_=r*u-a*s,x=r*l-o*s;return t&&(t[0]=f,t[3]=-p,t[6]=g,t[1]=-m,t[4]=v,t[7]=-y,t[2]=b,t[5]=-_,t[8]=x),n&&(i=r*f-o*p+a*g),i}var i={};return i.create=function(e,n,i,r,o,a,s,l,u){return void 0===e?t.createFloat32Array(0,0,0,0,0,0,0,0,0):t.createFloat32Array(e,n,i,r,o,a,s,l,u)},i.clone=function(e){return t.createFloat32Array(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},i.fill=function(e,t){return e[0]=t,e[1]=t,e[2]=t,e[3]=t,e[4]=t,e[5]=t,e[6]=t,e[7]=t,e[8]=t,e},i.init=function(e,t,n,i,r,o,a,s,l,u){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e[4]=o,e[5]=a,e[6]=s,e[7]=l,e[8]=u,e},i.initIdentity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},i.initTransform=function(e,t,n,r){return i.initScale(e,r[0],r[1]),i.rotate(e,e,n),i.translate(e,e,t[0],t[1])},i.initTranslation=function(e,t,n){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t,e[7]=n,e[8]=1,e},i.initScale=function(e,t,n){return e[0]=t,e[1]=0,e[2]=0,e[3]=0,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},i.initRotation=function(t,n){var i=e.cos(n),r=e.sin(n);return t[0]=i,t[1]=r,t[2]=0,t[3]=-r,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.initWindowTransform=function(e,t,n,i,r,o,a,s,l){var u=(s-o)/(r-n),c=(l-a)/(r-n);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=c,e[5]=0,e[6]=-t*u+o,e[7]=-n*c+a,e[8]=1,e},i.translate=function(e,t,n,i){return e===t?(e[6]+=n,e[7]+=i):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6]+n,e[7]=t[7]+i,e[8]=t[8]),e},i.rotate=function(t,n,i){var r=e.cos(i),o=e.sin(i),a=n[0],s=n[1],l=n[3],u=n[4],c=n[6],d=n[7];return t[0]=a*r+s*-o,t[1]=a*o+s*r,t[2]=n[2],t[3]=l*r+u*-o,t[4]=l*o+u*r,t[5]=n[5],t[6]=c*r+d*-o,t[7]=c*o+d*r,t[8]=n[8],t},i.scale=function(e,t,n,i){return e[0]=t[0]*n,e[1]=t[1]*i,e[2]=t[2],e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5],e[6]=t[6]*n,e[7]=t[7]*i,e[8]=t[8],e},i.affineDecomposeTranslation=function(e,t){return e[0]=t[6],e[1]=t[7],e},i.affineDecomposeRotation=function(t){return e.atan2(t[1],t[0])},i.affineDecomposeScale=function(t,n){var i=n[0],r=n[1],o=n[3],a=n[4];if(0===r&&0===o)t[0]=i,t[1]=a;else{t[0]=e.sqrt(i*i+r*r),t[1]=e.sqrt(o*o+a*a);var s=0,l=e.atan2(n[1],n[0]),u=e.atan2(n[3],n[4]);switch(e.cos(l)<0&&(s|=1),e.sin(l)<0&&(s|=2),e.cos(u)<0&&(s|=4),e.sin(u)<0&&(s|=8),s){case 1:case 4:case 11:case 14:t[1]=-t[1]}}return t},i.affineMul=function(e,t,n){var i=t[0],r=t[1],o=t[3],a=t[4],s=t[6],l=t[7],u=n[0],c=n[1],d=n[3],h=n[4],f=n[6],p=n[7];return e[0]=i*u+r*d,e[1]=i*c+r*h,e[2]=0,e[3]=o*u+a*d,e[4]=o*c+a*h,e[5]=0,e[6]=u*s+d*l+f,e[7]=c*s+h*l+p,e[8]=1,e},i.affineInvert=function(e,t){var n=t[0],r=t[1],o=t[3],a=t[4],s=t[6],l=t[7],u=n*a-r*o;return 0===u?i.init(e,0,0,0,0,0,0,0,0,0):(u=1/u,e[0]=a*u,e[1]=r*-u,e[2]=0,e[3]=o*-u,e[4]=n*u,e[5]=0,e[6]=(o*l-a*s)*u,e[7]=(r*s-n*l)*u,e[8]=1),e},i.getAffineExpansion=function(t){var i=n(t,null,!0);return e.sqrt(i>=0?i:-i)},i.affineUnexpand=function(e,t,n){n||(n=i.getAffineExpansion(t)),n=1/n,e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2],e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8]},i.neg=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e},i.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},i.sub=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e},i.mul=function(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=n[0],f=n[1],p=n[2],g=n[3],m=n[4],v=n[5],y=n[6],b=n[7],_=n[8];return e[0]=i*h+r*g+o*y,e[1]=i*f+r*m+o*b,e[2]=i*p+r*v+o*_,e[3]=a*h+s*g+l*y,e[4]=a*f+s*m+l*b,e[5]=a*p+s*v+l*_,e[6]=u*h+c*g+d*y,e[7]=u*f+c*m+d*b,e[8]=u*p+c*v+d*_,e},i.scalarMul=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},i.transpose=function(e,t){if(t===e){var n=t[1],i=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=i,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},i.getDeterminant=function(e){return n(e,null,!0)},i.invert=function(e,t){var r=n(t,e,!0);return 0===r?i.init(e,0,0,0,0,0,0,0,0,0):i.scalarMul(e,e,1/r),e},i.decompose=function(e){var t=e[0],n=e[2],i=e[1],r=e[3];return{translate:[e[4],e[5]],rotate:Math.atan(i/r),scale:[(0>t?-1:1)*Math.sqrt(t*t+n*n),(0>r?-1:1)*Math.sqrt(i*i+r*r)]}},i.equalsRel=function(t,n,i){return e.equalsRel(t[0],n[0],i)&&e.equalsRel(t[1],n[1],i)&&e.equalsRel(t[2],n[2],i)&&e.equalsRel(t[3],n[3],i)&&e.equalsRel(t[4],n[4],i)&&e.equalsRel(t[5],n[5],i)&&e.equalsRel(t[6],n[6],i)&&e.equalsRel(t[7],n[7],i)&&e.equalsRel(t[8],n[8],i)},i.toString=function(e){return"["+e[0]+","+e[1]+","+e[2]+","+e[3]+","+e[4]+","+e[5]+","+e[6]+","+e[7]+","+e[8]+"]"},i}),define("oven/library/container/container",["oven/3rdparty/sys-jscore/main","oven/unvetted/library/utility/idServer","oven/library/collections/linkedList","oven/library/math/aabox","oven/library/math/algebra/mat3d"],function(e,t,n,i,r){var o=t.create("container"),a=0;return e.Class.define({init:function(e,t,s,l){this._uid=a++,this._id=o.create(e),this._parent=null,this._ordering=0,this._depth=0,this._node=n.nodeCreate(),this._context=t||null,this._active=!0,s?(this._size=[s[2]-s[0],s[3]-s[1]],this._matrix=r.create(1,0,0,1,s[0],s[1]),this._rectDirty=!1,this._localRect=i.createSize(this._size[0],this._size[1]),this._rect=i.createCopy(s)):(this._size=[0,0],this._matrix=r.initIdentity(r.create()),this._rectDirty=!1,this._localRect=i.createSize(this._size[0],this._size[1]),this._rect=i.createEmpty()),this._isGroup=l||!1,this._matrixInverseDirty=!1,this._matrixInverse=r.affineInvert(r.create(),this._matrix),this._worldMatrixDirty=!1,this._worldMatrix=r.copy(r.create(),this._matrix),this._worldMatrixInverseDirty=!1,this._worldMatrixInverse=r.copy(r.create(),this._matrixInverse),this._worldRectDirty=!1,this._worldRect=i.createCopy(this._rect)},statics:{LessThanZ:function(e,t){if(e.parent&&t.parent){if(e.depth!==t.depth)return e.depth<t.depth;for(;e.parent!==t.parent;)e=e.parent,t=t.parent;return e.ordering<t.ordering}if(e.context===t.context)return e.parent?!1:!0;throw new Error("Attempting to compare the relative ordering of two containers - "+e.id+" and "+t.id+" - that are not in the same hierarchy")}},"private":{updateRect:function(){this._rectDirty&&(i.initSize(this._localRect,this._size[0],this._size[1]),i.transformAffine2dAsHomothetic2d(this._rect,this._localRect,this._matrix),this._rectDirty=!1)}},"public":{uid:{get:function(){return this._uid}},id:{get:function(){return this._id}},parent:{set:function(e){this._parent=e},get:function(){return this._parent}},ordering:{set:function(e){this._ordering=e},get:function(){return this._ordering}},depth:{set:function(e){this._depth=e},get:function(){return this._depth}},next:{set:function(e){this._node.next=e},get:function(){return this._node.next}},prev:{set:function(e){this._node.prev=e},get:function(){return this._node.prev}},context:{set:function(e){this._context=e||null},get:function(){return this._context}},active:{set:function(e){this._active=e},get:function(){return this._active}},isGroup:{get:function(){return this._isGroup}},size:{get:function(){return this._size}},localRect:{get:function(){return this.updateRect(),this._localRect}},rect:{get:function(){return this.updateRect(),this._rect}},worldRect:{get:function(){return this._worldRectDirty&&(this._parent?i.transformAffine2dAsHomothetic2d(this._worldRect,this.rect,this._parent.containerToWorldTransform):i.initCopy(this._worldRect,this.localRect),this._worldRectDirty=!1),this._worldRect}},containerToParentTransform:{get:function(){return this._matrix}},containerFromParentTransform:{get:function(){return this._matrixInverseDirty&&(r.affineInvert(this._matrixInverse,this._matrix),this._matrixInverseDirty=!1),this._matrixInverse}},containerToWorldTransform:{get:function(){return this._worldMatrixDirty&&(this._parent?r.affineMul(this._worldMatrix,this._matrix,this._parent.containerToWorldTransform):r.copy(this._worldMatrix,this._matrix),this._worldMatrixDirty=!1),this._worldMatrix}},containerFromWorldTransform:{get:function(){return this._worldMatrixInverseDirty&&(r.affineInvert(this._worldMatrixInverse,this.containerToWorldTransform),this._worldMatrixInverseDirty=!1),this._worldMatrixInverse}},setRect:function(e){this.setPosition(e[0],e[1]),this.setSize(e[2]-e[0],e[3]-e[1])}},virtual:{"public":{dirtyWorldStuff:function(){this._worldMatrixDirty=!0,this._worldMatrixInverseDirty=!0,this._worldRectDirty=!0},setContext:function(e){this._context=e||null},setPosition:function(e,t){this._matrix[6]=e,this._matrix[7]=t,this._matrixInverseDirty=!0,this._rectDirty=!0,this.dirtyWorldStuff()},setSize:function(e,t){this._size[0]=e,this._size[1]=t,this._rectDirty=!0,this._worldRectDirty=!0}}}})}),define("oven/library/collections/stack",[],function(){var e,t;return t={None:0,Array:1,Elements:2},e={Reuse:t,create:function(e,n){var i,r,o=new Array(n||0),a=0;return r=e===t.Array?function(){a>0&&(a-=1,o[a]=void 0)}:e===t.Elements?function(){a>0&&(a-=1)}:function(){a>0&&(a-=1,delete o[a])},i={empty:function(){return 0===a},size:function(){return a},top:function(){return o[a-1]},push:function(e){o[a]=e,a+=1},pop:r,swap:function(e){var t;t=e._elements,e._elements=o,o=t,t=e._tail,e._tail=a,a=t},reset:function(){return a=0,this},capacity:function(){return o.length},full:function(){return a>=o.length},tail:function(){return a<o.length?o[a]:void 0}}}}}),define("oven/library/collections/queue",[],function(){var e,t;return t={None:0,Array:1,Elements:2},e={create:function(e,n){var i,r,o=new Array(n),a=0,s=0;return r=e===t.Array?function(){a!==s&&(o[a]=void 0,a+=1)}:e===t.Elements?function(){a!==s&&(a+=1)}:function(){a!==s&&(delete o[a],a+=1)},i={empty:function(){return s===a},size:function(){return s-a},front:function(){return s===a?void 0:o[a]},back:function(){return s===a?void 0:o[s]},push:function(e){o[s]=e,s+=1},pop:r,swap:function(e){var t;t=e._elements,e._elements=o,o=t,t=e._head,e._head=a,a=t,t=e._tail,e._tail=s,s=t},reset:function(){a=0,s=0},capacity:function(){return o.length},full:function(){return s>=o.length},tail:function(){return s<o.length?o[s]:void 0}}}}}),define("oven/library/container/groupContainer",["oven/3rdparty/sys-jscore/main","oven/library/container/container","oven/library/collections/linkedList","oven/library/collections/stack","oven/library/collections/queue","oven/library/math/aabox","oven/unvetted/library/utility/algorithm"],function(e,t,n,i,r,o,a){function s(e,t,n,o,a){function s(t){e(a,t)}if(n===p.DepthFirst)for(a?a.reset():a=i.create(),s(t);!a.empty();)t=a.top(),a.pop(),o(t),t.isGroup&&t.forEachChild(s,-1);else if(n===p.BreadthFirst)for(a?a.reset():a=r.create(),s(t);!a.empty();)t=a.front(),a.pop(),o(t),t.isGroup&&t.forEachChild(s)}function l(e,t,n,i){s(function(e,t){e.push(t)},e,t,n,i)}function u(e,t,n,i,r){s(function(e,t){n(t)&&e.push(t)},e,t,i,r)}function c(e,t,n,i,r){u(e,t,function(e){return e.active&&o.contains(e.worldRect,n)},i,r)}function d(e,t,n,i,r){u(e,t,function(e){return e.active&&o.overlaps(e.worldRect,n)},i,r)}function h(e){l(e,p.DepthFirst,function(e){e.dirtyWorldStuff()},e.context?e.context.tmpStack:void 0)}function f(e,t){l(e,p.DepthFirst,function(e){e.depth=e.parent?e.parent.depth+1:0,e.setContext(t)},e.context?e.context.tmpStack:void 0)}var p,g;return p={DepthFirst:0,BreadthFirst:1},g=e.Class.define(t,{init:function(e,t,i){this.initSuper(e,t,i,!0),this._children=n.create(),this._numChildren=0,this._childArray=[],this._childArrayDirty=!0,this._sortedChildArray=[],this._sortedChildArrayDirty=!0},statics:{VisitDirections:p,Visit:l,VisitIf:u,VisitIntersectingPoint:c,VisitIntersectingRect:d},"private":{childrenSortedById:{get:function(){var e;return this._sortedChildArrayDirty&&(this._sortedChildArray=e=this.children.slice(0),e.sort(function(e,t){return e.id.localeCompare(t.id)}),this._sortedChildArrayDirty=!1),this._sortedChildArray}},maintainChildOrdering:function(e){var t;for(t=e.prev!==this._children?e.prev.ordering+1:0;e!==this._children;)e.ordering=t++,e=e.next},postChildReordered:function(e){this.maintainChildOrdering(e),this._childArrayDirty=!0},postChildAdded:function(e){e.parent=this.publicThis,++this._numChildren,this.postChildReordered(e),this._sortedChildArrayDirty=!0,f(e,this.context),h(e)}},"public":{numChildren:{get:function(){return this._numChildren}},children:{get:function(){var e=this._childArray;return this._childArrayDirty&&(e.length=0,n.forEach(this._children,function(t){e.push(t)}),this._childArrayDirty=!1),e}},getChildByIndex:function(e){return e<this._numChildren?this.children[e]:null},getChildrenById:function(e){var t,n=this.childrenSortedById,i=[];for(t=a.equal_range(a.view(n),e,function(e,t,n){return 0===n?e.id<t:e<t.id});t[0]<t[1];)i.push(n[t[0]++]);return i},getChildById:function(e){var t;return t=a.equal_range(a.view(this.childrenSortedById),e,function(e,t,n){return 0===n?e.id<t:e<t.id}),this.getChildByIndex(t[0])},addChild:function(i){if(!e.Class.isInstanceOf(t,i))throw new Error("Error in addChild: attempting to add non-container to "+this.id);if(i.parent)throw new Error("Error in addChild: "+i.id+" is already a child of "+i.parent.id);n.nodeAdd(i,this._children.prev,this._children),this.postChildAdded(i)},insertChildBefore:function(i,r){if(!e.Class.isInstanceOf(t,i))throw new Error("Error in insertChildBefore: attempting to add non-container to "+this.id);if(i.parent)throw new Error("Error in insertChildBefore: "+i.id+" is already a child of "+i.parent.id);r&&r.parent===this.publicThis?n.nodeAdd(i,r.prev,r):n.nodeAdd(i,this._children.prev,this._children),this.postChildAdded(i)},insertChildAfter:function(i,r){if(!e.Class.isInstanceOf(t,i))throw new Error("Error in insertChildAfter: attempting to add non-container to "+this.id);if(i.parent)throw new Error("Error in insertChildAfter: "+i.id+" is already a child of "+i.parent.id);r&&r.parent===this.publicThis?n.nodeAdd(i,r,r.next):n.nodeAdd(i,this._children,this._children.next),this.postChildAdded(i)},reorderChildBefore:function(i,r){if(!e.Class.isInstanceOf(t,i))throw new Error("Error in reorderChildBefore: passed non-container as argument to "+this.id);if(i.parent!==this.publicThis)throw new Error("Error in reorderChildBefore: "+i.id+" is not a child of "+this.id);n.nodeRemove(i),r?n.nodeAdd(i,r.prev,r):n.nodeAdd(i,this._children.prev,this._children),this.postChildReordered(i)},reorderChildAfter:function(i,r){if(!e.Class.isInstanceOf(t,i))throw new Error("Error in reorderChildAfter: passed non-container as argument to "+this.id);if(i.parent!==this.publicThis)throw new Error("Error in reorderChildAfter: "+i.id+" is not a child of "+this.id);n.nodeRemove(i),r?n.nodeAdd(i,r,r.next):n.nodeAdd(i,this._children,this._children.next),this.postChildReordered(i)},swapChild:function(i,r){if(!e.Class.isInstanceOf(t,i)||!e.Class.isInstanceOf(t,r))throw new Error("Error in swapChild: attempting to add non-container to "+this.id);if(i.parent!==this.publicThis)throw new Error("Error in swapChild: "+i.id+" is not a child of "+this.id);if(r.parent)throw new Error("Error in swapChild: "+r.id+" is already a child of "+r.parent.id);i!==r&&(n.nodeSwap(i,r),i.parent=null,--this._numChildren,this.postChildAdded(r),f(i,null),h(i))},removeChild:function(i){if(!e.Class.isInstanceOf(t,i))throw new Error("Error in removeChild: attempting to remove non-container from "+this.id);if(i.parent!==this.publicThis)throw new Error("Error in removeChild: "+i.id+" is not a child of "+this.id);n.nodeRemove(i),i.parent=null,--this._numChildren,this._childArrayDirty=!0,this._sortedChildArrayDirty=!0,f(i,null),h(i)},removeChildren:function(){var e=[];n.removeAll(this._children,function(t){t.parent=null,e.push(t)}),this._numChildren=0,this._childArrayDirty=!0,this._sortedChildArrayDirty=!0,e.forEach(function(e){f(e,null),h(e)})},forEachChild:function(e,t){void 0===t||t>=0?n.forEach(this._children,e):n.forEachReverse(this._children,e)}},virtual:{"public":{forEachChildIntersectingPoint:function(e,t,n){this.forEachChild(function(n){o.contains(n.rect,e)&&t(n)},n)},forEachChildIntersectingRect:function(e,t,n){this.forEachChild(function(n){o.overlaps(n.rect,e)&&t(n)},n)}},override:{setPosition:function(e,t){this.super.setPosition(e,t),h(this)}}}})}),define("oven/library/container/canvas",["oven/library/math/aabox","oven/library/collections/linkedList"],function(e,t){var n;return n={create:function(n,i,r){var o,a,s,l,u,c,d,h,f,p,g=i,m=t.create(),v=!1,y=!1,b=!1,_=!1,x=!1,w=e.createEmpty(),C=e.createEmpty(),T=!1;return s=n.getPlatform().createCanvas(!1,!1),l=s.getContext("2d"),u=!0,s.id=r||i.id,s.style.position="absolute",a=i.worldRect,e.empty(a)&&(a=[0,0,0,0]),c=a[0],d=a[1],h=a[2]-c,f=a[3]-d,p=0,s.style.left=c+"px",s.style.top=d+"px",s.width=h,s.height=f,s.style.zIndex=p,o={container:function(){return g},canvas:function(){return s},context:function(){return l},next:null,prev:null,components:function(){return m},getVisible:function(){return u},setVisible:function(e){u=e,s.style.visibility=e?"visible":"hidden"},setClear:function(e){v=e},getZ:function(){return p},setZ:function(e){p=e,s.style.zIndex=e},dirtyComponentsQueued:function(){return y},dirtyLayoutQueued:function(){return b},dirtyContentsQueued:function(){return _},dirtyRect:function(){return w},dirtyComponents:function(){y=!0},dirtyLayout:function(){b=!0},dirtyContents:function(t){_=!0,x||(e.hull(w,w,t||g.localRect),(!t||e.subset(g.localRect,w))&&(e.intersection(w,g.localRect,w),x=!0))},dirtyWorldContents:function(t){this.dirtyCanvasContents(this,t?e.transformAffine2dAsHomothetic2d(C,t,g.containerFromWorldTransform):void 0)},cleanLayout:function(){var e,t,n,i,r;T=_&&v,b&&(e=g.worldRect,t=e[0],n=e[1],i=e[2]-t,r=e[3]-n,(c!==t||d!==n)&&(c=t,d=n,s.style.left=t+"px",s.style.top=n+"px"),(h!==i||f!==r)&&(_=!0,x=!0,T=!1,h=i,f=r,s.width=i,s.height=r),b=!1)},cleanContents:function(t){_&&(x?(e.initCopy(w,g.localRect),T&&(s.width=s.width)):(e.intersection(w,g.localRect,w),T&&l.clearRect(w[0],w[1],w[2]-w[0],w[3]-w[1])),t(this,s,l,e.transformAffine2dAsHomothetic2d(w,w,g.containerToWorldTransform)),e.initEmpty(w),y=!1,_=!1,x=!1,T=!1)}},Object.preventExtensions(o),Object.seal(o),o}}}),define("oven/library/container/vislet",["oven/3rdparty/sys-jscore/main","oven/unvetted/library/utility/idServer","oven/library/container/groupContainer","oven/library/container/canvas","oven/library/math/aabox"],function(e,t,n,i,r){var o,a=t.create("vislet");return o=e.Class.define(n,{init:function(e,t,n,r){this.initSuper(a.create(t),void 0,n),this._sharedContext=e,r?(this._ownCanvas=i.create(e,this),this._canvas=this._ownCanvas):(this._ownCanvas=null,this._canvas=null)},"public":{sharedContext:{get:function(){return this._sharedContext}},visible:{get:function(){return this.active},set:function(e){var t=!this._ownCanvas&&this.context;this.active!==e&&(!e&&t&&this.dirty(),this.active=e,this._ownCanvas&&this._ownCanvas.setVisible(e),e&&t&&this.dirty())}},canvas:{get:function(){return this._canvas}},ownCanvas:{get:function(){return this._ownCanvas}},addContents:function(e){this.addChild(e),e.setPosition(0,0),e.setSize(this.size[0],this.size[1]),this.dirty()},removeContents:function(e){this.removeChild(e),this.dirty()}},"private":{dirty:function(){this._ownCanvas?this.context?this.context.dirtyCanvasContents(this._ownCanvas,void 0):this._ownCanvas.dirtyContents(void 0):this._canvas&&this.context.dirtyCanvasWorldContents(this._canvas,this.worldRect)},dirtyCanvasLayout:function(){var e,t=this._ownCanvas;t&&(e=this.context,e?e.dirtyCanvasLayout(t):t.dirtyLayout())}},virtual:{override:{setContext:function(e){var t=this.context;this.super.setContext(e),t!==e&&(this._ownCanvas?e?e.addCanvas(this._ownCanvas):t.removeCanvas(this._ownCanvas):this._canvas=e?e.getContainingCanvas(this):null)},setPosition:function(e,t){this.super.setPosition(e,t),this.dirtyCanvasLayout()},setSize:function(e,t){this.super.setSize(e,t),this.forEachChild(function(n){n.setSize(e,t)}),this.dirtyCanvasLayout()},forEachChildIntersectingPoint:function(e,t,n){r.contains(this.rect,e)&&this.forEachChild(t,n)},forEachChildIntersectingRect:function(e,t,n){r.overlaps(this.rect,e)&&this.forEachChild(t,n)}}}})}),define("oven/library/container/component",["oven/3rdparty/sys-jscore/main","oven/unvetted/library/utility/idServer","oven/library/container/container","oven/library/math/aabox","oven/library/math/algebra/mat3d","oven/library/math/geometry2d/point2d","oven/library/container/canvas","oven/library/collections/linkedList","oven/unvetted/kernel/kernelDraw"],function(e,t,n,i,r,o,a,s,l){var u,c,d,h=t.create("component");return c={Top:0,Right:1,Bottom:2,Left:3},d={None:0,Floor:1,Ceil:2,Center:3,Round:4},u=e.Class.define(n,{init:function(e,t,n,o){this.initSuper(h.create(t),void 0,n),this._sharedContext=e,this._tmpRect=i.createEmpty(),this._drawListNode={self:this,draw:null,prev:null,next:null},o?(this._ownCanvas=a.create(e,this),this._canvas=this._ownCanvas):(this._ownCanvas=null,this._canvas=null),this._canvasMatrixDirty=!1,this._canvasMatrix=r.initIdentity(r.create()),this._canvasMatrixInverseDirty=!1,this._canvasMatrixInverse=r.initIdentity(r.create()),this._allDirty=!1,this._canvasRectDirty=!1,this._canvasRect=this._ownCanvas?i.createCopy(this.localRect):i.createCopy(this.worldRect),this._canvasRasterCorners=[[0,0],[0,0]],this._canvasRasterCornersDirty=!1},statics:{Edges:c,CanvasRasterOptions:d},"public":{sharedContext:{get:function(){return this._sharedContext}},drawListNode:{get:function(){return this._drawListNode}},visible:{get:function(){return this.active},set:function(e){var t=!this._ownCanvas&&this.context;this.active!==e&&(!e&&t&&this.dirty(),this.active=e,this._ownCanvas&&this._ownCanvas.setVisible(e),e&&t&&this.dirty())}},ownCanvas:{get:function(){return this._ownCanvas}},dirty:function(e){var t=this._allDirty;t||this.active&&(this._ownCanvas?this.context?this.context.dirtyCanvasContents(this._ownCanvas,e):this._ownCanvas.dirtyContents(e):this._canvas&&this.context.dirtyCanvasContents(this._canvas,e?i.transformAffine2dAsHomothetic2d(this._tmpRect,e,this.componentToCanvasTransform):this.canvasRect),this._allDirty=t||!e)},setClean:function(){this._allDirty=!1},componentToCanvasTransform:{get:function(){if(this._canvasMatrixDirty){if(!this._ownCanvas){if(!this._canvas)return void 0;r.affineMul(this._canvasMatrix,this.containerToWorldTransform,this._canvas.container().containerFromWorldTransform)}this._canvasMatrixDirty=!1}return this._canvasMatrix}},componentFromCanvasTransform:{get:function(){if(this._canvasMatrixInverseDirty){if(!this._ownCanvas){if(!this._canvas)return void 0;r.affineInvert(this._canvasMatrixInverse,this.componentToCanvasTransform)}this._canvasMatrixInverseDirty=!1}return this._canvasMatrixInverse}},canvasRect:{get:function(){if(this._canvasRectDirty){if(this._ownCanvas)i.initCopy(this._canvasRect,this.localRect);else{if(!this._canvas)return void 0;i.transformAffine2dAsHomothetic2d(this._canvasRect,this.worldRect,this._canvas.container().containerFromWorldTransform)}this._canvasRectDirty=!1}return this._canvasRect}},transformComponentToCanvasRasterEdge:function(e,t){return o.transform(e,t,this.componentToCanvasTransform),e[0]=.5+e[0]<<0,e[1]=.5+e[1]<<0,e},transformComponentToCanvasRasterCenter:function(e,t){return o.transform(e,t,this.componentToCanvasTransform),e[0]=Math.floor(e[0])+.5,e[1]=Math.floor(e[1])+.5,e},transformComponentToCanvasRasterOptions:function(e,t,n,i){return o.transform(e,t,this.componentToCanvasTransform),n===d.Floor?e[0]=Math.floor(e[0]):n===d.Ceil?e[0]=Math.ceil(e[0]):n===d.Center?e[0]=Math.floor(e[0])+.5:n===d.Round&&(e[0]=.5+e[0]<<0),i===d.Floor?e[1]=Math.floor(e[1]):i===d.Ceil?e[1]=Math.ceil(e[1]):i===d.Center?e[1]=Math.floor(e[1])+.5:i===d.Round&&(e[1]=.5+e[1]<<0),e},canvasRasterCorners:{get:function(){var e,t;return this._canvasRasterCornersDirty&&(e=this._canvasRasterCorners[0],e[0]=0,e[1]=0,this.transformComponentToCanvasRasterEdge(e,e),t=this._canvasRasterCorners[1],t[0]=this.size[0],t[1]=this.size[1],this.transformComponentToCanvasRasterEdge(t,t),this._canvasRasterCornersDirty=!1),this._canvasRasterCorners}}},"protected":{canvas:{get:function(){return this._canvas}},drawClip:function(){var e=this.canvasRect;l.drawRect(0,0,e[2]-e[0]+1,e[3]-e[1]+1,!1,!1,!0)},drawRasterClip:function(){var e,t;e=this.canvasRasterCorners[0],t=this.canvasRasterCorners[1],l.drawRect(e[0],e[1],t[0]-e[0],t[1]-e[1],!1,!1,!0)},drawRasterBackground:function(e,t){var n,i;e?(n=this.canvasRasterCorners[0],i=this.canvasRasterCorners[1],l.setFillStyle(e),l.drawRect(n[0],n[1],i[0]-n[0],i[1]-n[1],!0,!1,t)):t&&this.drawRasterClip()},drawRasterBorder:function(e,t,n){var i,r,o;e&&t&&(i=t/2,r=this.canvasRasterCorners[0],o=this.canvasRasterCorners[1],l.setStrokeStyle(e),l.setLineWidth(t),n===c.Top?l.drawLine(r[0],r[1]+i,o[0],r[1]+i):n===c.Right?l.drawLine(o[0]-i,r[1],o[0]-i,o[1]):n===c.Bottom?l.drawLine(r[0],o[1]-i,o[0],o[1]-i):n===c.Left&&l.drawLine(r[0]+i,r[1],r[0]+i,o[1]))}},"private":{dirtyCanvasLayout:function(){var e,t=this._ownCanvas;t&&(e=this.context,e?e.dirtyCanvasLayout(t):t.dirtyLayout())}},virtual:{override:{dirtyWorldStuff:function(){this.super.dirtyWorldStuff(),this._ownCanvas||(this._canvasMatrixDirty=!0,this._canvasMatrixInverseDirty=!0,this._allDirty=!1,this._canvasRectDirty=!0,this._canvasRasterCornersDirty=!0)},setContext:function(e){var t=this.context;this.super.setContext(e),t!==e&&(this._ownCanvas?e?(e.addCanvas(this._ownCanvas),e.dirtyCanvasComponents(this._ownCanvas)):t&&(t.dirtyCanvasComponents(this._ownCanvas),t.removeCanvas(this._ownCanvas)):e?(this._canvas=e.getContainingCanvas(this),e.dirtyCanvasComponents(this._canvas)):t&&(t.dirtyCanvasComponents(this._canvas),this._canvas=null))},setPosition:function(e,t){this.super.setPosition(e,t),this._allDirty=!1,this._canvasRectDirty=!0,this._canvasRasterCornersDirty=!0,this.dirtyCanvasLayout()},setSize:function(e,t){this.super.setSize(e,t),this._allDirty=!1,this._canvasRectDirty=!0,this._canvasRasterCornersDirty=!0,this.dirtyCanvasLayout()}},"public":{getDraw:function(){return null}}}})}),define("oven/library/container/visualization",["oven/3rdparty/sys-jscore/main","oven/unvetted/library/utility/idServer","oven/library/container/groupContainer","oven/library/container/vislet","oven/library/container/component","oven/unvetted/kernel/kernelDraw","oven/unvetted/kernel/kernelUtil","oven/library/math/aabox","oven/library/collections/linkedList","oven/library/collections/stack","oven/library/container/canvas","oven/unvetted/contracts/events"],function(e,t,n,i,r,o,a,s,l,u,c,d){var h,f=t.create("visualization"),p=9969;return h=e.Class.define(n,{init:function(e,t,i){function r(e,t,i,r){function o(e){var t=e.self,n=t.worldRect;if(s.overlaps(n,r)){try{t.visible&&e.draw(n)}catch(i){a.log.error("Exception while drawing component "+t.id+": "+(i.stack||""))}t.setClean()}}var u=e.components();e.dirtyComponentsQueued()&&(l.removeAll(u,void 0),n.VisitIf(e.container(),n.VisitDirections.DepthFirst,function(t){var n=t.ownCanvas;return!(n&&n!==e)},function(e){var t,n;e.getDraw&&(n=e.getDraw(),n&&(t=e.drawListNode,t.draw=n,l.nodeAdd(t,u.prev,u)))},x)),l.forEach(u,o)}function o(){l.forEach(b,function(e){e.cleanLayout()}),S.cleanLayout(),l.forEach(b,function(e){e.cleanContents(r)})}function h(){C=!0,o(),w=!1,C=!1}function g(){if(C)throw new Error("Attempting to dirty something while drawing... that's, like, an infinite loop, maaaaaaan");w||(T.requestAnimationFrame(h),w=!0)}function m(e){e.next&&e.prev&&e.getVisible()&&g()}function v(){return{tmpRect:_,tmpStack:x,addCanvas:function(e){var t,i;if(null!==e.next||null!==e.prev)throw new Error("Canvas "+e.container().id+" is already in a visualization");for(t=b,l.forEach(b,function(i){n.LessThanZ(i.container(),e.container())&&(t=i)}),e.canvas().addToDOM(),i=t===b?0:t.getZ()+1,l.nodeAdd(e,t,t.next),(e.dirtyLayoutQueued()||e.dirtyContentsQueued())&&e.getVisible()&&g();e!==b;e=e.next)e.setZ(i++)},removeCanvas:function(e){if(null===e.next||null===e.prev)throw new Error("Canvas "+e.id+" is not in the visualization");e.canvas().removeFromDOM(),l.nodeRemove(e)},setCanvasVisibility:function(e,t){e.setVisible(t)},getCanvasVisibility:function(e){return e.getVisible()},dirtyCanvasComponents:function(e){e.dirtyComponents()},dirtyCanvasLayout:function(e){e.dirtyLayout(),m(e)},dirtyCanvasContents:function(e,t){e.dirtyContents(t),m(e)},dirtyCanvasWorldContents:function(e,t){this.dirtyCanvasContents(e,t?s.transformAffine2dAsHomothetic2d(_,t,e.container().containerFromWorldTransform):void 0)},getContainingCanvas:function(e){for(var t=null;!t&&e;)!t&&e.canvas&&(t=e.canvas),e=e.parent;return t},dirtyContainingWorldContents:function(e,t){this.dirtyCanvasWorldContents(this.getContainingCanvas(e),t)},getCanvasContainerDimensions:function(){var e=y._sharedContext.getEventProvider(),t=e.getCanvasContainerDimensions();return t},primaryCanvas:function(){return E},overlayCanvas:function(){return S},pushCursor:function(e){S.canvas().pushCursor(e)},popCursor:function(){S.canvas().popCursor()}}}var y=this,b=l.create(),_=s.createEmpty(),x=u.create(u.Reuse.Array),w=!1,C=!1,T=e.getPlatform(),E=null,S=null;this.initSuper(f.create(t),v(),i),this._sharedContext=e,this._signalManager=null,this._primaryCanvas=E=c.create(e,this,this.id+"_primaryCanvas"),this._primaryCanvas.setClear(!1),this.context.addCanvas(this._primaryCanvas),this._overlayCanvas=S=c.create(e,this,this.id+"_overlayCanvas"),this._overlayCanvas.setClear(!1),this._overlayCanvas.canvas().addToDOM(),this._overlayCanvas.setZ(p),e.getPlatform().eventProvider.registerMouseEvents(this._overlayCanvas.canvas()),e.getResourceManager().addResource("primaryCanvasElement",E.canvas()),e.getResourceManager().addResource("overlayCanvasElement",S.canvas()),this._drawHud=!1,e.getEventManager().register({notify:function(e){var t;return e.type===d.WINDOW_RESIZE?(0!==e.width&&0!==e.height?y.setSize(e.width,e.height):a.log.error("Visualization","WINDOW_RESIZE setting invalid width and/or height. width = "+e.width+" height = "+e.height),!0):e.type===d.WINDOW_INVALIDATE?(t=d.rect,y.context.dirtyCanvasContents(E,t?[t.left,t.top,t.right,t.bottom]:y.worldRect),!0):void 0}},0,d.BASEEVENTS_GROUP)},"public":{sharedContext:{get:function(){return this._sharedContext}},setSignalManager:function(e){this._signalManager=e},ownCanvas:{get:function(){return this._primaryCanvas}},canvas:{get:function(){return this._primaryCanvas}},drawHud:{get:function(){return this._drawHud},set:function(e){this._drawHud=e,this._hudCanvas.style.visibility=this._drawHud?"visible":"hidden"}},addContents:function(e){this.addChild(e),e.setPosition(0,0),e.setSize(this.size[0],this.size[1]),this.context.dirtyCanvasContents(this._primaryCanvas,this.worldRect)},removeContents:function(e){this.removeChild(e),this.context.dirtyCanvasContents(this._primaryCanvas,this.worldRect)}},"protected":{preInitialPaint:function(){},getCanvasContainerDimensions:function(){return this.context.getCanvasContainerDimensions()},postInitialPaint:function(){var e=this.context.getCanvasContainerDimensions();this._sharedContext.getEventManager().notify(d.createResizeEvent(e.width,e.height))},signalFire:function(){this._signalManager.signalFire.apply(null,arguments)}},virtual:{"public":{initialPaint:function(e,t){this.postInitialPaint(e,t)}},override:{setPosition:function(e,t){this.super.setPosition(e,t),this.context.dirtyCanvasLayout(this._primaryCanvas),this.context.dirtyCanvasLayout(this._overlayCanvas)},setSize:function(e,t){this.super.setSize(e,t),this.forEachChild(function(n){n.setSize(e,t)}),this.context.dirtyCanvasLayout(this._primaryCanvas),this.context.dirtyCanvasLayout(this._overlayCanvas)},forEachChildIntersectingPoint:function(e,t,n){s.contains(this.rect,e)&&this.forEachChild(t,n)},forEachChildIntersectingRect:function(e,t,n){s.overlaps(this.rect,e)&&this.forEachChild(t,n)}}}})}),define("oven/library/math/interval",[],function(){var e;return e={initEmpty:function(e){return e[0]=1/0,e[1]=-1/0,e},initInfinite:function(e){return e[0]=-1/0,e[1]=1/0,e},init:function(e,t,n){return n>t?(e[0]=t,e[1]=n):t>n?(e[0]=n,e[1]=t):(e[0]=1/0,e[1]=-1/0),e},initSize:function(e,t){return t>0?(e[0]=0,e[1]=t):0>t?(e[0]=0,e[1]=-t):(e[0]=1/0,e[1]=-1/0),e},initOriginSize:function(e,t,n){return n>0?(e[0]=t,e[1]=t+n):0>n?(e[0]=t+n,e[1]=t):(e[0]=1/0,e[1]=-1/0),e
},initCopy:function(e,t){return e[0]=t[0],e[1]=t[1],e},initSizeCopy:function(e,t){return e[0]=0,e[1]=t[1]-t[0],e},initEnvelope:function(t,n){return e.initEmpty(t),e.envelope(t,t,n),t},createEmpty:function(){return[1/0,-1/0]},createInfinite:function(){return[-1/0,1/0]},create:function(t,n){return e.init([1/0,-1/0],t,n)},createOriginSize:function(t,n){return e.initOriginSize([1/0,-1/0],t,n)},createCopy:function(e){return[e[0],e[1]]},size:function(e){return e[1]-e[0]},center:function(e){return(e[1]+e[0])/2},translate:function(e,t,n){return e[0]=t[0]+n,e[1]=t[1]+n,e},transform:function(e,t,n){var i=n[0],r=n[1];return e[0]=t[0]*i+r,e[1]=t[1]*i+r,e},empty:function(e){return e[0]>=e[1]},contains:function(e,t){return e[0]<=t&&t<=e[1]},subset:function(e,t){return t[0]<=e[0]&&e[1]<=t[1]},overlaps:function(e,t){return e[0]<=t[0]&&t[0]<=e[1]||t[0]<=e[0]&&e[0]<=t[1]},intersection:function(t,n,i){var r,o;return r=Math.max(n[0],i[0]),o=Math.min(n[1],i[1]),o>=r?e.init(t,r,o):e.initEmpty(t)},hull:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},subtract:function(e,t){var n=[];return e[0]<=t[0]&&t[0]<=e[1]?(n.push([e[0],t[0]]),t[1]<e[1]&&n.push([t[1],e[1]])):t[0]<=e[0]&&e[0]<=t[1]&&t[1]<e[1]&&n.push([t[1],e[1]]),n},envelope:function(e,t,n){var i,r,o=n.length;if(o>0)for(e[0]=Math.min(t[0],n[0]),e[1]=Math.max(t[1],n[0]),i=1;o>i;i+=1)r=n[i],e[0]=Math.min(e[0],r),e[1]=Math.max(e[1],r);else e[0]=t[0],e[1]=t[1];return e},envelopev:function(e,t){var n,i,r=arguments.length;for(e[0]=t[0],e[1]=t[1],n=2;r>n;++n)i=arguments[n],e[0]=Math.min(e[0],i),e[1]=Math.max(e[1],i);return e},envelopeIntervals:function(e,t,n){var i,r,o;if(n.length>0)for(o=n[0],e[0]=Math.min(t[0],o[0]),e[1]=Math.max(t[1],o[1]),i=1,r=n.length;r>i;i+=1)o=n[i],e[0]=Math.min(e[0],o[0]),e[1]=Math.max(e[1],o[1]);else e[0]=t[0],e[1]=t[1];return e},lex_lt:function(e,t){var n=e[0],i=t[0];return i>n||n===i&&e[1]<t[1]},lex_le:function(e,t){var n=e[0],i=t[0];return i>n||n===i&&e[1]<=t[1]},lex_gt:function(e,t){var n=e[0],i=t[0];return n>i||n===i&&e[1]>t[1]},lex_ge:function(e,t){var n=e[0],i=t[0];return n>i||n===i&&e[1]>=t[1]},lex_eq:function(e,t){return e[0]===t[0]&&e[1]===t[1]},lex_ne:function(e,t){return e[0]!==t[0]||e[1]!==t[1]}}}),define("oven/library/collections/quadTree",["oven/library/math/interval","oven/library/math/aabox","oven/library/collections/stack"],function(e,t,n){function i(e){return{rect:e,items:void 0,children:void 0}}function r(e,t,n,i){var r=n[2]-n[0],o=n[3]-n[1];e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],r>o?(e[2]=n[0]+i*r,t[0]=n[2]-i*r):(e[3]=n[1]+i*o,t[1]=n[3]-i*o)}var o,a=12;return o={create:function(e,o){var s,l,u,c,d,h,f,p,g,m,v,y,b,_;return l=t.createCopy(e),u=i(l),c=o,d=0,h=0,f=a,p=8,g=.55,m=[t.createEmpty(),t.createEmpty()],v=[void 0,void 0,void 0,void 0],y=n.create(n.Reuse.Elements),b=n.create(n.Reuse.Array),s={init:function(e){t.initCopy(l,e),u=i(l)},insert_recursive:function(e){function n(e,a,s){var l;e.children?e.children.forEach(function(e){t.subset(a,e.rect)&&n(e,a,s)}):e.items&&e.items.length>=p&&(v[0]=t.createEmpty(),v[1]=t.createEmpty(),v[2]=t.createEmpty(),v[3]=t.createEmpty(),r(m[0],m[1],e.rect,g),r(v[0],v[1],m[0],g),r(v[2],v[3],m[1],g),(t.subset(a,v[0])||t.subset(a,v[1])||t.subset(a,v[2])||t.subset(a,v[3]))&&(e.children=[i(v[0]),i(v[1]),i(v[2]),i(v[3])],l=e.items,e.items=void 0,l.forEach(function(t){n(e,o(t),t)}),n(e,a,s))),e.items?e.items.push(s):e.items=[s]}n(u,c(e),e)},insert:function(e){function n(e,t,n){var i=b.tail();i?(i[0]=e,i[1]=t,i[2]=n):i=[e,t,n],b.push(i)}var a,s,l,d,f,b=y.reset();for(n(u,c(e),e);!b.empty();){if(s=b.top(),b.pop(),l=s[0],d=s[1],e=s[2],l.children){if(f=0,l.children.forEach(function(i){t.subset(d,i.rect)&&(n(i,d,e),++f)}),f>0)continue}else if(l.items&&l.items.length>=p&&(v[0]=t.createEmpty(),v[1]=t.createEmpty(),v[2]=t.createEmpty(),v[3]=t.createEmpty(),r(m[0],m[1],l.rect,g),r(v[0],v[1],m[0],g),r(v[2],v[3],m[1],g),t.subset(d,v[0])||t.subset(d,v[1])||t.subset(d,v[2])||t.subset(d,v[3]))){l.children=[i(v[0]),i(v[1]),i(v[2]),i(v[3])],a=l.items,l.items=void 0,a.forEach(function(e){n(l,o(e),e)}),n(l,d,e);continue}l.items?l.items.push(e):l.items=[e]}++h},forEachIntersectingPoint:function(e,n){function i(i){t.contains(c(i),e)&&n(i)}var r,o,a=b.reset();for(a.push(u),o=a.push.bind(a);!a.empty();)r=a.top(),a.pop(),t.contains(r.rect,e)&&(r.items&&r.items.forEach(i),r.children&&r.children.forEach(o))},forEachIntersectingRect:function(e,i){function r(n){t.overlaps(c(n),e)&&i(n)}var o,a,s=_?_.reset():n.create();for(s.push(u),a=s.push.bind(s);!s.empty();)o=s.top(),s.pop(),t.overlaps(o.rect,e)&&(o.items&&o.items.forEach(r),o.children&&o.children.forEach(a))}}}}}),define("oven/unvetted/library/utility/typedArrays",["oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelUtil"],function(e,t){function n(t){var n;return function(){var i;return void 0===n&&(i=e.window.get(),n=i[t]),n}}function i(e,n){var i;return function(r){if(void 0===i&&(i=n(),!i&&(t.log.warn("OVEN::typedArrays","Attempt to use "+e+" falling back to Array"),i=Array,!i)))throw new Error("Typed array constructor "+e+" not found; Array constructor not found either");return new i(r)}}var r,o,a,s;return o=n("Float32Array"),a=n("Uint32Array"),s=n("Uint16Array"),r={getFloat32Array:o,getUint32Array:a,getUint16Array:s,createFloat32Array:i("Float32Array",o),createUint32Array:i("Uint32Array",a),createUint16Array:i("Uint16Array",s)}}),define("oven/library/container/gridLayout",["oven/unvetted/kernel/kernelEnvironment","oven/3rdparty/sys-jscore/main","oven/library/math/geometry2d/point2d","oven/library/math/aabox","oven/library/collections/quadTree","oven/unvetted/library/utility/algorithm","oven/unvetted/library/utility/typedArrays"],function(e,t,n,i,r,o,a){function s(e,t){return{sizeMode:e,size:t}}var l,u;return l={Absolute:0,Relative:1,Remainder:2},u=t.Class.define({init:function(e){this._delegate=e,this._rowSpecs=[],this._colSpecs=[],this._contents=[],this._verticalPositions=void 0,this._horizontalPositions=void 0,this._verticalPositionsView=void 0,this._horizontalPositionsView=void 0,this._width=0,this._height=0,this._relativeMaxWidth=0,this._relativeMaxHeight=0,this._remainderWidth=0,this._remainderHeight=0,this._remainderRowCount=0,this._remainderColCount=0,this._quadTree=void 0,this._tempPoint=n.create(),this._tempRect=i.createEmpty(),this._tempArray=[],this._order=0},statics:{SizeModes:l},"public":{rowCount:{get:function(){return this._rowSpecs.length}},colCount:{get:function(){return this._colSpecs.length}},addRow:function(e,t){this._rowSpecs.push(s(t,e)),this.rebuildQuadtree(),this._delegate.gridLayoutModified(this)},addColumn:function(e,t){this._colSpecs.push(s(t,e)),this.rebuildQuadtree(),this._delegate.gridLayoutModified(this)},setRow:function(e,t,n){if(0>e||e>=this._rowSpecs.length)throw new Error("Invalid row index passed to setRow: "+e);this._rowSpecs[e].sizeMode=n,this._rowSpecs[e].size=t,this._delegate.gridLayoutModified(this)},setColumn:function(e,t,n){if(0>e||e>=this._colSpecs.length)throw new Error("Invalid column index passed to replaceColumn: "+e);this._colSpecs[e].sizeMode=n,this._colSpecs[e].size=t,this._delegate.gridLayoutModified(this)},setRows:function(e){var t=this;this._rowSpecs=[],e.forEach(function(e){t._rowSpecs.push(s(e.sizeMode,e.height||0))}),this.rebuildQuadtree(),this._delegate.gridLayoutModified(this)},setColumns:function(e){var t=this;this._colSpecs=[],e.forEach(function(e){t._colSpecs.push(s(e.sizeMode,e.width||0))}),this.rebuildQuadtree(),this._delegate.gridLayoutModified(this)},setRowsAndColumns:function(e,t){var n=this;this._rowSpecs=[],e.forEach(function(e){n._rowSpecs.push(s(e.sizeMode,e.height||0))}),this._colSpecs=[],t.forEach(function(e){n._colSpecs.push(s(e.sizeMode,e.width||0))}),this.rebuildQuadtree(),this._delegate.gridLayoutModified(this)},setUniformRows:function(e){var t,n;for(e=Math.max(e,1),n=1/e,this._rowSpecs=[],t=0;e>t;++t)this._rowSpecs.push(s(l.Relative,n));this.rebuildQuadtree(),this._delegate.gridLayoutModified(this)},setUniformColumns:function(e){var t,n;for(e=Math.max(e,1),n=1/e,this._colSpecs=[],t=0;e>t;++t)this._colSpecs.push(s(l.Relative,n));this.rebuildQuadtree(),this._delegate.gridLayoutModified(this)},setUniformRowsAndColumns:function(e,t){var n,i,r;for(e=Math.max(e,1),t=Math.max(t,1),i=1/e,r=1/t,this._rowSpecs=[],n=0;e>n;++n)this._rowSpecs.push(s(l.Relative,i));for(this._colSpecs=[],n=0;t>n;++n)this._colSpecs.push(s(l.Relative,r));this.rebuildQuadtree(),this._delegate.gridLayoutModified(this)},setRowEdgePosition:function(e,t){if(!this._verticalPositions)throw new Error("setRowEdgePosition: layout hasn't been performed yet");if(0>e||e>=this._verticalPositions.length)throw new Error("Invalid row index passed to setRowEdgePosition: "+e);t=Math.max(t,0===e?0:this._verticalPositions[e-1]),t=Math.min(t,e===this._rowSpecs.length-1?this._height:this._verticalPositions[e+1]),this._relativeMaxHeight=this.adjustCells(this._rowSpecs[e],this._rowSpecs[e+1],t-this._verticalPositions[e],this._relativeMaxHeight,this._remainderHeight,this._height),this._delegate.gridLayoutModified(this)},getRowEdgePosition:function(e){if(!this._verticalPositions)throw new Error("getRowEdgePosition: layout hasn't been performed yet");if(0>e||e>=this._verticalPositions.length)throw new Error("Invalid row index passed to getRowEdgePosition: "+e);return this._verticalPositions[e]},setColumnEdgePosition:function(e,t){if(!this._horizontalPositions)throw new Error("setColumnEdgePosition: layout hasn't been performed yet");if(0>e||e>=this._horizontalPositions.length)throw new Error("Invalid column index passed to setColumnEdgePosition: "+e);t=Math.max(t,0===e?0:this._horizontalPositions[e-1]),t=Math.min(t,e===this._colSpecs.length-1?this._width:this._horizontalPositions[e+1]),this._relativeMaxWidth=this.adjustCells(this._colSpecs[e],this._colSpecs[e+1],t-this._horizontalPositions[e],this._relativeMaxWidth,this._remainderWidth,this._width),this._delegate.gridLayoutModified(this)},getColumnEdgePosition:function(e){if(!this._horizontalPositions)throw new Error("getColumnEdgePosition: layout hasn't been performed yet");if(0>e||e>=this._horizontalPositions.length)throw new Error("Invalid column index passed to getColumnEdgePosition: "+e);return this._horizontalPositions[e]},removeRow:function(e){if(0>e||e>=this._rowSpecs.length)throw new Error("Invalid row index passed to removeRow: "+e);this._rowSpecs.splice(e,1),this.rebuildQuadtree(),this._delegate.gridLayoutModified(this)},removeColumn:function(e){if(0>e||e>=this._colSpecs.length)throw new Error("Invalid column index passed to removeColumn: "+e);this._colSpecs.splice(e,1),this.rebuildQuadtree(),this._delegate.gridLayoutModified(this)},layout:function(e,t){var n,r,s,u,c,d,h=this,f=this._tempRect;this._width=e,this._height=t,this._verticalPositions&&this._verticalPositions.length===this._rowSpecs.length||(this._verticalPositions=a.createFloat32Array(this._rowSpecs.length),this._verticalPositionsView=o.view(this._verticalPositions)),this._horizontalPositions&&this._horizontalPositions.length===this._colSpecs.length||(this._horizontalPositions=a.createFloat32Array(this._colSpecs.length),this._horizontalPositionsView=o.view(this._horizontalPositions)),u=this._height,this._rowSpecs.forEach(function(e){e.sizeMode===l.Absolute&&(u=Math.max(0,u-e.size))}),s=this._width,this._colSpecs.forEach(function(e){e.sizeMode===l.Absolute&&(s=Math.max(0,s-e.size))}),this._relativeMaxHeight=u,this._relativeMaxWidth=s,d=u,this._remainderRowCount=0,this._rowSpecs.forEach(function(e){e.sizeMode===l.Relative?d=Math.max(0,d-u*e.size):e.sizeMode===l.Remainder&&++h._remainderRowCount}),c=s,this._remainderColCount=0,this._colSpecs.forEach(function(e){e.sizeMode===l.Relative?c=Math.max(0,c-c*e.size):e.sizeMode===l.Remainder&&++h._remainderColCount}),this._remainderHeight=0===this._remainderRowCount?0:d/this._remainderRowCount,this._remainderWidth=0===this._remainderColCount?0:c/this._remainderColCount,n=0,r=0,this._rowSpecs.forEach(function(e){e.sizeMode===l.Absolute?r+=e.size:e.sizeMode===l.Relative?r+=u*e.size:e.sizeMode===l.Remainder&&(r+=h._remainderHeight),h._verticalPositions[n]=Math.min(h._height,r),++n}),n=0,r=0,this._colSpecs.forEach(function(e){e.sizeMode===l.Absolute?r+=e.size:e.sizeMode===l.Relative?r+=s*e.size:e.sizeMode===l.Remainder&&(r+=h._remainderWidth),h._horizontalPositions[n]=Math.min(h._width,r),++n}),this._contents.forEach(function(e){h._delegate.gridLayoutContents(h,e.contents,h.initCellRect(f,e.placement))}),this._delegate.gridLayoutRectModified(this,i.initSize(f,this._width,this._height))},addContents:function(e,t,n,i,r){var o,a,s;if(0>e||e>=this._rowSpecs.length||0>t||t>=this._colSpecs.length)throw new Error("Invalid cell index passed to addContents: "+e+","+t);if(o=e+n-1,a=t+i-1,e>o||o>=this._rowSpecs.length||t>a||a>=this._colSpecs.length)throw new Error("Invalid cell span passed to addContents: "+n+","+i);s={contents:r,placement:[e,t,o,a],order:this._order++},this._contents.push(s),this._quadTree.insert(s),this.initCellRect(this._tempRect,s.placement),this._delegate.gridLayoutContents(this,s.contents,this._tempRect),this._delegate.gridLayoutRectModified(this,this._tempRect)},removeContents:function(e){var t,n=0,i=0;this._contents.forEach(function(r){t||r.contents!==e||(i=n,t=r),++n}),t&&(this._contents.splice(i,1),this.rebuildQuadtree(),this._delegate.gridLayoutRectModified(this,this.initCellRect(this._tempRect,t.placement)))},forEachIntersectingPoint:function(e,t,n){var i=this._tempPoint;this._quadTree&&(i[0]=o.lower_bound(this._verticalPositionsView,e[1]),i[1]=o.lower_bound(this._horizontalPositionsView,e[0]),this.forEachQuadTreeItem(this._quadTree.forEachIntersectingPoint,i,t,n))},forEachIntersectingRect:function(e,t,n){var i=this._tempRect;this._quadTree&&(i[0]=o.lower_bound(this._verticalPositionsView,e[1]),i[1]=o.lower_bound(this._horizontalPositionsView,e[0]),i[2]=o.lower_bound(this._verticalPositionsView,e[3]),i[3]=o.lower_bound(this._horizontalPositionsView,e[2]),this.forEachQuadTreeItem(this._quadTree.forEachIntersectingRect,i,t,n))}},"private":{rebuildQuadtree:function(){var e=this;this._quadTree?this._quadTree.init([0,0,this._rowSpecs.length,this._colSpecs.length]):this._quadTree=r.create([0,0,this._rowSpecs.length,this._colSpecs.length],function(e){return e.placement}),this._contents.forEach(function(t){e._quadTree.insert(t)})},initCellRect:function(e,t){return i.init(e,0===t[1]?0:this._horizontalPositions[t[1]-1],0===t[0]?0:this._verticalPositions[t[0]-1],this._horizontalPositions[t[3]],this._verticalPositions[t[2]]),e},adjustCells:function(e,t,n,i,r,o){var a;return e.sizeMode===l.Absolute&&t.sizeMode===l.Absolute?(e.size+=n,t.size-=n,i):(e.sizeMode===l.Remainder&&(e.sizeMode=l.Relative,e.size=r/i),t.sizeMode===l.Remainder&&(t.sizeMode=l.Relative,t.size=r/i),e.sizeMode===l.Relative&&t.sizeMode===l.Relative?(e.size=(e.size*i+n)/i,t.size=(t.size*i-n)/i,i):(e.sizeMode===l.Absolute?(e.size+=n,a=Math.min(Math.max(i-n,0),o),a>0&&(t.size=(t.size*i-n)/a)):t.sizeMode===l.Absolute&&(a=Math.min(Math.max(i+n,0),o),a>0&&(e.size=(e.size*i+n)/a),t.size-=n),a>0&&this._rowSpecs.forEach(function(n){n.sizeMode===l.Relative&&n!=e&&n!=t&&(n.size=n.size*i/a)}),a))},forEachQuadTreeItem:function(e,t,n,i){function r(e,t){var n=e.order,i=t.order;return i>n?-1:n>i?1:0}function o(e,t){var n=e.order,i=t.order;return i>n?-1:n>i?1:0}var a=this._tempArray;a.length=0,e.call(this._quadTree,t,function(e){a.push(e)}),a.sort(void 0===i||i>=0?r:o),a.forEach(function(e){n(e.contents)})}}})}),define("oven/library/container/gridLayoutContainer",["oven/3rdparty/sys-jscore/main","oven/library/container/groupContainer","oven/library/container/gridLayout","oven/library/math/aabox"],function(e,t,n,i){var r;return r=e.Class.define(t,{init:function(e,t,r){var o=this,a=i.createEmpty();this.initSuper(e,t,r),this._gridLayout=new n({gridLayoutModified:function(e){var t=o.size;e.layout(t[0],t[1])},gridLayoutContents:function(e,t,n){t.setPosition(n[0],n[1]),t.setSize(n[2]-n[0],n[3]-n[1])},gridLayoutRectModified:function(e,t){o.context&&o.context.dirtyContainingWorldContents(o.parent,i.transformAffine2dAsHomothetic2d(a,t,o.containerToWorldTransform))}})},statics:{SizeModes:n.SizeModes},"public":{layout:{get:function(){return this._gridLayout}},addRow:function(e,t){this._gridLayout.addRow(e,t)},addColumn:function(e,t){this._gridLayout.addColumn(e,t)},addContents:function(e,t,n,i,r){this.addChild(r),this._gridLayout.addContents(e,t,n,i,r)},removeContents:function(e){this._gridLayout.removeContents(e),this.removeChild(e)}},virtual:{override:{setSize:function(e,t){this.super.setSize(e,t),this._gridLayout.layout(e,t)},forEachChildIntersectingPoint:function(e,t,n){this._gridLayout.forEachIntersectingPoint(e,t,n)},forEachChildIntersectingRect:function(e,t,n){this._gridLayout.forEachIntersectingRect(e,t,n)}}}})}),define("oven/vislets/series/seriesVisletDefs",[],function(){var e={AxisPositions:{Left:0,Right:1,Top:2,Bottom:3}};return e}),define("oven/components/plot/plotDefs",[],function(){var e={Orientation:{East:0,South:1,West:2,North:3},TickModes:{None:0,Uniform:1,PixelInterval:2,DataInterval:3,AlignedDataInterval:4,TickSeries:5,NiceNumeric:6,Count:7},ColorModes:{None:0,ConfigSolid:1,ConfigGradient:2,PerSeriesPalette:3,PerDatumPalette:4,Data:5,Ramp:6},LabelFormatModes:{NumFormat:0,Printf:1},Spaces:{Data:0,Model:1,World:2,View:3,Container:4}};return e}),define("oven/components/plot/plotAreaConfig",["oven/framework/config/schema/configSchemaBuilder","oven/components/plot/plotDefs"],function(e,t){var n,i;return n={PlotArea:"PlotArea"},i={ConfigNames:n,TickModes:t.TickModes,getConfigSchema:function(){return e.createSchema([e.createConfigSet(n.PlotArea,{backgroundColor0:e.createColorProperty("rgb(0, 0, 0)"),backgroundColor1:e.createColorProperty("rgb(34, 50, 60)"),independentAxisGridLinesMode:e.createEnumProperty(t.TickModes,t.TickModes.Uniform),independentAxisGridLinesParameter:e.createDoubleProperty(10),independentAxisGridLinesDataAdapterId:e.createDataReference(""),independentAxisGridLineColor:e.createColorProperty("rgba(128, 128, 128, 0.5)"),dependentAxisGridLinesMode:e.createEnumProperty(t.TickModes,t.TickModes.Uniform),dependentAxisGridLinesParameter:e.createDoubleProperty(10),dependentAxisGridLinesDataAdapterId:e.createDataReference(""),dependentAxisGridLineColor:e.createColorProperty("rgba(128, 128, 128, 0.5)"),showMinorGrids:e.createBooleanProperty(!0)})],[])}}}),define("oven/library/math/spline",["oven/unvetted/kernel/kernelEnvironment","oven/unvetted/library/utility/typedArrays"],function(e,t){function n(e,t,n,i,r){var o,a,s=e.length,l=[e[0],e[s-1],e[s-1]-e[0]],u=1/0,c=-1/0,d=void 0===i?k:i,h=void 0===r?k:r;return o=function(i,r,o,f){var p,g,m,v,y,b;if(g=f>c,p=u>f,g||p){for(g&&(f>l[1]&&h!==k?h===M?(f=(f-l[0])%l[2]+l[0],y=0,v=s):h===A&&(f=l[1],y=s,v=0):p?(y=0,v=s):(y=a,v=s-y)),p&&(f<l[0]&&d!==k?d===M?(f=((f-l[0])%l[2]+l[2])%l[2]+l[0],y=0,v=s):d===A&&(f=l[0],y=1,v=0):g?(y=0,v=s):(y=0,v=a));v>0;)b=Math.floor(v/2),m=y+b,e[m]<=f?(y=m+=1,v-=b+1):v=b;if(m=y,v=s,!(m>0&&(v>m||f<=e[v-1])))return a=void 0,u=1/0,c=-1/0,void 0;a=m-(v>m?1:2),u=e[a],c=e[a+1],t(a,f-u)}return n(i,r,o,(f-u)/(c-u))},Object.defineProperty(o,"domain",{get:function(){return l}}),o}function i(e){return 1>=e?1:3>=e?E[e]:e*i(e-1)}function r(e,t){return 3>=e?S[4*e+t]:Math.floor(i(e)/(i(t)*i(e-t)))}function o(e,t,n){return e=void 0===e?1:e,n=void 0===n?1:n,function(i,r,o,a){var s;for(s=0;t>=s;s+=1)i[r]=o[a],r+=e,a+=n;return i}}function a(e,n,i){var o=t.createFloat32Array(n+1);return e=void 0===e?1:e,i=void 0===i?1:i,function(t,a,s,l){var u,c,d,h,f,p,g;for(u=0,p=!0;n>=u;u+=1,p=!p){for(f=r(n,u),h=0,c=0,g=!0,d=l;u>=c;c+=1,g=!g)h+=s[d]*(p===g?f:-f)*r(u,c),d+=i;o[u]=h}for(u=0;n>=u;u+=1)t[a]=o[u],a+=e;return t}}function s(e,t,n,i,r,o,a,s,l,u,c,d){var h,f,p;for(i=void 0===i?0:i,n=void 0===n?r+1:n,t=void 0===t?n*o:t,c=void 0===c?0:c,u=void 0===u?r:u,l=void 0===l?u*o:l;a>0;a-=1){for(f=i,p=c,h=0;o>h;h+=1)d(e,f,s,p),f+=n,p+=u;i+=t,c+=l}return e}function l(e,n,i,r,o,a,l){return o=void 0===o?n:o,a=void 0===a?0:a,s(t.createFloat32Array((e+1)*n*i),void 0,e+1,0,e,n,i,r,(1>e?1:e)*o,1,a,l(1,e,o))}function u(e,t,i,r,o,s,u,c){function d(e){p=e*m}function h(n,i,r,o){var a,s,l,u=p;for(s=0;t>s;s+=1,u+=e+1){for(l=f[u+e],a=e-1;a>=0;a-=1)l=o*l+f[u+a];n[r]=l,r+=i}return n}var f,p,g=i.length-1,m=t*(e+1);return f=l(e,t,g,r,o,s,a),n(i,d,h,u,c)}function c(e,t,n){return 0===e?t[n]:void 0}function d(e,t,n){return 0===e?t[n]:1===e?t[n+1]-t[n]:void 0}function h(e,t,n){return 0===e?t[n]:1===e?2*(t[n+1]-t[n]):2===e?2*t[n]-4*t[n+1]+2*t[n+2]:void 0}function f(e,t,n){return 0===e?t[n]:1===e?3*(t[n+1]-t[n]):2===e?6*t[n]-12*t[n+1]+6*t[n+2]:3===e?-6*t[n]+18*t[n+1]-18*t[n+2]+6*t[n+3]:void 0}function p(){}function g(e,t){e[t]=e[t]+e[t+1]}function m(e,t){e[t]=e[t]+e[t+1]+e[t+2]/2,t+=1,e[t]=e[t]+e[t+1]}function v(e,t){e[t]=e[t]+e[t+1]+e[t+2]/2+e[t+3]/6,t+=1,e[t]=e[t]+e[t+1]+e[t+2]/2,t+=1,e[t]=e[t]+e[t+1]}function y(e,i,r,a,s,u,y,b,_){function x(t,n){var o,a,s,l,u,c,d;for(u=t*N,d=1/(r[t+1]-r[t]),S=n*d,T=_*d,s=1,o=0;e>=o;o+=1){for(l=o,c=u,a=0;i>a;a+=1)E[l]=k(o,C,c)*s,l+=e+1,c+=e+1;s*=T}for(l=0,o=Math.round(S/T);o>0;o-=1)for(a=0;i>a;a+=1)A(E,l),l+=e+1}function w(t,n,r,o){var a,s,l,u=Math.round((o-S)/T);for(a=0,l=0;i>l;l+=1){for(s=0;u>s;s+=1)A(E,a);t[r]=E[a],r+=n,a+=e+1}return S+=u*T,t}var C,T,E,S,k,A,M=r.length-1,N=i*(e+1);return C=l(e,i,M,a,s,u,o),E=t.createFloat32Array(N),3===e?(k=f,A=v):2===e?(k=h,A=m):1===e?(k=d,A=g):0===e&&(k=c,A=p),n(r,x,w,y,b)}function b(e,t,n){return((n-1)*e+1)*t}function _(e,t,n,i,r,o,a,s,l,u,c,d,h){var f,p,g,m,v;for(c=void 0===c?p.domain:c,g=c[0],m=c[1],v=(m-g)/u,p=T.createFDEvaluator(i,r,o,a,s,l,d,h,v),f=0;u>f;f+=1)e[n]=g,p(e,1,n+1,g),n+=t,g+=v;e[n]=m,p(e,1,n+1,m)}function x(e,n,i){var r=n+1,o=t.createFloat32Array(r+1);return function(t,n,a,s){var l,u,c=0;for(o[c]=a[s],c+=1,u=s,s+=i;r>c;c+=1)l=c/(r+1),o[c]=l*a[u]+(1-l)*a[s],u=s,s+=i;for(o[c]=a[u],c=0;r>=c;c+=1)t[n]=o[c],n+=e}}function w(e,t,n,i,r,o,a,l,u,c,d){return s(e,t*(r+1),n,i,void 0,o,a.length-1,l,u*r,c,d,x(t,r,u))}function C(e,t,n,i,r,o,a,s,l,u,c){var d,h,f,p,g,m,v,y,b,_,x,w;for(t=void 0===t?r:t,n=void 0===n?1:n,i=void 0===i?0:i,s=void 0===s?r:s,l=void 0===l?1:l,u=void 0===u?0:u,d=0,h=o-1;h>d;++d){for(p=i,m=u,f=0;r>f;++f)g=p,v=0===d?a[m]:a[m-s],y=a[m],b=a[m+s],_=d===h-1?a[m+s]:a[m+s+s],x=y+(b-v)*c/3,w=b-(_-y)*c/3,0===d&&(e[g]=y,g+=t),e[g]=x,g+=t,e[g]=w,g+=t,e[g]=b,p+=n,m+=l;i+=0===d?4*t:3*t,u+=s}}var T,E,S,k=0,A=1,M=2;return E=[1,1,2,6],S=[1,void 0,void 0,void 0,1,1,void 0,void 0,1,2,1,void 0,1,3,3,1],T={INFINITY_UNDEFINED:k,INFINITY_CONSTANT:A,INFINITY_CYCLE:M,createEvaluator:u,createFDEvaluator:y,countRequired:b,plot:_,raiseDegree:w,cardinalToBezier:C}}),define("oven/components/series/ramp",["oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelColor","oven/library/math/spline","oven/unvetted/library/utility/typedArrays"],function(e,t,n,i){function r(e,n,i,r,o,a,s,l){var u,d=r===c.INTENSITY_ALPHA||r===c.RGBA||r===c.HSLA;r===c.INTENSITY||r===c.INTENSITY_ALPHA?(e[i]=.2126*o+.7152*a+.0722*s,i+=n,d&&(e[i]=l)):r===c.RGB||r===c.RGBA?(e[i]=o,i+=n,e[i]=a,i+=n,e[i]=s,i+=n,d&&(e[i]=l)):(r===c.HSL||r===c.HSLA)&&(u=t.converters.hsl.from_rgb(o,a,s),e[i]=u.h,i+=n,e[i]=u.s,i+=n,e[i]=u.l,i+=n,d&&(e[i]=l))}function o(e,n,i,r,o,a,s,l){var u,d=r===c.INTENSITY_ALPHA||r===c.RGBA||r===c.HSLA;r===c.INTENSITY||r===c.INTENSITY_ALPHA?(e[i]=s,i+=n,d&&(e[i]=l)):r===c.RGB||r===c.RGBA?(u=t.converters.hsl.to_rgb(o,a,s),e[i]=u.r,i+=n,e[i]=u.g,i+=n,e[i]=u.b,i+=n,d&&(e[i]=l)):(r===c.HSL||r===c.HSLA)&&(e[i]=o,i+=n,e[i]=a,i+=n,e[i]=s,i+=n,d&&(e[i]=l))}function a(e,t,n,i,r){h.forEach(function(o){var a;return a=o.re.exec(r),a?(o.parse(e,t,n,i,a),!0):!1})}function s(e,t,r,o,a){var s,l,c,h,p,g,m=0,v=d[e];if(t===u.NONE?m=0:t===u.LINEAR&&(m=1),void 0===o&&(o=1),"number"==typeof o)for(p=0,g=o/(r-1),o=[],h=0;r>h;++h)o.push(p),p+=g;return s=n.createEvaluator(m,v,o,a,v,0,n.INFINITY_CONSTANT,n.INFINITY_CONSTANT),l=i.createFloat32Array(v),c=f[e],function(e){return s(l,1,0,e),c(l)}}var l,u,c,d,h,f;return u={NONE:0,LINEAR:1},c={INTENSITY:0,INTENSITY_ALPHA:1,RGB:2,RGBA:3,HSL:4,HSLA:5},d=[1,2,3,4,3,4],h=[{re:/#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})/,parse:function(e,t,n,i,o){r(e,t,n,i,parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16),1)}},{re:/(^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$)|(^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{0,2}(\.\d{1,2})?)\)$)/,parse:function(e,t,n,i,o){void 0!==o[1]&&""!==o[1]?r(e,t,n,i,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),1):void 0!==o[5]&&""!==o[5]?r(e,t,n,i,parseInt(o[6],10),parseInt(o[7],10),parseInt(o[8],10),parseFloat(o[9])):r(e,t,n,i,0,0,0,1)}},{re:/(^hsl\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$)|(^hsla\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{0,2}(\.\d{1,2})?)\)$)/,parse:function(e,t,n,i,r){void 0!==r[1]&&""!==r[1]?o(e,t,n,i,parseInt(r[2],10),parseInt(r[3],10),parseInt(r[4],10),1):void 0!==r[5]&&""!==r[5]?o(e,t,n,i,parseInt(r[6],10),parseInt(r[7],10),parseInt(r[8],10),parseFloat(r[9])):o(e,t,n,i,0,0,0,1)}}],f=[function(e){return"rgb("+Math.floor(e[0])+","+Math.floor(e[0])+","+Math.floor(e[0])+")"},function(e){return"rgba("+Math.floor(e[0])+","+Math.floor(e[0])+","+Math.floor(e[0])+","+e[1]+")"},function(e){return"rgb("+Math.floor(e[0])+","+Math.floor(e[1])+","+Math.floor(e[2])+")"},function(e){return"rgba("+Math.floor(e[0])+","+Math.floor(e[1])+","+Math.floor(e[2])+","+e[3]+")"},function(e){return"hsl("+Math.floor(e[0])+","+Math.floor(e[1])+","+Math.floor(e[2])+")"},function(e){return"hsla("+Math.floor(e[0])+","+Math.floor(e[1])+","+Math.floor(e[2])+","+e[3]+")"}],l={InterpolationTypes:u,ColorModels:c,createFromStrings:function(e,t,n,r){var o,l,u,c,h;return o=d[e],u=r.length,c=i.createFloat32Array(u*o),h=0,r.forEach(function(t){if("string"==typeof t)a(c,1,h,e,t);else for(l=0;o>l;++l)c[h+l]=t[l];h+=o}),s(e,t,u,n,c)}}}),define("oven/components/series/seriesDefs",["oven/components/series/ramp"],function(e){var t={ColorModes:{None:0,ConfigSolid:1,ConfigGradient:2,PerSeriesPalette:3,PerDatumPalette:4,Data:5,Ramp:6,ProceduralPattern:7},IndependentValueModes:{Disable:0,Enable:1,EnableFast:2},IndependentAxisDirections:{Right:0,Up:1},ViewModes:{MinMax:0,Monomorphic:1,Range:2,Linear:3,Axes:4,Space:5},RampInterpolationTypes:{None:e.InterpolationTypes.NONE,Linear:e.InterpolationTypes.LINEAR},RampColorModels:{Intensity:e.ColorModels.INTENSITY,Intensity_Alpha:e.ColorModels.INTENSITY_ALPHA,RGB:e.ColorModels.RGB,RGBA:e.ColorModels.RGBA,HSL:e.ColorModels.HSL,HSLA:e.ColorModels.HSLA},SelectionModes:{None:0,Point:1,Series:2},HighlightModes:{None:0,Point:1,Series:2},TooltipModes:{None:0,Data:1,Config:2},Signals:{PointClicked:"point_clicked",SeriesClicked:"series_clicked"}};return t}),define("oven/components/series/seriesIterator",["oven/library/utility/objects","oven/unvetted/kernel/kernelUtil","oven/components/series/seriesDefs","oven/library/math/interval","oven/framework/config/schema/configSchemaBuilder"],function(e,t,n,i,r){function o(e,n,i,r,o){function a(e,t){for(var n,i,r=0,o=_;o>0;)n=r,i=Math.floor(o/2),n+=i,t(m[n],e,0)?(r=++n,o-=i+1):o=i;return r}function s(e,t){for(var n,i,r=0,o=_;o>0;)n=r,i=Math.floor(o/2),n+=i,t(e,m[n])?o=i:(r=++n,o-=i+1);return r}function l(e,t){return e<t[p]}function u(e,t){return e[p]<t}function c(e){if(e[0]>e[1])throw new Error("Series iterator received invalid range: [ "+e[0]+":"+e[1]+" ]");if(m=y.getDataTable().getData(),!m)throw new Error("Series iterator unable to obtain data array");if(_=m.length,_>0){if(f?(x=s(e[0],l)-1,w=a(e[1],u)+1):(x=Math.floor(e[0]),w=Math.ceil(e[1])+1),x=Math.max(x,0),w=Math.min(w,_),x>w&&e[0]>e[1])throw new Error("Series iterator computed invalid index range: ["+x+":"+w+"]; independent values may not be sorted properly")}else x=0,w=0}function d(e,t,n,i){if(i)for(b=e;t>b;++b)g(b),n.call(i,v,b,m);else for(b=e;t>b;++b)g(b),n(v,b,m)}var h,f,p,g,m,v=0,y=e,b=0,_=0,x=0,w=0,C=null,T=o,E=[0,0];if(n){if(p=n?y.getDataSchema().getFieldIndex(n):void 0,void 0===p)throw new Error('Independent value field "'+n+'" not found on data adapter');f=!0,g=function(e){return C=m[e],v=m[e][p]}}else f=!1,g=function(e){return C=m[e],v=e};return h={setInterval:function(e){try{c(e)}catch(n){t.log.error(n.message),x=0,w=0}},setRange:function(e,t){h.setInterval([e,t])},reset:function(){b=x,w>b?g(b):(C=null,v=void 0)},done:function(){return b>=w},next:function(){var e=b+1;w>e?(b=e,g(b)):(b=w,C=null,v=void 0)},count:function(){return w-x},index:function(){return b},indexMin:function(){return x},indexMax:function(){return w>x?w-1:x},value:function(){return v},valueMin:function(){return f?m[x][p]:x},valueMax:function(){return w>x?f?m[w-1][p]:w-1:f?m[x][p]:x},row:function(){return C},map:function(e,t){return E[0]=v,E[1]=t,T(e,E)},transformAOA:function(e,t){var n,i;for(n=0,i=t.length;i>n;++n)E[0]=v,E[1]=t[n],T(e[n],E);return e},transformIA:function(e,t,n,i,r){var o,a;for(t=void 0===t?2:t,n=void 0===t?1:n,i=void 0===i?0:i,o=0,a=r.length;a>o;++o)E[0]=v,E[1]=r[o],T(E,E),e[i]=E[0],e[i+n]=E[1],i+=t;return e},forEach:function(e,t){d(x,w,e,t)},rowAt:function(e){return m[e]},rowCount:function(){return _},forEachAll:function(e,t){d(0,_,e,t)},findRange:function(e,t,n){var i,r,o,c;return i=a(t,u),o=s(n,l),f?(r=_>i?m[i][p]:void 0,c=_>o?m[o][p]:void 0):(r=_>i?i:void 0,c=_>o?o:void 0),e?(e[0]=i,e[1]=r,e[2]=o,e[3]=c):e=[i,r,o,c],e},findInterval:function(e,t){return h.findRange(e,t[0],t[1])}},h.setInterval([i,r]),h.reset(),h}function a(t,n,i,r,a,s){function l(){b=!0}function u(){var e,t;if(b){for(t=g.row(),e=0;m>e;++e)y[e]=t[v[e]];b=!1}return y}function c(e){return u()[e]}function d(e,t){var n,i;for(i=g.rowAt(t),n=0;m>n;++n)e[n]=i[v[n]];return e}function h(e,t){return t?function(n,i,r){l(),e.call(t,n,u(),i,r)}:function(t,n,i){l(),e(t,u(),n,i)}}function f(e,t,n,i,r,o,a){var s=0,l=1,u=s;return a?function(c,d,h,f){u===s?t.call(a,c,d,h,f)?(n&&n.call(a,c,d,h,f),i&&i.call(a,c,d,h,f),h===e&&o&&o.call(a,c,d,h,f),u=l):r&&r.call(a,c,d,h,f):u===l&&(t.call(a,c,d,h,f)?(i&&i.call(a,c,d,h,f),h===e&&o&&o.call(a,c,d,h,f)):(o&&o.call(a,c,d,h,f),r&&r.call(a,c,d,h,f),u=s))}:function(a,c,d,h){u===s?t(a,c,d,h)?(n&&n(a,c,d,h),i&&i(a,c,d,h),d===e&&o&&o(a,c,d,h),u=l):r&&r(a,c,d,h):u===l&&(t(a,c,d,h)?(i&&i(a,c,d,h),d===e&&o&&o(a,c,d,h)):(o&&o(a,c,d,h),r&&r(a,c,d,h),u=s))}}var p,g,m,v=[],y=[],b=!0;return g=o(t,n,r,a,s),m=0,i&&i.forEach(function(e){var n=t.getDataSchema().getFieldIndex(e);v.push(n),y.push(0),++m}),p=e.assimilate(g,{reset:function(){g.reset(),l()},next:function(){g.next(),l()},dependentValues:u,dependentValueByIndex:c,dependentValuesCount:function(){return m},transformDependentValue:function(e,t){return g.map(e,c(t))},transformDependentValuesAOA:function(e){return g.transformAOA(e,u())},transformDependentValuesIA:function(e,t,n,i){return g.transformIA(e,t,n,i,u())},forEachDependentValues:function(e,t){g.forEach(h(e,t))},forEachDependentValuesRanges:function(e,t,n,i,r,o){p.forEachDependentValues(f(g.indexMax(),e,t,n,i,r,o))},forEachAllDependentValues:function(e,t){g.forEachAll(h(e,t))},forEachAllDependentValuesRanges:function(e,t,n,i,r,o){p.forEachAllDependentValues(f(g.rowCount()-1,e,t,n,i,r,o))},dependentValuesAt:d})}function s(e,t){return r.createConfigChoice(e,{none:r.createBooleanProperty(!0),value:r.createDoubleProperty(0/0),nan:r.createBooleanProperty(!0)},t)}function l(e){function t(e){return e!==e||void 0===e||null===e}function n(e){return function(t,n){var i,r,o=!0;for(i=0,r=n.length;r>i&&o;++i)o=o&&e(n[i]);return o}}var i;return"none"in e?null:"value"in e?t(e.value)?n(function(e){return!t(e)}):(i=e.value,n(function(e){return e!==i})):"nan"in e?n(function(e){return!t(e)}):null}var u;return u={create:o,createWithDependentValues:a,getSolidPredicateConfigChoice:s,getSolidPredicateFromConfig:l}}),define("oven/components/series/lineDefs",[],function(){var e={LineStyles:{Line:0,Curve:1,Step:2,DotDash:3},FillBoundaryModes:{Config:0,Min:1,Max:2,MinMax:3}};return e}),define("oven/components/series/seriesDataContract",["oven/framework/data/schema/dataSchemaBuilder"],function(e){var t,n,i;return t={Series:"Series"},n=e.createDataContract(t.Series,{IndependentValue:e.createDoubleField(!1),DependentValue:e.createDoubleField(!0),Color:e.createColorField(!1),Style:e.createStringField(!1),Data:e.createDoubleField(!1),Id:e.createStringField(!1),Tooltip:e.createStringField(!1)},{independentValueMode:e.createIntegerField(!1),colorMode:e.createIntegerField(!1),HoleValue:e.createDoubleField(!1)},{MinMaxIndependentValue:e.addStatsField(e.StatsCalcType.MinMax,"IndependentValue"),MinMaxDependentValue:e.addStatsField(e.StatsCalcType.MinMax,"DependentValue")}),i={DataContractNames:t,SeriesDataContract:n,getDataContractSchema:function(){return e.createDataContractSchema([n])}}}),define("oven/components/series/lineConfig",["oven/framework/config/schema/configSchemaBuilder","oven/components/series/seriesDefs","oven/components/series/seriesIterator","oven/components/series/lineDefs","oven/components/series/seriesDataContract"],function(e,t,n,i,r){var o,a;
return o={LineComponent:"LineComponent"},a={ConfigNames:o,getConfigSchema:function(){return e.createSchema([e.createConfigSet(o.LineComponent,{dataAdapterId:e.createDataReference(r.DataContractNames.Series),independentValueMode:e.createEnumProperty(t.IndependentValueModes,t.IndependentValueModes.Enable),holePredicate:n.getSolidPredicateConfigChoice("HolePredicate","nan"),lineColorMode:e.createEnumProperty(t.ColorModes,t.ColorModes.ConfigSolid),fillColorMode:e.createEnumProperty(t.ColorModes,t.ColorModes.None),fillBoundaryMode:e.createEnumProperty(i.FillBoundaryModes,i.FillBoundaryModes.Config),enableTransitions:e.createBooleanProperty(!1),enableInteractions:e.createBooleanProperty(!0),dataTransitionDuration:e.createIntegerProperty(1e3),lineStyle:e.createEnumProperty(i.LineStyles,i.LineStyles.Line),alpha:e.createDoubleProperty(1),lineColor:e.createColorProperty("#535353"),lineWidth:e.createIntegerProperty(1),fillColor:e.createColorProperty("#535353"),fillColorGradient0:e.createColorProperty("#000000"),fillColorGradient1:e.createColorProperty("#535353"),fillBoundaryMinColor:e.createColorProperty(void 0),fillBoundaryMaxColor:e.createColorProperty(void 0),fillBoundaryMinColorGradient0:e.createColorProperty(void 0),fillBoundaryMinColorGradient1:e.createColorProperty(void 0),fillBoundaryMaxColorGradient0:e.createColorProperty(void 0),fillBoundaryMaxColorGradient1:e.createColorProperty(void 0),fillBoundary:e.createDoubleProperty(0),fillBoundaryMin:e.createDoubleProperty(void 0),fillBoundaryMax:e.createDoubleProperty(void 0),rampColorModel:e.createEnumProperty(t.RampColorModels,t.RampColorModels.RGB),rampInterpolationType:e.createEnumProperty(t.RampInterpolationTypes,t.RampInterpolationTypes.Linear),rampKnots:e.createDoubleProperty(void 0),rampColors:e.createColorProperty(void 0),highlightMode:e.createEnumProperty(t.HighlightModes,t.HighlightModes.None),highlightColor:e.createColorProperty("yellow"),highlightWidth:e.createIntegerProperty(3),tooltipMode:e.createEnumProperty(t.TooltipModes,t.TooltipModes.None),tooltipContent:e.createStringProperty("")})],[])}}}),define("oven/components/series/barsDefs",[],function(){var e={WidthAndSpacingModes:{PercentOfPixels:0,PercentOfData:1,PercentOfAvailable:2}};return e}),define("oven/components/series/barsConfig",["oven/framework/config/schema/configSchemaBuilder","oven/components/series/seriesDefs","oven/components/series/seriesIterator","oven/components/series/barsDefs","oven/components/series/seriesDataContract"],function(e,t,n,i,r){var o,a,s=1/1.61803398875;return o={BarsComponent:"BarsComponent"},a={ConfigNames:o,getConfigSchema:function(){return e.createSchema([e.createConfigSet(o.BarsComponent,{dataAdapterId:e.createDataReference(r.DataContractNames.Series),independentValueMode:e.createEnumProperty(t.IndependentValueModes,t.IndependentValueModes.Enable),holePredicate:n.getSolidPredicateConfigChoice("HolePredicate","nan"),lineColorMode:e.createEnumProperty(t.ColorModes,t.ColorModes.None),fillColorMode:e.createEnumProperty(t.ColorModes,t.ColorModes.ConfigSolid),enableTransitions:e.createBooleanProperty(!1),enableInteractions:e.createBooleanProperty(!0),dataTransitionDuration:e.createIntegerProperty(1e3),barWidthAndSpacingMode:e.createEnumProperty(i.WidthAndSpacingModes,i.WidthAndSpacingModes.PercentOfPixels),barWidth:e.createDoubleProperty(s),barSpacing:e.createDoubleProperty(5),barAlign:e.createDoubleProperty(.5),alpha:e.createDoubleProperty(1),lineColor:e.createColorProperty("#535353"),lineWidth:e.createIntegerProperty(1),fillColor:e.createColorProperty("#535353"),fillColorGradient0:e.createColorProperty("#000000"),fillColorGradient1:e.createColorProperty("#535353"),originValue:e.createDoubleProperty(0),rampColorModel:e.createEnumProperty(t.RampColorModels,t.RampColorModels.RGB),rampInterpolationType:e.createEnumProperty(t.RampInterpolationTypes,t.RampInterpolationTypes.Linear),rampKnots:e.createDoubleProperty(void 0),rampColors:e.createColorProperty(void 0),highlightMode:e.createEnumProperty(t.HighlightModes,t.HighlightModes.None),highlightBorderColor:e.createColorProperty("yellow"),highlightBorderWidth:e.createIntegerProperty(3),highlightFillColor:e.createColorProperty(""),tooltipMode:e.createEnumProperty(t.TooltipModes,t.TooltipModes.None),tooltipContent:e.createStringProperty(""),style:e.createStringProperty("")})],[])}}}),define("oven/components/series/ohlcSeriesDataContract",["oven/framework/data/schema/dataSchemaBuilder"],function(e){var t,n,i;return t={OHLCSeries:"OHLCSeries"},n=e.createDataContract(t.OHLCSeries,{IndependentValue:e.createDoubleField(!1),Open:e.createDoubleField(!0),High:e.createDoubleField(!0),Low:e.createDoubleField(!0),Close:e.createDoubleField(!0),Color:e.createColorField(!1)},{independentValueMode:e.createIntegerField(!1),colorMode:e.createIntegerField(!1),HoleValue:e.createDoubleField(!1)},{MinMaxIndependentValue:e.addStatsField(e.StatsCalcType.MinMax,"IndependentValue"),MaxHighValue:e.addStatsField(e.StatsCalcType.MinMax,"High"),MinLowValue:e.addStatsField(e.StatsCalcType.MinMax,"Low")}),i={DataContractNames:t,SeriesDataContract:n,getDataContractSchema:function(){return e.createDataContractSchema([n])}}}),define("oven/components/series/ohlcBarsConfig",["oven/framework/config/schema/configSchemaBuilder","oven/components/series/seriesDefs","oven/components/series/seriesIterator","oven/components/series/barsDefs","oven/components/series/ohlcSeriesDataContract"],function(e,t,n,i,r){var o,a;return o={OHLCBarsComponent:"OHLCBarsComponent"},a={ConfigNames:o,getConfigSchema:function(){return e.createSchema([e.createConfigSet(o.OHLCBarsComponent,{dataAdapterId:e.createDataReference(r.DataContractNames.OHLCSeries),independentValueMode:e.createEnumProperty(t.IndependentValueModes,t.IndependentValueModes.Enable),holePredicate:n.getSolidPredicateConfigChoice("HolePredicate","nan"),colorMode:e.createEnumProperty(t.ColorModes,t.ColorModes.None),enableTransitions:e.createBooleanProperty(!1),enableInteractions:e.createBooleanProperty(!0),dataTransitionDuration:e.createIntegerProperty(1e3),barWidthAndSpacingMode:e.createEnumProperty(i.WidthAndSpacingModes,i.WidthAndSpacingModes.PercentOfPixels),barWidth:e.createDoubleProperty(1),barSpacing:e.createDoubleProperty(5),barAlign:e.createDoubleProperty(.5),alpha:e.createDoubleProperty(1),lineWidth:e.createIntegerProperty(1),color:e.createColorProperty("#cccccc"),gainColor:e.createColorProperty("#0080FE"),lossColor:e.createColorProperty("#ffffff"),rampColorModel:e.createEnumProperty(t.RampColorModels,t.RampColorModels.RGB),rampInterpolationType:e.createEnumProperty(t.RampInterpolationTypes,t.RampInterpolationTypes.Linear),rampKnots:e.createDoubleProperty(void 0),rampColors:e.createColorProperty(void 0)})],[])}}}),define("oven/components/series/ohlcCandlesConfig",["oven/framework/config/schema/configSchemaBuilder","oven/components/series/seriesDefs","oven/components/series/seriesIterator","oven/components/series/barsDefs","oven/components/series/ohlcSeriesDataContract"],function(e,t,n,i,r){var o,a;return o={OHLCCandlesComponent:"OHLCCandlesComponent"},a={ConfigNames:o,getConfigSchema:function(){return e.createSchema([e.createConfigSet(o.OHLCCandlesComponent,{dataAdapterId:e.createDataReference(r.DataContractNames.OHLCSeries),independentValueMode:e.createEnumProperty(t.IndependentValueModes,t.IndependentValueModes.Enable),holePredicate:n.getSolidPredicateConfigChoice("HolePredicate","nan"),colorMode:e.createEnumProperty(t.ColorModes,t.ColorModes.None),enableTransitions:e.createBooleanProperty(!1),enableInteractions:e.createBooleanProperty(!0),dataTransitionDuration:e.createIntegerProperty(1e3),candleWidthAndSpacingMode:e.createEnumProperty(i.WidthAndSpacingModes,i.WidthAndSpacingModes.PercentOfPixels),candleWidth:e.createDoubleProperty(1),candleSpacing:e.createDoubleProperty(5),candleAlign:e.createDoubleProperty(.5),alpha:e.createDoubleProperty(1),lineWidth:e.createIntegerProperty(1),lineColor:e.createColorProperty("#ffffff"),color:e.createColorProperty("#cccccc"),gainColor:e.createColorProperty("#0080FE"),lossColor:e.createColorProperty("#ffffff"),rampColorModel:e.createEnumProperty(t.RampColorModels,t.RampColorModels.RGB),rampInterpolationType:e.createEnumProperty(t.RampInterpolationTypes,t.RampInterpolationTypes.Linear),rampKnots:e.createDoubleProperty(void 0),rampColors:e.createColorProperty(void 0)})],[])}}}),define("oven/components/series/intervalSeriesDataContract",["oven/framework/data/schema/dataSchemaBuilder"],function(e){var t,n,i,r;return n={MinMax:0,OriginLength:1,CenterRadius:2},t={IntervalSeries:"IntervalSeries"},i=e.createDataContract(t.IntervalSeries,{Value1:e.createDoubleField(!0),Value2:e.createDoubleField(!0),Color:e.createColorField(!1)},{mode:e.createIntegerField(!1),colorMode:e.createIntegerField(!1)},{MinMaxValue1:e.addStatsField(e.StatsCalcType.MinMax,"Value1"),MinMaxValue2:e.addStatsField(e.StatsCalcType.MinMax,"Value2")}),r={DataContractNames:t,IntervalSeriesDataContract:i,getDataContractSchema:function(){return e.createDataContractSchema([i])}}}),define("oven/components/plot/intervalGradientsConfig",["oven/framework/config/schema/configSchemaBuilder","oven/components/plot/plotDefs","oven/components/series/intervalSeriesDataContract"],function(e,t,n){var i,r;return i={IntervalsComponent:"IntervalsComponent"},r={ConfigNames:i,getConfigSchema:function(){return e.createSchema([e.createConfigSet(i.IntervalsComponent,{dataAdapterId:e.createDataReference(n.DataContractNames.IntervalSeries),index:e.createIntegerProperty(0),coordinateSystem:e.createEnumProperty(t.Spaces,t.Spaces.Data),lineColorMode:e.createEnumProperty(t.ColorModes,t.ColorModes.ConfigSolid),fillColorMode:e.createEnumProperty(t.ColorModes,t.ColorModes.ConfigSolid),enableTransitions:e.createBooleanProperty(!1),enableInteractions:e.createBooleanProperty(!0),dataTransitionDuration:e.createIntegerProperty(1e3),alpha:e.createDoubleProperty(.5),lineColor:e.createColorProperty("#535353"),lineWidth:e.createIntegerProperty(1),evenFillColor0:e.createColorProperty("rgba(0, 0, 0, 0)"),evenFillColor1:e.createColorProperty("rgba(0, 0, 0, 0)"),oddFillColor0:e.createColorProperty("#000000"),oddFillColor1:e.createColorProperty("#535353")})],[])}}}),define("oven/components/plot/referenceLineConfig",["oven/framework/config/schema/configSchemaBuilder","oven/components/plot/plotDefs"],function(e,t){var n,i;return n={ReferenceLineComponent:"ReferenceLineComponent"},i={ConfigNames:n,TickModes:t.TickModes,getConfigSchema:function(){return e.createSchema([e.createConfigSet(n.ReferenceLineComponent,{index:e.createIntegerProperty(0),coordinateSystem:e.createEnumProperty(t.Spaces,t.Spaces.Data),position0:e.createDoubleProperty(.5),position1:e.createDoubleProperty(.5),lineColor:e.createColorProperty("#535353"),lineWidth:e.createIntegerProperty(1),lineDash:e.createConfigArray(e.createDoubleProperty(0),[])})],[])}}}),define("oven/components/plot/axisDefs",[],function(){var e={Alignments:{Left:0,Right:1,Top:0,Bottom:1}};return e}),define("oven/components/plot/axisConfig",["oven/framework/config/schema/configSchemaBuilder","oven/unvetted/contracts/configDefaults","oven/components/plot/axisDefs"],function(e,t,n){function i(t,n){return e.createConfigChoice(t,a,n)}var r,o,a,s;return r={Axis:"Axis"},a={line:e.createConfigSet("TickLine",{length:e.createIntegerProperty(3),width:e.createIntegerProperty(1),offset:e.createIntegerProperty(1)}),triangle:e.createConfigSet("TickTriangle",{length:e.createIntegerProperty(6),halfWidth:e.createIntegerProperty(3),offset:e.createIntegerProperty(2)}),edge:e.createConfigSet("TickEdge",{width:e.createIntegerProperty(1),offset:e.createIntegerProperty(1)}),space:e.createConfigSet("TickSpace",{offset:e.createIntegerProperty(3)})},o=e.createConfigSet(r.Axis,{foregroundColor:e.createColorProperty("rgb(255, 255, 255)"),backgroundColor:e.createColorProperty("rgb(0, 0, 0)"),index:e.createIntegerProperty(0),align:e.createEnumProperty(n.Alignments,0),origin:e.createDoubleProperty(0),borderColor:e.createColorProperty("rgb(255, 255, 255)"),borderWidth:e.createIntegerProperty(1),labelFontFamily:e.createStringProperty(t.DEFAULT_FONT_FAMILY),labelFontSize:e.createIntegerProperty(t.DEFAULT_FONT_SIZE),showTitle:e.createBooleanProperty(!1),title:e.createStringProperty(""),titlePadding:e.createIntegerProperty(3),titleFontFamily:e.createStringProperty(t.DEFAULT_FONT_FAMILY),titleFontSize:e.createIntegerProperty(t.DEFAULT_FONT_SIZE)}),s={ConfigNames:r,ConfigSet:o,getTickAppearanceConfigChoice:i,getConfigSchema:function(){return e.createSchema([o],[])}}}),define("oven/components/series/tickSeriesDataContract",["oven/framework/data/schema/dataSchemaBuilder"],function(e){var t,n,i;return t={TickSeries:"TickSeries"},n=e.createDataContract(t.TickSeries,{Value:e.createDoubleField(!0)},{},{MinMaxValue:e.addStatsField(e.StatsCalcType.MinMax,"Value")}),i={DataContractNames:t,TickSeriesDataContract:n,getDataContractSchema:function(){return e.createDataContractSchema([n])}}}),define("oven/components/plot/numericAxisConfig",["oven/framework/config/schema/configSchemaBuilder","oven/unvetted/contracts/configDefaults","oven/library/utility/objects","oven/components/plot/axisConfig","oven/components/plot/plotDefs","oven/components/series/tickSeriesDataContract"],function(e,t,n,i,r){var o,a,s;return o={NumericAxis:"NumericAxis"},a=e.createConfigSet(o.NumericAxis,n.assimilate(i.ConfigSet.properties,{majorTicksMode:e.createEnumProperty(r.TickModes,r.TickModes.Uniform),majorTicksParameter:e.createDoubleProperty(10),majorTicksLabelFormat:e.createStringProperty("n|d2|l"),majorTicksLabelAlign:e.createDoubleProperty(0),majorTicksLabelOrientation:e.createDoubleProperty(0),majorTicksAppearance:i.getTickAppearanceConfigChoice("NumericAxisMajorTickApperance","triangle"),majorTicksDataAdapterId:e.createDataReference(""),minorTicksMode:e.createEnumProperty(r.TickModes,r.TickModes.Uniform),minorTicksParameter:e.createDoubleProperty(20),minorTicksAppearance:i.getTickAppearanceConfigChoice("NumericAxisMajorTickApperance","line"),boundaryLabel0:e.createBooleanProperty(!1),boundaryLabel1:e.createBooleanProperty(!1),labelPadding:e.createIntegerProperty(4)})),s={ConfigNames:o,ConfigSet:a,getConfigSchema:function(){return e.createSchema([a],[])}}}),define("oven/components/plot/timeseriesAxisConfig",["oven/framework/config/schema/configSchemaBuilder","oven/unvetted/contracts/configDefaults","oven/library/utility/objects","oven/components/plot/axisConfig","oven/components/plot/plotDefs","oven/components/series/intervalSeriesDataContract"],function(e,t,n,i,r,o){var a,s,l,u;return a={TimeseriesAxis:"TimeseriesAxis"},l=e.createConfigChoice("TimeseriesAxisTimezone",{local:e.createBooleanProperty(!0),offset:e.createDoubleProperty(0)},"local"),s=e.createConfigSet(a.TimeseriesAxis,n.assimilate(i.ConfigSet.properties,{intervalsDataAdapterId:e.createDataReference(o.DataContractNames.IntervalSeries),intervalsLabelFormat:e.createStringProperty("%dayAbbrev$s %DD$i %monthAbbrev$s"),intervalsLabelOrientation:e.createDoubleProperty(0),intervalsTicksAppearance:i.getTickAppearanceConfigChoice("TimeseriesAxisIntervalsTickApperance","edge"),timezone:l,majorTicksMode:e.createEnumProperty(r.TickModes,r.TickModes.AlignedDataInterval),majorTicksParameter:e.createDoubleProperty(36e5),majorTicksLabelFormat:e.createStringProperty("%hh$02i:%mm$02i"),majorTicksLabelAlign:e.createDoubleProperty(0),majorTicksLabelOrientation:e.createDoubleProperty(0),majorTicksAppearance:i.getTickAppearanceConfigChoice("TimeseriesAxisMajorTickApperance","line"),minorTicksMode:e.createEnumProperty(r.TickModes,r.TickModes.AlignedDataInterval),minorTicksParameter:e.createDoubleProperty(6e5),minorTicksAppearance:i.getTickAppearanceConfigChoice("TimeseriesAxisMajorTickApperance","line"),labelPadding:e.createIntegerProperty(3)})),u={ConfigNames:a,ConfigSet:s,getConfigSchema:function(){return e.createSchema([s],[])}}}),define("oven/components/plot/customAxisDataContract",["oven/framework/data/schema/dataSchemaBuilder"],function(e){var t,n,i;return t={CustomAxis:"CustomAxis"},n=e.createDataContract(t.CustomAxis,{Value:e.createDoubleField(!1),Label:e.createStringField(!0)},{},{MinMaxValue:e.addStatsField(e.StatsCalcType.MinMax,"Value")}),i={DataContractNames:t,CustomAxisDataContract:n,getDataContractSchema:function(){return e.createDataContractSchema([n])}}}),define("oven/components/plot/customAxisConfig",["oven/framework/config/schema/configSchemaBuilder","oven/unvetted/contracts/configDefaults","oven/library/utility/objects","oven/components/plot/axisConfig","oven/components/plot/customAxisDataContract"],function(e,t,n,i,r){var o,a,s;return o={CustomAxis:"CustomAxis"},a=e.createConfigSet(o.CustomAxis,n.assimilate(i.ConfigSet.properties,{dataAdapterId:e.createDataReference(r.DataContractNames.CustomAxis),majorTicksAppearance:i.getTickAppearanceConfigChoice("CustomAxisMajorTickApperance","triangle"),labelAlign:e.createDoubleProperty(0),labelOrientation:e.createDoubleProperty(0),labelPadding:e.createIntegerProperty(4)})),s={ConfigNames:o,ConfigSet:a,getConfigSchema:function(){return e.createSchema([a],[])}}}),define("oven/vislets/series/seriesVisletConfig",["oven/library/utility/objects","oven/framework/config/schema/configSchemaBuilder","oven/unvetted/contracts/commonConfig","oven/unvetted/contracts/configDefaults","oven/vislets/series/seriesVisletDefs","oven/components/plot/plotAreaConfig","oven/components/series/lineConfig","oven/components/series/barsConfig","oven/components/series/ohlcBarsConfig","oven/components/series/ohlcCandlesConfig","oven/components/plot/intervalGradientsConfig","oven/components/plot/referenceLineConfig","oven/components/plot/numericAxisConfig","oven/components/plot/timeseriesAxisConfig","oven/components/plot/customAxisConfig"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p){var g={SeriesVislet:"SeriesVislet",PlotArea:o.ConfigNames.PlotArea,Panel:"Panel",Series:"Series",LineSeries:"LineSeries",BarsSeries:"BarsSeries",OHLCBarsSeries:"OHLCBarsSeries",OHLCCandlesSeries:"OHLCCandlesSeries",IntervalGradients:"IntervalGradients",ReferenceLine:"ReferenceLine",NumericAxis:"NumericAxis",TimeseriesAxis:"TimeseriesAxis",CustomAxis:"CustomAxis"},m=t.createConfigSet(g.SeriesVislet,{independentAxisConfigId:t.createStringProperty(""),independentAxisPosition:t.createEnumProperty(r.AxisPositions,r.AxisPositions.Bottom),independentAxisPadding0:t.createDoubleProperty(0),independentAxisPadding1:t.createDoubleProperty(0),independentAxisSize:t.createIntegerProperty(50),dependentAxisSize:t.createIntegerProperty(80)}),v=t.createConfigSet(g.Panel,{position:t.createIntegerProperty(0),size:t.createIntegerProperty(1),independentAxisConfigId:t.createStringProperty(""),plotAreaConfigId:t.createStringProperty(""),intervalGradients:t.createBooleanProperty(!0),dependentAxisPadding0:t.createDoubleProperty(0),dependentAxisPadding1:t.createDoubleProperty(0),borderColor:t.createColorProperty("rgb(255, 255, 255)"),borderWidth:t.createIntegerProperty(1)}),y=t.createConfigSet(g.Series,{panelId:t.createStringProperty(""),dependentAxisConfigId:t.createStringProperty(""),dependentAxisPosition:t.createEnumProperty(r.AxisPositions,r.AxisPositions.Right),order:t.createIntegerProperty(0)}),b=t.createConfigSet(g.LineSeries,e.assimilate(y.properties,a.getConfigSchema().getConfigSet(a.ConfigNames.LineComponent).properties)),_=t.createConfigSet(g.BarsSeries,e.assimilate(y.properties,s.getConfigSchema().getConfigSet(s.ConfigNames.BarsComponent).properties)),x=t.createConfigSet(g.OHLCBarsSeries,e.assimilate(y.properties,l.getConfigSchema().getConfigSet(l.ConfigNames.OHLCBarsComponent).properties)),w=t.createConfigSet(g.OHLCCandlesSeries,e.assimilate(y.properties,u.getConfigSchema().getConfigSet(u.ConfigNames.OHLCCandlesComponent).properties)),C=t.createConfigSet(g.IntervalGradients,e.assimilate(y.properties,c.getConfigSchema().getConfigSet(c.ConfigNames.IntervalsComponent).properties)),T=t.createConfigSet(g.ReferenceLine,e.assimilate(y.properties,d.getConfigSchema().getConfigSet(d.ConfigNames.ReferenceLineComponent).properties)),E=t.createConfigSet("Interval",{min:t.createDoubleProperty(1/0),max:t.createDoubleProperty(-1/0)}),S=t.createConfigSet("SeriesAxis",{bound:E}),k=t.createConfigSet(g.NumericAxis,e.assimilate(S.properties,h.ConfigSet.properties)),A=t.createConfigSet(g.TimeseriesAxis,e.assimilate(S.properties,f.ConfigSet.properties)),M=t.createConfigSet(g.CustomAxis,e.assimilate(S.properties,p.ConfigSet.properties));return{ConfigNames:g,getConfigSchema:function(){return t.createSchema([m,o.getConfigSchema().getConfigSet(o.ConfigNames.PlotArea),v,y,b,_,x,w,C,T,k,A,M],[])}}}),define("oven/components/series/rangeSliderConfig",["oven/framework/config/schema/configSchemaBuilder"],function(e){var t,n,i,r;return t={SeriesRangeSlider:"SeriesRangeSlider"},i=e.createConfigSet("SeriesRangeSliderInterval",{min:e.createDoubleProperty(-1/0),max:e.createDoubleProperty(1/0)}),n=e.createConfigSet(t.SeriesRangeSlider,{panelId:e.createStringProperty(""),range:i,enable:e.createBooleanProperty(!1),fillColor:e.createStringProperty("rgba(128, 128, 128, 0.6)"),handleColor:e.createStringProperty("rgba(128, 128, 128, 1.0)"),handleSize:e.createDoubleProperty(50),signalOnSet:e.createBooleanProperty(!0),signalOnBeginEnd:e.createBooleanProperty(!0),signalOnMove:e.createBooleanProperty(!1)}),r={ConfigNames:t,ConfigSet:n,getConfigSchema:function(){return e.createSchema([n],[])}}}),define("oven/components/series/trackerConfig",["oven/framework/config/schema/configSchemaBuilder","oven/vislets/series/seriesVisletDefs"],function(e,t){var n,i,r;return n={SeriesTracker:"SeriesTracker"},i=e.createConfigSet(n.SeriesTracker,{panelId:e.createStringProperty(""),dependentAxisConfigId:e.createStringProperty(""),dependentAxisPosition:e.createEnumProperty(t.AxisPositions,t.AxisPositions.Right),enable:e.createBooleanProperty(!1),axes:e.createIntegerProperty(2),position0:e.createDoubleProperty(0),position1:e.createDoubleProperty(0),lineColor:e.createStringProperty("rgba(255, 255, 255, 0.5)"),lineWidth:e.createIntegerProperty(1),signalOnEnterLeave:e.createBooleanProperty(!0),signalOnMove:e.createBooleanProperty(!1),signalOnDownUp:e.createBooleanProperty(!0),signalOnDoubleClick:e.createBooleanProperty(!0)}),r={ConfigNames:n,ConfigSet:i,getConfigSchema:function(){return e.createSchema([i],[])}}}),define("oven/visualizations/series/seriesVisualizationConfig",["oven/library/utility/objects","oven/framework/config/schema/configSchemaBuilder","oven/unvetted/contracts/commonConfig","oven/unvetted/contracts/configDefaults","oven/vislets/series/seriesVisletConfig","oven/vislets/series/seriesVisletDefs","oven/components/series/rangeSliderConfig","oven/components/series/trackerConfig"],function(e,t,n,i,r,o,a,s){var l={SeriesVisualization:"SeriesVisualization"};return{ConfigNames:l,getConfigSchema:function(){return t.createSchema([r.getConfigSchema().getConfigSet(r.ConfigNames.SeriesVislet),r.getConfigSchema().getConfigSet(r.ConfigNames.PlotArea),r.getConfigSchema().getConfigSet(r.ConfigNames.Panel),r.getConfigSchema().getConfigSet(r.ConfigNames.Series),r.getConfigSchema().getConfigSet(r.ConfigNames.LineSeries),r.getConfigSchema().getConfigSet(r.ConfigNames.BarsSeries),r.getConfigSchema().getConfigSet(r.ConfigNames.OHLCBarsSeries),r.getConfigSchema().getConfigSet(r.ConfigNames.OHLCCandlesSeries),r.getConfigSchema().getConfigSet(r.ConfigNames.IntervalGradients),r.getConfigSchema().getConfigSet(r.ConfigNames.ReferenceLine),r.getConfigSchema().getConfigSet(r.ConfigNames.NumericAxis),r.getConfigSchema().getConfigSet(r.ConfigNames.TimeseriesAxis),r.getConfigSchema().getConfigSet(r.ConfigNames.CustomAxis),a.ConfigSet,s.ConfigSet,t.createConfigSet(l.SeriesVisualization,{independentAxisConfigId:t.createStringProperty(""),independentAxisPosition:t.createEnumProperty(o.AxisPositions,o.AxisPositions.Bottom),independentAxisPadding0:t.createDoubleProperty(0),independentAxisPadding1:t.createDoubleProperty(0),independentAxisSize:t.createIntegerProperty(50),dependentAxisSize:t.createIntegerProperty(80)})],[])}}}),define("oven/vislets/series/seriesVisletDataContract",["oven/framework/data/schema/dataSchemaBuilder","oven/components/series/tickSeriesDataContract","oven/components/series/intervalSeriesDataContract","oven/components/plot/customAxisDataContract","oven/components/series/seriesDataContract","oven/components/series/ohlcSeriesDataContract"],function(e,t,n,i,r,o){return{getDataContractSchema:function(){return e.createDataContractSchema([t.TickSeriesDataContract,n.IntervalSeriesDataContract,i.CustomAxisDataContract,r.SeriesDataContract,o.SeriesDataContract])}}}),define("oven/components/series/signals",["oven/library/utility/objects","oven/unvetted/contracts/signals"],function(e,t){var n;return n={RANGE_SLIDER_SET:"range_slider_set",RANGE_SLIDER_BEGIN:"range_slider_begin",RANGE_SLIDER_END:"range_slider_end",RANGE_SLIDER_MOVE:"range_slider_move",TRACKER_ENTER:"tracker_enter",TRACKER_LEAVE:"tracker_leave",TRACKER_MOVE:"tracker_move",TRACKER_DOWN:"tracker_down",TRACKER_UP:"tracker_up",TRACKER_DOUBLE_CLICK:"tracker_double_click",createRangeSliderSignal:function(n,i,r,o,a,s,l,u){return e.assimilate(t.createSignal(n,i,r),{panelId:o,range:a,extrema:s,range_pixels:l,extrema_pixels:u})},createTrackerSignal:function(n,i,r,o,a,s){return e.assimilate(t.createSignal(n,i,r),{panelId:o,position:a,position_pixels:s})}}}),define("oven/unvetted/library/utility/uuid",["oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelUtil","oven/unvetted/library/utility/typedArrays"],function(e,t,n){var i,r,o,a;return i={generate:function(){return a||(a="undefined"!=typeof r&&"undefined"!=typeof o?function(){var e=n.createUint16Array(8);o(e);var t=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return t(e[0])+t(e[1])+"-"+t(e[2])+"-"+t(e[3])+"-"+t(e[4])+"-"+t(e[5])+t(e[6])+t(e[7])}:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),n="x"==e?t:8|3&t;return n.toString(16)})}),a()}}}),define("oven/library/plot/mapper",["oven/3rdparty/sys-jscore/main","oven/library/collections/linkedList","oven/library/collections/stack","oven/library/collections/queue"],function(e,t,n,i){function r(e,t,r,o){var a;if(t===h.DepthFirst)for(o?o.reset():o=n.create(),a=o.push.bind(o),o.push(e);!o.empty();)e=o.top(),o.pop(),r(e),e.forEachChild(a,-1);else if(t===h.BreadthFirst)for(o?o.reset():o=i.create(),a=o.push.bind(o),o.push(e);!o.empty();)e=o.front(),o.pop(),r(e),e.forEachChild(a)}function o(e,t){r(e,h.DepthFirst,function(e){e.modifiedContext(t)},e.context?e.context.tmpStack:void 0)}function a(e,t){for(var n,i,r=[],o=[],a=void 0;e;e=e.parent)r.push(e);for(;t;t=t.parent)o.push(t);for(n=r.length-1,i=o.length-1;(n>0&&i)>0&&r[n]===o[i];--n,--i)a=r[n];return a}function s(e,t,n,i,r){var o=e[n.uid];i.examine_edge(t,n),void 0===o||o===f.White?(i.tree_edge(t,n),r(t),i.discover_vertex(n),e[n.uid]=f.Gray,r(n)):o===f.Gray?i.back_edge(t,n):i.forward_or_cross_edge(t,n),i.finish_edge(t,n)}function l(e,t,n){function r(n){s(a,e,n,t,o)}var o,a=[];for(n?n.reset():n=i.create(),o=n.push.bind(n),t.discover_vertex(e),a[e.uid]=f.Gray,o(e);!n.empty();)e=n.front(),n.pop(),e.forEachChild(r,1),e.parent&&r(e.parent),t.finish_vertex(e),a[e.uid]=f.Black}function u(e,t,i){function r(n){s(a,e,n,t,o)}var o,a=[];for(i?i.reset():i=n.create(),o=i.push.bind(i),t.discover_vertex(e),a[e.uid]=f.Gray,o(e);!i.empty();)e=i.top(),i.pop(),e.forEachChild(r,-1),e.parent&&r(e.parent),t.finish_vertex(e),a[e.uid]=f.Black}function c(e,t,n,i){var r,o,a,s,l=[];for(d.BFS(n,{discover_vertex:function(){},finish_vertex:function(){},examine_edge:function(){},tree_edge:function(e,t){l[t.uid]=e},back_edge:function(){},forward_or_cross_edge:function(){},finish_edge:function(){}}),r=i,o=null,a=null,s=null;r;r=l[r.uid])o?o.parent&&r.uid===o.parent.uid?(a=t(a,r.localForward),s=t(r.localReverse,s)):r.parent&&o.uid===r.parent.uid&&(a=t(a,r.localReverse),s=t(r.localForward,s)):(a=e(r.localForward),s=e(r.localReverse)),o=r;return[a,s]}var d,h,f,p=0;return h={DepthFirst:0,BreadthFirst:1},f={White:0,Gray:1,Black:2},d=e.Class.create({init:function(e){this._uid=p++,this._dimension=e,this._parent=null,this._depth=0,this._depthDirty=!1,this._node=t.nodeCreate(),this._context=null,this._children=t.create(),this._numChildren=0,this._childArray=[],this._childArrayDirty=!0,this._parentForward=void 0,this._parentForwardDirty=!0,this._parentReverse=void 0,this._parentReverseDirty=!0,this._worldForward=void 0,this._worldForwardDirty=!0,this._worldReverse=void 0,this._worldReverseDirty=!0},statics:{VisitDirections:h,Visit:r,GetLowestCommonAncestor:a,BFS:l,DFS:u,ComposeTransformsBetween:c},"public":{uid:{get:function(){return this._uid}},dimension:{get:function(){return this._dimension}},parent:{set:function(e){this._parent=e},get:function(){return this._parent}},depth:{get:function(){return this._depthDirty&&(this._depth=this._parent?this._parent.depth+1:0,this._depthDirty=!1),this._depth}},next:{set:function(e){this._node.next=e},get:function(){return this._node.next}},prev:{set:function(e){this._node.prev=e},get:function(){return this._node.prev}},context:{set:function(e){this._context=e||null},get:function(){return this._context}},numChildren:{get:function(){return this._numChildren}},children:{get:function(){var e=this._childArray;return this._childArrayDirty&&(e.length=0,t.forEach(this._children,function(t){e.push(t)}),this._childArrayDirty=!1),e}},getChildByIndex:function(e){return e<this._numChildren?this.children[e]:null},addChild:function(n){if(!e.Class.isInstanceOf(d,n))throw new Error("Error in addChild: attempting to add non-mapper");if(n.parent)throw n.parent===this.publicThis?new Error("Error in addChild: child is already a child of this"):new Error("Error in addChild: child is already a child of another transform");if(this.dimension!==n.dimension)throw new Error("Error in addChild: attempting to add child with different dimension");t.nodeAdd(n,this._children.prev,this._children),++this._numChildren,n.parent=this.publicThis,o(n,this.context),this._childArrayDirty=!0},insertChildBefore:function(n,i){if(!e.Class.isInstanceOf(d,n))throw new Error("Error in insertChildBefore: attempting to add non-mapper");if(n.parent)throw n.parent===this.publicThis?new Error("Error in insertChildBefore: child is already a child of this"):new Error("Error in insertChildBefore: child is already a child of another transform");if(this.dimension!==n.dimension)throw new Error("Error in insertChildBefore: attempting to add child with different dimension");i&&i.parent===this.publicThis?t.nodeAdd(n,i.prev,i):t.nodeAdd(n,this._children.prev,this._children),++this._numChildren,n.parent=this.publicThis,o(n,this.context),this._childArrayDirty=!0},insertChildAfter:function(n,i){if(!e.Class.isInstanceOf(d,n))throw new Error("Error in insertChildAfter: attempting to add non-mapper");if(n.parent)throw n.parent===this.publicThis?new Error("Error in insertChildAfter: child is already a child of this"):new Error("Error in insertChildAfter: child is already a child of another transform");if(this.dimension!==n.dimension)throw new Error("Error in insertChildAfter: attempting to add child with different dimension");i&&i.parent===this.publicThis?t.nodeAdd(n,i,i.next):t.nodeAdd(n,this._children,this._children.next),++this._numChildren,n.parent=this.publicThis,o(n,this.context),this._childArrayDirty=!0},swapChild:function(n,i){if(!e.Class.isInstanceOf(d,n)||!e.Class.isInstanceOf(d,i))throw new Error("Error in swapChild: attempting to add non-mapper");if(n.parent!==this.publicThis)throw new Error("Error in swapChild: oldChild is not a child of this");if(i.parent)throw i.parent===this.publicThis?new Error("Error in swapChild: newChild is already a child of this"):new Error("Error in swapChild: newChild is already a child of another transform");if(this.dimension!==i.dimension)throw new Error("Error in swapChild: attempting to add child with different dimension");n!==i&&(t.nodeSwap(n,i),n.parent=null,o(n,this.context),i.parent=this.publicThis,o(i,this.context),this._childArrayDirty=!0)},removeChild:function(n){if(!e.Class.isInstanceOf(d,n))throw new Error("Error in removeChild: attempting to remove non-mapper");if(n.parent!==this.publicThis)throw new Error("Error in removeChild: child is not a child of this");n.parent=null,--this._numChildren,o(n,this.context),t.nodeRemove(n),this._childArrayDirty=!0},removeChildren:function(){t.removeAll(this._children,function(e){e.parent=null,o(e,this.context)}),this._numChildren=0,this._childArrayDirty=!0},forEachChild:function(e,n){void 0===n||n>=0?t.forEach(this._children,e):t.forEachReverse(this._children,e)},parentForward:{get:function(){return this._parentForwardDirty&&(this._parentForward=this.parent?this.parent.forward:null,this._parentForwardDirty=!1),this._parentForward
}},parentReverse:{get:function(){return this._parentReverseDirty&&(this._parentReverse=this.parent?this.parent.reverse:null,this._parentReverseDirty=!1),this._parentReverse}},forward:{get:function(){return this._worldForwardDirty&&(this._worldForward=this.getForward(),this._worldForwardDirty=!1),this._worldForward}},reverse:{get:function(){return this._worldReverseDirty&&(this._worldReverse=this.getReverse(),this._worldReverseDirty=!1),this._worldReverse}}},"protected":{localFunctionsModify:function(){var e=this.publicThis;r(this,h.DepthFirst,function(t){t.modifiedMapper(e)},this.context?this.context.tmpStack:void 0)}},virtual:{"public":{modifiedContext:function(e){this.context=e||null,this._depthDirty=!0,this._parentForwardDirty=!0,this._parentReverseDirty=!0,this._worldForwardDirty=!0,this._worldReverseDirty=!0},modifiedMapper:function(){},localForward:{get:null},localReverse:{get:null}},"private":{getForward:null,getReverse:null}}})}),define("oven/library/plot/mapper1",["oven/3rdparty/sys-jscore/main","oven/library/plot/mapper"],function(e,t){function n(e,n){return t.ComposeTransformsBetween(function(e){return function(t){return e(t)}},function(e,t){return function(n){return e(t(n))}},e,n)}var i=e.Class.create(t,{init:function(){this.initSuper(1)},statics:{GetTransformsBetween:n},virtual:{override:{getForward:function(){var e=this.localForward,t=this.parentForward;return t&&this.parent.localForward!==e?function(n){return e(t(n))}:e},getReverse:function(){var e=this.localReverse,t=this.parentReverse;return t&&this.parent.localReverse!==e?function(n){return t(e(n))}:e}}}});return i}),define("oven/library/plot/default1",["oven/3rdparty/sys-jscore/main","oven/library/plot/mapper1"],function(e,t){var n=e.Class.create(t,{init:function(e,t){this.initSuper(),this._localForward=e,this._localReverse=t},virtual:{override:{localForward:{get:function(){return this._localForward}},localReverse:{get:function(){return this._localReverse}}}}});return n}),define("oven/library/plot/linearMapper",["oven/3rdparty/sys-jscore/main","oven/library/plot/default1","oven/library/math/interval"],function(e,t,n){var i=e.Class.create(t,{init:function(e,t){var i=void 0===e?1:e,r=void 0===t?0:t;this.initSuper(function(e){return e*i+r},function(e){return(e-r)/i}),this._setAB=function(e,t){i=e,r=t,this.localFunctionsModify()},this._getA=function(){return i},this._getB=function(){return r},this._setIntervals=function(e,t){var i=n.size(e),r=n.size(t),o=r/i;this._setAB(o,-(o*e[0])+t[0])}},"public":{a:{set:function(e){this._setAB(e,this._getB())},get:function(){return this._getA()}},b:{set:function(e){this._setAB(this._getA(),e)},get:function(){return this._getB()}},transform:function(e,t){this._setAB(this._getA()*e,e*this._getB()+t)},setIntervals:function(e,t){this._setIntervals(e,t)}}});return i}),define("oven/library/plot/collapseMapper",["oven/3rdparty/sys-jscore/main","oven/library/plot/default1","oven/library/math/interval","oven/unvetted/library/utility/algorithm"],function(e,t,n,i){var r=e.Class.create(t,{init:function(e){var t,r,o,a,s=[],l=n.createEmpty(),u=[],c=n.createEmpty(),d=[],h=0;this.initSuper(function(e){var o,l=1*e;if(!a||!n.contains(a,l)){if(o=i.lower_bound(r,l,function(e,t){return e[1]<t}),!(t>o&&l>=s[o][0]))return t>0&&0>=o?(a=s[0],h=d[0],c[0]):t>0&&o>=t?(a=s[t-1],h=d[t-1],c[1]):(a=void 0,h=0,0===t?l:void 0);a=s[o],h=d[o]}return l+h},function(e){var n;return n=i.lower_bound(o,e,function(e,t){return e[1]<t}),t>n&&e>=u[n][0]?e-d[n]:t>0&&0>=n?l[0]:t>0&&n>=t?l[1]:0===t?e:void 0}),this._setIntervals=function(e){var h,f,p;t=e.length,s=e.map(function(e){return[1*e[0],1*e[1]]}),r=i.view(s),n.initEmpty(l),n.envelopeIntervals(l,l,s),u.length=t,o=i.view(u),d.length=t,f=c[0]=0,h=0,s.forEach(function(e){p=f+(e[1]-e[0]),u[h]=[f,p],d[h]=-e[0]+f,f=p,++h}),c[1]=f,a=void 0,this.localFunctionsModify()},this._setIntervals(e),this._domain=l,this._codomain=c},"public":{setIntervals:function(e){this._setIntervals(e)},domain:{get:function(){return this._domain}},codomain:{get:function(){return this._codomain}}}});return r}),define("oven/library/plot/mapper2",["oven/3rdparty/sys-jscore/main","oven/library/plot/mapper"],function(e,t){function n(e,n){return t.ComposeTransformsBetween(function(e){return function(t,n){return e(t,n)}},function(e,t){return function(n,i){return e(n,t(n,i))}},e,n)}var i=e.Class.create(t,{init:function(){this.initSuper(2)},statics:{GetTransformsBetween:n},virtual:{override:{getForward:function(){var e=this.localForward,t=this.parentForward;return t&&this.parent.localForward!==e?function(n,i){return e(n,t(n,i))}:e},getReverse:function(){var e=this.localReverse,t=this.parentReverse;return t&&this.parent.localReverse!==e?function(n,i){return t(n,e(n,i))}:e}}}});return i}),define("oven/library/plot/default2",["oven/3rdparty/sys-jscore/main","oven/library/plot/mapper2"],function(e,t){var n=e.Class.create(t,{init:function(e,t){this.initSuper(),this._localForward=e,this._localReverse=t},virtual:{override:{localForward:{get:function(){return this._localForward}},localReverse:{get:function(){return this._localReverse}}}}});return n}),define("oven/library/plot/delegator1",["oven/3rdparty/sys-jscore/main","oven/library/plot/mapper1"],function(e,t){var n=e.Class.create(t,{init:function(e){this.initSuper(),this._delegate=e},virtual:{override:{modifiedContext:function(e){this.super.modifiedContext(e),this._delegate.modifiedContext(e)},modifiedMapper:function(e){this.super.modifiedMapper(e),this._delegate.modifiedMapper(e)},localForward:{get:function(){return this.parent.localForward}},localReverse:{get:function(){return this.parent.localReverse}}}}});return n}),define("oven/library/plot/cartesianMapper2",["oven/3rdparty/sys-jscore/main","oven/library/plot/default2","oven/library/plot/delegator1"],function(e,t,n){var i;return i=e.Class.create(t,{init:function(e,t){var i,r,o,a,s,l,u,c=this;this.initSuper(function(e,t){return e[0]=a(t[0]),e[1]=s(t[1]),e},function(e,t){return e[0]=l(t[0]),e[1]=u(t[1]),e}),o={modifiedContext:function(){a=c._axis0.forward,s=c._axis1.forward,l=c._axis0.reverse,u=c._axis1.reverse,c.localFunctionsModify()},modifiedMapper:function(){c.localFunctionsModify()}},i=this._glue0=new n(o),r=this._glue1=new n(o),this._axis0=e,this._axis1=t,this._axis0&&this._axis0.addChild(i),this._axis1&&this._axis1.addChild(r)},"public":{axis:function(e){return 0===e?this._axis0:1===e?this._axis1:void 0},axis0:{set:function(e){this._axis0!==e&&(this._axis0&&this._axis0.removeChild(this._glue0),this._axis0=e,this._axis0&&this._axis0.addChild(this._glue0))},get:function(){return this._axis0}},axis1:{set:function(e){this._axis1!==e&&(this._axis1&&this._axis1.removeChild(this._glue1),this._axis1=e,this._axis1&&this._axis1.addChild(this._glue1))},get:function(){return this._axis1}}}})}),define("oven/library/plot/affine2dMapper",["oven/3rdparty/sys-jscore/main","oven/library/plot/default2","oven/library/math/algebra/mat3d","oven/library/math/geometry2d/point2d"],function(e,t,n,i){var r;return r=e.Class.create(t,{init:function(e){function t(){return a&&(n.affineInvert(o,r),a=!1),o}var r=e,o=n.create(),a=n.create();this.initSuper(function(e,t){return i.transform(e,t,r)},function(e,n){return i.transform(e,n,t())}),this._matrix=n.create(),e?n.copy(this._matrix,e):(n.initIdentity(this._matrix),r=this._matrix),o=n.affineInvert(o,r),a=!1,this._setMatrix=function(e){n.copy(r,e),a=!0,this.localFunctionsModify()},this._getMatrixInverse=t},"public":{matrix:{set:function(e){this._setMatrix(e)},get:function(){return this._matrix}},matrixInverse:{get:function(){return this._getMatrixInverse()}}}})}),define("oven/library/plot/delegator2",["oven/3rdparty/sys-jscore/main","oven/library/plot/mapper2"],function(e,t){var n=e.Class.create(t,{init:function(e){this.initSuper(),this._delegate=e},virtual:{override:{modifiedContext:function(e){this.super.modifiedContext(e),this._delegate.modifiedContext(e)},modifiedMapper:function(e){this.super.modifiedMapper(e),this._delegate.modifiedMapper(e)},localForward:{get:function(){return this.parent.localForward}},localReverse:{get:function(){return this.parent.localReverse}}}}});return n}),define("oven/components/plot/space2",["oven/3rdparty/sys-jscore/main","oven/library/plot/mapper2","oven/library/plot/delegator2","oven/library/math/geometry2d/point2d","oven/library/math/algebra/mat3d","oven/components/plot/plotDefs"],function(e,t,n,i,r,o){function a(e,t){return e[0]=t[0],e[1]=t[1],e}var s,l,u,c,d=Math.PI/2,h=2*Math.PI;return l=o.Orientation,u=o.Spaces,c=u.View+1,s=e.Class.create({statics:{Orientation:l,Spaces:u},init:function(e,i,o){var s,l,d,h,f,p,g,m=this;for(this._data_model_transform=e,this._model_world_transform=i,this._world_view_transform=o,s=[e,i,o,null],l=[null,e,i,o],d=[],h=[],f=0,p=c*c;p>f;++f)d.push(null),h.push(!0);for(this._getTransformFunction=function(e,n){var i,r,o,a;if(e>=c||n>=c)throw new Error("Invalid coordinate system identifiers passed to getTransformFunction");return r=4*e+n,h[r]?e===u.Data?(i=d[r]=l[n].forward,h[r]=!1):n===u.Data?(i=d[r]=l[e].reverse,h[r]=!1):e!==n&&(e>n?(a=!0,o=n,n=e,e=o):a=!1,o=t.GetTransformsBetween(s[e],l[n]),r=4*e+n,d[r]=o[0],h[r]=!1,a||(i=o[0]),r=4*n+e,d[r]=o[1],h[r]=!1,a&&(i=o[1])):i=d[r],i},f=0,p=c;p>f;++f)g=4*f+f,d[g]=a,h[g]=!1;this._visibleDirection=[[0,0],[0,0]],this._visibleDirectionDirty=!0,this._orientation=[void 0,void 0],this._orientationDirty=!0,this._visibleDomain=[[1/0,-1/0],[1/0,-1/0]],this._visibleDomainDirty=!0,this._axisAlignedMatrix=r.initIdentity(r.create()),this._axisAlignedMatrixDirty=!0,this._glue=new n({modifiedContext:function(){m._visibleDirectionDirty=!0,m._orientationDirty=!0,m._visibleDomainDirty=!0},modifiedMapper:function(){m._visibleDirectionDirty=!0,m._orientationDirty=!0,m._visibleDomainDirty=!0}}),this._world_view_transform.addChild(this._glue),this._tmpPoints=[[0,0],[0,0]]},"public":{dataModelTransform:{get:function(){return this._data_model_transform}},modelWorldTransform:{get:function(){return this._model_world_transform}},worldViewTransform:{get:function(){return this._world_view_transform}},transformFunction:function(e,t){return this._getTransformFunction(e,t)},visibleDirection:{get:function(){function e(e,n,o){r[0][0]=0,r[0][1]=0,r[1][0]=n,r[1][1]=o,i.subPoint(e,t(r[1],r[1]),t(r[0],r[0]))}var t,n=this,r=this._tmpPoints;return this._visibleDirectionDirty&&(t=n._getTransformFunction(u.Model,u.View),e(this._visibleDirection[0],1,0),e(this._visibleDirection[1],0,1),this._visibleDirectionDirty=!1),this._visibleDirection}},orientation:{get:function(){function e(e){var t=Math.atan2(e[1],e[0]);return t=0>t?h+t:t,Math.round(t/d)}return this._orientationDirty&&(this._orientation[0]=e(this.visibleDirection[0]),this._orientation[1]=e(this.visibleDirection[1]),this._orientationDirty=!1),this._orientation}},visibleDomain:{get:function(){function e(e){var a=t[e];a===l.East||a===l.West?(r[0][0]=0,r[0][1]=i,r[1][0]=1,r[1][1]=i):(a===l.North||a===l.South)&&(r[0][0]=i,r[0][1]=1,r[1][0]=i,r[1][1]=0),o(r[0],r[0]),o(r[1],r[1]),n[e][0]=r[0][e],n[e][1]=r[1][e]}var t,n,i=0,r=this._tmpPoints,o=this._world_view_transform.reverse;return this._visibleDomainDirty&&(t=this.orientation,n=this._visibleDomain,e(0),e(1),this._visibleDomainDirty=!1),this._visibleDomain}},axisAlignedOrientationMatrix:{get:function(){var e,t;return this._axisAlignedMatrixDirty&&(e=this.orientation,t=this._axisAlignedMatrix,r.initIdentity(t),e[0]===o.Orientation.East?(t[0]=1,t[1]=0):e[0]===o.Orientation.West?(t[0]=-1,t[1]=0):e[0]===o.Orientation.North?(t[0]=0,t[1]=-1):e[0]===o.Orientation.South&&(t[0]=0,t[1]=1),e[1]===o.Orientation.East?(t[3]=1,t[4]=0):e[1]===o.Orientation.West?(t[3]=-1,t[4]=0):e[1]===o.Orientation.North?(t[3]=0,t[4]=-1):e[1]===o.Orientation.South&&(t[3]=0,t[4]=1),this._axisAlignedMatrixDirty=!1),this._axisAlignedMatrix}}}})}),define("oven/library/plot/instancerMapper1",["oven/3rdparty/sys-jscore/main","oven/library/plot/delegator1","oven/library/plot/mapper1"],function(e,t,n){var i,r;return i=e.Class.create(n,{init:function(e){this.initSuper(),this._functions=e},virtual:{override:{localForward:{get:function(){return this._functions.forward}},localReverse:{get:function(){return this._functions.reverse}}}},"public":{ownerModified:function(){this.localFunctionsModify()}}}),r=e.Class.create(t,{init:function(t){var i=this,r={forward:null,reverse:null},o=[];if(this.initSuper({modifiedContext:function(){i.parent?(r.forward=i.parent.localForward,r.reverse=i.parent.localReverse):(r.forward=null,r.reverse=null),i.localFunctionsModify(),o.forEach(function(e){e.ownerModified()})},modifiedMapper:function(e){i.parent&&i.parent===e&&(i.localFunctionsModify(),o.forEach(function(e){e.ownerModified()}))}}),!t||!e.Class.isInstanceOf(n,t))throw new Error("InstancerMapper1 needs another 1D mapper to instance");this._owner=t,this._owner.addChild(this.publicThis),this._functions=r,this._instances=o},"public":{owner:{get:function(){return this._owner}},getInstance:function(){var e=new i(this._functions);return this._instances.push(e),e}}})}),define("oven/library/plot/instancerMapper2",["oven/3rdparty/sys-jscore/main","oven/library/plot/delegator2","oven/library/plot/mapper2"],function(e,t,n){var i,r;return i=e.Class.create(n,{init:function(e){this.initSuper(),this._functions=e},virtual:{override:{localForward:{get:function(){return this._functions.forward}},localReverse:{get:function(){return this._functions.reverse}}}},"public":{ownerModified:function(){this.localFunctionsModify()}}}),r=e.Class.create(t,{init:function(t){var i=this,r={forward:null,reverse:null},o=[];if(this.initSuper({modifiedContext:function(){i.parent?(r.forward=i.parent.localForward,r.reverse=i.parent.localReverse):(r.forward=null,r.reverse=null),i.localFunctionsModify(),o.forEach(function(e){e.ownerModified()})},modifiedMapper:function(e){i.parent&&i.parent===e&&(i.localFunctionsModify(),o.forEach(function(e){e.ownerModified()}))}}),!t||!e.Class.isInstanceOf(n,t))throw new Error("InstancerMapper2 needs another 2D mapper to instance");this._owner=t,this._owner.addChild(this.publicThis),this._functions=r,this._instances=o},"public":{owner:{get:function(){return this._owner}},getInstance:function(){var e=new i(this._functions);return this._instances.push(e),e}}})}),define("oven/unvetted/library/utility/boundingIntervalHierarchy",["oven/unvetted/library/boundingBox","oven/library/math/interval","oven/library/collections/stack"],function(e,t,n){function i(){return[t.createEmpty(),t.createEmpty()]}function r(e){return[t.create(e.left,e.left+e.width),t.create(e.top,e.top+e.height)]}function o(e){return[[e[0],e[2]],[e[1],e[3]]]}function a(e,t){return e[0][0]=t[0],e[0][1]=t[2],e[1][0]=t[1],e[1][1]=t[3],e}function s(e){return[[e[0],e[0]+e[2]],[e[1],e[1]+e[3]]]}function l(){return[{s:-1/0,e:1/0},{s:-1/0,e:1/0}]}function u(e,n){return t.overlaps(e[0],n[0])&&t.overlaps(e[1],n[1])}function c(e,n){return t.contains(n[0],e[0])&&t.contains(n[1],e[1])}function d(e,t){var n,i,r,o,a,s,u,c,d,h=[0,0],f=0,p=1/0;for(a=0;2>a;a+=1)i=e[a].s,r=e[a].e,h[a]=r-i,o=1/h[a],c=t[a][0],d=t[a][1],r>c&&d>r&&(0>o?c=r:d=r),s=(c-i)*o,u=(d-i)*o,c=u>s?s:u,d=s>u?s:u,f=c>f?c:f,p=p>d?d:p;if(0>p)return!1;if(f>p)return!1;for(n=l(),a=0;2>a;a+=1)i=e[a].s,o=h[a],n[a].s=i+o*f,n[a].e=i+o*p;return n}function h(e,t){return{type:v.Item,envelope:e,object:t}}function f(){return{type:v.Node,axis:void 0,leftPosition:1/0,rightPosition:-1/0,leftChild:void 0,rightChild:void 0}}function p(e,n){var i,r,o,a,s,l=[e,e],u=[n,n],c=0,d=-Number.MAX_VALUE;for(i=0;2>i;i+=1)t.lex_lt(e.envelope[i],n.envelope[i])?(l[i]=e,u[i]=n):(l[i]=n,u[i]=e);for(i=0;2>i;i+=1)o=l[i].envelope,a=u[i].envelope,r=Math.max(o[i][1],a[i][1])-o[i][0],r>d&&(c=i,d=r);return s=f(),s.axis=c,s.leftPosition=l[c].envelope[c][1],s.rightPosition=u[c].envelope[c][0],s.leftChild=l[c],s.rightChild=u[c],s}function g(){function f(e,n){var i,r,o,a,s,l,u,c=h(e,n);if(t.hull(_[0],_[0],e[0]),t.hull(_[1],_[1],e[1]),null===b)b=c;else if(b.type===v.Item)b=p(c,b);else for(i=b;;)if(r=i.axis,o=i.leftPosition,a=i.rightPosition,s=e[r][0],l=e[r][1],u=o>=l?0:s>=a?1:a-s>=l-o?0:1,0===u){if(i.leftPosition=l>o?l:o,i.leftChild.type===v.Item){i.leftChild=p(c,i.leftChild);break}i=i.leftChild}else{if(i.rightPosition=a>s?s:a,i.rightChild.type===v.Item){i.rightChild=p(c,i.rightChild);break}i=i.rightChild}}function m(e){var t,n,i=[],r=[];for(b&&u(e,_)&&r.push(b);r.length>0;)t=r.pop(),t.type===v.Item?u(e,t.envelope)&&i.push(t.object):(n=t.axis,e[n][0]<=t.leftPosition&&r.push(t.leftChild),e[n][1]>=t.rightPosition&&r.push(t.rightChild));return i}var y,b=null,_=i(),x=[0,0],w=n.create(n.Reuse.Array),C=i();return y=this instanceof g?this:Object.create(g.prototype),Object.defineProperties(y,{boundingBox:{get:function(){return e.createBoundingBox(_[0][0],_[1][0],t.size(_[0]),t.size(_[1]))}}}),y.insertWithBoundingBox=function(e,t){return f(r(e),t)},y.insertWithAABox=function(e,t){return f(o(e),t)},y.insertWithRect=function(e,t){return f(s(e),t)},y.searchPoint=function(e,t){var n,i,r=[e,t],o=[],a=[];for(b&&c(r,_)&&a.push(b);a.length>0;)i=a.pop(),i.type===v.Item?c(r,i.envelope)&&o.push(i.object):(n=r[i.axis],n<=i.leftPosition&&a.push(i.leftChild),n>=i.rightPosition&&a.push(i.rightChild));return o},y.searchLine=function(e,t,n,i){function r(e,t){var n,i,r,o,s=l(),u=(t-p[c].s)/(p[c].e-p[c].s);for(n=0;2>n;n+=1)r=p[n].s,o=p[n].e,i=r+(o-r)*u,a=s[n],0===e?(a.s=n===c?t:i,a.e=o):(a.s=r,a.e=n===c?t:i);return s}function o(e,t){m.push({node:e,r:t})}var a,s,u,c,h,f,p=l(),g=[],m=[];for(p[0].s=e,p[0].e=n,p[1].s=t,p[1].e=i,b&&(p=d(p,_),p&&o(b,p));m.length>0;)s=m.pop(),u=s.node,p=s.r,u.type===v.Item?d(p,u.envelope)&&g.push(u.object):(c=u.axis,h=p[c].s,f=p[c].e,h<u.rightPosition&&h>u.leftPosition?f<u.leftPosition?o(u.leftChild,r(0,u.leftPosition)):f>u.rightPosition&&o(u.rightChild,r(0,u.rightPosition)):h<=u.leftPosition?h>=u.rightPosition?(o(u.leftChild,f>u.leftPosition?r(1,u.leftPosition):p),o(u.rightChild,f<u.rightPosition?r(1,u.rightPosition):p)):f<u.rightPosition?o(u.leftChild,f>u.leftPosition?r(1,u.leftPosition):p):(o(u.leftChild,r(1,u.leftPosition)),o(u.rightChild,r(0,u.rightPosition))):h>=u.rightPosition&&(f>u.leftPosition?o(u.rightChild,f<u.rightPosition?r(1,u.rightPosition):p):(o(u.rightChild,r(1,u.rightPosition)),o(u.leftChild,r(0,u.leftPosition)))));return g},y.searchBoundingBox=function(e){return m(r(e))},y.searchAABox=function(e){return m(o(e))},y.searchRect=function(e){return m(s(e))},y.forEachIntersectingPoint=function(e,t){var n,i,r;for(x[0]=e[0],x[1]=e[1],i=w.reset(),b&&c(e,_)&&i.push(b);i.size()>0;)r=i.top(),i.pop(),r.type===v.Item?c(e,r.envelope)&&t(r.object):(n=e[r.axis],n<=r.leftPosition&&i.push(r.leftChild),n>=r.rightPosition&&i.push(r.rightChild))},y.forEachIntersectingRect=function(e,t){var n,i,r;for(a(C,e),n=w.reset(),b&&u(C,_)&&n.push(b);n.size()>0;)i=n.pop(),i.type===v.Item?u(C,i.envelope)&&t(i.object):(r=i.axis,C[r][0]<=i.leftPosition&&n.push(i.leftChild),C[r][1]>=i.rightPosition&&n.push(i.rightChild))},y.visualize=function(e,n,i){var r,o,a,s,l,u;if(b.type===v.Node)for(r=[],r.push({node:b,bounds:[[_[0][0],_[1][0]],[_[0][1],_[1][1]]]});r.length>0;)o=r.pop(),a=o.node.axis,s=0===a?1:0,e.strokeStyle="#ff0000",n&&(0===a?(e.beginPath(),e.moveTo(o.node.leftPosition,o.bounds[0][1]),e.lineTo(o.node.leftPosition,o.bounds[1][1]),e.stroke(),e.beginPath(),e.moveTo(o.node.rightPosition,o.bounds[0][1]),e.lineTo(o.node.rightPosition,o.bounds[1][1]),e.stroke()):(e.beginPath(),e.moveTo(o.bounds[0][0],o.node.leftPosition),e.lineTo(o.bounds[1][0],o.node.leftPosition),e.stroke(),e.beginPath(),e.moveTo(o.bounds[0][0],o.node.rightPosition),e.lineTo(o.bounds[1][0],o.node.rightPosition),e.stroke())),o.node.leftChild.type===v.Node?(l=[[void 0,void 0],[void 0,void 0]],l[0][a]=o.bounds[0][a],l[1][a]=o.node.leftPosition,l[0][s]=o.bounds[0][s],l[1][s]=o.bounds[1][s],r.push({node:o.node.leftChild,bounds:l})):i&&(e.strokeStyle="#000000",u=o.node.leftChild.envelope,e.strokeRect(u[0][0],u[1][0],t.size(u[0]),t.size(u[1]))),o.node.rightChild.type===v.Node?(l=[[void 0,void 0],[void 0,void 0]],l[0][a]=o.node.rightPosition,l[1][a]=o.bounds[1][a],l[0][s]=o.bounds[0][s],l[1][s]=o.bounds[1][s],r.push({node:o.node.rightChild,bounds:l})):i&&(e.strokeStyle="#000000",u=o.node.rightChild.envelope,e.strokeRect(u[0][0],u[1][0],t.size(u[0]),t.size(u[1])));e.strokeStyle="#000000",e.strokeRect(_[0][0],_[1][0],t.size(_[0]),t.size(_[1]))},y}var m,v={Item:0,Node:1};return g.prototype={},m={BoundingIntervalHierarchy:g,create:g}}),define("oven/library/container/adhocLayout",["oven/3rdparty/sys-jscore/main","oven/library/math/aabox","oven/unvetted/library/utility/boundingIntervalHierarchy"],function(e,t,n){function i(e){return(0<=e[o]||0<=e[s])&&(0<=e[r]||0<=e[a])}var r=0,o=1,a=2,s=3,l=-1,u=0,c=e.Class.define({init:function(e){this._delegate=e,this._contents=[],this._width=0,this._height=0,this._spatialHierarchy=void 0,this._tempRect=t.createEmpty()},statics:{},"private":{lookupContentIndex:function(e){var t,n,i=this._contents,r=i.length;for(t=0;r>t;++t)if(n=i[t],n.contents===e)return t;return-1},lookupContents:function(e){var t=this.lookupContentIndex(e);return-1!==t?this._contents[t]:null},setContentPlacement:function(e,t,n,i){var r=this.lookupContents(e);r&&(r.placement[n]=t,r.placement[i]=l),this._delegate.layoutModified(this)},assignContentPosition:function(e,n,l,u){var c,d,h,f,p,g,m,v,y,b=this._width,_=this._height,x=this._tempRect;return i(l)?(c=e.size,f=c[0],p=c[1],g=l[o],m=l[r],m>=0?d=m:(y=l[a],d=b-f-y),g>=0?h=g:(v=l[s],h=_-p-v),u[0]=d,u[1]=h,n&&(f=b-d,p=_-h),t.initOriginSize(x,d,h,f,p),x):null},getContentRect:function(e,n){var i=e.size,r=this._tempRect;return t.initOriginSize(r,n[0],n[1],i[0],i[1]),r},rebuildSpatialHierarchy:function(){var e,t,i=this;this._spatialHierarchy=e=n.create(),this._contents.forEach(function(n){t=i.getContentRect(n.contents,n.position),e.insertWithRect(t,n)})}},"public":{layout:function(e,n){var i,r=this;0>=e||0>=n||(this._width=e,this._height=n,this._contents.forEach(function(e){i=r.assignContentPosition(e.contents,e.fill,e.placement,e.position),i&&r._delegate.layoutContents(r,e.contents,i)}),this.rebuildSpatialHierarchy(),this._delegate.layoutRectModified(this,t.initSize(this._tempRect,this._width,this._height)))},addContents:function(e,t){var n,i=this.lookupContentIndex(e);-1===i&&(n={contents:e,fill:t||!1,position:[u,u],placement:[u,u,l,l]},this._contents.push(n),this._delegate.layoutModified(this))},removeContents:function(e){var t=this.lookupContentIndex(e);-1!==t&&this._contents.splice(t,1)},setContentTop:function(e,t){this.setContentPlacement(e,t,o,s)},setContentLeft:function(e,t){this.setContentPlacement(e,t,r,a)},setContentBottom:function(e,t){this.setContentPlacement(e,t,s,o)},setContentRight:function(e,t){this.setContentPlacement(e,t,a,r)},forEachChildIntersectingPoint:function(e,t){this._spatialHierarchy.forEachIntersectingPoint(e,t)},forEachChildIntersectingRect:function(e,t){this._spatialHierarchy.forEachIntersectingRect(e,t)}}});return c}),define("oven/library/container/adhocLayoutContainer",["oven/3rdparty/sys-jscore/main","oven/library/container/groupContainer","oven/library/container/adhocLayout","oven/library/math/aabox"],function(e,t,n,i){var r=e.Class.define(t,{init:function(e,t,r){var o=this,a=i.createEmpty();this.initSuper(e,t,r),this._adhocLayout=new n({layoutModified:function(e){var t=o.size;e.layout(t[0],t[1])},layoutContents:function(e,t,n){t.setPosition(n[0],n[1]),t.setSize(n[2]-n[0],n[3]-n[1])},layoutRectModified:function(e,t){o.context&&o.context.dirtyContainingWorldContents(o,i.transformAffine2dAsHomothetic2d(a,t,o.containerToWorldTransform))}})},"public":{addContents:function(e,t){this.addChild(e),this._adhocLayout.addContents(e,t)},removeContents:function(e){this._adhocLayout.removeContents(e),this.removeChild(e)},setContentTop:function(e,t){this._adhocLayout.setContentTop(e,t)},setContentLeft:function(e,t){this._adhocLayout.setContentLeft(e,t)},setContentBottom:function(e,t){this._adhocLayout.setContentBottom(e,t)},setContentRight:function(e,t){this._adhocLayout.setContentRight(e,t)}},virtual:{override:{setSize:function(e,t){this.super.setSize(e,t),this._adhocLayout.layout(e,t)},forEachChildIntersectingPoint:function(e,t){this._adhocLayout.forEachChildIntersectingPoint(e,t)},forEachChildIntersectingRect:function(e,t){this._adhocLayout.forEachChildIntersectingRect(e,t)}}}});return r}),define("oven/library/container/boxLayout",["oven/3rdparty/sys-jscore/main","oven/library/math/aabox"],function(e,t){function n(e,t,n){var i=typeof n;return"string"===i?e:"number"===i?(e[t]=n,e):void 0}function i(e,t){var i,r;if(Array.isArray(t)){if(r=t.length,4===r)return n(e,0,t[0]),n(e,1,t[1]),n(e,2,t[2]),n(e,3,t[3]),e;if(2===r)return n(e,0,t[0]),n(e,1,t[1]),e[2]=e[0],e[3]=e[1],e;if(1===r)return n(e,0,t[0]),e[1]=e[0],e[2]=e[0],e[3]=e[0],e}else{if(i=typeof t,"string"===i)return e;if("object"===i)return n(e,0,t.top),n(e,1,t.right),n(e,2,t.bottom),n(e,3,t.left),e;if("number"===i)return e[0]=t,e[1]=t,e[2]=t,e[3]=t,e}throw new Error("Encountered invalid box layout parameters")}var r;return r=e.Class.define({init:function(e){this._delegate=e,this._width=0,this._height=0,this._contents=[],this._contentRect=t.createSize(0,0),this._margin=[0,0,0,0],this._border=[0,0,0,0],this._padding=[0,0,0,0],this._tempRect=t.createEmpty()},"public":{margin:{set:function(e){i(this._margin,e),this._delegate.boxLayoutModified(this)},get:function(){return this._margin}},margin_top:{set:function(e){n(this._margin,0,e),this._delegate.boxLayoutModified(this)},get:function(){return this._margin[0]}},margin_right:{set:function(e){n(this._margin,1,e),this._delegate.boxLayoutModified(this)},get:function(){return this._margin[1]}},margin_bottom:{set:function(e){n(this._margin,2,e),this._delegate.boxLayoutModified(this)},get:function(){return this._margin[2]}},margin_left:{set:function(e){n(this._margin,3,e),this._delegate.boxLayoutModified(this)},get:function(){return this._margin[3]}},border:{set:function(e){i(this._border,e),this._delegate.boxLayoutModified(this)},get:function(){return this._border}},border_top:{set:function(e){n(this._border,0,e),this._delegate.boxLayoutModified(this)},get:function(){return this._border[0]}},border_right:{set:function(e){n(this._border,1,e),this._delegate.boxLayoutModified(this)},get:function(){return this._border[1]}},border_bottom:{set:function(e){n(this._border,2,e),this._delegate.boxLayoutModified(this)},get:function(){return this._border[2]}},border_left:{set:function(e){n(this._border,3,e),this._delegate.boxLayoutModified(this)},get:function(){return this._border[3]}},padding:{set:function(e){i(this._padding,e),this._delegate.boxLayoutModified(this)},get:function(){return this._padding}},padding_top:{set:function(e){n(this._padding,0,e),this._delegate.boxLayoutModified(this)},get:function(){return this._padding[0]}},padding_right:{set:function(e){n(this._padding,1,e),this._delegate.boxLayoutModified(this)},get:function(){return this._padding[1]}},padding_bottom:{set:function(e){n(this._padding,2,e),this._delegate.boxLayoutModified(this)},get:function(){return this._padding[2]}},padding_left:{set:function(e){n(this._padding,3,e),this._delegate.boxLayoutModified(this)},get:function(){return this._padding[3]}},layout:function(e,t){var n=this,i=this._contentRect;this._width=e,this._height=t,i[0]=Math.max(0,Math.min(e,this._margin[3]+this._border[3]+this._padding[3])),i[1]=Math.max(0,Math.min(t,this._margin[0]+this._border[0]+this._padding[0])),i[2]=Math.max(0,Math.min(e,e-(this._margin[1]+this._border[1]+this._padding[1]))),i[3]=Math.max(0,Math.min(t,t-(this._margin[2]+this._border[2]+this._padding[2]))),this._contents.forEach(function(e){n._delegate.boxLayoutContents(n,e,i)}),this._delegate.boxLayoutRectModified(this,i)},addContents:function(e){var t=this._contents.indexOf(e);-1===t&&(this._contents.push(e),this._delegate.boxLayoutContents(this,e,this._contentRect),this._delegate.boxLayoutRectModified(this,this._contentRect))},removeContents:function(e){var t=this._contents.indexOf(e);-1!==t&&(this._contents.splice(t,1),this._delegate.boxLayoutRectModified(this,this._contentRect))},forEachIntersectingPoint:function(e,n,i){var r,o=this._contents;if(t.contains(this._contentRect,e))if(void 0===i||i>=0)o.forEach(n);else for(r=o.length-1;r>=0;--r)n(o[r])},forEachIntersectingRect:function(e,n,i){var r,o=this._contents;if(t.overlaps(this._contentRect,e))if(void 0===i||i>=0)o.forEach(n);else for(r=o.length-1;r>=0;--r)n(o[r])}},"private":{}})}),define("oven/library/container/boxLayoutContainer",["oven/3rdparty/sys-jscore/main","oven/library/container/groupContainer","oven/library/container/boxLayout","oven/library/math/aabox"],function(e,t,n,i){var r;return r=e.Class.define(t,{init:function(e,t,r){var o=this,a=i.createEmpty();this.initSuper(e,t,r),this._boxLayout=new n({boxLayoutModified:function(e){var t=o.size;e.layout(t[0],t[1])},boxLayoutContents:function(e,t,n){t.setPosition(n[0],n[1]),t.setSize(n[2]-n[0],n[3]-n[1])},boxLayoutRectModified:function(e,t){o.context&&o.context.dirtyContainingWorldContents(o.parent,i.transformAffine2dAsHomothetic2d(a,t,o.containerToWorldTransform))}})},"public":{layout:{get:function(){return this._boxLayout}},addContents:function(e){this.addChild(e),this._boxLayout.addContents(e)},insertContentsBefore:function(e,t){this.insertChildBefore(e,t),this._boxLayout.addContents(e)},insertContentsAfter:function(e,t){this.insertChildAfter(e,t),this._boxLayout.addContents(e)},removeContents:function(e){this._boxLayout.removeContents(e),this.removeChild(e)}},virtual:{override:{setSize:function(e,t){this.super.setSize(e,t),this._boxLayout.layout(e,t)},forEachChildIntersectingPoint:function(e,t,n){this._boxLayout.forEachIntersectingPoint(e,t,n)},forEachChildIntersectingRect:function(e,t,n){this._boxLayout.forEachIntersectingRect(e,t,n)}}}})}),define("oven/library/container/zedLayout",["oven/3rdparty/sys-jscore/main","oven/unvetted/library/utility/algorithm"],function(e,t){var n;return n=e.Class.define({init:function(e,t){this._delegate=e,this._compare=t,this._contents=[]},"public":{layout:function(){var e=t.view(this._contents);t.sort(e,this._compare),this._delegate.zedLayoutUpdated(this,this._contents)},addContents:function(e){var t=this._contents.indexOf(e);-1===t&&(this._contents.push(e),this._delegate.zedLayoutModified(this),this._delegate.zedLayoutRectModified(this))},contentsMoved:function(){this._delegate.zedLayoutModified(this)},removeContents:function(e){var t=this._contents.indexOf(e);-1!==t&&(this._contents.splice(t,1),this._delegate.zedLayoutRectModified(this))}}})}),define("oven/library/container/zedLayoutContainer",["oven/3rdparty/sys-jscore/main","oven/library/container/groupContainer","oven/library/container/zedLayout"],function(e,t,n){var i;return i=e.Class.define(t,{init:function(e,t,i){var r,o=this;this.initSuper(e,t,i),this._zeds=r=[],this._zedLayout=new n({zedLayoutModified:function(e){e.layout()},zedLayoutUpdated:function(e,t){var n=null;t.forEach(function(e){o.reorderChildAfter(e,n),n=e})},zedLayoutRectModified:function(){o.context&&o.context.dirtyContainingWorldContents(o.parent,o.worldRect)}},function(e,t){return r[e.uid]<r[t.uid]})},"public":{addContents:function(e,t){this.super.addChild(e),this._zeds[e.uid]=t,this._zedLayout.addContents(e)},moveContents:function(e,t){var n=this._zeds[e.uid];if(void 0===n)throw new Error("Error in moveContents: container "+e.id+" is not a child of "+this.id);n!==t&&(this._zeds[e.uid]=t,this._zedLayout.contentsMoved(e))},removeContents:function(e){this.super.removeChild(e),delete this._zeds[e.uid],this._zedLayout.removeContents(e)}},virtual:{override:{setSize:function(e,t){this.super.setSize(e,t),this.forEachChild(function(n){n.setSize(e,t)})}}}})}),define("oven/library/math/view2d",["oven/library/math/algebra/mat3d"],function(e){var t={initAspectNormalizedDimensions:function(e,t){return t>1?(e[0]=1,e[1]=1/t):(e[0]=t,e[1]=1),e},initOrthoView:function(t,n,i,r){var o=i[2]-i[0],a=i[3]-i[1],s=n[2]-n[0],l=n[3]-n[1],u=s/o,c=l/a,d=u*-i[0]+n[0],h=c*-i[1]+n[1];return r&&(d=Math.round(d),h=Math.round(h),u=Math.round(u),c=Math.round(c)),e.initScale(t,u,c),e.translate(t,t,d,h),t},initViewportView:function(t,n,i){var r=n[2]-n[0],o=n[3]-n[1],a=1/r,s=1/o,l=a*-n[0],u=s*-n[1];return i&&(l=Math.round(l),u=Math.round(u),a=Math.round(a),s=Math.round(s)),e.initScale(t,a,s),e.translate(t,t,l,u),t},initFeatureView:function(t,n,i,r,o,a){var s=i[2]-i[0],l=i[3]-i[1],u=s/l,c=n[2]-n[0],d=n[3]-n[1],h=c/d,f=0,p=0,g=1;return r=void 0===r?.5:r,o=void 0===o?.5:o,h>=u?(f=n[0]+(c-u/h*c)*r,p=n[1],g=d/l):(f=n[0],p=n[1]+(d-h/u*d)*o,g=c/s),f=g*-i[0]+f,p=g*-i[1]+p,a&&(f=Math.round(f),p=Math.round(p),g=Math.round(g)),e.initScale(t,g,g),e.translate(t,t,f,p),t},initAspectView:function(e,n,i,r,o,a){var s=n[2]-n[0],l=n[3]-n[1],u=s/l;return i=void 0===i?1:i,t.initFeatureView(e,n,i>u?[0,0,s,s/i]:[0,0,l*i,l],r,o,a)
},initAspectNormalizedView:function(e,n,i,r,o,a){var s=t.initAspectNormalizedDimensions(Vec2d.create(1,1),i||1);return t.initFeatureView(e,n,[0,0,s[0],s[1]],r,o,a)},initSubjectView:function(e,n,i,r,o,a,s){return t.initFeatureView(e,n,[0,0,i,r],o,a,s)}};return t}),define("oven/components/plot/plotContainer",["oven/3rdparty/sys-jscore/main","oven/library/container/container","oven/library/container/groupContainer","oven/library/plot/default2","oven/library/plot/affine2dMapper","oven/library/collections/linkedList","oven/library/math/aabox","oven/library/math/view2d","oven/library/math/algebra/mat3d","oven/components/plot/plotDefs"],function(e,t,n,i,r,o,a,s,l,u){function c(e,t,n){var i=n,r=e,o=t;if(t===u.Spaces.Container)return g;if(t===u.Spaces.View){if(i)return function(e,t){return i.localForward(e,t)};throw new Error("Unable to generate a transform for this coordinate system (null or undefined parameters)")}if(t===u.Spaces.Data){if(i)return function(e,t){return i.forward(e,t)};throw new Error("Unable to generate a transform for this coordinate system (null or undefined parameters)")}if(r&&i)return function(e,t){var n=r.transformFunction(o,u.Spaces.View);return i.localForward(e,n(e,t))};throw new Error("Unable to generate a transform for this coordinate system (null or undefined parameters)")}function d(e,t,n){var i=t,r=e,o=n;if(n===u.Spaces.Container)return g;if(n===u.Spaces.View){if(i)return function(e,t){return i.localReverse(e,t)};throw new Error("Unable to generate a transform for this coordinate system (null or undefined parameters)")}if(n===u.Spaces.Data){if(i)return function(e,t){return i.reverse(e,t)};throw new Error("Unable to generate a transform for this coordinate system (null or undefined parameters)")}if(r&&i)return function(e,t){var n=r.transformFunction(u.Spaces.View,o);return n(e,i.localReverse(e,t))};throw new Error("Unable to generate a transform for this coordinate system (null or undefined parameters)")}var h,f,p,g;return f=e.Class.create(i,{init:function(e){g=g||l.initIdentity(l.create());var t=1,n=1;this.initSuper(function(e,i){return e[0]=i[0]*t,e[1]=i[1]*n,e},function(e,i){return e[0]=i[0]/t,e[1]=i[1]/n,e}),this._container=e,this._setSize=function(e,i){t=e,n=i}},"public":{container:{get:function(){return this._container}},updateRect:function(){var e=this._container.size;this._setSize(e[0],e[1]),this.localFunctionsModify()}}}),p=e.Class.create(f,{init:function(e){this.initSuper(e),this._component=e},virtual:{override:{modifiedMapper:function(e){this.super.modifiedMapper(e),e.depth<this.depth?this._component.updateView():this._component.updateWindow()}}}}),h=e.Class.define(n,{init:function(e,t,n){var i,r,o=this;this.initSuper(e,t,n),this._viewContainerTransform=new p(this.publicThis),this._space=null,this._coordinateSystem=u.Spaces.View,this._transformsDirty=!0,this._toContainer=null,this._fromContainer=null,this._updateTransforms=function(){o._toContainer=i=h.GetCoordinateSystemToContainerTransform(o._space,o._coordinateSystem,o._viewContainerTransform),o._fromContainer=r=h.GetContainerToCoordinateSystemTransform(o._space,o._viewContainerTransform,o._coordinateSystem),o._transformsDirty=!1}},statics:{Mapper:f,GetCoordinateSystemToContainerTransform:c,GetContainerToCoordinateSystemTransform:d},"protected":{toContainer:{get:function(){return this._transformsDirty&&this._updateTransforms(),this._toContainer}},fromContainer:{get:function(){return this._transformsDirty&&this._updateTransforms(),this._fromContainer}}},"public":{viewContainerTransform:{get:function(){return this._viewContainerTransform}},space:{set:function(e){this._space!==e&&(this._space&&this._space.worldViewTransform.removeChild(this._viewContainerTransform),this._space=e,this._transformsDirty=!0,this._space&&this._space.worldViewTransform.addChild(this._viewContainerTransform))},get:function(){return this._space}},coordinateSystem:{set:function(e){this._coordinateSystem=e,this._transformsDirty=!0},get:function(){return this._coordinateSystem}}},virtual:{override:{dirtyWorldStuff:function(){this.super.dirtyWorldStuff(),this._viewContainerTransform.updateRect()},setSize:function(e,t){this.super.setSize(e,t),this._viewContainerTransform.updateRect()}},"public":{updateView:function(){},updateWindow:function(){}}}})}),define("oven/components/plot/plotComponent",["oven/3rdparty/sys-jscore/main","oven/library/container/component","oven/components/plot/plotDefs","oven/components/plot/plotContainer"],function(e,t,n,i){var r,o;return o=e.Class.create(i.Mapper,{init:function(e){this.initSuper(e),this._component=e},virtual:{override:{modifiedMapper:function(e){this.super.modifiedMapper(e),this._component.dirty(),e.depth<this.depth?this._component.updateView():this._component.updateWindow()}}}}),r=e.Class.define(t,{init:function(e,t,r,a){var s=this,l=null,u=null;this.initSuper(e,t,r,a),this._viewContainerTransform=new o(this.publicThis),this._space=null,this._coordinateSystem=n.Spaces.View,this._transformsDirty=!0,this._toContainer=null,this._fromContainer=null,this._toCanvas=function(e,t){var n=s.componentToCanvasTransform;l(e,t),e[0]=e[0]+n[6],e[1]=e[1]+n[7]},this._toCanvasRasterEdge=function(e,t){var n=s.componentToCanvasTransform;l(e,t),e[0]=e[0]+n[6]<<0,e[1]=e[1]+n[7]<<0},this._toCanvasRasterCenter=function(e,t){var n=s.componentToCanvasTransform;l(e,t),e[0]=Math.floor(e[0]+n[6])+.5,e[1]=Math.floor(e[1]+n[7])+.5},this._updateTransforms=function(){s._toContainer=l=i.GetCoordinateSystemToContainerTransform(s._space,s._coordinateSystem,s._viewContainerTransform),s._fromContainer=u=i.GetContainerToCoordinateSystemTransform(s._space,s._viewContainerTransform,s._coordinateSystem),s._transformsDirty=!1}},"protected":{toComponent:{get:function(){return this._transformsDirty&&this._updateTransforms(),this._toContainer}},fromComponent:{get:function(){return this._transformsDirty&&this._updateTransforms(),this._fromContainer}},toCanvas:{get:function(){return this._transformsDirty&&this._updateTransforms(),this._toCanvas}},toCanvasRasterEdge:{get:function(){return this._transformsDirty&&this._updateTransforms(),this._toCanvasRasterEdge}},toCanvasRasterCenter:{get:function(){return this._transformsDirty&&this._updateTransforms(),this._toCanvasRasterCenter}}},"public":{viewContainerTransform:{get:function(){return this._viewContainerTransform}},space:{set:function(e){this._space!==e&&(this._space&&this._space.worldViewTransform.removeChild(this._viewContainerTransform),this._space=e,this._transformsDirty=!0,this.updateView(),this._space&&this._space.worldViewTransform.addChild(this._viewContainerTransform))},get:function(){return this._space}},coordinateSystem:{set:function(e){this._coordinateSystem=e,this._transformsDirty=!0},get:function(){return this._coordinateSystem}},orientation:{get:function(){return this._space.orientation}},visibleDomain:{get:function(){return this._space.visibleDomain}},computeAxisGradient:function(e,t,i,r){var o,a=this.orientation[t],s=this.size;return o=a===n.Orientation.East||a===n.Orientation.West?e.createLinearGradient(0,s[1],0,0):e.createLinearGradient(0,0,s[0],0),o.addColorStop(0,i),o.addColorStop(1,r),o}},virtual:{override:{setSize:function(e,t){this.super.setSize(e,t),this._viewContainerTransform.updateRect()}},"public":{updateView:function(){},updateWindow:function(){}}}})}),define("oven/library/math/point2d",["oven/unvetted/kernel/kernelUtil"],function(){var e={create:function(e,t,n){return[e,t,void 0===n?1:n]},initOrigin:function(e){return e[0]=0,e[1]=0,e[2]=1,e},createOrigin:function(){return[0,0,1]},mulAffine2d:function(e,t,n){var i=t[0],r=t[1],o=t[2];return e[0]=n[0]*i+n[2]*r+n[4]*o,e[1]=n[1]*i+n[3]*r+n[5]*o,e},mulAffine2dAsHomothetic2d:function(e,t,n){var i=t[0],r=t[1],o=t[2];return e[0]=n[0]*i+n[4]*o,e[1]=n[3]*r+n[5]*o,e},mulHomothetic2d:function(e,t,n){var i=t[0],r=t[1],o=t[2];return e[0]=n[0]*i+n[2]*o,e[1]=n[1]*r+n[3]*o,e},mulMat3:function(e,t,n){var i=t[0],r=t[1],o=t[2];return e[0]=n[0]*i+n[3]*r+n[6]*o,e[1]=n[1]*i+n[4]*r+n[7]*o,e[2]=n[2]*i+n[5]*r+n[8]*o,e},addVec2:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},subVec2:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},sub:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},distance2:function(e,t){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i},distance:function(e,t){var n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)},lerp:function(e,t,n,i){return e[0]=t[0]+i*(n[0]-t[0]),e[1]=t[1]+i*(n[1]-t[1]),e}};return e}),define("oven/framework/data/view/dataViewAccessor",[],function(){var e;return e={create:function(e){var t,n,i=e,r=i.getDataSchema(),o=i.getMetaBlockSchema(),a=i.getDataTable(),s=a.getData(),l=a.getMetaBlock(),u=s[0],c={},d={},h={};return n=function(e){return u=s[e],c},Object.freeze(n),r.getFieldNames().forEach(function(e){var t=r.getFieldIndex(e);Object.defineProperty(c,e,{get:function(){return u[t]}}),d[e]=function(e){return s[e][t]}}),Object.freeze(n),Object.freeze(d),o.getFieldNames().forEach(function(e){var t=o.getFieldIndex(e);Object.defineProperty(h,e,{get:function(){return l[t]}})}),Object.freeze(h),t={rows:n,columns:d,metaBlock:h,hasDataField:function(e){return void 0!==r.getFieldIndex(e)},hasMetaBlockField:function(e){return void 0!==o.getFieldIndex(e)},update:function(){s=i.getDataTable().getData()}},Object.defineProperty(t,"length",{get:function(){return s.length}}),Object.freeze(t),t}}}),define("oven/components/plot/ticks",["oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelUtil","oven/components/plot/plotDefs","oven/library/math/point2d","oven/unvetted/library/axes/rangefinder","oven/framework/data/view/dataViewAccessor","oven/unvetted/library/utility/typedArrays","oven/library/math/algebra/mat3d","oven/library/math/interval"],function(e,t,n,i,r,o,a,s,l){var u;return u={create:function(){return{count:0,values:[],positions:null,labels:[]}},computeValuesAndPositions:function(e,t,s,l,u,c,d,h){var f,p,g,m,v,y,b,_,x,w,C,T=0,E=[0,0],S=[0,0],k=null;if(C=t.worldViewTransform.forward,f=u[s],p=0===s?1:0,m=u[p][0],l===n.Orientation.East||l===n.Orientation.West?g=0:(l===n.Orientation.North||l===n.Orientation.South)&&(g=1),c===n.TickModes.None)T=0;else if(c===n.TickModes.Uniform||c===n.TickModes.NiceNumeric||c===n.TickModes.Count)T=Math.floor(d);else if(c===n.TickModes.DataInterval)for(T=0,_=f[0];_<f[1];_+=d)++T;else if(c===n.TickModes.AlignedDataInterval){for(T=0,_=Math.floor(f[0]/d)*d;_<f[0];)_+=d;for(;_<f[1];_+=d)++T}else c===n.TickModes.PixelInterval?(E[s]=f[0],E[p]=m,S[s]=f[1],S[p]=m,w=i.distance(C(E,E),C(S,S)),T=Math.floor(w/d)+1):c===n.TickModes.TickSeries&&h&&(k=o.create(h.getDataView()),T=k.length);if(T>0){if(v=e.values,c!==n.TickModes.NiceNumeric&&(v.length=T,y=a.createFloat32Array(T)),c===n.TickModes.Uniform||c===n.TickModes.PixelInterval||c===n.TickModes.DataInterval||c===n.TickModes.AlignedDataInterval){if(c===n.TickModes.Uniform)_=f[0],x=(f[1]-f[0])/T;else if(c===n.TickModes.PixelInterval)_=f[0],x=(f[1]-f[0])/(w/d);else if(c===n.TickModes.DataInterval)_=f[0],x=d;else if(c===n.TickModes.AlignedDataInterval)for(_=Math.floor(f[0]/d)*d,x=d;_<f[0];)_+=x;for(b=0;T>b;++b)v[b]=_,_+=x}else if(c===n.TickModes.TickSeries&&k)for(b=0;T>b;++b)v[b]=k.columns.Value(b);else if(c===n.TickModes.NiceNumeric)!function(){var e=r.findRange(T,f[0],f[1]),t=e.minMajorTick;for(v.length=0,v.push(e.start),t+=e.majorTickInterval;t<=e.end;)v.push(t),t+=e.majorTickInterval;T=v.length,y=a.createFloat32Array(v.length)}();else if(c===n.TickModes.Count)for(b=0;T>b;++b)v[b]=b;for(b=0;T>b;++b)E[s]=v[b],E[p]=m,C(E,E),y[b]=E[g];e.count=T,e.positions=y,e.labels.length=T}else e.values.length=0,e.count=0,e.positions=null,e.labels.length=0;return e},computeLabel:function(e,n){var i;try{i=n(e)}catch(r){t.log.error("Exception while formatting tick labels"+(r.stack?": "+r.stack:"")),i=void 0}return i},computeLabels:function(e,n){var i,r,o=e.labels;o.length=e.count;try{for(i=0,r=e.count;r>i;++i)o[i]=n(e.values[i])}catch(a){for(t.log.error("Exception while formatting tick labels"+(a.stack?": "+a.stack:"")),i=0,r=e.count;r>i;++i)o[i]=void 0}return e},renderTicks:function(e,t,n,i){var r,o=n.count,a=n.positions;if(o>0){for(t.tickRenderBegin(e),r=0;o>r;++r)t.tickRender(e,a[r]*i);t.tickRenderEnd(e)}},renderLabels:function(e,t,n,i){var r,o,a=n.count,s=n.positions,l=n.labels;if(a>0){for(t.labelRenderBegin(e),r=0;a>r;++r)o=t.labelComputeGeometry(e,s[r]*i,l[r]),t.labelRenderGeometry(e,o.matrix,l[r]);t.labelRenderEnd(e)}},cullLabels:function(e,t,n,i,r,o,a){function u(e,t,n,i){++_.count,_.positions.push(e),_.labels.push(t),_.matrices.push(n),_.extents.push(i),l.initCopy(b,i)}function c(){u(i.positions[v],i.labels[v],i.matrices[v],i.extents[v])}function d(e,t){(!n||l.subset(e.extent,n))&&(l.overlaps(b,e.extent)||u(e.position,t,s.clone(e.matrix),l.createCopy(e.extent)))}for(var h,f=0,p=r.count,g=r.positions,m=r.labels,v=0,y=i?i.count:0,b=l.createEmpty(),_={count:0,positions:[],labels:[],matrices:[],extents:[]};p>f;){if(v===y){for(;p>f;)h=t.labelComputeGeometry(e,g[f]*o,m[f],a),d(h,m[f]),++f;return _}h=t.labelComputeGeometry(e,g[f]*o,m[f],a),h.extent[1]<i.extents[v][0]?(d(h,m[f]),++f):(h.extent[0]<i.extents[v][1]&&++f,c(),++v)}for(;y>v;)c(),++v;return _},renderCulledTicks:function(e,t,n){var i,r=n.count,o=n.positions;if(r>0)for(i=0;r>i;++i)t.tickRender(e,o[i])},renderCulledLabels:function(e,t,n){var i,r=n.count,o=n.matrices,a=n.labels;if(r>0)for(i=0;r>i;++i)t.labelRenderGeometry(e,o[i],a[i])}}}),define("oven/unvetted/library/utility/configDataAdapterObserver",["oven/unvetted/contracts/events"],function(e){var t;return t={create:function(t,n){var i,r,o=t.getConfigManager(),a={},s={};return r={notify:function(t){if(t.group===e.PROPERTYEVENT_GROUP&&t.type===e.PROPERTY_UPDATE)t.events.forEach(function(e){var t,i,r,o=e.configId;o in a&&(t=a[o].propertyId,t in e.properties&&(r=a[o].dataAdapterId,i=e.properties[t],i!==r&&(r&&""!==r&&delete s[r],a[o].dataAdapterId=i,n.updateDataAdapterId(o,t,r,i),i&&""!==i&&(s[i]={configId:o,propertyId:t},n.updateDataAdapter(o,t,i)))))});else if(t.group===e.DATAEVENT_GROUP){var i;for(i in t.dataViewSet){var r=s[i];r&&n.updateDataAdapter(r.configId,r.propertyId,i)}}return!1}},i={init:function(){t.getEventManager().register(r,0,e.PROPERTYEVENT_GROUP),t.getEventManager().register(r,0,e.DATAEVENT_GROUP)},exit:function(){t.getEventManager().unregister(r)},addSubject:function(e,t){var i=o.getConfig(e),r=i[t];a[e]={propertyId:t,dataAdapterId:r},r&&""!==r&&(s[r]={configId:e,propertyId:t},n.updateDataAdapterId(e,t,void 0,r),n.updateDataAdapter(e,t,r))},removeSubject:function(e){var t=a[e].propertyId,i=a[e].dataAdapterId;i&&(n.updateDataAdapterId(e,t,i,void 0),n.updateDataAdapter(e,t,void 0),delete s[i]),delete a[e]},dataAdapterIds:function(){return Object.getOwnPropertyNames(s).sort()}}}}}),define("oven/components/plot/plotArea",["oven/3rdparty/sys-jscore/main","oven/components/plot/plotComponent","oven/unvetted/library/utility/idServer","oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelResourceManager","oven/unvetted/contracts/events","oven/unvetted/kernel/kernelDraw","oven/components/plot/ticks","oven/components/plot/plotDefs","oven/unvetted/library/utility/configDataAdapterObserver"],function(e,t,n,i,r,o,a,s,l,u){var c,d,h,f=n.create("plotArea"),p=1024,g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAQACAYAAAAgBjM/AAAAAXNSR0IArs4c6QAAACpJREFUWMPtyLENAAAIAyDj4/Z0Z18wMFJJputyzjnnnHPOOeecc869uAVFhgEf83TLswAAAABJRU5ErkJggg==",m=1280,v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABQAAAAABCAYAAACBgAP1AAAAAXNSR0IArs4c6QAAAChJREFUWMPtxzERADAIADGc89JZqqKXbJlqq53H3d3d3d3d3d3d//kBeoH9vZqhh90AAAAASUVORK5CYII=";return c=e.Class.define(t,{init:function(e,t,n){function i(){var e=T.size;E&&(S=a.linearGradient(0,e[1],0,0,[0,1],[x.backgroundColor0,x.backgroundColor1]),E=!1)}function c(e,t){function n(e,t,n,i){if(!d)throw new Error("kernelDraw.init(window) was not called prior trying to draw!");for(var r,o=Math.abs(i-t),s=0,l=o,u=Math.min(n,e),c=Math.min(i,t);l>0;)r=Math.min(l,p),r>0&&a.drawImage(d,0,0,1,r,u,s+c,1,r),l-=p,s+=p}function i(e,t,n,i){if(!d)throw new Error("kernelDraw.init(window) was not called prior trying to draw!");var r,o=Math.abs(i-t),s=0,l=a.getAlpha(),u=o,c=Math.min(n,e),h=Math.min(i,t);for(a.setAlpha(.35);u>0;)r=Math.min(u,p),r>0&&a.drawImage(d,0,0,1,r/2,c,s+h,1,r),u-=r,s+=r;a.setAlpha(l)}var r,o,s,l=T.size,u=l[0],c=l[1];for(r=0,o=t.count;o>r;++r)if(s=Math.floor(t.positions[r]*u),0!==s&&s!==u&&(n(s,0,s,c),x.showMinorGrids===!0)){if(s=Math.floor((t.positions[r]+t.positions[r+1])/2*u),0===s||s===u)continue;i(s,0,s,c)}}function y(e,t){function n(e,t,n,i){if(!h)throw new Error("kernelDraw.init(window) was not called prior trying to draw!");for(var r,o=Math.abs(n-e),s=0,l=o,u=Math.min(n,e),c=Math.min(i,t);l>0;)r=Math.min(l,m),r>0&&a.drawImage(h,0,0,r,1,s+u,c,r,1),l-=m,s+=m}function i(e,t,n,i){if(!h)throw new Error("kernelDraw.init(window) was not called prior trying to draw!");var r,o=Math.abs(n-e),s=0,l=a.getAlpha(),u=o,c=Math.min(n,e),d=Math.min(i,t);for(a.setAlpha(.35);u>0;)r=Math.min(u,m),r>0&&a.drawImage(h,0,0,r/2,1,s+c,d,r,1),u-=r,s+=r;a.setAlpha(l)}var r,o,s,l=T.size,u=l[0],c=l[1];for(r=0,o=t.count;o>r;++r)if(s=Math.floor(t.positions[r]*c),0!==s&&s!==c&&(n(0,s,u,s),x.showMinorGrids===!0)){if(s=Math.floor((t.positions[r]+t.positions[r+1])/2*l[1]),0===s||s===l[0])continue;i(0,s,l[0],s)}}function b(){var e,t;k&&(e=T.orientation,t=T.visibleDomain,s.computeValuesAndPositions(A[0],T.space,0,e[0],t,x.independentAxisGridLinesMode,x.independentAxisGridLinesParameter,N),s.computeValuesAndPositions(A[1],T.space,1,e[1],t,x.dependentAxisGridLinesMode,x.dependentAxisGridLinesParameter,D),M[0]=e[0]===l.Orientation.East||e[0]===l.Orientation.West?c:y,M[1]=e[1]===l.Orientation.East||e[1]===l.Orientation.West?c:y,k=!1)}var _,x,w,C,T=this,E=!0,S=null,k=!0,A=[s.create(),s.create()],M=[void 0,void 0],N=null,D=null;this.initSuper(e,f.create(t),void 0,!1),d&&h||(d=r.createImage(d,g),h=r.createImage(h,v)),_=n,x=e.getConfigManager().getConfig(_),this._updateConfig=function(){E=!0,k=!0},this._updateView=function(){k=!0},this._updateWindow=function(){E=!0},this._draw=function(){var e=T.canvas.context(),t=T.size;a.setContext(e),a.canvas.save(),a.setTransform(T.componentToCanvasTransform),T.drawClip(),i(),a.setFillStyle(S),a.drawRect(0,0,t[0],t[1],!0,!1,!0),b(),a.setStrokeStyle(x.independentAxisGridLineColor),M[0](e,A[0]),a.setStrokeStyle(x.dependentAxisGridLineColor),M[1](e,A[1]),a.canvas.restore()},C=u.create(e,{updateDataAdapterId:function(t,n,i,r){"independentAxisGridLinesDataAdapterId"===n&&(N=r&&""!==r?e.getDataManager().getDataAdapter(r):null),"dependentAxisGridLinesDataAdapterId"===n&&(D=r&&""!==r?e.getDataManager().getDataAdapter(r):null)},updateDataAdapter:function(){k=!0,T.dirty()}}),C.addSubject(n,"independentAxisGridLinesDataAdapterId"),C.addSubject(n,"dependentAxisGridLinesDataAdapterId"),C.init(),w={notify:function(e){var t=!1,n=!1;e.group===o.PROPERTYEVENT_GROUP&&e.events.forEach(function(e){e.configId===_&&(t=!0,n=!0)}),t&&T._updateConfig(),n&&T.dirty()}},e.getEventManager().register(w,0,o.PROPERTYEVENT_GROUP)},"public":{setDataRange:void 0},virtual:{override:{getDraw:function(){return this._draw},updateView:function(){this.super.updateView(),this._updateView()},updateWindow:function(){this.super.updateWindow(),this._updateWindow()}}}})}),define("oven/components/plot/intervalGradients",["oven/3rdparty/sys-jscore/main","oven/unvetted/library/utility/idServer","oven/components/plot/plotComponent","oven/components/plot/plotDefs","oven/unvetted/contracts/events","oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelDraw","oven/framework/data/view/dataViewAccessor","oven/library/math/interval","oven/unvetted/library/utility/typedArrays"],function(e,t,n,i,r,o,a,s,l,u){var c,d=t.create("intervalGradients");return c=e.Class.define(n,{init:function(e,t,n,o){function c(){var t,n=M._config;n.dataAdapterId&&""!==n.dataAdapterId&&(t=e.getDataManager().getDataAdapter(n.dataAdapterId)),t?(b=n.dataAdapterId,_=t.getDataView(),x=s.create(_)):(b=void 0,_=void 0,x=void 0)}function h(){var e,t,n,i;if(x&&x.update(),_)for(w=[],e=0,t=x.length;t>e;++e)n=x.rows(e),i=[n.Value1,n.Value2,n.Color],"object"==typeof i[0]&&(i[0]=i[0].getTime()),"object"==typeof i[1]&&(i[1]=i[1].getTime()),w.push(i);else w=[];N=!0}function f(e){if(N){var t,n,r,o,a,s,c=M._config,d=R[0],h=R[1],f=M.visibleDomain[d],p=M.visibleDomain[h],g=c.coordinateSystem;for(I[0]=M.computeAxisGradient(e,d,c.evenFillColor0,c.evenFillColor1),I[1]=M.computeAxisGradient(e,d,c.oddFillColor0,c.oddFillColor1),t=M.viewContainerTransform.localForward,n=g===i.Spaces.Container?M.viewContainerTransform.localReverse:M.space.transformFunction(g,i.Spaces.View),r=0,D=1/0,P=0,w.forEach(function(e){l.overlaps(e,f)&&(D=Math.min(D,r),++P),++r}),C=u.createFloat32Array(4*P),o=0,a=D,r=0;P>r;++r)s=w[a],O[d]=s[0],O[h]=p[0],t(O,n(O,O)),C[o++]=O[0],C[o++]=O[1],O[d]=s[1],O[h]=p[1],t(O,n(O,O)),C[o++]=O[0],C[o++]=O[1],++a;N=!1}}function p(){var e,t;for(a.setStrokeStyle(E),t=0,e=0;P>e;++e)a.drawLine(C[t+0],C[t+1],C[t+0],C[t+3]),a.drawLine(C[t+2],C[t+1],C[t+2],C[t+3]),t+=4}function g(){}function m(){var e,t,n;for(a.setStrokeStyle(E),t=0,n=D,e=0;P>e;++e)a.setFillStyle(I[n%2]),a.drawRect(C[t+0],C[t+1],C[t+2]-C[t+0],C[t+3]-C[t+1],!0,!1,!1),t+=4,++n}function v(){var e,t,n;for(a.setStrokeStyle(E),t=0,n=D,e=0;P>e;++e)void 0!==w[n][2]&&(a.setFillStyle(w[n][2]),a.drawRect(C[t+0],C[t+1],C[t+2]-C[t+0],C[t+3]-C[t+1],!0,!1,!1)),t+=4,++n}var y,b,_,x,w,C,T,E,S,k,A,M=this,N=!0,D=0,P=0,I=[void 0,void 0],O=[0,0],R=[0,1];this.initSuper(e,d.create(t),n,!1,o),this._configId=o,this._config=e.getConfigManager().getConfig(this._configId),this._updateConfig=function(){var e=M._config;T=e.alpha,e.lineColorMode===i.ColorModes.ConfigSolid&&(E=e.lineColor),S=e.lineWidth,e.lineColorMode===i.ColorModes.ConfigSolid?k=p:e.lineColorMode===i.ColorModes.Data||e.lineColorMode===i.ColorModes.PerDatumPalette?k=g:e.lineColorMode===i.ColorModes.None&&(k=void 0),e.fillColorMode===i.ColorModes.ConfigSolid?A=m:e.fillColorMode===i.ColorModes.Data||e.fillColorMode===i.ColorModes.PerDatumPalette?A=v:e.fillColorMode===i.ColorModes.None&&(A=void 0),R[0]=e.index,R[1]=0===e.index?1:0,N=!0},this._updateView=function(){N=!0},this._updateWindow=function(){N=!0},this._draw=function(){var e=M.canvas.context(),t=w.length;1>t||(a.setContext(e),a.canvas.save(),a.setTransform(M.componentToCanvasTransform),f(e),a.setAlpha(T),a.setLineWidth(S),A&&A(),k&&k(),a.canvas.restore())},y={notify:function(e){var t=!1,n=!1,i=!1,o=!1;e.group===r.PROPERTYEVENT_GROUP?e.events.forEach(function(e){e.configId===M._configId&&(t=!0,n=!0,e.properties.hasOwnProperty("dataAdapterId")&&(i=!0,o=!0))}):e.group===r.DATAEVENT_GROUP&&e.dataViewSet.hasOwnProperty(b)&&(t=!0,o=!0),t&&M.dirty(),n&&M._updateConfig(),i&&c(),o&&h()}},e.getEventManager().register(y,0,r.PROPERTYEVENT_GROUP),e.getEventManager().register(y,0,r.DATAEVENT_GROUP),this._updateConfig(),c(),h()},"protected":{},virtual:{override:{getDraw:function(){return this._draw},updateView:function(){this.super.updateView(),this._updateView()},updateWindow:function(){this.super.updateWindow(),this._updateWindow()}}}})}),define("oven/components/plot/label",["oven/3rdparty/sys-jscore/main","oven/library/container/component","oven/unvetted/library/utility/idServer","oven/unvetted/contracts/configDefaults","oven/unvetted/kernel/kernelDraw","oven/library/math/algebra/mat3d"],function(e,t,n,i,r,o){var a,s=n.create("label");return a=e.Class.define(t,{init:function(e,t){this.initSuper(e,s.create(t),void 0,!1),this._text="",this._foregroundColor="white",this._backgroundColor="black",this._fontFamily=i.DEFAULT_FONT_FAMILY,this._fontSize=i.DEFAULT_FONT_SIZE,this._horizontalAlign=0,this._verticalAlign=0,this._horizontalPosition=.5,this._verticalPosition=.5,this._orientation=0,this._tmpAffine=o.create()},"private":{draw:function(){var e,t,n,i,a,s,l,u,c=this._tmpAffine;e=this.canvasRect,t=e[2]-e[0],n=e[3]-e[1],u=this.canvas.context(),r.setContext(u),r.canvas.save(),r.setTransform(this.componentToCanvasTransform),i=this._backgroundColor,i&&(r.setFillStyle(this._backgroundColor),r.drawRect(0,0,t,n,!0,!1,!0)),a=this._text,u.font=this._fontSize+"px "+this._fontFamily,s=u.measureText(a).width,l=this._fontSize,o.initIdentity(c),o.translate(c,c,-s/2*this._horizontalAlign,-l/2*this._verticalAlign),o.rotate(c,c,this._orientation),o.translate(c,c,this._horizontalPosition*t,this._verticalPosition*n),r.applyTransform(c),u.textAlign="center",u.textBaseline="middle",r.printText(a,0,0,this._foregroundColor),r.canvas.restore()}},"public":{text:{set:function(e){this._text=e,this.dirty()},get:function(){return this._text}},foregroundColor:{set:function(e){this._foregroundColor=e,this.dirty()},get:function(){return this._foregroundColor}},backgroundColor:{set:function(e){this._backgroundColor=e,this.dirty()},get:function(){return this._backgroundColor}},fontFamily:{set:function(e){this._fontFamily=e,this.dirty()},get:function(){return this._fontFamily}},fontSize:{set:function(e){this._fontSize=e,this.dirty()},get:function(){return this._fontSize}},horizontalAlign:{set:function(e){this._horizontalAlign=e,this.dirty()},get:function(){return this._horizontalAlign}},verticalAlign:{set:function(e){this._verticalAlign=e,this.dirty()},get:function(){return this._verticalAlign}},horizontalPosition:{set:function(e){this._horizontalPosition=e,this.dirty()},get:function(){return this._horizontalPosition}},verticalPosition:{set:function(e){this._verticalPosition=e,this.dirty()},get:function(){return this._verticalPosition}},orientation:{set:function(e){this._orientation=e,this.dirty()},get:function(){return this._orientation}}},virtual:{override:{getDraw:function(){return this.draw.bind(this)}}}})}),/**
 * @file      A module containing a functional interface for 2D vectors.
 * @author    Bret Alfieri <balfieri2@bloomberg.net>,
 *            Alex Betts <abetts3@bloomberg.net>
 * @copyright Bloomberg LP 2014
 */
define("oven/library/math/algebra/vec2d",["oven/library/math/base/mathExt","oven/library/math/base/typedArrays","oven/library/math/algebra/mat3d"],function(e,t,n){var i=0,r=1,o={};return o.create=function(e,n){return void 0===e?t.createFloat32Array(0,0):t.createFloat32Array(e,n)},o.clone=function(e){return t.createFloat32Array(e[0],e[1])},o.copy=function(e,t){return e[i]=t[i],e[r]=t[r],e},o.init=function(e,t,n){return e[i]=t,e[r]=n,e},o.length=function(t){var n=t[i],o=t[r];return e.sqrt(n*n+o*o)},o.lengthSq=function(e){var t=e[i],n=e[r];return t*t+n*n},o.neg=function(e,t){return e[i]=-t[i],e[r]=-t[r],e},o.add=function(e,t,n){return e[i]=t[i]+n[i],e[r]=t[r]+n[r],e},o.sub=function(e,t,n){return e[i]=t[i]-n[i],e[r]=t[r]-n[r],e},o.scale=function(e,t,n){return e[i]=t[i]*n,e[r]=t[r]*n,e},o.dot=function(e,t){return e[i]*t[i]+e[r]*t[r]},o.cross=function(e,t){return e[i]*t[r]-e[r]*t[i]},o.normalize=function(t,n){var o=n[i],a=n[r],s=e.sqrt(o*o+a*a);return 0==s?(t[i]=0,t[r]=0,t):1==s?(t[i]=o,t[r]=a,t):(s=1/s,t[i]=n[i]*s,t[r]=n[r]*s,t)},o.perp=function(e,t){return e[i]=t[r],e[r]=-t[i],e},o.angleFast=function(t,n){return e.acos(t[i]*n[i]+t[r]*n[r])},o.angle=function(t,n){var i=o.dot(t,n),r=o.cross(t,n);return e.atan2(r,i)},o.transform=function(e,t,n){var o=t[i],a=t[r];return e[i]=n[0]*o+n[3]*a,e[r]=n[1]*o+n[4]*a,e},o.transformHomothetic=function(e,t,n){return e[i]=t[i]*n[0],e[r]=t[r]*n[1],e},o.transformAsNormal=function(e,t,i){var r=n.create();return n.invert(r,i),n.transpose(r,r),o.transform(e,t,r)},o.equalsRel=function(t,n,o){return e.equalsRel(t[i],n[i],o)&&e.equalsRel(t[r],n[r],o)},o.toString=function(e){return"["+e[i]+","+e[r]+"]"},o}),define("oven/unvetted/kernel/kernelMath",["oven/unvetted/kernel/kernelUtil"],function(){var e;return e={RTOD:180/Math.PI,DTOR:Math.PI/180,dist2d:function(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))},"int":function(e){return Math[0>e?"ceil":"floor"](e)}}}),define("oven/components/plot/axisComponent",["oven/3rdparty/sys-jscore/main","oven/components/plot/plotComponent","oven/unvetted/library/utility/idServer","oven/unvetted/kernel/kernelDraw","oven/components/plot/plotDefs","oven/components/plot/axisDefs","oven/library/math/algebra/mat3d","oven/library/math/algebra/vec2d","oven/library/math/geometry2d/point2d","oven/library/math/interval","oven/library/math/aabox","oven/unvetted/kernel/kernelUtil","oven/unvetted/kernel/kernelMath"],function(e,t,n,i,r,o,a,s,l,u,c,d,h){function f(e,t,n){var i;return Object.getOwnPropertyNames(n).forEach(function(r){var o;i||(o=m[r],o&&(i=o(e,t,n[r])))}),i||(d.log.error("Failed to get valid tick appearance from config choice, defaulting to line"),i=m.line(e,t,{length:3,width:1,offset:5})),i}var p,g,m,v=n.create("axis");return g={triangle:function(){},tick:function(){},labelSize:function(){return 0},labelState:function(){},labelCull:function(){},label:function(){}},m={line:function(e,t,n){function i(){o=h.width,a=d.foregroundColor,s=h.length,u=s+h.offset}var r,o,a,s,u,c=e,d=t,h=n,f=[0,0],p=[0,0];return i(),{renderBegin:function(e){r=c.edgeMatrix[0],e.lineWidth=o,e.strokeStyle=a,e.beginPath()},render:function(e,t){f[0]=t,f[1]=0,l.transform(f,f,r),c.transformComponentToCanvasRasterCenter(f,f),p[0]=t,p[1]=s,l.transform(p,p,r),c.transformComponentToCanvasRasterCenter(p,p),e.moveTo(f[0],f[1]),e.lineTo(p[0],p[1])},renderEnd:function(e){r=null,e.stroke()},totalOffset:function(){return u},updateView:function(){},updateConfig:i}},triangle:function(e,t,n){function r(){a=h.foregroundColor,s=f.length,u=f.halfWidth,c=s+f.offset}var o,a,s,u,c,d=e,h=t,f=n,p=[0,0],g=[0,0],m=[0,0];return r(),{renderBegin:function(e){o=d.edgeMatrix[0],e.lineWidth=0,e.fillStyle=a},render:function(e,t){p[0]=t,p[1]=s,l.transform(p,p,o),d.transformComponentToCanvasRasterCenter(p,p),g[0]=t+u,g[1]=0,l.transform(g,g,o),d.transformComponentToCanvasRasterEdge(g,g),m[0]=t-u,m[1]=0,l.transform(m,m,o),d.transformComponentToCanvasRasterEdge(m,m),i.drawTriangle(p[0],p[1],g[0],g[1],m[0],m[1],!0,!1,!1)},totalOffset:function(){return c},renderEnd:function(){o=null},updateView:function(){},updateConfig:r}},edge:function(e,t,n){function i(){o=h.width,a=d.foregroundColor,s=n.offset}var o,a,s,u,c=e,d=t,h=n,f=0,p=0,g=[0,0],m=[0,0];return i(),{renderBegin:function(e){u=c.edgeMatrix[0],p=c.size[f],e.lineWidth=o,e.strokeStyle=a,e.beginPath()},render:function(e,t){g[0]=t,g[1]=0,l.transform(g,g,u),c.transformComponentToCanvasRasterCenter(g,g),m[0]=t,m[1]=p,l.transform(m,m,u),c.transformComponentToCanvasRasterCenter(m,m),e.moveTo(g[0],g[1]),e.lineTo(m[0],m[1])},renderEnd:function(e){u=null,e.stroke()},totalOffset:function(){return s},updateView:function(){var e=c.orientation[c.index];e===r.Orientation.East||e===r.Orientation.West?f=1:(e===r.Orientation.North||e===r.Orientation.South)&&(f=0)},updateConfig:i}},space:function(e,t,n){function i(){r=o.offset}var r,o=n;return i(),{renderBegin:function(){},render:function(){},renderEnd:function(){},totalOffset:function(){return r},updateView:function(){},updateConfig:i}}},p=e.Class.define(t,{init:function(e,t,n,d,p){var m=this;this.initSuper(e,v.create(t),n,d),this._configId=p,this._config=e.getConfigManager().getConfig(this._configId),this._indices=[0,1],this._align=0,this._ticksFnsDirty=!0,this._ticksFns={triangle:void 0,tick:void 0,labelState:void 0,labelSize:void 0,labelCull:void 0,label:void 0},this._updateTicksFns=function(){var e,t,n,s,l,u=a.initIdentity(a.create());e=m._ticksFns,t=m._indices[0],n=m.orientation[t],s=m._align,l=m.size,n===r.Orientation.East||n===r.Orientation.West?(e.labelSize=function(e,t){return e.measureText(t).width},e.labelCull=function(e,t,n,i){var r=e.measureText(i).width/2;return 0===n&&t+2*r>l[0]||n>0&&t+r>l[0]?!0:!1},s===o.Alignments.Top?(e.triangle=function(e,t,n){i.drawTriangle(e-t,0,e,n,e+t,0,!0,!1,!1)},e.tick=function(e,t){i.drawBatchLine(e,0,e,t)},e.labelState=function(e){e.textAlign="center",e.textBaseline="top"},e.label=function(e,t,n,i,r){e.save(),a.initRotation(u,n),a.translate(u,u,t,r+1),e.transform(u[0],u[1],u[3],u[4],u[6],u[7]),e.fillText(i,0,0),e.restore()}):s===o.Alignments.Bottom&&(e.triangle=function(e,t,n){i.drawTriangle(e-t,l[1],e,l[1]-n,e+t,l[1],!0,!1,!1)},e.tick=function(e,t){i.drawBatchLine(e,l[1],e,l[1]-t)},e.labelState=function(e){e.textAlign="center",e.textBaseline="bottom"},e.label=function(e,t,n,i,r){e.save(),a.initRotation(u,n),a.translate(u,u,t,l[1]-r-1),e.transform(u[0],u[1],u[3],u[4],u[6],u[7]),e.fillText(i,0,0),e.restore()})):n===r.Orientation.North||n===r.Orientation.South?(e.labelSize=function(){return m._config.labelFontSize},e.labelCull=function(e,t,n){var i=m._config.labelFontSize/2;return n>0&&0>t-i},s===o.Alignments.Left?(e.triangle=function(e,t,n){i.drawTriangle(0,e-t,n,e,0,e+t,!0,!1,!1)},e.tick=function(e,t){i.drawBatchLine(0,e,t,e)},e.labelState=function(e){e.textAlign="left",e.textBaseline="middle"},e.label=function(e,t,n,i,r){e.save(),a.initRotation(u,n),a.translate(u,u,r+1,t),e.transform(u[0],u[1],u[3],u[4],u[6],u[7]),e.fillText(i,0,0),e.restore()}):s===o.Alignments.Right&&(e.triangle=function(e,t,n){i.drawTriangle(l[0],e-t,l[0]-n,e,l[0],e+t,!0,!1,!1)},e.tick=function(e,t){i.drawBatchLine(l[0],e,l[0]-t,e)},e.labelState=function(e){e.textAlign="right",e.textBaseline="middle"},e.label=function(e,t,n,i,r){e.save(),a.initRotation(u,n),a.translate(u,u,l[0]-r-1,t),e.transform(u[0],u[1],u[3],u[4],u[6],u[7]),e.fillText(i,0,0),e.restore()})):(e.triangle=g.triangle,e.tick=g.tick,e.labelSize=g.labelSize,e.labelState=g.labelState,e.labelCull=g.labelCull,e.label=g.label)},this._dataObservers=[],this._dataDomainDirty=!1,this._dataDomain=u.createEmpty(),this._edgeMatrixDirty=!1,this._edgeMatrix=[a.initIdentity(a.create()),a.initIdentity(a.create())],this._updateEdgeMatrix=function(){var e=m.orientation[m.index],t=m._config.align;e===r.Orientation.East||e===r.Orientation.West?t===o.Alignments.Top?(a.init(m._edgeMatrix[0],1,0,0,0,1,0,0,0,1),a.init(m._edgeMatrix[1],1,0,0,0,-1,0,0,m.size[1],1)):t===o.Alignments.Bottom&&(a.init(m._edgeMatrix[0],1,0,0,0,-1,0,0,m.size[1],1),a.init(m._edgeMatrix[1],1,0,0,0,1,0,0,0,1)):(e===r.Orientation.North||e===r.Orientation.South)&&(t===o.Alignments.Left?(a.init(m._edgeMatrix[0],0,1,0,1,0,0,0,0,1),a.init(m._edgeMatrix[1],0,1,0,-1,0,0,m.size[0],0,1)):t===o.Alignments.Right&&(a.init(m._edgeMatrix[0],0,1,0,-1,0,0,m.size[0],0,1),a.init(m._edgeMatrix[1],0,1,0,1,0,0,0,0,1)))},this._getTicksFns=function(e){function t(e,t,i){n.updateConfig(),v=m._config.foregroundColor,y=m._config.labelFontSize/2,b=m._config.labelFontSize+"px "+m._config.labelFontFamily,w=n.totalOffset(),a.initRotation(p,e*h.DTOR),C=t,T=i}var n,i,d,p=a.initIdentity(a.create()),g=a.initIdentity(a.create()),v="",y=0,b="",_="",x="",w=0,C=0,T=0,E={position:0,pt:s.create(),extent:u.createEmpty(),matrix:a.initIdentity(a.create())},S=[0,0],k=c.createEmpty();return n=f(m.publicThis,m._config,e),t(),{tickRenderBegin:n.renderBegin,tickRender:n.render,tickRenderEnd:n.renderEnd,labelOffset:n.totalOffset,labelRenderBegin:function(e){i=m.componentToCanvasTransform,d=m.edgeMatrix[0],e.fillStyle=v,e.font=b,e.textAlign=_,e.textBaseline=x,e.save()},labelRender:function(e,t,n,o){var s,u;S[0]=t,S[1]=w,l.transform(S,S,d),l.transform(S,S,i),s=m.orientation[m.index],void 0===o&&(o=C),u=e.measureText(n).width/2,s===r.Orientation.East||s===r.Orientation.West?a.initTranslation(g,u*-o,0):(s===r.Orientation.North||s===r.Orientation.South)&&a.initTranslation(g,0,y*-o),a.affineMul(g,g,p),a.translate(g,g,S[0],S[1]),e.setTransform(g[0],g[1],g[3],g[4],g[6],g[7]),e.fillText(n,0,0)},labelComputeGeometry:function(e,t,n,o){var s,h,f=E.pt,g=E.matrix;return E.position=t,f[0]=t,f[1]=w,l.transform(f,f,d),l.transform(f,f,i),s=m.orientation[m.index],void 0===o&&(o=C),h=e.measureText(n).width/2,s===r.Orientation.East||s===r.Orientation.West?a.initTranslation(g,h*-o,0):(s===r.Orientation.North||s===r.Orientation.South)&&a.initTranslation(g,0,y*-o),a.affineMul(g,g,p),a.translate(g,g,f[0],f[1]),c.init(k,-h,-y,h,y),c.transformAffine2d(k,k,g),s===r.Orientation.East||s===r.Orientation.West?u.init(E.extent,k[0],k[2]):(s===r.Orientation.North||s===r.Orientation.South)&&u.init(E.extent,k[1],k[3]),E.extent[0]-=T,E.extent[1]+=T,E},labelRenderGeometry:function(e,t,n){e.setTransform(t[0],t[1],t[3],t[4],t[6],t[7]),e.fillText(n,0,0)},labelRenderEnd:function(e){i=null,d=null,e.restore()},updateView:function(){var e,t;n.updateView(),e=m.orientation[m.index],t=m._config.align,e===r.Orientation.East||e===r.Orientation.West?(_="center",t===o.Alignments.Top?x="top":t===o.Alignments.Bottom&&(x="bottom")):(e===r.Orientation.North||e===r.Orientation.South)&&(x="middle",t===o.Alignments.Left?_="left":t===o.Alignments.Right&&(_="right")),w=n.totalOffset()},updateConfig:t}}},"public":{index:{get:function(){return this._indices[0]}},edgeMatrix:{get:function(){return this._edgeMatrixDirty&&(this._updateEdgeMatrix(),this._edgeMatrixDirty=!1),this._edgeMatrix}},addDataObserver:function(e){var t=this._dataObservers.indexOf(e);if(-1!==t)throw new Error("Data observer is already associated with series component "+this.id);this._dataObservers.push(e)},removeDataObserver:function(e){var t=this._dataObservers.indexOf(e);if(-1===t)throw new Error("Data observer is not associated with series component "+this.id);this._dataObservers.splice(t,1)},removeAllDataObservers:function(){this._dataObservers.length=0},dataDomain:{get:function(){return this._dataDomainDirty&&(this.updateDataDomain(this._dataDomain),this._dataDomainDirty=!1),this._dataDomain}}},"protected":{configId:{get:function(){return this._configId}},config:{get:function(){return this._config}},indices:{get:function(){return this._indices}},align:{get:function(){return this._align}},drawBackground:function(){this.drawRasterBackground(this._config.backgroundColor,!0)},drawBorder:function(){var e,n=this.orientation[this._indices[0]];this._config.borderColor&&this._config.borderWidth&&(n===r.Orientation.East||n===r.Orientation.West?this._align===o.Alignments.Top?e=t.Edges.Top:this._align===o.Alignments.Bottom&&(e=t.Edges.Bottom):(n===r.Orientation.North||n===r.Orientation.South)&&(this._align===o.Alignments.Left?e=t.Edges.Left:this._align===o.Alignments.Right&&(e=t.Edges.Right)),this.drawRasterBorder(this._config.borderColor,this._config.borderWidth,e))},ticksFns:{get:function(){return this._ticksFnsDirty&&(this._updateTicksFns(),this._ticksFnsDirty=!1),this._ticksFns}},drawTriangles:function(e,t,n){var i,r,o=this.ticksFns.triangle,a=this.size[this._indices[0]];for(i=0,r=e.count;r>i;++i)o(e.positions[i]*a,t,n)},drawTicks:function(e,t,n){var r,o,a=this.ticksFns.tick;for(i.beginPath(),r=0,o=t.count;o>r;++r)a(t.positions[r]*e,n);i.finishPath(!1,!1,!0,!1)},getTicksFns:function(e){return this._getTicksFns(e)},dirtyDataDomain:function(){this._dataDomainDirty=!0},dataObserversAdapterModified:function(e,t,n,i){var r=this.publicThis;this._dataObservers.forEach(function(o){o.dataObserverAdapterModified(r,e,t,n,i)})},dataObserversDataModified:function(e,t){var n=this.publicThis;this._dataObservers.forEach(function(i){i.dataObserverDataModified(n,e,t)})}},virtual:{override:{updateView:function(){this.super.updateView(),this._ticksFnsDirty=!0,this._edgeMatrixDirty=!0}},"protected":{updateConfig:function(){this._indices[0]=this._config.index,this._indices[1]=0===this._config.index?1:0,this._align=this._config.align,this._ticksFnsDirty=!0,this._edgeMatrixDirty=!0},updateDataDomain:function(){}}}})}),define("oven/library/math/affine2d",["oven/unvetted/kernel/kernelUtil"],function(e){var t={init:function(t,n,i,r,o,a,s){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),t[0]=n,t[1]=i,t[2]=r,t[3]=o,t[4]=a,t[5]=s,t},create:function(t,n,i,r,o,a){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),[t,n,i,r,o,a]},initIdentity:function(t){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},createCopy:function(t){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),[t[0],t[1],t[2],t[3],t[4],t[5]]},initCopy:function(t,n){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},initHomothetic2d:function(t,n){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=n[2],t[5]=n[3],t},initTranslate:function(t,n,i){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n,t[5]=i,t},initRotate:function(t,n){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var i=Math.cos(n),r=Math.sin(n);return t[0]=i,t[1]=r,t[2]=-r,t[3]=i,t[4]=0,t[5]=0,t},initScale:function(t,n,i){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),t[0]=n,t[1]=0,t[2]=0,t[3]=i,t[4]=0,t[5]=0,t},initUniformScale:function(t,n){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),t[0]=n,t[1]=0,t[2]=0,t[3]=n,t[4]=0,t[5]=0,t},initShear:function(t,n,i){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),t[0]=1,t[1]=i,t[2]=n,t[3]=1,t[4]=0,t[5]=0,t},initUniformShear:function(t,n){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),t[0]=1,t[1]=n,t[2]=n,t[3]=1,t[4]=0,t[5]=0,t},initTranslateRotate:function(t,n,i,r,o){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var a,s;t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,a=Math.cos(r),s=Math.sin(r),o&&(n-=o[0],i-=o[1]),t[0]=a,t[1]=s,t[2]=-s,t[3]=+a,t[4]=n*a-i*s,t[5]=n*s+i*a,o&&(t[4]+=o[0],t[5]+=o[1])},initTransform:function(t,n,i,r,o,a){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var s,l,u,c,d,h,f,p,g;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,void 0!==a&&(a instanceof Array||(a=[a,a]),s=void 0!==o,s&&(t[4]-=o[0],t[5]-=o[1]),t[0]*=a[0],t[1]*=a[1],t[2]*=a[0],t[3]*=a[1],t[4]*=a[0],t[5]*=a[1],s&&(t[4]+=o[0],t[5]+=o[1])),void 0!==r&&(s=void 0!==i,s&&(t[4]-=i[0],t[5]-=i[1]),l=Math.cos(r),u=Math.sin(r),c=t[0],d=t[1],h=t[2],f=t[3],p=t[4],g=t[5],t[0]=c*l-d*u,t[1]=c*u+d*l,t[2]=h*l-f*u,t[3]=h*u+f*l,t[4]=l*p-u*g,t[5]=u*p+l*g,s&&(t[4]+=i[0],t[5]+=i[1])),void 0!==n&&(t[4]+=n[0],t[5]+=n[1]),t},initTransformFromJSON:function(n,i){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),t.initTransform(n,i.translate,i.rotatePivot,i.rotate,i.scalePivot,i.scale)},initConcatenation:function(t,n){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var i,r,o,a,s,l,u,c,d,h,f=1,p=0,g=0,m=1,v=0,y=0,b=1,_=0,x=0,w=1,C=0,T=0;for(i=0,r=n.length,o=!1;r>i;i+=1,o=!o)a=n[i],s=a[0],l=a[1],u=a[2],c=a[3],d=a[4],h=a[5],o?(b=f*s+p*u,_=f*l+p*c,x=g*s+m*u,w=g*l+m*c,C=s*v+u*y+d,T=l*v+c*y+h):(f=b*s+_*u,p=b*l+_*c,g=x*s+w*u,m=x*l+w*c,v=s*C+u*T+d,y=l*C+c*T+h);return o?(t[0]=f,t[1]=p,t[2]=g,t[3]=m,t[4]=v,t[5]=y):(t[0]=b,t[1]=_,t[2]=x,t[3]=w,t[4]=C,t[5]=T),t},createIdentity:function(){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),[1,0,0,1,0,0]},createTranslate:function(t,n){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),[1,0,0,1,t,n]},createRotate:function(t){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var n=Math.cos(t),i=Math.sin(t);return[n,i,-i,n,0,0]},createScale:function(t,n){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),[t,0,0,n,0,0]},createUniformScale:function(t){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),[t,0,0,t,0,0]},createShear:function(t,n){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),[1,n,t,1,0,0]},createUniformShear:function(t){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),[1,t,t,1,0,0]},createTranslateRotate:function(n,i,r){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),t.initTranslateRotate([1,0,0,1,0,0],n,i,r)},createTransform:function(n,i,r,o,a){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),t.initTransform([1,0,0,1,0,0],n,i,r,o,a)},createTransformFromJSON:function(n){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),t.initTransform([1,0,0,1,0,0],n.translate,n.rotatePivot,n.rotate,n.scalePivot,n.scale)},createConcatenation:function(n){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),t.initConcatenation([1,0,0,1,0,0],n)},mulAffine2d:function(t,n,i){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5],c=i[0],d=i[1],h=i[2],f=i[3],p=i[4],g=i[5];return t[0]=r*c+o*h,t[1]=r*d+o*f,t[2]=a*c+s*h,t[3]=a*d+s*f,t[4]=c*l+h*u+p,t[5]=d*l+f*u+g,t},translation:function(t,n){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),t[0]=n[4],t[1]=n[5],t},determinant:function(t){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),t[0]*t[3]-t[1]*t[2]},expansion:function(t){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var n=t[0]*t[3]-t[1]*t[2];return Math.sqrt(n>=0?n:-n)},expansionRcp:function(t){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var n=t[0]*t[3]-t[1]*t[2];return 1/Math.sqrt(n>=0?n:-n)},rotateTranslateMatrix:function(t,n){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var i=n[0],r=n[1],o=n[2],a=n[3],s=i*a-r*o,l=Math.sqrt(s>=0?s:-s),u=1/l;return t[0]=i*u,t[1]=r*u,t[2]=o*u,t[3]=a*u,t[4]=n[4],t[5]=n[5],[t,l,u]},inverse:function(n,i){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],u=i[5],c=t.determinant(i);return c&&(c=1/c,n[0]=s*c,n[1]=o*-c,n[2]=a*-c,n[3]=r*c,n[4]=(a*u-s*l)*c,n[5]=(o*l-r*u)*c),n},translate:function(t,n,i,r){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var o=n[0],a=n[1],s=n[2],l=n[3],u=n[4],c=n[5];return t[0]=o,t[1]=a,t[2]=s,t[3]=l,t[4]=u+i,t[5]=c+r,t},rotate:function(t,n,i){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var r=Math.cos(i),o=Math.sin(i),a=n[0],s=n[1],l=n[2],u=n[3],c=n[4],d=n[5];return t[0]=a*r-s*o,t[1]=a*o+s*r,t[2]=l*r-u*o,t[3]=l*o+u*r,t[4]=r*c-o*d,t[5]=o*c+r*d,t},scale:function(t,n,i,r){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var o=n[0],a=n[1],s=n[2],l=n[3],u=n[4],c=n[5];return t[0]=o*i,t[1]=a*r,t[2]=s*i,t[3]=l*r,t[4]=u*i,t[5]=c*r,t},uniformScale:function(t,n,i){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5];return t[0]=r*i,t[1]=o*i,t[2]=a*i,t[3]=s*i,t[4]=i*l,t[5]=i*u,t},shear:function(t,n,i,r){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var o=n[0],a=n[1],s=n[2],l=n[3],u=n[4],c=n[5];return t[0]=o+a*i,t[1]=o*r+a,t[2]=s+l*i,t[3]=s*r+l,t[4]=u+i*c,t[5]=r*u+c,t},uniformShear:function(t,n,i){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5];return t[0]=r+o*i,t[1]=r*i+o,t[2]=a+s*i,t[3]=a*i+s,t[4]=l+i*u,t[5]=i*l+u,t},isHomothetic:function(t){return e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js"),0!==t[1]&&0!==t[2]},decompose:function(t){e.log.warn("oven_lib/source/oven/library/math/affine2d.js isdeprecated. Use oven_lib/source/oven/library/math/algebra/mat3d.js");var n=t[0],i=t[2],r=t[1],o=t[3];return{translate:[t[4],t[5]],rotate:Math.atan(r/o),scale:[(0>n?-1:1)*Math.sqrt(n*n+i*i),(0>o?-1:1)*Math.sqrt(r*r+o*o)]}}};return t}),define("oven/components/plot/numericAxis",["oven/3rdparty/sys-jscore/main","oven/components/plot/axisComponent","oven/unvetted/contracts/events","oven/unvetted/kernel/kernelDraw","oven/components/plot/ticks","oven/components/plot/plotDefs","oven/components/plot/axisDefs","oven/unvetted/library/utility/configDataAdapterObserver","oven/library/math/affine2d","oven/library/math/interval","oven/unvetted/kernel/kernelMath","oven/framework/data/view/dataViewAccessor","oven/unvetted/kernel/kernelUtil"],function(e,t,n,i,r,o,a,s,l,u,c,d){var h;return h=e.Class.define(t,{init:function(e,t,a,c){function h(){var e,t,n,i;_&&(e=b.indices[0],t=b.orientation[e],n=b.visibleDomain,i=b.config,r.computeValuesAndPositions(x,b.space,e,t,n,i.majorTicksMode,i.majorTicksParameter,T),r.computeValuesAndPositions(w,b.space,e,t,n,i.minorTicksMode,i.minorTicksParameter,null),_=!1)}function f(){var e,t,n;C&&(r.computeLabels(x,g),e=b.indices[0],t=b.visibleDomain[e],n=b.config,E[0]=n.boundaryLabel0?r.computeLabel(t[0],g):"",E[1]=n.boundaryLabel1?r.computeLabel(t[1],g):"",C=!1)}var p,g,m,v,y,b=this,_=!0,x=r.create(),w=r.create(),C=!0,T=null,E=["",""];this.initSuper(e,t,a,!1,c),v=this.getTicksFns(this.config.majorTicksAppearance),y=this.getTicksFns(this.config.minorTicksAppearance),this._updateConfig=function(){var t;_=!0,C=!0,t=b.config.majorTicksLabelFormat,g=function(n){var i=e.getNumFormatProvider().numberToString(n,t);return i.trim()},v.updateConfig(b.config.majorTicksLabelOrientation,b.config.majorTicksLabelAlign,b.config.labelPadding),y.updateConfig(0,0,b.config.labelPadding)},this._updateView=function(){_=!0,C=!0,v.updateView(),y.updateView()},this._draw=function(){var e,t,n,a=b.canvas.context(),s=b.orientation[b.indices[0]],c=b.config;t=b.canvasRect,s===o.Orientation.East||s===o.Orientation.West?(e=b.size[0],n=[t[0],t[2]]):(s===o.Orientation.North||s===o.Orientation.South)&&(e=b.size[1],n=[t[1],t[3]]),i.setContext(a),i.canvas.save(),b.drawBackground(),b.drawBorder(),h(),r.renderTicks(a,y,w,e),f(),function(){function t(e,t,n){var r;r=v.labelComputeGeometry(a,e,t,n),++i.count,i.positions.push(r.position),i.labels.push(t),i.matrices.push(l.createCopy(r.matrix)),i.extents.push(u.createCopy(r.extent))}var i;v.labelRenderBegin(a),i={count:0,positions:[],labels:[],matrices:[],extents:[]},c.boundaryLabel1&&t(0,E[1],-1),c.boundaryLabel0&&t(e,E[0],1),i=r.cullLabels(a,v,n,i,x,e,void 0),r.renderCulledLabels(a,v,i),v.labelRenderEnd(a),v.tickRenderBegin(a),r.renderCulledTicks(a,v,i),v.tickRenderEnd(a)}(),i.canvas.restore()},m=s.create(e,{updateDataAdapterId:function(t,n,i,r){var o,a;o=T,a=r?e.getDataManager().getDataAdapter(r):null,T=a,b.dataObserversAdapterModified(i,o,r,a)},updateDataAdapter:function(e,t,n){_=!0,C=!0,b.dirtyDataDomain(),b.dataObserversDataModified(n,T),b.dirty()}}),this._updateDataDomain=function(e){var t,n,i;if(T)if(t=d.create(T.getDataView()),t.hasDataField("Value"))for(u.initEmpty(e),n=0,i=t.length;i>n;++n)u.envelopev(e,e,t.columns.Value(n));else u.init(e,0,T.getDataView());else u.initEmpty(e)},m.addSubject(c,"majorTicksDataAdapterId"),m.init(),p={notify:function(e){var t=!1,i=!1;e.group===n.PROPERTYEVENT_GROUP&&e.events.forEach(function(e){e.configId===b.configId&&(t=!0,i=!0)}),t&&b.dirty(),i&&b.updateConfig()}},e.getEventManager().register(p,0,n.PROPERTYEVENT_GROUP),this.updateConfig()},"protected":{},virtual:{override:{getDraw:function(){return this._draw},updateConfig:function(){this.super.updateConfig(),this._updateConfig()},updateView:function(){this.super.updateView(),this._updateView()},updateDataDomain:function(e){this._updateDataDomain(e)}}}})}),define("oven/library/text/stringFormatter",[],function(){function e(e){for(var t="";e>0;--e)t+=" ";return t}function t(e){for(var t="";e>0;--e)t+="0";return t}function n(t){return 0>=t?"":t<f.length?f[t]:e(t)}function i(e){return 0>=e?"":e<f.length?p[e]:t(e)}function r(e){var t=e;return function(e){return e[t]}}function o(e,t){return t?function(t){var n=e(t);return function(e,t,i){return n(e,t,i).toUpperCase()}}:function(t){var n=e(t);return function(e,t,i){return n(e,t,i).toLowerCase()}}}function a(e){var t=e;return function(e){return e.padSpace?e.leftAlign?e.signed?function(e,i,r){var o=0>e,a=t(Math.abs(e),r),s=i-a.length-1,l=n(s);return(o?"-":"+")+a+l}:function(e,i,r){var o=t(e,r),a=i-o.length,s=n(a);return o+s}:e.signed?function(e,i,r){var o=0>e,a=t(Math.abs(e),r),s=i-a.length-1,l=n(s);return l+(o?"-":"+")+a}:function(e,i,r){var o=t(e,r),a=i-o.length,s=n(a);return s+o}:e.padZero?e.signed?function(e,n,r){var o=0>e,a=t(Math.abs(e),r),s=n-a.length-1,l=i(s);return(o?"-":"+")+l+a}:function(e,n,r){var o=0>e,a=t(Math.abs(e),r),s=n-a.length-(o?1:0),l=i(s);return(o?"-":"")+l+a}:e.signed?function(e,n,i){return(0>e?"":"+")+t(e,i)}:function(e,n,i){return t(e,i)}}}function s(e){var t=function(t){return t="number"==typeof t?t:0/0,Math.round(t).toString(e)};return a(t)}function l(e){return e.padSpace?e.leftAlign?function(e,t,i){var r=""+e,o=void 0===i?r:r.slice(0,i),a=t-o.length,s=n(a);return o+s}:function(e,t,i){var r=""+e,o=void 0===i?r:r.slice(0,i),a=t-o.length,s=n(a);return s+o}:function(e,t,n){var i=""+e;return void 0===n?i:i.slice(0,n)}}function u(e){function t(e){return"number"==typeof e?String.fromCharCode(e):"string"==typeof e?e.charAt(0):void 0}return e.padSpace?e.leftAlign?function(e,i){var r=t(e),o=i-r.length,a=n(o);return r+a}:function(e,i){var r=t(e),o=i-r.length,a=n(o);return a+r}:t}function c(e,t,n,i,r){var o=e,a={signed:-1!==t.indexOf("+"),padSpace:-1!==t.indexOf(" "),padZero:-1!==t.indexOf("0"),leftAlign:-1!==t.indexOf("-"),alternateForm:-1!==t.indexOf("#")},s="function"!=typeof n?n:void 0,l="function"==typeof n?n:void 0,u="function"!=typeof i?i:void 0,c="function"==typeof i?i:void 0,d=r(a);return function(e){var t=l?l(e):s,n=c?c(e):u;return d(o(e),t,n)}}var d,h,f,p,g,m,v,y,b,_,x={kNamedArgument:3,kPositionalArgument:4,kFlags:5,kConstantWidth:8,kVariableWidth:9,kConstantPrecision:12,kVariablePrecision:13,kType:15};return h=/%((([a-zA-Z_][a-zA-Z0-9_]*)|(\d+))\$)?([ +0#\-]*)(\*?v)?((\d*)|(\*))(\.((\d+)|(\*)))?(ll|[lhqL])?([diufFeEgGxXosc%])/,f=function(){var t,n=[],i=10;for(t=0;i>=t;++t)n.push(e(t));return n}(),p=function(){var e,n=[],i=10;for(e=0;i>=e;++e)n.push(t(e));return n}(),m=s(10),v=s(16),y=s(8),b=a(function(e,t){return e="number"==typeof e?e:0/0,e.toFixed(void 0===t?6:t)}),_=a(function(e,t){return e="number"==typeof e?e:0/0,e.toExponential(void 0===t?6:t)}),g={d:m,i:m,u:m,f:o(b,!1),F:o(b,!0),e:o(_,!1),E:o(_,!0),x:o(v,!1),X:o(v,!0),o:y,s:l,c:u},d={create:function(e){function t(){return r(f++)}for(var n,i,o,a,s,l,u,d,f=0,p=[];e.length>0;)i=h.exec(e),i?(i.index>0&&p.push(e.slice(0,i.index)),o=void 0!==i[x.kNamedArgument]?r(i[x.kNamedArgument]):void 0!==i[x.kPositionalArgument]?r(parseInt(i[x.kPositionalArgument],10)):t(),a=i[x.kFlags],s=void 0!==i[x.kVariableWidth]?t():""!==i[x.kConstantWidth]?parseInt(i[x.kConstantWidth],10):void 0,l=void 0!==i[x.kVariablePrecision]?t():void 0!==i[x.kConstantPrecision]?parseInt(i[x.kConstantPrecision],10):void 0,u=i[x.kType],"%"===u?p.push("%"):(d=g[u],p.push(c(o,a,s,l,d))),e=e.slice(i.index+i[0].length)):(p.push(e),e="");return n=function(e){var t,n="";return t=1===arguments.length&&(e instanceof Array||"object"==typeof e)?e:arguments,p.forEach(function(e){n+="function"==typeof e?e(t):e}),n}}}}),define("oven/components/plot/timeseriesAxis",["oven/3rdparty/sys-jscore/main","oven/components/plot/axisComponent","oven/unvetted/contracts/events","oven/unvetted/kernel/kernelEnvironment","oven/unvetted/kernel/kernelDraw","oven/components/plot/ticks","oven/components/plot/plotDefs","oven/components/plot/axisDefs","oven/library/text/stringFormatter","oven/library/math/aabox","oven/library/math/geometry2d/point2d","oven/unvetted/contracts/commonConfig","oven/framework/data/view/dataViewAccessor","oven/library/math/interval","oven/unvetted/library/utility/typedArrays","oven/unvetted/kernel/kernelMath","oven/unvetted/kernel/kernelUtil","oven/unvetted/library/utility/configDataAdapterObserver"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p,g,m,v){function y(e,t,n){var i=new Date(e+n),r=i.getUTCMonth(),o=i.getUTCDay();return C.YYYY=i.getUTCFullYear(),C.MM=r+1,C.month=w.monthNamesFull[r],C.monthAbbrev=w.monthNamesShort[r],C.monthInitial=w.monthNamesInitial[r],C.DD=i.getUTCDate(),C.day=w.dayNamesFull[o],C.dayAbbrev=w.dayNamesShort[o],C.dayInitial=w.dayNamesInitial[o],C.hh=i.getUTCHours(),C.mm=i.getUTCMinutes(),C.ss=i.getUTCSeconds(),t(C)}function b(e,t){var n,i;return n=new Date,i=-6e4*n.getTimezoneOffset(),y(e,t,i)}function _(e){var t,n=e.timezone;if("object"==typeof n){if("local"in n)return b;if("offset"in n&&!isNaN(n.offset))return t=n.offset,function(e,n){return y(e,n,t)}}return m.log.warn("Couldn't get correct timezone setting from config, reverting to client's local timezone"),b}var x,w=d.createDefaultStringTable(),C={YYYY:0,MM:0,month:"",monthAbbrev:"",monthInitial:"",DD:0,day:"",dayAbbrev:"",dayInitial:"",hh:0,mm:0,ss:0};
return x=e.Class.define(t,{init:function(e,t,i,s){function u(e){return O(e,T)}function d(e){return O(e,E)}function p(){var e,t,n,i,r,s,l,c;D&&(e=N.config,t=N.indices[0],n=N.indices[1],r=N.visibleDomain[n],i=r[0],s=N.orientation[N.index],s===a.Orientation.East||s===a.Orientation.West?l=0:(s===a.Orientation.North||s===a.Orientation.South)&&(l=1),c=N.space.worldViewTransform.forward,I[n][0]=r[0],I[n][1]=r[1],C.forEach(function(r){var a=r.domain;f.empty(a)||(P[t]=a[0],P[n]=i,c(P,P),r.position[0]=P[l],P[t]=a[1],P[n]=i,c(P,P),r.position[1]=P[l],I[t][0]=a[0],I[t][1]=a[1],o.computeValuesAndPositions(r.majorTicks,N.space,t,s,I,e.majorTicksMode,e.majorTicksParameter),o.computeLabels(r.majorTicks,d),o.computeValuesAndPositions(r.minorTicks,N.space,t,s,I,e.minorTicksMode,e.minorTicksParameter),r.label=u(a[1]))}),D=!1)}var g,m,y,x,w,C,T,E,S,k,A,M,N=this,D=!0,P=[0,0],I=[[0,0],[0,0]],O=b;this.initSuper(e,t,i,!1,s),k=this.getTicksFns(this.config.intervalsTicksAppearance),A=this.getTicksFns(this.config.majorTicksAppearance),M=this.getTicksFns(this.config.minorTicksAppearance),this._updateConfig=function(){D=!0,O=_(N.config),T=l.create(N.config.intervalsLabelFormat),E=l.create(N.config.majorTicksLabelFormat),k.updateConfig(N.config.intervalsLabelOrientation,0,N.config.labelPadding),A.updateConfig(N.config.majorTicksLabelOrientation,N.config.majorTicksLabelAlign,N.config.labelPadding),M.updateConfig(0,0,N.config.labelPadding)},this._updateView=function(){D=!0,k.updateView(),A.updateView(),M.updateView()},this._draw=function(){function e(e,t,n,i){var r,o=n.count,a=n.positions;if(o>0)for(r=0;o>r;++r)t.tickRender(e,a[r]*i)}var t,n,i=N.canvas.context(),s=f.createEmpty(),l=N.orientation[0];n=N.canvasRect,l===a.Orientation.East||l===a.Orientation.West?t=N.size[0]:(l===a.Orientation.North||l===a.Orientation.South)&&(t=N.size[1]),r.setContext(i),r.canvas.save(),N.drawBackground(),N.drawBorder(),p(),M.tickRenderBegin(i),C.forEach(function(n){e(i,M,n.minorTicks,t)}),M.tickRenderEnd(i),C.forEach(function(e){var r;s[0]=e.position[0]*(n[2]-n[0])+n[0],s[1]=e.position[1]*(n[2]-n[0])+n[0],A.labelRenderBegin(i),r=o.cullLabels(i,A,s,null,{count:1,positions:[e.position[0]],labels:[" "+d(e.domain[0])]},t,-1),r=o.cullLabels(i,A,s,r,e.majorTicks,t,void 0),o.renderCulledLabels(i,A,r),A.labelRenderEnd(i),A.tickRenderBegin(i),o.renderCulledTicks(i,A,r),A.tickRenderEnd(i)}),k.tickRenderBegin(i),C.forEach(function(e){k.tickRender(i,e.position[0]*t)}),k.tickRenderEnd(i);var u=N.edgeMatrix[1],h=k.labelOffset();k.labelRenderBegin(i),r.setTransform(N.componentToCanvasTransform),i.textBaseline="bottom",C.forEach(function(e){P[0]=.5*(e.position[0]+e.position[1])*t,P[1]=h,c.transform(P,P,u),i.fillText(e.label,P[0],P[1])}),k.labelRenderEnd(i),r.canvas.restore()},S=v.create(e,{updateDataAdapterId:function(t,n,i,r){var o,a,s=N.config;o=y,s.intervalsDataAdapterId&&""!==s.intervalsDataAdapterId&&(a=e.getDataManager().getDataAdapter(r)),a?(y=a,m=s.intervalsDataAdapterId,x=a.getDataView(),w=h.create(x)):(y=null,m=null,x=null,w=null),N.dataObserversAdapterModified(i,o,r,a)},updateDataAdapter:function(e,t,n){var i,r,a,s,l,u;if(w&&w.update(),x)for(C=[],l=0,i=0,r=w.length;r>i;++i)a=w.rows(i),s=[1*a.Value1,1*a.Value2],"object"==typeof s[0]&&(s[0]=s[0].getTime()),"object"==typeof s[1]&&(s[1]=s[1].getTime()),u=s[1]-s[0],C.push({domain:s,position:[-1/0,1/0],label:void 0,majorTicks:o.create(),minorTicks:o.create()}),l+=u;else C=[{domain:[-1/0,1/0],position:[-1/0,1/0],label:void 0,majorTicks:o.create(),minorTicks:o.create()}];D=!0,N.dirtyDataDomain(),N.dataObserversDataModified(n,y),N.dirty()}}),this._updateDataDomain=function(e){f.initEmpty(e),C.forEach(function(t){f.hull(e,e,t.domain)})},S.addSubject(s,"intervalsDataAdapterId"),S.init(),g={notify:function(e){var t=!1,i=!1;e.group===n.PROPERTYEVENT_GROUP&&e.events.forEach(function(e){e.configId===N.configId&&(t=!0,i=!0)}),t&&N.dirty(),i&&N.updateConfig()}},e.getEventManager().register(g,0,n.PROPERTYEVENT_GROUP),this.updateConfig()},"protected":{},virtual:{override:{getDraw:function(){return this._draw},updateConfig:function(){this.super.updateConfig(),this._updateConfig()},updateView:function(){this.super.updateView(),this._updateView()},updateDataDomain:function(e){this._updateDataDomain(e)}}}})}),define("oven/components/plot/customAxis",["oven/3rdparty/sys-jscore/main","oven/components/plot/axisComponent","oven/unvetted/contracts/events","oven/unvetted/kernel/kernelDraw","oven/components/plot/ticks","oven/components/plot/plotDefs","oven/components/plot/axisDefs","oven/unvetted/library/utility/configDataAdapterObserver","oven/library/math/interval","oven/unvetted/kernel/kernelMath","oven/framework/data/view/dataViewAccessor"],function(e,t,n,i,r,o,a,s,l,u,c){var d;return d=e.Class.define(t,{init:function(e,t,a,u){function d(){var e,t,n,i,a;v&&(e=m.indices[0],t=m.orientation[e],n=m.visibleDomain,i=_.getDataView(),i.getDataSchema().getFieldIndex("Value")>=0?r.computeValuesAndPositions(y,m.space,e,t,n,o.TickModes.TickSeries,0,_):(a=i.getDataTable().getData().length,r.computeValuesAndPositions(y,m.space,e,t,n,o.TickModes.Count,a,null)),v=!1)}function h(){var e,t,n;if(b){if(n=y.count,_)for(e=c.create(_.getDataView()),t=0;n>t;++t)y.labels[t]=e.columns.Label(t);b=!1}}var f,p,g,m=this,v=!0,y=r.create(),b=!0,_=null;this.initSuper(e,t,a,!1,u),g=this.getTicksFns(this.config.majorTicksAppearance),this._updateConfig=function(){v=!0,b=!0,g.updateConfig(m.config.labelOrientation,m.config.labelAlign,m.config.labelPadding)},this._updateView=function(){v=!0,b=!0,g.updateView()},this._draw=function(){var e,t,n,a=m.canvas.context(),s=m.orientation[m.indices[0]];t=m.canvasRect,s===o.Orientation.East||s===o.Orientation.West?(e=m.size[0],n=[t[0],t[2]]):(s===o.Orientation.North||s===o.Orientation.South)&&(e=m.size[1],n=[t[1],t[3]]),n=[0,e],i.setContext(a),i.canvas.save(),m.drawBackground(),m.drawBorder(),d(),h(),function(){var t=null;g.labelRenderBegin(a),t=r.cullLabels(a,g,n,t,y,e,void 0),r.renderCulledLabels(a,g,t),g.labelRenderEnd(a),g.tickRenderBegin(a),r.renderCulledTicks(a,g,t),g.tickRenderEnd(a)}(),i.canvas.restore()},p=s.create(e,{updateDataAdapterId:function(t,n,i,r){var o,a;o=_,a=r?e.getDataManager().getDataAdapter(r):null,_=a,m.dataObserversAdapterModified(i,o,r,a)},updateDataAdapter:function(e,t,n){v=!0,b=!0,m.dirtyDataDomain(),m.dataObserversDataModified(n,_),m.dirty()}}),this._updateDataDomain=function(e){var t,n,i;if(_)if(t=c.create(_.getDataView()),t.hasDataField("Value"))for(l.initEmpty(e),n=0,i=t.length;i>n;++n)l.envelopev(e,e,t.columns.Value(n));else l.init(e,0,_.getDataView());else l.initEmpty(e)},p.addSubject(u,"dataAdapterId"),p.init(),f={notify:function(e){var t=!1,i=!1;e.group===n.PROPERTYEVENT_GROUP&&e.events.forEach(function(e){e.configId===m.configId&&(t=!0,i=!0)}),t&&m.dirty(),i&&m.updateConfig()}},e.getEventManager().register(f,0,n.PROPERTYEVENT_GROUP),this.updateConfig()},"protected":{},virtual:{override:{getDraw:function(){return this._draw},updateConfig:function(){this.super.updateConfig(),this._updateConfig()},updateView:function(){this.super.updateView(),this._updateView()},updateDataDomain:function(e){this._updateDataDomain(e)}}}})}),define("oven/unvetted/library/utility/configCollectionObserver",["oven/unvetted/contracts/events"],function(e){var t;return t={create:function(t,n,i){var r,o,a=new RegExp("^"+n+":([a-zA-Z0-9_-]+$)"),s=t.getConfigManager();return o={notify:function(t){var r,o=!1;return t.group===e.PROPERTYEVENT_GROUP&&(r=t.type,t.events.forEach(function(t){var l,u;a.test(t.configId)&&(l=a.exec(t.configId)[1],r===e.PROPERTY_ADD?(u=s.getConfigByTypeId(n,l),o=o||i.add(t.configId,u)):r===e.PROPERTY_UPDATE?(u=s.getConfigByTypeId(n,l),o=o||i.update(t.configId,u)):r===e.PROPERTY_REMOVE&&(o=o||i.remove(t.configId)))})),o}},r={init:function(){var r=s.hasConfigCollection(n)?s.getConfigCollection(n):[];r.forEach(function(e){var t=s.getConfigByTypeId(n,e);i.add(n+":"+e,t)}),t.getEventManager().register(o,0,e.PROPERTYEVENT_GROUP)},exit:function(){t.getEventManager().unregister(o);var e=s.hasConfigCollection(n)?s.getConfigCollection(n):[];e.forEach(function(e){i.remove(n+":"+e)})}}}}}),define("oven/components/plot/box",["oven/3rdparty/sys-jscore/main","oven/library/container/component","oven/unvetted/library/utility/idServer","oven/unvetted/contracts/configDefaults","oven/unvetted/kernel/kernelDraw"],function(e,t,n,i,r){function o(e,t,n){var i=typeof n;return"string"===i?e:"number"===i?(e[t].width=n,e):"object"===i?(e[t].width=n.width,e[t].color=n.color,e):void 0}function a(e,t){var n,i;if(Array.isArray(t)){if(i=t.length,4===i)return o(e,0,t[0]),o(e,1,t[1]),o(e,2,t[2]),o(e,3,t[3]),e;if(2===i)return o(e,0,t[0]),o(e,1,t[1]),e[2]=e[0],e[3]=e[1],e;if(1===i)return o(e,0,t[0]),e[1]=e[0],e[2]=e[0],e[3]=e[0],e}else{if(n=typeof t,"string"===n)return e;if("object"===n)return o(e,0,t.top),o(e,1,t.right),o(e,2,t.bottom),o(e,3,t.left),e;if("number"===n)return e[0]=t,e[1]=t,e[2]=t,e[3]=t,e}throw new Error("Encountered invalid box parameters")}var s,l=n.create("box");return s=e.Class.define(t,{init:function(e,t){this.initSuper(e,l.create(t),void 0,!1),this._backgroundColor="black",this._border=[{width:1,color:"white"},{width:1,color:"white"},{width:1,color:"white"},{width:1,color:"white"}]},"private":{draw:function(){function e(e){var t=n[e];o.drawRasterBorder(t.color,t.width,e)}var n,i,o=this;i=this.canvas.context(),r.setContext(i),r.canvas.save(),this.drawRasterBackground(this._backgroundColor,!1),n=this._border,e(t.Edges.Top),e(t.Edges.Right),e(t.Edges.Bottom),e(t.Edges.Left),r.canvas.restore()}},"public":{backgroundColor:{set:function(e){this._backgroundColor=e,this.dirty()},get:function(){return this._backgroundColor}},border:{set:function(e){a(this._border,e),this.dirty()},get:function(){return this._border}},border_top:{set:function(e){o(this._border,t.Edges.Top,e),this.dirty()},get:function(){return this._border[t.Edges.Top]}},border_right:{set:function(e){o(this._border,t.Edges.Right,e),this.dirty()},get:function(){return this._border[t.Edges.Right]}},border_bottom:{set:function(e){o(this._border,t.Edges.Bottom,e),this.dirty()},get:function(){return this._border[t.Edges.Bottom]}},border_left:{set:function(e){o(this._border,t.Edges.Left,e),this.dirty()},get:function(){return this._border[t.Edges.Left]}}},virtual:{override:{getDraw:function(){return this.draw.bind(this)}}}})}),define("oven/components/flexibleTable/flexibleTableDefs",[],function(){var e={Header:0,Footer:1,Body:2},t={Text:0,Number:1,Icon:2,Swatch:3,Heading:4},n={Left:0,Right:1,Center:2,Radix:3},i={RowType:e,CellType:t,Alignment:n};return i}),define("oven/components/flexibleTable/flexibleTableUtil",[],function(){var e={iterateRows:function(e,t){var n,i=e.rows,r=i.length;for(n=0;r>n;++n)t(i[n],n)},iterateCells:function(e,t){var n,i,r,o,a=e.rows,s=a.length;for(r=0;s>r;++r)for(n=a[r].cells,i=n.length,o=0;i>o;++o)t(n[o],r,o)},iterateCellsInRow:function(e,t,n){var i,r,o,a,s=e.rows;if(s.length>t)for(i=s[t],r=i.cells,o=r.length,a=0;o>a;++a)n(r[a],a)},iterateCellsInColumn:function(e,t,n){var i,r,o,a=e.rows,s=a.length;for(o=0;s>o;++o)i=a[o],r=i.cells,r.length>t&&n(r[t],i,o)}};return e}),define("oven/library/text/textNumerics",[],function(){function e(e,t){var n,i,r,o=0,a=t.length,s=Math.max;for(i=0;a>i;++i)r=t.charAt(i),n=e(r),o=s(o,n.width);return o}var t="0123456789",n="+-",i=".",r=",",o={Digit:0,Sign:1,DecimalPoint:2,ThousandsSep:3,Invalid:-1},a={parseNumberFromSubstring:function(e,a,s){var l,u,c,d,h,f=e.length,p=!1;if(s=s||f,l=a+1,d=e[l-1],h=t.indexOf(d)>=0?o.Digit:n.indexOf(d)>=0?o.Sign:i.indexOf(d)>=0?o.DecimalPoint:o.Invalid,h!==o.Invalid)for(h===o.DecimalPoint&&(p=!0);s>l&&(u=e[l],p?c=t.indexOf(u)>=0?o.Digit:o.Invalid:(c=t.indexOf(u)>=0?o.Digit:r.indexOf(u)>=0?o.ThousandsSep:i.indexOf(u)>=0?o.DecimalPoint:o.Invalid,c===o.DecimalPoint&&(p=!0)),c!==o.Invalid);)++l;return l-1-a},computeNumericCharacterTypes:function(e){var a,s=e.length,l=e[0],u=t.indexOf(l)>=0?o.Digit:n.indexOf(l)>=0?o.Sign:i.indexOf(l)>=0?o.DecimalPoint:o.Invalid,c=[u];for(a=1;s>a;++a)l=e[a],u=t.indexOf(l)>=0?o.Digit:i.indexOf(l)>=0?o.DecimalPoint:r.indexOf(l)>=0?o.ThousandsSep:o.Invalid,c.push(u);return c},calculateNumberGlyphWidths:function(o){var a=e(o,t),s=e(o,r),l=e(o,i),u=e(o,n),c=Math.max(s,l);return{signWidth:u,digitWidth:a,separatorWidth:c,separatorWidthThousands:s,separatorWidthDecimal:l}},computeNumericTextMetrics:function(e){var t,n,i=0,r=0,a=0,s=0,l=0,u=0,c=0,d=0,h=-1,f=[],p=this.computeNumericCharacterTypes(e),g=p.length;for(t=0;g>t;++t)switch(n=p[t]){case o.Digit:++r,0>h?++a:++s;break;case o.DecimalPoint:++c,++l,h=t;break;case o.ThousandsSep:++u,++l,f.push(t);break;case o.Sign:++i;break;case o.Invalid:++d;break;default:++d}return{numSigns:i,numDigits:r,numDigitsRadLeft:a,numDigitsRadRight:s,numSeparators:l,numThousandsSep:u,numDecimalPoints:c,numInvalid:d,posDecimal:h,posThousands:f,characterTypes:p}},computeNumericTextWidth:function(e,t){var n,i,r,o=t.digitWidth,a=t.separatorWidth;return n=o*e.numDigits+o*e.numSigns+a*e.numSeparators,e.numDecimalPoints>0?(i=o*e.numDigitsRadLeft+o*e.numSigns+a*e.numThousandsSep,r=o*e.numDigitsRadRight):(i=n,r=0),{totalWidth:n,radixLeftWidth:i,radixRightWidth:r}}};return a}),define("oven/components/flexibleTable/flexibleTableImpl",["oven/3rdparty/sys-jscore/main","oven/components/flexibleTable/flexibleTableDefs","oven/components/flexibleTable/flexibleTableUtil","oven/unvetted/contracts/events","oven/library/text/textNumerics","oven/unvetted/library/textRendering","oven/unvetted/kernel/kernelDraw","oven/library/math/aabox","oven/unvetted/library/utility/boundingIntervalHierarchy","oven/library/utility/objects"],function(e,t,n,i,r,o,a,s,l,u){var c={TREE_COLUMN_INDEX:0,EDGE_PADDING:8,CELL_PADDING_HORZ:6,CELL_PADDING_VERT:3,TREE_LEVEL_WIDTH:12,TREE_EXPANDER_DIM:8,TREE_LEADER_LINE_OFFSET:4},d=t.RowType,h=t.CellType,f=t.Alignment,p=e.Class.define({init:function(e,t,n){this._sections=e,this._rowTemplates=t,this._defaultRowTemplate=n,this._cellIdMap={},this._rows=this.createTable()},"private":{getDefaultTemplateForSection:function(e){var t=e.defaultRowTemplate;return(!t||0>=t.length)&&(t=this._defaultRowTemplate),!t||0>=t.length?void 0:this._rowTemplates[t]},initCellValue:function(e,t){var n,i=t.value,r=i.text||i.number||i.color;r&&(n=r),e.value=n},mapCellId:function(e,t){var n=t.id;n&&(this._cellIdMap[n]?console.warn("Cell with id "+n+" already exists"):(this._cellIdMap[n]=e,e.id=n))},createCell:function(e,t,n){var i=Object.keys(t),r=1===i.length&&i[0];if(r){var o="text"===r?h.Text:"number"===r?h.Number:"swatch"===r?h.Swatch:"icon"===r?h.Icon:"heading"===r?h.Text:void 0;e.type=o,e.template=t[r]}this.initCellValue(e,n),this.mapCellId(e,n)},createCells:function(e,t,n){var i,r,o,a,s=n.length,l=t.length;for(s!==l&&(console.warn("Cell count and template count mismatch"),s=Math.min(s,l)),i=0;s>i;++i)r={type:null,value:null,dirty:!0},o=n[i],a=t[i],this.createCell(r,a,o),e.push(r)},createRow:function(e,t,n,i,r){r=r||0;var o,a,s,l=r+1,u=t.children,c=u&&u.length||0;for(s={cells:[],level:r,type:n,childCount:c},e.push(s),a=this._rowTemplates[t.template]||i,a?(s.template=a,this.createCells(s.cells,a.cellTemplates,t.cells)):console.warn("Creating row without a template"),o=0;c>o;++o)this.createRow(e,u[o],n,i,l)},createRowBatch:function(e,t,n,i){var r,o,a=t&&t.length||0;for(o=0;a>o;++o)r=t[o],this.createRow(e,r,n,i)},createSection:function(e,t){var n=this.getDefaultTemplateForSection(t);this.createRowBatch(e,t.header,d.Header,n),this.createRowBatch(e,t.rows,d.Body,n),this.createRowBatch(e,t.footer,d.Footer,n)},createTable:function(){var e,t,n=this._sections.length,i=[];for(t=0;n>t;++t)e=this._sections[t],this.createSection(i,e);return i}},"public":{rows:{get:function(){return this._rows}},setCellValue:function(e,t){var n=this._cellIdMap[e];n&&(n.value=t,n.dirty=!0)}}}),g=e.Class.define({init:function(e,t){var n=this;this._ctx=e.getContext("2d"),this._ctxOverlay=t&&t.getContext("2d"),this._config=null,this._resizeDelegate=null,this._actualRect=null,this._contentRect=s.createEmpty(),this._columnstates=[],this._table=null,this._prunedTable=null,this._cellIdMap=null,this._numberGlyphWidths=null,this._needsLayout=null,this._tableHeight=null,this._tableWidth=null,this._rowHeight=null,this._boundingIntervalHier=null,this._textConfig={textAlign:"left",textBaseline:"middle",horizontalPadding:0,verticalPadding:0,lineSpacing:0},this._measureTextCtx=null,this._measureTextFontSize=null,this._textRenderer=o.createTextRenderer(e,this._textConfig),this._measureTextCallback=function(e){var t=n._measureTextCtx.measureText(e);return{width:t.width,height:n._measureTextFontSize}},this._setFontCallback=function(e,t){this._measureTextCtx.font=t+"px "+e,this._measureTextFontSize=t,this._numberGlyphWidths=r.calculateNumberGlyphWidths(this._measureTextCallback)}},"private":{getColumn:function(e,t){return this._columnstates[t]},getRow:function(e,t){var n=e.rows;return n[t]},getNumColumns:function(){return this._columnstates.length},getNumRows:function(e){return e.rows.length},getOffsetForAlignment:function(e,t,n){switch(e){case f.Center:return(n-t)/2;case f.Right:return n-t;default:return 0}},getExpanderAABox:function(e,t){var n=c.TREE_EXPANDER_DIM,i=n/2,r=this._rowHeight/2,o=t.level,a=t.index,l=this.getRow(e,a),u=r+l.offset,d=u-i,h=u+i,f=o*c.TREE_LEVEL_WIDTH,p=f+n;return s.create(f,d,p,h)},createPrunedTable:function(e){for(var t,n,i=[],r=e.rows,o=r.length,a={},s=0,l=0;o>s;)if(t=r[s],i[l]=t,a[l++]=s++,t.collapsed)for(n=t.level;o>s&&r[s].level>n;)++s;return{rows:i}},computeTextMetrics:function(e){var t,n,i,o,a;return i=e.value||"",e.type===h.Number?(t=""+i,o=r.computeNumericTextMetrics(t),a=r.computeNumericTextWidth(o,this._numberGlyphWidths),n=a.totalWidth):e.type===h.Text&&(t=i,n=this._measureTextCallback(t).width),{displayText:t,displayTextWidth:n,numberMetrics:o,numberTextWidths:a}},prepareCell:function(e){switch(e.type){case h.Text:case h.Number:e.dirty&&(e.textMetrics=this.computeTextMetrics(e),e.dirty=!1);break;case h.Swatch:var t=e.template;e.contentWidth=t.width,e.contentHeight=t.height;break;default:e.contentWidth=12,e.contentHeight=12}},preLayout:function(){var e=this._prunedTable;n.iterateCells(e,this.prepareCell.bind(this))},sizeCell:function(e){var t,n=e.type,i=e.value,r=e.template,o=e.textMetrics,a=0,s=0,l=0;return void 0===i||null===i?a=0:n===h.Number&&r.alignment===f.Radix?(t=o.numberTextWidths,a=t.totalWidth,s=t.radixLeftWidth,l=t.radixRightWidth):a=n===h.Number||n===h.Text?o.displayTextWidth:e.contentWidth||0,{total:a,radixLeft:s,radixRight:l}},sizeRow:function(e,t){var i,r=0,o=this._measureTextFontSize;return n.iterateCellsInRow(e,t,function(e){i=e.contentHeight||o||0,r=Math.max(r,i)}),r},sizeColumns:function(e,t){var i,r,o,a,s,l,u=this,d=this.getNumColumns(e),h=c.TREE_COLUMN_INDEX,f=[0],p=[0],g=[0],m=[],v=[];for(t&&n.iterateRows(e,function(e,t){var n,r,o=c.TREE_LEVEL_WIDTH*(e.level+1),a=o,s=e.cells,l=s.length;for(m[t]=l,r=0,i=0;l>i;++i)if(n=s[i],n.template.span>1)v.push([t,i]);else{if(n.column!==h){m[t]=i;break}a+=u.sizeCell(n).total,++r}a+=(r-1)*c.CELL_PADDING_HORZ,f[h]=Math.max(f[h],a)}),n.iterateRows(e,function(e,t){var n,r,o,a,s=e.cells,l=s.length;for(i=m[t]||0;l>i;++i)n=s[i],r=n.column,o=n.template.span,void 0===o||1===o?(void 0===f[r]&&(f[r]=0,p[r]=0,g[r]=0),a=u.sizeCell(n),f[r]=Math.max(f[r],a.total),g[r]=Math.max(g[r],a.radixLeft),p[r]=Math.max(p[r],a.radixRight)):v.push([t,i])}),i=0;d>i;++i)r=f[i],o=g[i],a=p[i],s=-1,a>0&&(r=Math.max(r,o+a+this._numberGlyphWidths.separatorWidth),s=o),l=this.getColumn(e,i),l.idealWidth=r,l.radixPixelOffset=s},layoutTable:function(){var e=this._prunedTable,t=!1;n.iterateRows(e,function(e){t=t||e.childCount>0}),this.layoutRows(e),this.layoutColumns(e,t)},layoutRows:function(e){var t=this,i=0;n.iterateRows(e,function(n,r){i=Math.max(i,t.sizeRow(e,r))}),this._rowHeight=i+c.CELL_PADDING_VERT;var r=0;n.iterateRows(e,function(e){e.offset=r,r+=t._rowHeight,e.bottom=r-c.CELL_PADDING_VERT/2}),this._tableHeight=r-c.CELL_PADDING_VERT},getTreeBreak:function(e){var t,n,i,r,o,a=0,s=e.cells,l=s.length,u=e.template,c=u.indentUntilColumn,d=Math.min(l,c||l);for(o=0;d>o&&(t=s[o],n=t.template,i=n.alignment,r=n.span,!(i===f.Radix||r>1));++o)a++;return a},createAndAssignColumns:function(e,t){var i=this,r=function(){return{hysteresisWidth:0,minimumWidth:0,currentWidth:0,idealWidth:0,radixPixelOffset:-1}},o=[r()];return n.iterateRows(e,function(e){var n,a,s=e.cells,l=s.length,u=0,h=0;if(t&&e.type===d.Body){for(a=i.getTreeBreak(e),e.treeBreak=a,u=0;a>u;++u)s[u].column=c.TREE_COLUMN_INDEX;++h}for(;l>u;++u)n=s[u],o.length<=h&&o.push(r()),n.column=h,h+=n.template.span||1}),o},computeColumnOffsets:function(e){var t,n,i,r=this.getNumColumns(e);for(t=0,i=0;r>i;++i)n=this.getColumn(e,i),n.offset=t,t+=n.idealWidth+c.CELL_PADDING_HORZ;this._tableWidth=t-c.CELL_PADDING_HORZ},layoutColumns:function(e,t){0===this._columnstates.length&&(this._columnstates=this.createAndAssignColumns(e,t)),this.sizeColumns(e,t),this.computeColumnOffsets(e),this.assignCellPositions(e,t)},assignCellPositions:function(e,t){var i,r,o,a,l,u,d,h=this,f=c.TREE_COLUMN_INDEX;n.iterateRows(e,function(n){var p=t?c.TREE_LEVEL_WIDTH*(n.level+1):0,g=p,m=n.cells,v=m.length;for(d=0;v>d;++d)r=m[d],o=r.column,a=r.template.span||1,i=v-1>d?m[d+1].column:-1,-1===i?l=h._tableWidth:t&&d===f&&i===f?l=g+h.sizeCell(r).total:(u=h.getColumn(e,i),l=u.offset-c.CELL_PADDING_HORZ),t||(g=h.getColumn(e,o).offset),r.rect=s.create(g,n.offset,l,n.bottom),t&&(g=l+c.CELL_PADDING_HORZ)})},buildTreeLines:function(e){for(var t,n,i,r,o,a=this.getNumRows(e),s=e.rows,l=0,u=[];a>l;)t=s[l],n=t.childCount,i=t.collapsed,r=t.level,n&&(o={index:l,collapsed:i,level:r},t.collapsed?o.collapsed=!0:(o.collapsed=!1,o.extent=n),u.push(o)),++l;return u},buildObjectHierarchy:function(){var e,t=this._prunedTable,i=l.create();n.iterateCells(t,function(e,t,n){i.insertWithAABox(e.rect,{cell:{r:t,c:n}})});var r,o,a,s=t.treeLines,u=s.length;for(r=0;u>r;++r)o=s[r],a=o.index,e=this.getExpanderAABox(t,o),i.insertWithAABox(e,{expander:{r:a}});return i},expandCollapseTreeRow:function(e){this.clear(),e.collapsed=!e.collapsed,this.layoutPass(!0),this.notifyResize(),this.drawImpl()},getCustomTextStyle:function(e){return e.fontStyle||e.fontVariant||e.fontWeight?o.buildFontStringFull(u.copyInto(e,{fontFamily:this._config.fontFamily,fontSize:this._config.fontSize+"px"})):null},drawNumberCell:function(e,t,n){var i=e.textMetrics,r=i.displayText,o=i.displayTextWidth,l=i.numberTextWidths,u=e.template,c=u.alignment,d=s.width(t);a.setFillStyle(this._config.fontColor);var h=0;if(c===f.Radix){var p=this.getColumn(n,e.column),g=p.radixPixelOffset,m=l.radixLeftWidth;h=0>g?this.getOffsetForAlignment(f.Right,o,d):g-m}else h=this.getOffsetForAlignment(c,o,d);this._textRenderer.drawBatchStringMaxWidth(t[0]+h,s.center([0,0,0],t)[1],r,o)},drawTextCell:function(e,t){var n=e.textMetrics,i=n.displayText,r=n.displayTextWidth,o=e.template,l=o.alignment,u=this.getCustomTextStyle(o);u&&(a.save(),a.setFont(u)),a.setFillStyle(o.fontColor||this._config.fontColor);var c=this.getOffsetForAlignment(l,r,s.width(t));this._textRenderer.drawBatchStringMaxWidth(t[0]+c,s.center([0,0,0],t)[1],i,r),u&&a.restore()},drawIconCell:function(){console.warn("Drawing ICON cell")},drawSwatchCell:function(e,t){var n=e.value,i=e.contentWidth,r=e.contentHeight;a.setFillStyle(n),a.setStrokeStyle("#FFFFFF"),a.drawRect(t[0],t[1],i,r,!0,!1,!1)},drawCell:function(e){var t=arguments;switch(e.type){case h.Text:this.drawTextCell.apply(this,t);break;case h.Number:this.drawNumberCell.apply(this,t);break;case h.Swatch:this.drawSwatchCell.apply(this,t);break;case h.Icon:this.drawIconCell.apply(this,t)}},drawCells:function(e){var t=this;a.setFont(this._config.fontSize+"px "+this._config.fontFamily),n.iterateCells(e,function(n){t.drawCell(n,n.rect,e)})},drawCellBorders:function(e){var t,n,i=this.getNumRows(e),r=this.getColumn(e,0).offset,o=this._tableWidth;for(a.beginPath(),n=0;i>n;++n)t=this.getRow(e,n),0===n&&a.drawBatchLine(r,t.offset,o,t.offset),a.drawBatchLine(r,t.bottom,o,t.bottom);a.finishPath(!0,!1,!0,!1)},drawTreeLines:function(e){a.setStrokeStyle("#FFFFFF"),a.setLineWidth(1),a.setLineCap("square");var t,n,i,r,o,s,l,u,d,h,f,p,g,m,v,y,b,_,x=e.treeLines,w=x.length,C=c.TREE_EXPANDER_DIM,T=C/2,E=c.TREE_LEADER_LINE_OFFSET,S=C-E,k=this._rowHeight/2;for(t=0;w>t;++t){if(n=x[t],d=n.collapsed,u=n.extent,l=n.level,r=n.index,o=this.getRow(e,r),h=k+o.offset,p=h-T,g=h+T,m=l*c.TREE_LEVEL_WIDTH,v=m+C,f=m+T,a.beginPath(),a.drawBatchLine(m,p,v,p),a.drawBatchLine(v,p,v,g),a.drawBatchLine(v,g,m,g),a.drawBatchLine(m,g,m,p),a.drawBatchLine(m+2,h,v-2,h),d&&a.drawBatchLine(f,p+2,f,g-2),!d)for(y=m+E,a.drawBatchLine(y,g,y,o.bottom+(u-1)*this._rowHeight+k),i=0;u>i;++i)_=o.bottom+i*this._rowHeight+k,s=this.getRow(e,r+i+1),b=s.childCount>0?y+S:m+c.TREE_LEVEL_WIDTH+C,a.drawBatchLine(y,_,b,_);a.finishPath(!0,!1,!0,!1)}},drawTable:function(){var e=this._prunedTable;this.drawCells(e),this.drawTreeLines(e)},clear:function(){a.setContext(this._ctx),a.clearRect(this._contentRect[0]+c.EDGE_PADDING,this._contentRect[1]+c.EDGE_PADDING,s.width(this._contentRect),s.height(this._contentRect))},drawImpl:function(){var e=this._contentRect[0]+c.EDGE_PADDING,t=this._contentRect[1]+c.EDGE_PADDING;a.setContext(this._ctx),a.setTranslate(e,t),this._textRenderer.setBaseline("middle"),this._textRenderer.setAlignment("left"),this.drawTable(),a.setTranslate(-e,-t)},notifyResize:function(){this._resizeDelegate&&this._resizeDelegate()},layoutPass:function(e){(this._needsLayout||e)&&(this._prunedTable=this.createPrunedTable(this._table),this._prunedTable.treeLines=this.buildTreeLines(this._prunedTable),this.preLayout(),this.layoutTable(),s.initOriginSize(this._contentRect,0,0,this._tableWidth+2*c.EDGE_PADDING,this._tableHeight+2*c.EDGE_PADDING),this._boundingIntervalHier=this.buildObjectHierarchy(),this._needsLayout=!1)},onMouseUp:function(e,t){var n,i,r=this._prunedTable;t.expander&&(n=t.expander.r,i=this.getRow(r,n),this.expandCollapseTreeRow(i))}},"public":{notify:function(e){var t=e.x,n=e.y,r=this._boundingIntervalHier.searchPoint(t-c.EDGE_PADDING,n-c.EDGE_PADDING);if(r&&!(r.length<1)){var o=r[0];switch(e.type){case i.MOUSE_UP:this.onMouseUp(e,o)}}},setConfig:function(e){this._config=e,this._measureTextCtx=this._ctx,this._setFontCallback(e.fontFamily,e.fontSize)},setContent:function(e){this._columnstates=[],this._needsLayout=!0,this._table=new p(e.sections,e.rowTemplates,e.defaultRowTemplate),this.layoutPass(!0)},setCellValue:function(e,t){this._table.setCellValue(e,t),this._needsLayout=!0},setResizeDelegate:function(e){this._resizeDelegate=e},hasLayoutChanged:function(){return this._needsLayout},layout:function(e){this.layoutPass(e)},setActualRect:function(e){this._actualRect=e},getContentRect:function(){return this._contentRect},draw:function(e){e&&this.clear(),this.drawImpl()}}});return g}),define("oven/framework/data/bindings/dataBindingDefs",[],function(){var e={BindingType:{Cell:0,AnchoredCell:1},Anchors:{First:"first",Last:"last"},BindingEventType:{ValueChanged:0,Invalidated:1}};return e}),define("oven/framework/data/bindings/dataBindings",["oven/framework/data/bindings/dataBindingDefs"],function(e){var t=e.BindingType,n=e.Anchors,i=e.BindingEventType,r={BindingType:t,Anchors:n,BindingEventType:i,createCellBinding:function(e,n,i){var r={bindingType:t.Cell,dataSource:e,rowIndex:n,field:i};return r},createAnchoredCellBinding:function(e,n,i){var r={bindingType:t.AnchoredCell,dataSource:e,rowAnchor:n,field:i};return r}};return r}),define("oven/framework/data/bindings/dataBindingUtil",["oven/framework/data/bindings/dataBindings"],function(e){var t=e.Anchors,n={evaluateRowIndex:function(e,n){var i=e.rowIndex,r=e.rowAnchor;if(void 0!==i)return i;if(void 0!==r)switch(r){case t.First:return 0;case t.Last:return n.length-1}},evaluateBindingRaw:function(e,t,n){var i=e[t];return i?i[n]:null},evaluateBindingWithView:function(e,t){var n,i,r,o,a=e.field;return n=t.getDataSchema(),i=t.getDataTable().getData(),r=n.getFieldIndex(a),o=this.evaluateRowIndex(e,i),r>=0?this.evaluateBindingRaw(i,o,r):void 0},evaluateBinding:function(e,t){var n,i,r=e.dataSource;return t.hasDataAdapter(r)?(n=t.getDataAdapter(r),i=n.getDataView(),this.evaluateBindingWithView(e,i)):void 0}};return n}),define("oven/framework/data/bindings/dataBindingEvents",["oven/unvetted/contracts/events","oven/framework/data/bindings/dataBindingDefs"],function(e,t){var n=t.BindingEventType,i={createBindingsValueChangedEvent:function(t){return{group:e.DATABINDINGEVENT_GROUP,type:n.ValueChanged,updateMap:t}},createBindingsInvalidatedEvent:function(t){return{group:e.DATABINDINGEVENT_GROUP,type:n.Invalidated,bindingIds:t}}};return i}),define("oven/framework/data/bindings/dataBindingPublisherImpl",["oven/unvetted/contracts/events","oven/framework/data/bindings/dataBindings","oven/framework/data/bindings/dataBindingUtil","oven/framework/data/bindings/dataBindingEvents","oven/library/utility/objects"],function(e,t,n,i,r){function o(){return++c}var a=t.BindingType,s=t.Anchors,l={First:-2,Last:-3,Error:-1},u={EventManagerPriority:52},c=0,d={createDataBindingPublisherImpl:function(t){var c,d,h,f,p,g,m,v=function(e){switch(e.bindingType){case a.AnchoredCell:var t=e.rowAnchor;return t===s.First?l.First:t===s.Last?l.Last:l.Error;default:return e.rowIndex}},y=function(e,t,n){var i=e[t];return i||(i=e[t]=n),i},b=function(e,t){var n,i,r,o,a={};for(n in e)e.hasOwnProperty(n)&&(i=e[n],r=i[t],o=y(a,r,[]),o[n]=i);return a},_=function(e,t,n){var i,r,o,a;o=v(e),i=y(t,o,[]),a=n.getFieldIndex(e.field),a>=0&&(r=y(i,a,[]),r.push(e))},x=function(){f={};var e,t,n,i,r,o,a=b(h,"dataSource");for(i in a)if(a.hasOwnProperty(i))if(d.hasDataAdapter(i)){r=d.getDataAdapter(i),o=r.getDataView().getDataSchema(),e=f[i]=[],t=a[i];for(n in t)t.hasOwnProperty(n)&&_(t[n],e,o)}else console.error('DataAdapter "'+i+'" not found')},w=function(){p&&(x(),p=!1)},C=function(e){return f.hasOwnProperty(e)?f[e]:null},T=function(e,t,n){var i=[];return e[t]&&i.push(e[t]),0===t&&e[l.First]&&i.push(e[l.First]),n-1===t&&e[l.Last]&&i.push(e[l.Last]),0===i.length?null:[].concat.apply([],i)},E=function(e,t,i,r,o){var a,s,l,u,c=t.length;for(a=0;c>a;++a)s=t[a],l=s.id,e.hasOwnProperty(l)||(u=n.evaluateBindingRaw(i,r,o),e[l]=u)},S=function(e,t,n,i){var r=C(t);if(r){var o,a=i.length;for(o=0;a>o;++o){var s=i[o],l=s.rowIndex,u=T(r,l,n.length);if(u)for(var c=s.columns,d=c.length,h=0;d>h;++h){var f=c[h];u[f]&&E(e,u[f],n,l,f)}}}},k=function(e,t){var n;r.isEmpty(e)||(n=i.createBindingsValueChangedEvent(e),c.notify(n)),!r.isEmpty(t)},A=function(t){w();var n,i,r,o={},a={},s=t.dataViewSet,l=t.data;for(n in s)if(s.hasOwnProperty(n))switch(i=d.getDataView(n),r=i.getDataTable().getData(),t.type){case e.ROW_CHANGES:S(o,n,r,l);break;case e.ROW_DELETES:case e.ROW_MOVES:case e.ROW_INSERTS:case e.COLUMN_DELETES:case e.COLUMN_MOVES:case e.COLUMN_INSERTS:case e.TABLE_CHANGE:case e.TABLE_CLEAR:}k(o,a)},M=function(){c=t.getEventManager(),d=t.getDataManager(),h={},f={},m=!1,g={notify:function(e){A(e)}}},N={addBinding:function(e){var t=o();return e.id=t,h[t]=e,p=!0,t},removeBinding:function(){},removeAllBindings:function(){h={},f={},p=!1},startPublish:function(){w(),m||(c.register(g,u.EventManagerPriority,e.DATAEVENT_GROUP),m=!0)},suspendPublish:function(){},resumePublish:function(){}};return M(),N}};return d}),define("oven/framework/data/bindings/dataBindingPublisher",["oven/framework/data/bindings/dataBindingPublisherImpl"],function(e){var t={createDataBindingPublisher:function(t){var n=e.createDataBindingPublisherImpl(t),i={addBinding:function(e){return n.addBinding(e)},removeBinding:function(e){n.removeBinding(e)},removeAllBindings:function(){n.removeAllBindings()},startPublish:function(){n.startPublish()},suspendPublish:function(){},resumePublish:function(){}};return i}};return t}),define("oven/components/flexibleTable/flexibleTable",["oven/3rdparty/sys-jscore/main","oven/library/container/component","oven/components/flexibleTable/flexibleTableDefs","oven/components/flexibleTable/flexibleTableImpl","oven/framework/data/bindings/dataBindingPublisher","oven/framework/data/bindings/dataBindings","oven/framework/data/bindings/dataBindingUtil","oven/unvetted/contracts/events"],function(e,t,n,i,r,o,a,s){var l=e.Class.define(t,{init:function(e,t,n,o,a){this.initSuper(e,t,n,o),this._config=e.getConfigManager().getConfig(a),this._dataManager=e.getDataManager(),this._eventManager=e.getEventManager(),this._dataBindingPub=r.createDataBindingPublisher(e),this._tableImpl=new i(this.canvas.canvas()),this._resizeDelegate=null,this._defaultSource=null,this._dataBindingMap=null,this._needsSetupPass=!0,this._needsRedraw=!0,this._eventManager.register(this,0,s.BASEEVENTS_GROUP),this._eventManager.register(this,0,s.DATABINDINGEVENT_GROUP),this.setConfig(this._config)
},"private":{createCellBinding:function(e){var t,n=e.row,i=e.dataSource||this._defaultSource;return n.hasOwnProperty("index")?t=o.createCellBinding(i,n.index,e.field):n.hasOwnProperty("anchor")&&(t=o.createAnchoredCellBinding(i,n.anchor,e.field)),t},initCellBinding:function(e){var t=this.createCellBinding(e.binding),n=this._dataBindingPub.addBinding(t);this._dataBindingMap[n]={cellId:n,cellBinding:t},e.id=n},initDataBindings:function(e){this._dataBindingMap={},this._dataBindingPub.removeAllBindings();var t,n,i,r,o,a,s,l,u,c;for(t=0;t<e.length;++t){o=e[t];var d=[o.header,o.rows,o.footer];for(n=0;n<d.length;++n)if(a=d[n])for(l=a.length,i=0;l>i;++i)for(s=a[i].cells,u=s.length,r=0;u>r;++r)c=s[r],c.binding&&this.initCellBinding(c)}},initBindingValues:function(){var e,t,n,i,r,o=this._dataBindingMap,s=this._dataManager,l=this._tableImpl;for(e in o)o.hasOwnProperty(e)&&(t=o[e],n=t.cellBinding,r=t.cellId,i=a.evaluateBinding(n,s),void 0!==i&&l.setCellValue(r,i))},updateBindingValues:function(e){var t,n,i,r,o=this._dataBindingMap,a=this._tableImpl;for(t in e)e.hasOwnProperty(t)&&(n=e[t],i=o[t],i&&(r=i.cellId,a.setCellValue(r,n),this._needsRedraw=!0))},setupPass:function(){this._needsSetupPass&&(this.initBindingValues(),this._dataBindingPub.startPublish(),this._needsSetupPass=!1),this._tableImpl.hasLayoutChanged()&&(this._tableImpl.layout(),this._resizeDelegate&&this._resizeDelegate())},draw:function(e){this.setupPass(),this._tableImpl.draw(e),this._needsRedraw=!1}},"public":{setConfig:function(e){this._config=e,this._defaultSource=e.dataSource,this._tableImpl.setConfig(e),this.setContent(e)},setContent:function(e){this.initDataBindings(e.sections),this._tableImpl.setContent(e),this._needsSetupPass=!0,this.setupPass()},getContentRect:function(){return this._tableImpl.getContentRect()},notify:function(e){switch(e.group){case s.DATABINDINGEVENT_GROUP:e.type===o.BindingEventType.ValueChanged&&this.updateBindingValues(e.updateMap)}return this._needsRedraw&&this.dirty(),!1}},virtual:{override:{setSize:function(e,t){this.super.setSize(e,t),this._tableImpl.setActualRect(this.rect)},setPosition:function(e,t){this.super.setPosition(e,t),this._tableImpl.setActualRect(this.rect)},getDraw:function(){return this.draw.bind(this)}}}});return l}),define("oven/components/legend/legendDefs",["oven/components/flexibleTable/flexibleTableDefs"],function(e){var t={RowType:e.RowType,CellType:e.CellType,Alignment:e.Alignment};return t}),define("oven/components/legend/legendConfig",["oven/components/legend/legendDefs","oven/unvetted/contracts/configDefaults","oven/framework/config/schema/configSchemaBuilder","oven/library/utility/objects"],function(e,t,n,i){var r=e.CellType,o=e.Alignment,a={Legend:"Legend"},s={CellType:r,Alignment:o,ConfigNames:a,getConfigSchema:function(){({text:r.Text,number:r.Number,icon:r.Icon,swatch:r.Swatch});var e={left:o.Left,right:o.Right,center:o.Center,radix:o.Radix},a=n.createConfigChoice("RowBinding",{index:n.createIntegerProperty(),anchor:n.createStringProperty()}),s=n.createConfigSet("DataBinding",{dataSource:n.createDataReference(),row:a,field:n.createStringProperty()}),l={},u=function(e,t){return t=i.assimilate(l,t),n.createConfigSet(e,t)},c=u("NumericCellTemplate",{alignment:n.createEnumProperty(e,"radix"),numberFormat:n.createStringProperty("n|d2.4")}),d=u("TextCellTemplate",{alignment:n.createEnumProperty(e,"left")}),h=u("IconCellTemplate",{scale:n.createDoubleProperty(1)}),f=u("SwatchCellTemplate",{width:n.createDoubleProperty(12),height:n.createDoubleProperty(12)}),p=u("HeadingCellTemplate",{alignment:n.createEnumProperty(e,"center"),span:n.createIntegerProperty(),fontWeight:n.createStringProperty("bold"),fontStyle:n.createStringProperty("italic"),fontColor:n.createColorProperty("#FFF5F3")}),g=n.createConfigChoice("CellTemplate",{text:d,number:c,icon:h,swatch:f,heading:p}),m=n.createConfigSet("RowTemplate",{cellTemplates:n.createConfigArray(g),indentUntilColumn:n.createIntegerProperty()}),v=n.createConfigSet("Column",{id:n.createStringProperty(),resizeable:n.createBooleanProperty(!1)});n.createConfigArray(v);var y=n.createConfigChoice("CellValue",{text:n.createStringProperty(),number:n.createDoubleProperty(),icon:n.createStringProperty(),color:n.createColorProperty()}),b=n.createConfigSet("Cell",{value:y,binding:n.createConfigSetReference("DataBinding",!0)}),_=n.createConfigArray(b),x=n.createConfigArray(n.createConfigSetReference("Row")),w=n.createConfigSet("Row",{template:n.createStringProperty(),cells:_,children:x}),C=n.createConfigSet("SingleRow",{template:n.createStringProperty(),cells:_}),T=n.createConfigArray(C),E=n.createConfigSet("Section",{header:T,footer:T,rows:x,defaultRowTemplate:n.createStringProperty()}),S=n.createConfigArray(E),k=n.createConfigSet("Legend",{fontFamily:n.createStringProperty(t.DEFAULT_FONT_FAMILY),fontSize:n.createDoubleProperty(t.DEFAULT_FONT_SIZE),fontColor:n.createColorProperty("#FFFFFF"),backgroundFill:n.createColorProperty("#403E40"),rowTemplates:n.createConfigCollection(m,!0),sections:S,defaultRowTemplate:n.createStringProperty("default"),dataSource:n.createDataReference()});return n.createSchema([s,w,k],[])}};return s}),define("oven/components/legend/legend",["oven/3rdparty/sys-jscore/main","oven/library/container/component","oven/library/container/vislet","oven/library/container/boxLayoutContainer","oven/unvetted/library/utility/configCollectionObserver","oven/components/plot/box","oven/components/flexibleTable/flexibleTable","oven/components/legend/legendConfig","oven/library/math/aabox","oven/unvetted/kernel/kernelDraw"],function(e,t,n,i,r,o,a,s,l){var u=e.Class.define(n,{init:function(e,t,n,u){var c,d=this;this.initSuper(e,t,n,!0),this._config=e.getConfigManager().getConfig(u),this._table=new a(e,null,null,!0,u),this._background=new o(e),this._background.backgroundColor=this._config.backgroundFill,this._container=c=new i,this._configObserver=r.create(e,s.ConfigNames.Legend,{add:function(){},update:function(e,t){var n;d._table.setConfig(t),n=d._table.getContentRect(),d.setSize(l.width(n),l.height(n))},remove:function(){}}),this._configObserver.init(),this.addContents(c),this.layout()},"private":{layout:function(){this._background&&this._container.addContents(this._background),this._table&&this._container.addContents(this._table);var e=this._table.getContentRect();this.setSize(l.width(e),l.height(e))}}});return u}),define("oven/unvetted/library/utility/bloombergPalette",[],function(){var e={QUANTILES_INDEX:0,PLOT_BACKGROUND_INDEX:1,BAR_COLORS_INDEX:2,AXIS_COLORS_INDEX:3,ANNOTATIONS_BRIGHT_COLORS:4,ANNOTATIONS_DARK_COLORS:5,MKTP_SUBSESSION_BACKGROUND:6,MKTP_SUBSESSION_HILIGHT:7,MKTP_AGGREGATE_VIEW_COLORS:8,MKTP_AGGREGATE_VIEW_COLORS_2:9,palette:[["rgb(240, 81, 51)","rgb(246, 138, 51)","rgb(255, 239, 0)","rgb(160, 207, 103)","rgb(94, 194, 165)","rgb(0, 188, 228)","rgb(28, 63, 148)","rgb(141, 100, 170)","rgb(230, 64, 151)","rgb(255, 0, 0)","rgb(255, 193, 0)","rgb(194, 255, 0)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(0, 101, 255)","rgb(0, 0, 255)","rgb(153, 0, 255)","rgb(255, 0, 255)","rgb(250, 128, 114)","rgb(255, 171, 165)","rgb(255, 198, 153)","rgb(255, 248, 153)","rgb(189, 255, 153)","rgb(153, 255, 212)","rgb(153, 237, 255)","rgb(153, 182, 255)","rgb(212, 153, 255)","rgb(255, 153, 218)","rgb(153, 88, 61)","rgb(153, 124, 61)","rgb(189, 183, 107)","rgb(135, 153, 61)","rgb(61, 153, 68)","rgb(61, 153, 147)","rgb(61, 112, 153)","rgb(74, 61, 153)","rgb(153, 61, 150)","rgb(153, 61, 77)","rgb(106, 90, 205)","rgb(86, 108, 225)","rgb(139, 0, 0)","rgb(102, 70, 0)","rgb(82, 102, 0)","rgb(0, 102, 8)","rgb(0, 102, 96)","rgb(14, 0, 102)","rgb(102, 0, 98)","rgb(72, 72, 72)","rgb(109, 109, 109)","rgb(145, 145, 145)","rgb(182, 182, 182)","rgb(218, 218, 218)","rgb(255, 255, 255)"],["rgb(0, 0, 0)","rgb(34, 50, 60)","rgb(255, 255, 255)"],["#599AD3","#CECECE"],["rgb(0, 0, 0)","rgb(34, 50, 60)","rgb(255, 255, 255)"],["#FFFFFF","#FF0000","#00FF00","#BCBC8F","#C05FBE","#EEE8AA","#00FFFF","#6495ED","#FFFF00","#3CB371","#E0B0FF","#FFD700","#C03232","#DB7093","#32C032","#5F5FC0","#98FB98","#B8860B","#C032C0","#48D1CC","#FA8072","#32C0C0","#C0C032","#FF8C00"],["#000000","#FF0000","#00FF00","#BCBC8F","#C05FBE","#DEB887","#00FFFF","#6495ED","#B8860B","#3CB371","#E0B0FF","#FFD700","#C03232","#DB7093","#32C032","#5F5FC0","#98FB98","#B8860B","#C032C0","#48D1CC","#FA8072","#32C0C0","#C0C032","#FF8C00"],["rgb(30, 66, 66)","rgb(66, 55, 33)","rgb(60, 30, 70)","rgb(44, 66, 33)","rgb(50, 40, 45)","rgb(60, 30, 30)"],["rgb(46, 98, 98)","rgb(98, 87, 65)","rgb(92, 62, 102)","rgb(76, 98, 65)","rgb(82, 72, 77)","rgb(92, 62, 62)"],["rgb(46, 98, 98)","rgb(98, 87, 65)","rgb(92, 62, 102)","rgb(76, 98, 65)","rgb(82, 72, 77)","rgb(92, 62, 62)"],["rgb(142,71,56)","rgb(107,15,76)","rgb(50,25,236)","rgb(40,71,155)","rgb(54,53,42)","rgb(178,68,70)","rgb(142,20,144)","rgb(30,24,141)","rgb(50,89,153)","rgb(88,71,56)","rgb(107,28,42)","rgb(40,45,189)","rgb(30,53,67)","rgb(130,89,70)","rgb(142,33,56)","rgb(81,15,141)","rgb(50,73,236)","rgb(40,71,56)","rgb(90,53,42)"]],getColor:function(t){return this.getPaletteColor(this.QUANTILES_INDEX,t%e.palette[this.QUANTILES_INDEX].length)},getPaletteColor:function(e,t){if(e>=this.palette.length||t>=this.palette[e].length)throw new Error("ERROR: Out of bounds for Color lookups nInPaletteIndex="+e+", nInColorIndex="+t);return this.palette[e][t]},getBackgroundColor:function(e){return this.getPaletteColor(this.PLOT_BACKGROUND_INDEX,e)},getBarColor:function(e){return this.getPaletteColor(this.BAR_COLORS_INDEX,e)},getAxisColor:function(e){return this.getPaletteColor(this.AXIS_COLORS_INDEX,e)}};return e}),define("oven/components/series/seriesComponent",["oven/3rdparty/sys-jscore/main","oven/components/plot/plotComponent","oven/unvetted/library/utility/idServer","oven/unvetted/contracts/events","oven/framework/data/view/dataViewAccessor","oven/components/series/seriesIterator","oven/unvetted/kernel/kernelDraw","oven/unvetted/kernel/kernelEnvironment","oven/components/plot/plotDefs","oven/components/series/seriesDefs","oven/components/series/barsDefs","oven/components/series/ramp","oven/unvetted/library/utility/bloombergPalette","oven/unvetted/library/utility/mathUtil","oven/library/math/point2d","oven/unvetted/library/utility/typedArrays","oven/components/plot/space2","oven/library/math/interval","oven/unvetted/library/utility/configDataAdapterObserver"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p,g,m,v,y){var b,_=n.create("series");return b=e.Class.define(t,{init:function(e,t,n,o,a){var s,u=this,d=[0,0];this.initSuper(e,_.create(t),n,o),this._configId=a,this._config=e.getConfigManager().getConfig(this._configId),this._dataAdapterId=null,this._dataAdapter=null,this._dataView=null,this._dataAccessor=null,this._seriesIterationDirty=!0,this._seriesIterator=null,this._seriesCount=0,this._ramp=null,this._createBarViewData=function(){function e(e,t,n){var a,s;o=u.viewContainerTransform,e===c.WidthAndSpacingModes.PercentOfAvailable?(a=[0,0],s=[[0,0],[0,0],[0,0]],this.f=function(e){var c,d,h,f,g,v,y=[0,0],b=u.space.dataModelTransform.forward,_=u.space.transformFunction(m.Spaces.Model,m.Spaces.View);return c=e.index(),d=e.count(),h=c-1>=0,f=d>c+1,v=u._dataAccessor.hasDataField("IndependentValue"),a[1]=i[1][0],a[0]=e.value(),b(s[1],a),h||f?(v?(a[0]=u._dataAccessor.columns.IndependentValue(Math.max(c-1,0)),b(s[0],a),a[0]=u._dataAccessor.columns.IndependentValue(Math.min(c+1,d-1)),b(s[2],a)):(a[0]=Math.max(c-1,0),b(s[0],a),a[0]=Math.min(c+1,d-1),b(s[2],a)),!h&&f?p.subVec2(s[0],s[1],p.sub(y,s[2],s[1])):h&&!f&&p.addVec2(s[2],s[1],p.sub(y,s[1],s[0])),_(s[0],s[0]),_(s[1],s[1]),_(s[2],s[2])):(_(s[1],s[1]),r===l.Orientation.East?(s[0][0]=0,s[0][1]=0,s[2][0]=1,s[2][1]=0):r===l.Orientation.West?(s[0][0]=1,s[0][1]=0,s[2][0]=0,s[2][1]=0):r===l.Orientation.South?(s[0][0]=0,s[0][1]=0,s[2][0]=0,s[2][1]=1):r===l.Orientation.North&&(s[0][0]=0,s[0][1]=1,s[2][0]=0,s[2][1]=0)),g=1-n*t,p.lerp(s[0],s[0],s[1],g),p.lerp(s[2],s[1],s[2],g),o.localForward(s[0],s[0]),o.localForward(s[2],s[2]),this.position[0]=s[0][0],this.position[1]=s[0][1],this.size=p.distance(s[0],s[2])*t,this.size0=.5*this.size,this.position}):this.f=function(e){var t=this.position;return t[0]=e.value(),t[1]=i[1][0],o.forward(t,t),this.size=this.width,this.size0=this.width_div_2,t}}function t(e,t,n,l,d,h,f){var g,m,v;i=u.visibleDomain,r=u.orientation[0],e===c.WidthAndSpacingModes.PercentOfPixels?(g=n,m=Math.min(g,t*g)):e===c.WidthAndSpacingModes.PercentOfData?(a[0]=i[0][0]+n,a[1]=i[1][0],o.forward(a,a),s[0]=i[0][0],s[1]=i[1][0],o.forward(s,s),g=p.distance(a,s),m=Math.min(g,t*g)):e===c.WidthAndSpacingModes.PercentOfAvailable&&(g=0,m=t),m=Math.max(Math.round(m),h),d&&0===m%2&&(m-=1),g=Math.max(Math.round(g),f),v=-Math.floor(l*m),this.width=m,this.spacing=g,this.offset=v,this.width_div_2=m/2,this.width_mod_2=m%2}function n(e,t,n,l){var d,h,f;i=u.visibleDomain,r=u.orientation[0],e===c.WidthAndSpacingModes.PercentOfPixels?(d=n,h=Math.min(d,t*d)):e===c.WidthAndSpacingModes.PercentOfData?(a[0]=i[0][0]+n,a[1]=i[1][0],o.forward(a,a),s[0]=i[0][0],s[1]=i[1][0],o.forward(s,s),d=p.distance(a,s),h=Math.min(d,t*d)):e===c.WidthAndSpacingModes.PercentOfAvailable&&(d=0,h=t),f=-l*h,this.width=h,this.spacing=d,this.offset=f,this.width_div_2=h/2,this.width_mod_2=h%2}var i,r,o,a=[0,0],s=[0,0];return{width:0,spacing:0,offset:0,width_div_2:0,width_mod_2:0,f:void 0,position:[0,0],size:0,size0:0,init:e,update:t,update_notround:n}},this._getSeriesIterationOrigins=function(e,t,n,i){var r,o,a=u.seriesIterator,s=u.visibleDomain[0][0];for(t=void 0===t?2:t,n=void 0===n?1:n,i=void 0===i?0:i,o=u.viewContainerTransform.forward,r=0,a.reset();!a.done();++r,a.next())d[0]=a.value(),d[1]=s,o(d,d),e[i]=d[0],e[i+n]=d[1],i+=t},this._dataObservers=[],this._dataDomainDirty=!1,this._dataDomain=[v.createEmpty(),v.createEmpty()],s={notify:function(e){var t=!1,n=!1;e.group===i.PROPERTYEVENT_GROUP&&e.type===i.PROPERTY_UPDATE&&e.events.forEach(function(e){e.configId===u._configId&&(t=!0,n=!0)}),t&&u.dirty(),n&&u.updateConfig()}},e.getEventManager().register(s,0,i.PROPERTYEVENT_GROUP),this._configDataAdapterObserver=y.create(e,{updateDataAdapterId:function(e,t,n,i){var o,a,s=u.publicThis;n&&(o=u._dataAdapter),i&&(a=u.sharedContext.getDataManager().getDataAdapter(i)),a?(u._dataAdapterId=i,u._dataAdapter=a,u._dataView=a.getDataView(),u._dataAccessor=r.create(u._dataView)):(u._dataAdapterId=null,u._dataAdapter=null,u._dataView=null,u._dataAccessor=null),u._seriesIterator=null,u._dataDomainDirty=!0,u._dataObservers.forEach(function(e){e.dataObserverAdapterModified(s,n,o,i,a)}),u.updateDataAdapter()},updateDataAdapter:function(e,t,n){var i=u._dataAdapter,r=u.publicThis;u._dataAccessor&&u._dataAccessor.update(),u.dirtySeriesIteration(),u._dataDomainDirty=!0,u._dataObservers.forEach(function(e){e.dataObserverDataModified(r,n,i)}),u.updateData(),u.dirty()}}),this._configDataAdapterObserver.addSubject(a,"dataAdapterId"),this._configDataAdapterObserver.init()},"private":{updateSeriesIteration:function(){var e;this._dataView?(this._seriesIterator||(this._seriesIterator=this.getIterator()),e=this.visibleDomain[0],e[0]>e[1]?this._seriesIterator.setRange(e[1],e[0]):this._seriesIterator.setRange(e[0],e[1]),this._seriesCount=this._seriesIterator.count()):(this._seriesIterator=null,this._seriesCount=0)}},"protected":{configId:{get:function(){return this._configId}},config:{get:function(){return this._config}},dataAccessor:{get:function(){return this._dataAccessor}},dataView:{get:function(){return this._dataView}},seriesIterator:{get:function(){return this._seriesIterationDirty&&(this.updateSeriesIteration(),this._seriesIterationDirty=!1),this._seriesIterator}},seriesCount:{get:function(){return this._seriesIterationDirty&&(this.updateSeriesIteration(),this._seriesIterationDirty=!1),this._seriesCount}},updateRamp:function(e,t,n,i){try{this._ramp=d.createFromStrings(e,t,n,i)}catch(r){this._ramp=d.createFromStrings(d.ColorModels.RGB,d.InterpolationTypes.LINEAR,[0,1],["#000000","#ffffff"])}},updatePerDatumColorFunction:function(e,t,n,i){var r,o,a,s;return this._dataView&&(r=this._dataView.getDataTable().getData(),o=this._dataView.getDataSchema().getFieldIndex(n),a=this._dataView.getDataSchema().getFieldIndex(i)),e===u.ColorModes.Data&&r&&void 0!==o?function(e){return r[e][o]}:e===u.ColorModes.PerDatumPalette?function(e){return h.getColor(e)}:e===u.ColorModes.Ramp&&r&&void 0!==a?(s=this,function(e){return s._ramp(r[e][a])}):function(){return t}},updatePerDatumTooltipFunction:function(e,t){var n,i;return this._dataView&&(n=this._dataView.getDataTable().getData(),i=this._dataView.getDataSchema().getFieldIndex(t)),e===u.TooltipModes.Data&&n&&void 0!==i?function(e){var t=n[e][i];return t.length>0?t:null}:function(){return null}},ramp:{get:function(){return this._ramp}},createBarViewData:{get:function(){return this._createBarViewData}},getSeriesIterationOrigins:{get:function(){return this._getSeriesIterationOrigins}},getMultiSeriesIndices:function(){var e,t,n,i,r=[];if(this._dataView)for(e=this._dataView.getDataSchema(),t=0;n=e.getFieldIndex("DependentValue"+(t+1)),void 0!==n;++t)r.push(n);return i=g.createUint32Array(r.length),r.forEach(function(e,t){i[t]=e}),i},updateDataDomainWithDependentValuesIteratorAndHolePredicate:function(e,t,n){function i(e){a=Math.min(a,e),s=Math.max(s,e)}function r(e,t){var n,i,r;for(n=0,i=t.length;i>n;++n)r=t[n],l=Math.min(l,r),u=Math.max(u,r)}function o(e,t,n,o){i(e,t,n,o),r(e,t,n,o)}var a=1/0,s=-1/0,l=1/0,u=-1/0;t&&(n?t.forEachAllDependentValuesRanges(n,null,o,i,null,null):t.forEachAllDependentValues(o)),e[0][0]=a,e[0][1]=s,e[1][0]=l,e[1][1]=u}},"public":{dataAdapterId:{get:function(){return this._dataAdapterId}},dataAdapter:{get:function(){return this._dataAdapter}},addDataObserver:function(e){var t=this._dataObservers.indexOf(e);if(-1!==t)throw new Error("Data observer is already associated with series component "+this.id);this._dataObservers.push(e)},removeDataObserver:function(e){var t=this._dataObservers.indexOf(e);if(-1===t)throw new Error("Data observer is not associated with series component "+this.id);this._dataObservers.splice(t,1)},removeAllDataObservers:function(){this._dataObservers.length=0},dataDomain:{get:function(){return this._dataDomainDirty&&(this.updateDataDomain(this._dataDomain),this._dataDomainDirty=!1),this._dataDomain}}},virtual:{override:{updateView:function(){this.super.updateView(),this.dirtySeriesIteration()},updateWindow:function(){this.super.updateWindow(),this.dirtySeriesIteration()}},"private":{getIterator:function(){return o.create(this._dataView,this._dataAccessor.hasDataField("IndependentValue")?"IndependentValue":void 0,-1/0,1/0,this.viewContainerTransform.forward)}},"protected":{updateConfig:function(){},dirtySeriesIteration:function(){this._seriesIterationDirty=!0},updateDataAdapter:function(){},updateData:function(){},updateDataDomain:function(e){function t(e){i=Math.min(i,e),r=Math.max(r,e)}var n=this.seriesIterator,i=1/0,r=-1/0,o=1/0,a=-1/0;n&&n.forEachAll(t),e[0][0]=i,e[0][1]=r,e[1][0]=o,e[1][1]=a}}}})}),define("oven/library/math/line2",[],function(){var e={INSIDE:0,LEFT:1,RIGHT:2,BOTTOM:4,TOP:8},t={createPointSlope:function(e,n,i){return{x:e,y:n,slope:i,evaluate:function(e){return t.evaluate(this,e)}}},create:function(e,t,n,i){return this.createPointSlope(e,t,(i-t)/(n-e))},evaluate:function(e,t){return e.slope*(t-e.x)+e.y},lineSegementIntersectsPoint:function(e,t,n){var i=e[0],r=e[1],o=t[0],a=t[1],s=n[0],l=n[1];return Math.abs((a-r)*(s-i)-(l-r)*(o-i))>=Math.max(Math.abs(o-i),Math.abs(a-r))?!1:i>o&&s>i||r>a&&l>r?!1:i>s&&o>i||r>l&&a>r?!1:o>i&&s>o||a>r&&l>a?!1:o>s&&i>o||a>l&&r>a?!1:!0},lineSegmentIntersectsLineSegment:function(e,t,n,i){var r,o,a=e[0],s=e[1],l=n[0],u=n[1],c=t[0],d=t[1],h=i[0],f=i[1],p=c-a,g=d-s,m=h-l,v=f-u;return r=(-g*(a-l)+p*(s-u))/(-m*g+p*v),o=(m*(s-u)-v*(a-l))/(-m*g+p*v),r>=0&&1>=r&&o>=0&&1>=o?!0:void 0},lineSegmentIntersectsRectangle:function(e,n,i){var r=[i[0],i[1]],o=[i[0]+i[2],i[1]],a=[i[0],i[1]+i[3]],s=[i[0]+i[2],i[1]+i[3]];return t.lineSegmentIntersectsLineSegment(e,n,r,o)||t.lineSegmentIntersectsLineSegment(e,n,r,a)||t.lineSegmentIntersectsLineSegment(e,n,o,s)||t.lineSegmentIntersectsLineSegment(e,n,a,s)?!0:r[0]<e[0]&&e[0]<o[0]&&r[1]<e[1]&&e[1]<o[1]?!0:!1},clip:function(t,n,i,r,o){var a=o.left,s=o.right,l=o.top,u=o.bottom,c=function(t,n){var i;return i=e.INSIDE,a>t?i|=e.LEFT:t>s&&(i|=e.RIGHT),l>n?i|=e.TOP:n>u&&(i|=e.BOTTOM),i},d=function(){for(var o=c(t,n),d=c(i,r),h=!1;;){if(!o&&!d){h=!0;break}if(o&d)break;var f,p,g=o||d;g&e.TOP?(f=t+(i-t)*(l-n)/(r-n),p=l):g&e.BOTTOM?(f=t+(i-t)*(u-n)/(r-n),p=u):g&e.RIGHT?(p=n+(r-n)*(s-t)/(i-t),f=s):g&e.LEFT&&(p=n+(r-n)*(a-t)/(i-t),f=a),g===o?(t=f,n=p,o=c(t,n)):(i=f,r=p,d=c(i,r))}return h?[t,n,i,r]:null};return d()}};return t}),define("oven/components/series/line",["oven/3rdparty/sys-jscore/main","oven/components/series/seriesComponent","oven/unvetted/library/utility/idServer","oven/unvetted/contracts/events","oven/unvetted/kernel/kernelDraw","oven/components/plot/plotDefs","oven/components/series/seriesDefs","oven/components/series/lineDefs","oven/library/math/spline","oven/library/math/aabox","oven/library/math/geometry2d/point2d","oven/library/math/line2","oven/library/math/interval","oven/components/series/seriesIterator","oven/unvetted/library/utility/typedArrays","oven/unvetted/kernel/kernelUtil","oven/components/plot/plotContainer"],function(mJSCore,SeriesComponent,IDServer,Events,KernelDraw,mPlotDefs,mSeriesDefs,mLineDefs,mSpline,AABox,Point2d,Line2,Interval,SeriesIterator,TypedArrays,KernelUtil,PlotContainer){var ids=IDServer.create("line"),LineComponent;return LineComponent=mJSCore.Class.define(SeriesComponent,{init:function(sharedContext,id,rect,configId){function updateColorFns(){m_colorFnsDirty&&(m_lineColorFn=that.updatePerDatumColorFunction(that.config.lineColorMode,m_lineColor,"Color","Data"),m_fillColorFn=that.updatePerDatumColorFunction(that.config.fillColorMode,m_fillColor,"Color","Data"),m_colorFnsDirty=!1)}function updateTooltipFn(){m_tooltipFnDirty&&(m_tooltipFn=that.updatePerDatumTooltipFunction(m_tooltipMode,"Tooltip"),m_tooltipFnDirty=!1)}function updateFillBoundary(){var e=that.seriesIterator,t=that.dataAccessor,n=that.config;if(m_fillBoundaryDirty){if(n.fillColorMode!==mSeriesDefs.ColorModes.None)if(m_fillBoundaryMode=n.fillBoundaryMode,n.lineStyle!=mLineDefs.LineStyles.Line){if(n.fillBoundaryMode===mLineDefs.FillBoundaryModes.Config?m_fillBoundaryValue=n.fillBoundary:n.fillBoundaryMode===mLineDefs.FillBoundaryModes.Min?m_fillBoundaryValue=1/0:n.fillBoundaryMode===mLineDefs.FillBoundaryModes.Max&&(m_fillBoundaryValue=-1/0),n.fillBoundaryMode===mLineDefs.FillBoundaryModes.Min||n.fillBoundaryMode===mLineDefs.FillBoundaryModes.Max)for(e.reset();!e.done();e.next())n.fillBoundaryMode===mLineDefs.FillBoundaryModes.Min?m_fillBoundaryValue=Math.min(m_fillBoundaryValue,t.columns.DependentValue(e.index())):n.fillBoundaryMode===mLineDefs.FillBoundaryModes.Max&&(m_fillBoundaryValue=Math.max(m_fillBoundaryValue,t.columns.DependentValue(e.index())))}else m_fillBoundaryMin=void 0===n.fillBoundaryMin?n.fillBoundary:n.fillBoundaryMin,m_fillBoundaryMax=void 0===n.fillBoundaryMax?n.fillBoundary:n.fillBoundaryMax;m_fillBoundaryDirty=!1}}function updateCurveGeometry(){function e(){var e,t,n,i,r,o,a,s,l,u,c,d=that.seriesIterator,h=that.dataAccessor;for(n=that.seriesCount,r=[0,0],o=new Array(2*n),a=0,m_geometry=[],t=0,d.reset();n>t;++t,d.next())c=d.index(),e=h.rows(c),0===t?l=d.value():t===n-1&&(u=d.value()),d.map(r,e.DependentValue),m_geometry.push({seriesIndex:c,point:[r[0],r[1]]}),o[a]=r[0],o[a+1]=r[1],a+=2;for(s=new Array(mSpline.countRequired(3,2,n+2)),mSpline.cardinalToBezier(s,2,1,6,2,n,o,2,1,0,.5),r[0]=l,r[1]=m_fillBoundaryValue,that.viewContainerTransform.forward(r,r),t=0,i=0;3>t;++t,i+=2)s[i]=r[0],s[i+1]=r[1];for(r[0]=u,r[1]=m_fillBoundaryValue,that.viewContainerTransform.forward(r,r),t=0,i=mSpline.countRequired(3,2,n+1);3>t;++t,i+=2)s[i]=r[0],s[i+1]=r[1];return s}m_curveGeometryDirty&&(that.config.lineStyle===mLineDefs.LineStyles.Curve&&that.seriesCount>0?(m_curveGeometryCount=that.seriesCount+2*(that.seriesCount-1),m_curveGeometry=e()):(m_curveGeometryCount=0,m_curveGeometry=void 0),m_curveGeometryDirty=!1)}function doCachedFillGeom(){return that.config.fillColorMode===mSeriesDefs.ColorModes.ConfigSolid||that.config.fillColorMode===mSeriesDefs.ColorModes.ConfigGradient}function updateFillGeometry(){function computeFillGeometry(fillBoundaryMode){function transformPtToProperSpace(e){that.space.transformFunction(mPlotDefs.Spaces.Data,mPlotDefs.Spaces.Model)(e,e)}function lineSegmentLineSegmentIntersection(e,t,n,i){var r=e[0],o=t[0],a=n[0],s=i[0],l=e[1],u=t[1],c=n[1],d=i[1],h=r instanceof Date?10:1e-6,f=l instanceof Date?10:1e-6,p=(r-o)*(c-d)-(l-u)*(a-s);if(0==p)return null;var g=r*u-l*o,m=a*d-c*s,v=(g*(a-s)-(r-o)*m)/p,y=(g*(c-d)-(l-u)*m)/p;return v<Math.min(r,o)-h||v>Math.max(r,o)+h||v<Math.min(a,s)-h||v>Math.max(a,s)+h?null:y<Math.min(l,u)-f||y>Math.max(l,u)+f||y<Math.min(c,d)-f||y>Math.max(c,d)+f?null:[v,y]}function computeFillY(){var e;return fillBoundaryValue===-1/0?(e=[0,1],that.space.transformFunction(mPlotDefs.Spaces.View,mPlotDefs.Spaces.Model)(e,e)):1/0===fillBoundaryValue?(e=[0,0],that.space.transformFunction(mPlotDefs.Spaces.View,mPlotDefs.Spaces.Model)(e,e)):e=[0,fillBoundaryValue],e[1]}function getCurrentGeomAndSetIteratorPosition(){var e,t;if(seriesIterator.reset(),t=seriesIterator.value(),0===fillGeometry.length)e=[];else{var n=that.dataAccessor.length-m_fillNumData;if(1===n){for(var i=seriesIterator.indexMax()-1;seriesIterator.index()!=i&&(seriesIterator.next(),!seriesIterator.done()););var r=seriesIterator.value();if(t>=m_fillCachedDataRange[0]&&r==m_fillCachedDataRange[1]){var o=fillGeometry[fillGeometry.length-1];prev_pt=[r,dataAccessor.rows(i).DependentValue],transformPtToProperSpace(prev_pt),prev_pt[0]===o[o.length-1][0]?(o.pop(),prev_added=!0,e=o):e=[],seriesIterator.done()||seriesIterator.next()}else e=[]}else e=[]}return e}function getIsectPtWithBoundary(e,t){var n=lineSegmentLineSegmentIntersection(e,t,[e[0],fill_y],[t[0],fill_y]);if(null===n)n=[t[0],fill_y];else{var i=[0,0];that.viewContainerTransform.forward(i,n),isFinite(i[0])&&isFinite(i[1])||(n=[t[0],fill_y])}return n}var currGeom,pt,data,fill_y,prev_pt,iterval,trans_pt=[0,0],prev_added=!1,evalstr="1",seriesIterator=that.seriesIterator,dataAccessor=that.dataAccessor,fillGeometry,fillBoundaryValue;if(fillBoundaryMode===mLineDefs.FillBoundaryModes.Min?(fillGeometry=m_fillGeometryMin,fillBoundaryValue=m_fillBoundaryMin):fillBoundaryMode===mLineDefs.FillBoundaryModes.Max&&(fillGeometry=m_fillGeometryMax,fillBoundaryValue=m_fillBoundaryMax),fillGeometry.length&&(1/0===fillBoundaryValue||fillBoundaryValue===-1/0)){fill_y=computeFillY();for(var i=0;i<fillGeometry.length;i++)fillGeometry[i].length>=2&&(fillGeometry[i][0][1]=fill_y,fillGeometry[i][fillGeometry[i].length-1][1]=fill_y)}if(m_fillCacheGeometryDirty&&!(0==that.seriesCount||fillBoundaryMode===mLineDefs.FillBoundaryModes.Min&&1/0===fillBoundaryValue||fillBoundaryMode===mLineDefs.FillBoundaryModes.Max&&fillBoundaryValue===-1/0))if(that.config.lineStyle===mLineDefs.LineStyles.Line){currGeom=getCurrentGeomAndSetIteratorPosition();var currGeomFound=currGeom.length>0;for(fill_y=void 0===fill_y?computeFillY():fill_y,fillBoundaryMode===mLineDefs.FillBoundaryModes.Min?evalstr="pt[1] >= fillBoundaryValue":fillBoundaryMode===mLineDefs.FillBoundaryModes.Max&&(evalstr="pt[1] <= fillBoundaryValue");!seriesIterator.done();)data=dataAccessor.rows(seriesIterator.index()),iterval=seriesIterator.value(),pt=[iterval,data.DependentValue],transformPtToProperSpace(pt),eval(evalstr)?(prev_added||(0===currGeom.length&&void 0===prev_pt?currGeom.push([pt[0],fill_y]):currGeom.push(getIsectPtWithBoundary(prev_pt,pt)),prev_added=!0),currGeom.push(pt)):prev_added&&(currGeom.push(getIsectPtWithBoundary(pt,prev_pt)),currGeomFound||fillGeometry.push(currGeom),currGeom=[],prev_added=!1),prev_pt=pt,seriesIterator.next();currGeom.length&&(currGeom.push([pt[0],fill_y]),currGeomFound||fillGeometry.push(currGeom))}else that.config.lineStyle===mLineDefs.LineStyles.Curve||that.config.lineStyle===mLineDefs.LineStyles.Step}if(m_fillGeometryDirty){if(doCachedFillGeom()){(m_fillGeometryMin.length||m_fillGeometryMax.length)&&that.dataAccessor.length<m_fillNumData&&that._resetCachedFillGeometry(!0),m_fillBoundaryMode===mLineDefs.FillBoundaryModes.Min?computeFillGeometry(mLineDefs.FillBoundaryModes.Min):m_fillBoundaryMode===mLineDefs.FillBoundaryModes.Max?computeFillGeometry(mLineDefs.FillBoundaryModes.Max):m_fillBoundaryMode===mLineDefs.FillBoundaryModes.MinMax&&(computeFillGeometry(mLineDefs.FillBoundaryModes.Min),computeFillGeometry(mLineDefs.FillBoundaryModes.Max)),m_fillNumData=that.dataAccessor.length;var startIterValue=that.seriesIterator.valueMin(),endIterValue=that.seriesIterator.valueMax();startIterValue<m_fillCachedDataRange[0]&&(m_fillCachedDataRange[0]=startIterValue),endIterValue>m_fillCachedDataRange[1]&&(m_fillCachedDataRange[1]=endIterValue),m_fillCacheGeometryDirty=!1}m_fillGeometryDirty=!1}}function updateGradient(e){if(m_gradientDirty){var t=that.config;t.fillColorMode===mSeriesDefs.ColorModes.ConfigGradient&&(m_fillColor=that.computeAxisGradient(e,0,t.fillColorGradient0,t.fillColorGradient1),m_fillColorMin=void 0===t.fillBoundaryMinColorGradient0||void 0===t.fillBoundaryMinColorGradient1?m_fillColor:that.computeAxisGradient(e,0,t.fillBoundaryMinColorGradient0,t.fillBoundaryMinColorGradient1),m_fillColorMax=void 0===t.fillBoundaryMaxColorGradient0||void 0===t.fillBoundaryMaxColorGradient1?m_fillColor:that.computeAxisGradient(e,0,t.fillBoundaryMaxColorGradient0,t.fillBoundaryMaxColorGradient1)),m_gradientDirty=!1}}function allocateRenderGeometry(e,t){return(!t||e>t.length)&&(t=TypedArrays.createFloat32Array(e)),t}function drawLine(){function e(e,t,o){r.transformDependentValue(m_tmpPoint0,0),m_points_geometry[i++]=m_tmpPoint0[0],m_points_geometry[i++]=m_tmpPoint0[1],m_geometry.push({seriesIndex:o,point:[m_tmpPoint0[0],m_tmpPoint0[1]]}),n++}function t(){n>1?KernelDraw.drawPathIA(m_points_geometry,n,void 0,void 0,void 0,!1,!1,!0,!1):1===n&&KernelDraw.drawQuad(m_points_geometry[i-2]-m_lineWidth,m_points_geometry[i-1]-m_lineWidth,m_points_geometry[i-2]+m_lineWidth,m_points_geometry[i-1]+m_lineWidth,!0,!1,!1)}var n,i,r=that.seriesIterator;m_enableHighlighting&&m_highlighted&&m_highlightColor?(KernelDraw.setStrokeStyle(m_highlightColor),KernelDraw.setFillStyle(m_highlightColor)):(KernelDraw.setStrokeStyle(m_lineColor),KernelDraw.setFillStyle(m_lineColor)),m_points_geometry=allocateRenderGeometry(2*r.count(),m_points_geometry),m_geometry=[],that._holePredicate?(n=0,i=0,r.forEachDependentValuesRanges(that._holePredicate,function(){n=0,i=0},e,null,function(){t()})):(n=0,i=0,r.forEachDependentValues(e),t())}function drawCurveLine(){that.seriesCount<2||(m_enableHighlighting&&m_highlighted&&m_highlightColor?KernelDraw.setStrokeStyle(m_highlightColor):KernelDraw.setStrokeStyle(m_lineColor),KernelDraw.drawBezierPathIA(3,m_curveGeometry,mSpline.countRequired(3,1,that.seriesCount),void 0,void 0,6,!1,!1,!0,!1))}function drawStepLine(){var e=that.seriesIterator,t=that.dataAccessor,n=0,i=[0,0],r=[0,0];KernelDraw.setStrokeStyle(m_lineColor),e.reset(),KernelDraw.drawPathFn(function(o){var a,s=1===n%2;(0===n||s)&&(a=t.rows(e.index()),e.map(r,a.DependentValue),e.next()),s?(o[0]=r[0],o[1]=i[1]):(o[0]=r[0],o[1]=r[1],i[0]=r[0],i[1]=r[1]),++n},2*that.seriesCount-1,!1,!1,!0,!1)}function drawDotDashLine(){var e=that.seriesIterator,t=that.dataAccessor;m_enableHighlighting&&m_highlighted&&m_highlightColor?KernelDraw.setStrokeStyle(m_highlightColor):KernelDraw.setStrokeStyle(m_lineColor),e.reset(),m_geometry=[],KernelDraw.drawDotDashPathFn(function(n){var i,r=e.index();i=t.rows(r),e.map(n,i.DependentValue),m_geometry.push({seriesIndex:r,point:[n[0],n[1]]}),e.next()},that.seriesCount,m_dotDashArray)}function drawMulticoloredLine(){function e(e,t,a){o.transformDependentValue(m_tmpPoint0,0),m_points_geometry[i++]=m_tmpPoint0[0],m_points_geometry[i++]=m_tmpPoint0[1],r[n]=m_lineColorFn(a),m_geometry.push({seriesIndex:a,point:[m_tmpPoint0[0],m_tmpPoint0[1]]}),n++}function t(){var e,t=2;if(n>1)for(e=1;n>e;++e)KernelDraw.setStrokeStyle(r[e]),KernelDraw.drawLine(m_points_geometry[t-2],m_points_geometry[t-1],m_points_geometry[t],m_points_geometry[t+1]),t+=2;else 1===n&&(KernelDraw.setFillStyle(r[n-1]),KernelDraw.drawQuad(m_points_geometry[i-2]-m_lineWidth,m_points_geometry[i-1]-m_lineWidth,m_points_geometry[i-2]+m_lineWidth,m_points_geometry[i-1]+m_lineWidth,!0,!1,!1))}var n,i,r,o=that.seriesIterator;m_points_geometry=allocateRenderGeometry(2*o.count(),m_points_geometry),r=new Array(o.count()),m_geometry=[],that._holePredicate?(n=0,i=0,o.forEachDependentValuesRanges(that._holePredicate,function(){n=0,i=0
},e,null,function(){t()})):(n=0,i=0,o.forEachDependentValues(e),t())}function drawFill(){function e(e,r){for(KernelDraw.setFillStyle(e),t=0;t<r.length;t++)n=0,KernelDraw.drawPathFn(function(e){i(e,r[t][n]),n++},r[t].length,!0,!0,!1,!1)}var t,n,i;i=PlotContainer.GetCoordinateSystemToContainerTransform(that.space,mPlotDefs.Spaces.Model,that.viewContainerTransform),e(m_fillColorMin,m_fillGeometryMin),e(m_fillColorMax,m_fillGeometryMax)}function drawCurveFill(){KernelDraw.setFillStyle(m_fillColor),KernelDraw.drawBezierPathIA(3,m_curveGeometry,mSpline.countRequired(3,1,that.seriesCount+2),void 0,void 0,0,!0,!0,!1,!1)}function drawStepFill(){var e,t=that.seriesIterator,n=that.dataAccessor,i=0,r=2*that.seriesCount,o=[0,0],a=[0,0];KernelDraw.setFillStyle(m_fillColor),t.reset(),KernelDraw.drawPathFn(function(s){var l,u=0===i%2;l=n.rows(t.index()),0===i?t.map(s,m_fillBoundaryValue):i===r?(s[0]=e,s[1]=m_fillBoundaryValue,that.viewContainerTransform.forward(s,s)):((1===i||u)&&(e=t.value(),a[0]=e,a[1]=m_fillBoundaryValue,that.viewContainerTransform.forward(s,s),t.next()),u?(s[0]=a[0],s[1]=o[1]):(s[0]=a[0],s[1]=a[1],o[0]=a[0],o[1]=a[1])),++i},r+1,!0,!0,!1,!1)}function handleMouseMove(e){var t,n,i,r,o=[e.x,e.y],a=!1;if(Point2d.transform(o,o,that.componentFromCanvasTransform),r=[o[0]-3,o[1]-3,6,6],m_geometry.length>0)for(t=1;t<m_geometry.length;++t)n=m_geometry[t-1].point,i=m_geometry[t].point,Line2.lineSegmentIntersectsRectangle(n,i,r)&&(a=!0,m_highlighted=!0,m_tooltipSeries={seriesIndex:t,point:[e.x,e.y]},that.dirty());!a&&m_highlighted&&(m_highlighted=!1,m_tooltipSeries=null,m_tooltipProvider.hideTooltip(),that.dirty())}function handleMouseLeave(){m_highlighted&&(m_highlighted=!1,m_tooltipSeries=null,m_tooltipProvider.hideTooltip(),that.dirty())}var that=this,m_alpha,m_lineColor,m_lineWidth,m_fillColor,m_dotDashArray,m_highlightColor=null,m_highlightWidth=0,m_colorFnsDirty,m_lineColorFn,m_fillColorFn,m_drawLineFn,m_drawFillFn,m_fillBoundaryDirty,m_fillBoundaryValue,m_fillBoundaryMode,m_fillColorMin,m_fillColorMax,m_fillBoundaryMin,m_fillBoundaryMax,m_fillGeometryMin,m_fillGeometryMax,m_fillGeometryDirty,m_fillCacheGeometryDirty,m_fillNumData=0,m_fillCachedDataRange,m_cachedDataAdapterId,m_curveGeometryDirty,m_curveGeometryCount,m_curveGeometry,m_gradientDirty,m_enableHighlighting=!1,m_highlightMode,m_highlighted,m_tooltipProvider=sharedContext.getTooltipProvider(),m_enableTooltips=!1,m_tooltipMode,m_tooltipFn=null,m_tooltipFnDirty=!0,m_tooltipContent=null,m_tooltipSeries=null,m_enableInteractions=!0,m_geometry=[],m_tmpPoint0=[0,0],m_tmpPoint1=[0,0],m_points_geometry;this.initSuper(sharedContext,ids.create(id),rect,!1,configId),this._updateConfig=function(){var e=that.config;m_enableInteractions=e.enableInteractions,m_alpha=e.alpha,e.lineColorMode===mSeriesDefs.ColorModes.ConfigSolid&&(m_lineColor=e.lineColor),m_lineWidth=e.lineWidth,e.fillColorMode===mSeriesDefs.ColorModes.ConfigSolid&&(m_fillColor=e.fillColor,m_fillColorMin=void 0===e.fillBoundaryMinColor?m_fillColor:e.fillBoundaryMinColor,m_fillColorMax=void 0===e.fillBoundaryMaxColor?m_fillColor:e.fillBoundaryMaxColor),e.lineColorMode===mSeriesDefs.ColorModes.None?m_drawLineFn=void 0:e.lineColorMode===mSeriesDefs.ColorModes.ConfigSolid?m_drawLineFn=e.lineStyle===mLineDefs.LineStyles.Curve?drawCurveLine:e.lineStyle===mLineDefs.LineStyles.Step?drawStepLine:e.lineStyle===mLineDefs.LineStyles.DotDash?drawDotDashLine:e.lineStyle===mLineDefs.LineStyles.Line?drawLine:drawLine:(e.lineColorMode===mSeriesDefs.ColorModes.Data||e.lineColorMode===mSeriesDefs.ColorModes.PerDatumPalette||e.lineColorMode===mSeriesDefs.ColorModes.Ramp)&&(m_drawLineFn=drawMulticoloredLine),e.fillColorMode===mSeriesDefs.ColorModes.None?m_drawFillFn=void 0:e.fillColorMode===mSeriesDefs.ColorModes.ConfigSolid||e.fillColorMode===mSeriesDefs.ColorModes.ConfigGradient?m_drawFillFn=e.lineStyle===mLineDefs.LineStyles.Curve?drawCurveFill:e.lineStyle===mLineDefs.LineStyles.Step?drawStepFill:drawFill:e.fillColorMode===mSeriesDefs.ColorModes.Data||e.fillColorMode===mSeriesDefs.ColorModes.PerDatumPalette||e.lineColorMode===mSeriesDefs.ColorModes.Ramp,m_highlightMode=e.highlightMode,m_enableHighlighting=m_enableInteractions&&m_highlightMode!==mSeriesDefs.HighlightModes.None,m_dotDashArray=e.dotDashArray&&e.dotDashArray.length>0?e.dotDashArray:[3,5,1,5],m_highlightColor=e.highlightColor.length>0?e.highlightColor:null,m_highlightWidth=e.highlightWidth>0?e.highlightWidth:null,m_tooltipMode=e.tooltipMode,m_enableTooltips=m_enableInteractions&&m_tooltipMode!==mSeriesDefs.TooltipModes.None,m_tooltipContent=e.tooltipContent.length>0?e.tooltipContent:null,that.updateRamp(e.rampColorModel,e.rampInterpolationType,e.rampKnots,e.rampColors),m_colorFnsDirty=!0,m_fillBoundaryDirty=!0,m_curveGeometryDirty=!0,m_gradientDirty=!0,m_tooltipFnDirty=!0,that._holePredicate=SeriesIterator.getSolidPredicateFromConfig(e.holePredicate),(e.fillBoundaryMode!==m_fillBoundaryMode||e.fillBoundary!==m_fillBoundaryValue||e.fillBoundaryMin!==m_fillBoundaryMin||e.fillBoundaryMax!==m_fillBoundaryMax)&&(m_fillGeometryDirty=!0,m_fillCacheGeometryDirty=!0)},this._holePredicate=null,this._updateView=function(){m_gradientDirty=!0},this._updateWindow=function(){m_gradientDirty=!0},this._dirtySeriesIteration=function(){m_colorFnsDirty=!0,m_curveGeometryDirty=!0,m_tooltipFnDirty=!0,m_fillGeometryDirty=!0},this._resetCachedFillGeometry=function(e){e=void 0===e?!1:!0,(that.dataAdapterId!==m_cachedDataAdapterId||e)&&(m_cachedDataAdapterId=that.dataAdapterId,m_fillGeometryMin=[],m_fillGeometryMax=[],m_fillCachedDataRange=[1/0,-1/0],m_fillGeometryDirty=!0,m_fillCacheGeometryDirty=!0)},this._updateCachedFillGeometry=function(){doCachedFillGeom()&&(m_fillGeometryDirty=!0,m_fillCacheGeometryDirty=!0)},this._draw=function(){var e=that.canvas.context();if(KernelDraw.setContext(e),KernelDraw.canvas.save(),KernelDraw.setTransform(that.componentToCanvasTransform),that.drawClip(),KernelDraw.setAlpha(m_alpha),m_enableHighlighting&&m_highlighted&&m_highlightWidth?KernelDraw.setLineWidth(m_highlightWidth):KernelDraw.setLineWidth(m_lineWidth),updateColorFns(),updateFillBoundary(),updateCurveGeometry(),updateFillGeometry(),updateGradient(e),updateTooltipFn(),m_drawFillFn&&m_drawFillFn(),m_drawLineFn&&m_drawLineFn(),KernelDraw.canvas.restore(),m_enableTooltips&&m_tooltipFn&&m_tooltipSeries){var t=m_tooltipFn(m_tooltipSeries.seriesIndex);null!==t?m_tooltipProvider.showTooltip(m_tooltipSeries.point[0],m_tooltipSeries.point[1],t):m_tooltipMode===mSeriesDefs.TooltipModes.Config&&m_tooltipContent&&(t=m_tooltipContent,m_tooltipProvider.showTooltip(m_tooltipSeries.point[0],m_tooltipSeries.point[1],t))}};var handler={notify:function(e){var t=that.canvasRect;if(e.group===Events.BASEEVENTS_GROUP&&m_enableInteractions)switch(e.type){case Events.MOUSE_MOVE:AABox.contains(t,[e.x,e.y])?handleMouseMove(e):m_highlighted&&handleMouseLeave(e);break;case Events.MOUSE_LEAVE:handleMouseLeave(e)}}};sharedContext.getEventManager().register(handler,0,Events.BASEEVENTS_GROUP),this.updateConfig(),this.updateDataAdapter(),this.updateData()},virtual:{override:{getDraw:function(){return this._draw},updateView:function(){this.super.updateView(),this._updateView()},updateWindow:function(){this.super.updateWindow(),this._updateWindow()},updateConfig:function(){this.super.updateConfig(),this._updateConfig()},dirtySeriesIteration:function(){this.super.dirtySeriesIteration(),this._dirtySeriesIteration()},updateDataAdapter:function(){this.super.updateDataAdapter(),this._resetCachedFillGeometry()},updateData:function(){this.super.updateData(),this._updateCachedFillGeometry()},getIterator:function(){return SeriesIterator.createWithDependentValues(this.dataView,this.config.independentValueMode!==mSeriesDefs.IndependentValueModes.Disable&&this.dataAccessor.hasDataField("IndependentValue")?"IndependentValue":void 0,["DependentValue"],-1/0,1/0,this.viewContainerTransform.forward)},updateDataDomain:function(e){this.updateDataDomainWithDependentValuesIteratorAndHolePredicate(e,this.seriesIterator,this._holePredicate)}}}})}),define("oven/components/series/bars",["oven/3rdparty/sys-jscore/main","oven/components/series/seriesComponent","oven/unvetted/library/utility/idServer","oven/unvetted/contracts/events","oven/unvetted/kernel/kernelDraw","oven/components/plot/plotDefs","oven/components/series/seriesDefs","oven/components/series/seriesIterator","oven/library/math/aabox","oven/library/math/geometry2d/point2d"],function(e,t,n,i,r,o,a,s,l,u){var c,d=n.create("bars");return c=e.Class.define(t,{init:function(e,t,n,c){function h(){j&&(D=B.updatePerDatumColorFunction(B.config.lineColorMode,A,"Color","Data"),N=B.updatePerDatumColorFunction(B.config.fillColorMode,k,"Color","Data"),j=!1)}function f(){et&&(Z=B.updatePerDatumTooltipFunction(Q,"Tooltip","Data"),et=!1)}function p(){if(F){var e=B.config;E.update(e.barWidthAndSpacingMode,e.barWidth,e.barSpacing,e.barAlign,!0,3,3),F=!1}}function g(e,t,n,i){var r=[0,i];E.f(t),t.map(V,n),B.viewContainerTransform.forward(r,r),e[0]=Math.round(E.position[0]+E.offset),e[1]=Math.round(r[1]),e[2]=Math.round(E.size),e[3]=Math.round(V[1]-e[1])}function m(e,t,n,i){var r=[i,0];E.f(t),t.map(V,n),B.viewContainerTransform.forward(r,r),e[0]=Math.round(r[0]),e[1]=Math.round(E.position[1]+E.offset),e[2]=Math.round(V[0]-e[0]),e[3]=Math.round(E.size)}function v(){if(H){var e=B.orientation[0];O=e===o.Orientation.East||e===o.Orientation.West?g:e===o.Orientation.North||e===o.Orientation.South?m:g,H=!1}}function y(e){if(R){var t=B.config;t.fillColorMode===a.ColorModes.ConfigGradient&&(k=B.computeAxisGradient(e,0,t.fillColorGradient0,t.fillColorGradient1)),R=!1}}function b(e){e[2]<0&&(e[0]=e[0]+e[2],e[2]=-e[2]),e[3]<0&&(e[1]=e[1]+e[3],e[3]=-e[3])}function _(e,t,n,i,o,a){M%2?(o&&r.drawRect(e,t,n,i,!0,!1,!1),a&&r.drawRect(e+.5,t+.5,n,i,!1,!0,!1)):r.drawRect(e,t,n,i,o,a,!1)}function x(){function e(e,i,r){O(z,t,i[0],n),b(z),_(z[0],z[1],z[2],z[3],P,I),$.push({seriesIndex:r,aabox:[z[0],z[1],z[0]+z[2],z[1]+z[3]]})}var t=B.seriesIterator,n=B.config.originValue;P&&r.setFillStyle(k),I&&r.setStrokeStyle(A),$=[],B._holePredicate?t.forEachDependentValuesRanges(B._holePredicate,null,e,null,null):t.forEachDependentValues(e)}function w(){function e(e,i,o){O(z,t,i[0],n),b(z),P&&r.setFillStyle(N(o)),I&&r.setStrokeStyle(D(o)),_(z[0],z[1],z[2],z[3],P,I),$.push({seriesIndex:o,aabox:[z[0],z[1],z[0]+z[2],z[1]+z[3]]})}var t=B.seriesIterator,n=(B.seriesCount,B.dataAccessor,B.config.originValue);B._holePredicate?t.forEachDependentValuesRanges(B._holePredicate,null,e,null,null):t.forEachDependentValues(e)}function C(e){var t,n,i=[e.x,e.y],r=!1;for(u.transform(i,i,B.componentFromCanvasTransform),t=0;t<$.length;++t)n=$[t].aabox,l.contains(n,i)&&(r=!0,Y=n,nt={seriesIndex:$[t].seriesIndex,point:[e.x,e.y]},B.dirty());!r&&Y&&(Y=null,nt=null,K.hideTooltip(),B.dirty())}function T(){Y&&(Y=null,nt=null,K.hideTooltip(),B.dirty())}var E,S,k,A,M,N,D,P,I,O,R,L,B=this,F=!0,j=!0,H=!0,V=[0,0],z=[0,0,0,0],$=[],U=!1,W=null,q=null,G=0,X=null,Y=null,K=e.getTooltipProvider(),J=!1,Q=null,Z=null,et=!0,tt=null,nt=null,it=!0;this.initSuper(e,d.create(t),n,!1,c),E=this.createBarViewData(),this._updateConfig=function(){var e=B.config;it=e.enableInteractions,S=e.alpha,e.fillColorMode===a.ColorModes.None?(k=void 0,P=!1):(k=e.fillColor,P=!0),e.lineColorMode===a.ColorModes.None?(A=void 0,I=!1):(A=e.lineColor,I=!0),M=e.lineWidth||1,W=e.highlightMode,U=it&&W!==a.HighlightModes.None,q=e.highlightBorderColor.length>0?e.highlightBorderColor:null,G=e.highlightBorderWidth>0?e.highlightBorderWidth:null,X=e.highlightFillColor.length>0?e.highlightFillColor:null,Q=e.tooltipMode,J=it&&Q!==a.TooltipModes.None,tt=e.tooltipContent.length>0?e.tooltipContent:null,E.init(e.barWidthAndSpacingMode,e.barWidth,e.barAlign),F=!0,L=e.fillColorMode===a.ColorModes.Data||e.fillColorMode===a.ColorModes.PerDatumPalette||e.fillColorMode===a.ColorModes.Ramp||e.lineColorMode===a.ColorModes.Data||e.lineColorMode===a.ColorModes.PerDatumPalette?w:x,B.updateRamp(e.rampColorModel,e.rampInterpolationType,e.rampKnots,e.rampColors),j=!0,R=!0,et=!0,B._holePredicate=s.getSolidPredicateFromConfig(e.holePredicate)},this._holePredicate=null,this._updateView=function(){F=!0,H=!0,R=!0},this._updateWindow=function(){F=!0,R=!0},this._dirtySeriesIteration=function(){j=!0,F=!0,et=!0},this._draw=function(){var e=B.canvas.context(),t=q&&G;if(!(B.seriesCount<1)&&(r.setContext(e),r.save(),r.setTransform(B.componentToCanvasTransform),B.drawClip(),h(),p(),v(),y(e),f(),r.setAlpha(S),r.setLineWidth(M),L(),U&&Y&&(t||X)&&(t&&(r.setLineWidth(G),r.setStrokeStyle(q)),X&&r.setFillStyle(X),_(Y[0],Y[1],Y[2]-Y[0],Y[3]-Y[1],null!==X,t)),r.restore(),J&&Z&&nt)){var n=Z(nt.seriesIndex);null!==n?K.showTooltip(nt.point[0],nt.point[1],n):Q===a.TooltipModes.Config&&tt&&(n=tt,K.showTooltip(nt.point[0],nt.point[1],n))}};var rt={notify:function(e){var t=B.canvasRect;if(e.group===i.BASEEVENTS_GROUP&&it)switch(e.type){case i.MOUSE_MOVE:l.contains(t,[e.x,e.y])?C(e):Y&&T(e);break;case i.MOUSE_LEAVE:T(e)}}};e.getEventManager().register(rt,0,i.BASEEVENTS_GROUP),this.updateConfig(),this.updateDataAdapter(),this.updateData()},virtual:{override:{getDraw:function(){return this._draw},updateView:function(){this.super.updateView(),this._updateView()},updateWindow:function(){this.super.updateWindow(),this._updateWindow()},updateConfig:function(){this.super.updateConfig(),this._updateConfig()},dirtySeriesIteration:function(){this.super.dirtySeriesIteration(),this._dirtySeriesIteration()},getIterator:function(){return s.createWithDependentValues(this.dataView,this.config.independentValueMode!==a.IndependentValueModes.Disable&&this.dataAccessor.hasDataField("IndependentValue")?"IndependentValue":void 0,["DependentValue"],-1/0,1/0,this.viewContainerTransform.forward)},updateDataDomain:function(e){this.updateDataDomainWithDependentValuesIteratorAndHolePredicate(e,this.seriesIterator,this._holePredicate)}}}})}),define("oven/components/series/ohlcBars",["oven/3rdparty/sys-jscore/main","oven/components/series/seriesComponent","oven/unvetted/library/utility/idServer","oven/unvetted/contracts/events","oven/unvetted/kernel/kernelDraw","oven/components/plot/plotDefs","oven/components/series/seriesDefs","oven/components/series/seriesIterator","oven/library/math/algebra/vec2d","oven/library/math/geometry2d/point2d","oven/library/math/base/mathExt"],function(e,t,n,i,r,o,a,s,l,u,c){function d(e,t,n){var i=t[0],r=t[1];return e[0]=0!==n[0]?i:0!==n[3]?r:null,e[1]=0!==n[1]?i:0!==n[4]?r:null,e}var h,f=n.create("ohlcBars");return h=e.Class.define(t,{init:function(e,t,n,i){function o(){if(N){var e,t,n=M.config;b.update_notround(n.barWidthAndSpacingMode,n.barWidth,n.barSpacing,n.barAlign),e=M.space.axisAlignedOrientationMatrix,t=Math.round(Math.max(w+1,b.width_div_2)),I[0]=b.offset+b.width_div_2,I[1]=0,O[0]=-t,O[1]=0,R[0]=t,R[1]=0,L[0]=0,L[1]=1,l.transform(I,I,e),l.transform(O,O,e),l.transform(R,R,e),l.transform(L,L,e),d(F,[C?h.CanvasRasterOptions.Center:h.CanvasRasterOptions.Floor,h.CanvasRasterOptions.Round],e),d(j,[h.CanvasRasterOptions.Floor,C?h.CanvasRasterOptions.Center:h.CanvasRasterOptions.Round],e),d(H,[C?h.CanvasRasterOptions.Ceil:h.CanvasRasterOptions.Floor,C?h.CanvasRasterOptions.Center:h.CanvasRasterOptions.Round],e),N=!1}}function p(e,t){var n;return u.subPoint(B,P[2],e),n=l.dot(B,L),n>-w?(l.scale(B,L,-w-n),u.subVec(e,e,B),u.subVec(t,t,B),void 0):(u.subPoint(B,e,P[1]),n=l.dot(B,L),n>-w?(l.scale(B,L,-w-n),u.addVec(e,e,B),u.addVec(t,t,B),void 0):void 0)}function g(e,t,n){b.f(e),D[1]=Math.max(n[1],n[2]),D[2]=Math.min(n[1],n[2]),D[0]=c.clamp(n[0],D[2],D[1]),D[3]=c.clamp(n[3],D[2],D[1]),e.transformAOA(P,D),u.addVec(P[0],P[0],I),u.addVec(P[1],P[1],I),u.addVec(P[2],P[2],I),u.addVec(P[3],P[3],I),u.addVec(P[4],P[0],O),u.addVec(P[5],P[3],R),p(P[0],P[4]),p(P[3],P[5]),M.transformComponentToCanvasRasterOptions(P[0],P[0],j[0],j[1]),M.transformComponentToCanvasRasterOptions(P[1],P[1],F[0],F[1]),M.transformComponentToCanvasRasterOptions(P[2],P[2],F[0],F[1]),M.transformComponentToCanvasRasterOptions(P[3],P[3],H[0],H[1]),M.transformComponentToCanvasRasterOptions(P[4],P[4],j[0],j[1]),M.transformComponentToCanvasRasterOptions(P[5],P[5],H[0],H[1])}function m(e){e.beginPath(),e.moveTo(P[1][0],P[1][1]),e.lineTo(P[2][0],P[2][1]),e.moveTo(P[0][0],P[0][1]),e.lineTo(P[4][0],P[4][1]),e.moveTo(P[3][0],P[3][1]),e.lineTo(P[5][0],P[5][1]),e.stroke()}function v(e){function t(t,i){var o=i[0],a=i[3];a>o?r.setStrokeStyle(E):o>a?r.setStrokeStyle(S):r.setStrokeStyle(T),g(n,t,i),m(e)}var n=M.seriesIterator;M._holePredicate?n.forEachDependentValuesRanges(M._holePredicate,null,t,null,null):n.forEachDependentValues(t)}function y(){function e(e,n){r.setStrokeStyle(k(t.index())),g(t,e,n),m(ctx)}var t=M.seriesIterator;M._holePredicate?t.forEachDependentValuesRanges(M._holePredicate,null,e,null,null):t.forEachDependentValues(e)}var b,_,x,w,C,T,E,S,k,A,M=this,N=!0,D=[0,0,0,0],P=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],I=[0,0],O=[0,0],R=[0,0],L=[0,0],B=[0,0],F=[h.CanvasRasterOptions.None,h.CanvasRasterOptions.None],j=[h.CanvasRasterOptions.None,h.CanvasRasterOptions.None],H=[h.CanvasRasterOptions.None,h.CanvasRasterOptions.None];this.initSuper(e,f.create(t),n,!1,i),b=this.createBarViewData(),this._updateConfig=function(){var e=M.config;_=e.alpha,T=e.color,E=e.gainColor,S=e.lossColor,x=e.lineWidth,w=x/2,C=x%2,b.init(e.barWidthAndSpacingMode,e.barWidth,e.barAlign),N=!0,A=e.colorMode===a.ColorModes.Data||e.colorMode===a.ColorModes.PerDatumPalette||e.colorMode===a.ColorModes.Ramp?y:v,M._holePredicate=s.getSolidPredicateFromConfig(e.holePredicate)},this._holePredicate=null,this._updateView=function(){N=!0},this._updateWindow=function(){N=!0},this._dirtySeriesIteration=function(){N=!0},this._draw=function(){var e=M.canvas.context();M.seriesCount<1||(r.setContext(e),r.canvas.save(),r.setIdentityTransform(),M.drawClip(),o(),r.setAlpha(_),r.setLineWidth(x),A(e),r.canvas.restore())},this.updateConfig(),this.updateDataAdapter(),this.updateData()},virtual:{override:{getDraw:function(){return this._draw},updateView:function(){this.super.updateView(),this._updateView()},updateWindow:function(){this.super.updateWindow(),this._updateWindow()},updateConfig:function(){this.super.updateConfig(),this._updateConfig()},dirtySeriesIteration:function(){this.super.dirtySeriesIteration(),this._dirtySeriesIteration()},getIterator:function(){return s.createWithDependentValues(this.dataView,this.config.independentValueMode!==a.IndependentValueModes.Disable&&this.dataAccessor.hasDataField("IndependentValue")?"IndependentValue":void 0,["Open","High","Low","Close"],-1/0,1/0,this.viewContainerTransform.forward)},updateDataDomain:function(e){function t(e){a=Math.min(a,e),s=Math.max(s,e)}function n(e,t){var n;n=t[1],l=Math.min(l,n),u=Math.max(u,n),n=t[2],l=Math.min(l,n),u=Math.max(u,n)}function i(e,i,r,o){t(e,i,r,o),n(e,i,r,o)}var r=this.seriesIterator,o=this._holePredicate,a=1/0,s=-1/0,l=1/0,u=-1/0;r&&(o?r.forEachAllDependentValuesRanges(o,null,i,t,null,null):r.forEachAllDependentValues(i)),e[0][0]=a,e[0][1]=s,e[1][0]=l,e[1][1]=u}}}})}),define("oven/components/series/ohlcCandles",["oven/3rdparty/sys-jscore/main","oven/components/series/seriesComponent","oven/unvetted/library/utility/idServer","oven/unvetted/contracts/events","oven/unvetted/kernel/kernelDraw","oven/components/plot/plotDefs","oven/components/series/seriesDefs","oven/components/series/seriesIterator","oven/library/math/algebra/vec2d","oven/library/math/geometry2d/point2d","oven/library/math/base/mathExt"],function(e,t,n,i,r,o,a,s,l,u,c){function d(e,t,n){var i=t[0],r=t[1];return e[0]=0!==n[0]?i:0!==n[3]?r:null,e[1]=0!==n[1]?i:0!==n[4]?r:null,e}var h,f=n.create("ohlcCandles");return h=e.Class.define(t,{init:function(e,t,n,i){function o(){if(D){var e,t,n=N.config;y.update_notround(n.candleWidthAndSpacingMode,n.candleWidth,n.candleSpacing,n.candleAlign),e=N.space.axisAlignedOrientationMatrix,t=Math.round(Math.max(x+1,y.width_div_2)),O[0]=y.offset+y.width_div_2,O[1]=0,R[0]=-t,R[1]=0,L[0]=t,L[1]=0,B[0]=x,B[1]=x,F[0]=-x,F[1]=-x,l.transform(O,O,e),l.transform(R,R,e),l.transform(L,L,e),l.transform(B,B,e),l.transform(F,F,e),d(j,[w?h.CanvasRasterOptions.Center:h.CanvasRasterOptions.Floor,h.CanvasRasterOptions.Round],e),d(H,[w?h.CanvasRasterOptions.Floor:h.CanvasRasterOptions.Round,h.CanvasRasterOptions.Round],e),d(V,[w?h.CanvasRasterOptions.Ceil:h.CanvasRasterOptions.Round,h.CanvasRasterOptions.Round],e),D=!1}}function p(e,t,n){var i,r;y.f(e),P[1]=Math.max(n[1],n[2]),P[2]=Math.min(n[1],n[2]),P[0]=c.clamp(Math.max(n[0],n[3]),P[2],P[1]),P[3]=c.clamp(Math.min(n[0],n[3]),P[2],P[1]),e.transformAOA(I,P),u.addVec(I[0],I[0],O),u.addVec(I[1],I[1],O),u.addVec(I[2],I[2],O),u.addVec(I[3],I[3],O),u.addVec(I[4],I[0],R),u.addVec(I[5],I[3],L),i=j[0],r=j[1],N.transformComponentToCanvasRasterOptions(I[0],I[0],i,r),N.transformComponentToCanvasRasterOptions(I[1],I[1],i,r),N.transformComponentToCanvasRasterOptions(I[2],I[2],i,r),N.transformComponentToCanvasRasterOptions(I[3],I[3],i,r),i=H[0],r=H[1],N.transformComponentToCanvasRasterOptions(I[4],I[4],i,r),i=V[0],r=V[1],N.transformComponentToCanvasRasterOptions(I[5],I[5],i,r)}function g(e){k&&(e.fillStyle=k,e.beginPath(),e.rect(I[4][0],I[4][1],I[5][0]-I[4][0],I[5][1]-I[4][1]),e.fill()),e.strokeStyle=k?k:C,e.beginPath(),e.moveTo(I[1][0],I[1][1]),e.lineTo(I[0][0],I[0][1]),e.moveTo(I[3][0],I[3][1]),e.lineTo(I[2][0],I[2][1]),e.stroke()}function m(e){function t(t,i){var o=i[0],a=i[3];a>o?k=E:o>a?k=S:(r.setFillStyle(T),k=T),r.setFillStyle(k),p(n,t,i),g(e)}var n=N.seriesIterator;r.setStrokeStyle(C),N._holePredicate?n.forEachDependentValuesRanges(N._holePredicate,null,t,null,null):n.forEachDependentValues(t)}function v(){function e(e,n){r.setStrokeStyle(A(t.index())),p(t,e,n),g(ctx)}var t=N.seriesIterator;N._holePredicate?t.forEachDependentValuesRanges(N._holePredicate,null,e,null,null):t.forEachDependentValues(e)}var y,b,_,x,w,C,T,E,S,k,A,M,N=this,D=!0,P=[0,0,0,0],I=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],O=[0,0],R=[0,0],L=[0,0],B=[0,0],F=[0,0],j=[h.CanvasRasterOptions.None,h.CanvasRasterOptions.None],H=[h.CanvasRasterOptions.None,h.CanvasRasterOptions.None],V=[h.CanvasRasterOptions.None,h.CanvasRasterOptions.None];this.initSuper(e,f.create(t),n,!1,i),y=this.createBarViewData(),this._updateConfig=function(){var e=N.config;b=e.alpha,_=e.lineWidth,x=_/2,w=_%2,T=e.color,E=e.gainColor,S=e.lossColor,C=e.lineColor,y.init(e.candleWidthAndSpacingMode,e.candleWidth,e.candleAlign),D=!0,M=e.colorMode===a.ColorModes.Data||e.colorMode===a.ColorModes.PerDatumPalette||e.colorMode===a.ColorModes.Ramp?v:m,N._holePredicate=s.getSolidPredicateFromConfig(e.holePredicate)},this._holePredicate=null,this._updateView=function(){D=!0},this._updateWindow=function(){D=!0},this._dirtySeriesIteration=function(){D=!0},this._draw=function(){var e=N.canvas.context();N.seriesCount<1||(r.setContext(e),r.canvas.save(),r.setIdentityTransform(),N.drawClip(),o(),r.setAlpha(b),r.setLineWidth(_),M(e),r.canvas.restore())},this.updateConfig(),this.updateDataAdapter(),this.updateData()},virtual:{override:{getDraw:function(){return this._draw},updateView:function(){this.super.updateView(),this._updateView()},updateWindow:function(){this.super.updateWindow(),this._updateWindow()},updateConfig:function(){this.super.updateConfig(),this._updateConfig()},dirtySeriesIteration:function(){this.super.dirtySeriesIteration(),this._dirtySeriesIteration()},getIterator:function(){return s.createWithDependentValues(this.dataView,this.config.independentValueMode!==a.IndependentValueModes.Disable&&this.dataAccessor.hasDataField("IndependentValue")?"IndependentValue":void 0,["Open","High","Low","Close"],-1/0,1/0,this.viewContainerTransform.forward)},updateDataDomain:function(e){function t(e){a=Math.min(a,e),s=Math.max(s,e)}function n(e,t){var n;n=t[1],l=Math.min(l,n),u=Math.max(u,n),n=t[2],l=Math.min(l,n),u=Math.max(u,n)}function i(e,i,r,o){t(e,i,r,o),n(e,i,r,o)}var r=this.seriesIterator,o=this._holePredicate,a=1/0,s=-1/0,l=1/0,u=-1/0;r&&(o?r.forEachAllDependentValuesRanges(o,null,i,t,null,null):r.forEachAllDependentValues(i)),e[0][0]=a,e[0][1]=s,e[1][0]=l,e[1][1]=u}}}})}),define("oven/components/plot/referenceLine",["oven/3rdparty/sys-jscore/main","oven/components/plot/plotComponent","oven/unvetted/library/utility/idServer","oven/components/plot/plotDefs","oven/unvetted/kernel/kernelDraw","oven/unvetted/contracts/events"],function(e,t,n,i,r,o){var a,s=n.create("referenceLine");return a=e.Class.create(t,{init:function(e,t,n,a){var l,u,c,d=this,h=[0,0],f=[[0,0],[0,0]];this.initSuper(e,s.create(t),n,!1),this._index=0,this._position=[.5,.5],this._lineColor="#535353",this._lineWidth=1,this._lineDash=[],this._draw=function(){var e,t=d.canvas.context(),n=d._index,o=d.coordinateSystem,a=d.viewContainerTransform.localForward,s=d._lineDash&&d._lineDash.length>0;r.setContext(t),r.canvas.save(),r.setTransform(d.componentToCanvasTransform),d.drawClip(),r.setStrokeStyle(d._lineColor),r.setLineWidth(d._lineWidth),o===i.Spaces.View?(h[0]=d._position[0],h[1]=d._position[1]):(e=o===i.Spaces.Container?d.viewContainerTransform.localReverse:d.space.transformFunction(o,i.Spaces.View),e(h,d._position)),(0===n||2===n)&&(a(f[0],[h[0],0]),a(f[1],[h[0],1]),s?r.dotDashLine(f[0][0],f[0][1],f[1][0],f[1][1],d._lineDash):r.drawLine(f[0][0],f[0][1],f[1][0],f[1][1])),(1===n||2===n)&&(a(f[0],[0,h[1]]),a(f[1],[1,h[1]]),s?r.dotDashLine(f[0][0],f[0][1],f[1][0],f[1][1],d._lineDash):r.drawLine(f[0][0],f[0][1],f[1][0],f[1][1])),r.canvas.restore()},a&&""!==a?(l=a,u=e.getConfigManager().getConfig(l),this._updateConfig=function(){d._index=u.index,d.coordinateSystem=u.coordinateSystem,d._position[0]=u.position0,d._position[1]=u.position1,d._lineColor=u.lineColor,d._lineWidth=u.lineWidth,d._lineDash=u.lineDash,d.dirty()},c={notify:function(e){var t=!1;e.group===o.PROPERTYEVENT_GROUP&&e.events.forEach(function(e){e.configId===l&&(t=!0)}),t&&d._updateConfig()}},e.getEventManager().register(c,0,o.PROPERTYEVENT_GROUP),this._updateConfig()):this._updateConfig=null},"public":{index:{set:function(e){this._index=e,this.dirty()},get:function(){return this._index}},position:{set:function(e){this._position[0]=e[0],this._position[1]=e[1],this.dirty()},get:function(){return this._position}},lineColor:{set:function(e){this._lineColor=e,this.dirty()},get:function(){return this._lineColor}},lineWidth:{set:function(e){this._lineWidth=e,this.dirty()},get:function(){return this._lineWidth}},lineDash:{set:function(e){this._lineDash=e.slice(0),this.dirty()},get:function(){return this._lineDash}}},virtual:{override:{getDraw:function(){return this._draw},updateView:function(){this.super.updateView()},updateWindow:function(){this.super.updateWindow()}}}})}),define("oven/library/container/baseCompatibility/fromInteraction",["oven/3rdparty/sys-jscore/main","oven/library/container/container","oven/unvetted/library/boundingBox","oven/library/math/aabox"],function(e,t,n,i){var r;return r=e.Class.define(t,{init:function(e,t){var i,r=this,o=t,a=n.createBoundingBox(0,0,1,1);this.initSuper(t.id,void 0,void 0),this._interaction=o,this._tmpBoundingBox=a,this._interaction_setBoundingBox=i=o.setBoundingBox,o.setBoundingBox=function(e){i&&i.call(o,e),r.setPosition(e.left,e.top),r.setSize(e.right-e.left,e.bottom-e.top)}},"public":{adapted:{get:function(){return this._interaction}}},"private":{updateBoundingBox:function(){var e,t=this._interaction,n=this._tmpBoundingBox;e=this.worldRect,e&&!i.empty(e)&&(n.left=e[0],n.top=e[1],n.right=e[2],n.bottom=e[3],n.width=e[2]-e[0],n.height=e[3]-e[1],this._interaction_setBoundingBox&&this._interaction_setBoundingBox.call(t,n))}},virtual:{override:{setContext:function(e){this.super.setContext(e),this._interaction.adapter=e?this.publicThis:null},setPosition:function(e,t){this.super.setPosition(e,t),this.updateBoundingBox()},setSize:function(e,t){this.super.setSize(e,t),this.updateBoundingBox()}}}})}),define("oven/components/plot/plotInteraction",["oven/3rdparty/sys-jscore/main","oven/library/container/baseCompatibility/fromInteraction","oven/components/plot/plotContainer","oven/components/plot/plotDefs"],function(e,t,n,i){var r,o;return o=e.Class.create(n.Mapper,{init:function(e){this.initSuper(e),this._interaction=e},virtual:{override:{modifiedMapper:function(e){this.super.modifiedMapper(e),e.depth<this.depth?this._interaction.updateView():this._interaction.updateWindow()}}}}),r=e.Class.define(t,{init:function(e,t,r){var a=this,s=null,l=null;r.id=r.id||t,this.initSuper(e,r),this._viewContainerTransform=new o(this.publicThis),this._space=null,this._coordinateSystem=i.Spaces.View,this._transformsDirty=!0,this._toContainer=null,this._fromContainer=null,this._fromWorld=function(e,t){var n=a.containerFromWorldTransform;return e[0]=t[0]+n[6],e[1]=t[1]+n[7],l(e,e)},this._updateTransforms=function(){a._toContainer=s=n.GetCoordinateSystemToContainerTransform(a._space,a._coordinateSystem,a._viewContainerTransform),a._fromContainer=l=n.GetContainerToCoordinateSystemTransform(a._space,a._viewContainerTransform,a._coordinateSystem),a._transformsDirty=!1},this._interaction=r},"public":{viewContainerTransform:{get:function(){return this._viewContainerTransform}},space:{set:function(e){this._space!==e&&(this._space&&this._space.worldViewTransform.removeChild(this._viewContainerTransform),this._space=e,this._transformsDirty=!0,this.updateView(),this._space&&this._space.worldViewTransform.addChild(this._viewContainerTransform))},get:function(){return this._space}},coordinateSystem:{set:function(e){this._coordinateSystem=e,this._transformsDirty=!0},get:function(){return this._coordinateSystem}},interaction:{get:function(){return this._interaction}},toContainer:{get:function(){return this._transformsDirty&&this._updateTransforms(),this._toContainer}},fromContainer:{get:function(){return this._transformsDirty&&this._updateTransforms(),this._fromContainer}},fromWorld:{get:function(){return this._transformsDirty&&this._updateTransforms(),this._fromWorld}}},virtual:{override:{setSize:function(e,t){this.super.setSize(e,t),this._viewContainerTransform.updateRect()}},"public":{updateView:function(){},updateWindow:function(){}}}})}),define("oven/components/plot/plotNavigation",["oven/3rdparty/sys-jscore/main","oven/components/plot/plotInteraction","oven/library/plot/linearMapper"],function(e,t,n){function i(t,i){if(i[0]&&!e.Class.isInstanceOf(n,i[0])||i[1]&&!e.Class.isInstanceOf(n,i[1]))throw new Error("PlotAreaNavigation "+t+": mappers must be instances of the LinearMapper class")}var r;return r=e.Class.define(t,{init:function(e,t,n,i){this.initSuper(e,t,n),this._mappers=[null,null],i&&(this.mappers=i)},"public":{mappers:{set:function(e){i(this.id,e),this._mappers[0]=e[0],this._mappers[1]=e[1]},get:function(){return this._mappers}}}})}),define("oven/components/plot/plotAreaNavigationInteractions",["oven/3rdparty/sys-jscore/main","oven/components/plot/plotNavigation","oven/unvetted/library/interactions/panInteraction","oven/unvetted/contracts/events","oven/components/plot/plotDefs"],function(e,t,n,i,r){function o(e){var t=[0,0],n=[0,0],o=[0,0],a=e;return{bindAxis:function(){return this},notify:function(e){var s,l,u,c,d;return e.type===i.CHART_PAN||e.type===i.CHART_PAN_END?(u=a.space,c=a.mappers[0],d=a.mappers[1],a.viewContainerTransform.localForward(t,[.5,.5]),s=u.visibleDirection[0],a.viewContainerTransform.localReverse(n,[t[0]+e.offsetX*s[0],t[1]+e.offsetY*s[1]]),s=u.visibleDirection[1],a.viewContainerTransform.localReverse(o,[t[0]+e.offsetX*s[0],t[1]+e.offsetY*s[1]]),l=u.transformFunction(r.Spaces.View,r.Spaces.Model),l(t,[.5,.5]),l(n,n),l(o,o),c.transform(1,n[0]-t[0]),d.transform(1,-(o[1]-t[1])),!0):void 0}}}var a;return a=e.Class.define(t,{init:function(e,t,i){var r,a;r=n.createPanInteraction(e),this.initSuper(e,t,r,i),a=o(this.publicThis),r.bindBehavior(a)}})}),define("oven/components/plot/axisNavigationInteractions",["oven/3rdparty/sys-jscore/main","oven/components/plot/plotNavigation","oven/unvetted/library/interactions/panInteraction","oven/unvetted/contracts/events","oven/library/math/geometry2d/point2d"],function(e,t,n,i,r){function o(e,t,n){var o=e,a=t,s=n,l=0,u=[0,0],c=[0,0],d=0,h=0;return{bindAxis:function(){return this},notify:function(e){var n;if(e.type===i.CHART_PAN||e.type===i.CHART_PAN_END){if(n=a.mappers[s],e.type===i.CHART_PAN&&0===l)return l=1,u[0]=o.startX,u[1]=o.startY,r.transform(u,u,t.containerFromWorldTransform),a.viewContainerTransform.localReverse(u,u),d=u[s],h=u[s],!0;if(e.type===i.CHART_PAN&&1===l)return c[0]=o.currentX,c[1]=o.currentY,r.transform(c,c,t.containerFromWorldTransform),a.viewContainerTransform.localReverse(c,c),n.transform(1,-h),n.transform(c[s]/d,0),n.transform(1,h),d=c[s],!0;if(e.type===i.CHART_PAN_END&&1===l)return l=0,!0}}}}var a;return a=e.Class.define(t,{init:function(e,t,i,r){var a,s;a=n.createPanInteraction(e),this.initSuper(e,t,a,i),s=o(a,this.publicThis,r),a.bindBehavior(s)
}})}),define("oven/unvetted/library/math/dataTransformers/subsetDataTransformer",["oven/framework/data/view/dataView","oven/unvetted/library/math/stats/statsCalcFactory"],function(e,t){var n={create:function(n,i,r){function o(){var t=n.getDataTable();l=e.create(n.getViewName(),n.getViewType(),n.getDataSchema(),n.getMetaBlockSchema(),function(e){u=e,u.setData(t.getData().slice(i,r+1))})}function a(e,n){var i,r,o,a,s,u=e.getStatsInfo(n);for(r in u)u.hasOwnProperty(r)&&(o=u[r],a=l.getDataTable(),s=l.getDataSchema().getFieldIndex(o.fieldName),i=t.create(o.statsCalcType,a,s),d.push({name:r,columnIndex:s,calc:i}))}function s(){var e,t,n,i,r,o,a,s={};for(e=0,t=d.length;t>e;e++){n=d[e],i=n.columnIndex,r=n.calc.calculate(),s.hasOwnProperty(i)||(s[i]={}),a=s[i];for(o in r)r.hasOwnProperty(o)&&(a[o]=r[o])}u.setStatsBlock(s)}var l,u,c,d=[];return c={getDataView:function(){return l},calculateStats:function(){s()},bindToDataContract:a},o(),c}};return n}),define("oven/library/container/baseCompatibility/fromBaseComponent",["oven/3rdparty/sys-jscore/main","oven/library/container/component","oven/unvetted/library/boundingBox","oven/library/math/aabox"],function(e,t,n,i){var r;return r=e.Class.define(t,{init:function(e,t){var i,r,o=this,a=t,s=n.createBoundingBox(0,0,1,1);this.initSuper(e,t.name||t.id,void 0,!1),this._component=a,this._tmpBoundingBox=s,this._isInteractive=void 0!==t.notify,this._draw=function(){a.draw()},this._component_setBoundingBox=i=a.setBoundingBox,a.setBoundingBox=function(e){i&&i.call(a,e),o.setPosition(e.left,e.top),o.setSize(e.right-e.left,e.bottom-e.top)},r=a.dirty,a.dirty=function(){r&&r.call(a),o.dirty()},this._parent_reference={boundingBox:n.createBoundingBox(0,0,1,1),offsetX:0,offsetY:0}},"public":{adapted:{get:function(){return this._component}},isInteractive:{get:function(){return this._isInteractive}}},"private":{updateBoundingBox:function(){var e,t=this._component,n=t.setBoundingBox,r=this._tmpBoundingBox;e=this.canvasRect,n&&e&&!i.empty(e)&&(r.left=e[0],r.top=e[1],r.right=e[2],r.bottom=e[3],r.width=e[2]-e[0],r.height=e[3]-e[1],this._component_setBoundingBox&&this._component_setBoundingBox.call(t,r))}},virtual:{override:{dirtyWorldStuff:function(){var e,t,n,i;this.super.dirtyWorldStuff(),t=this.parent,t&&(e=this.parent.worldRect,n=this._parent_reference,i=n.boundingBox,i.left=e[0],i.top=e[1],i.right=e[2],i.bottom=e[3],i.width=e[2]-e[0],i.height=e[3]-e[1],n.offsetX=e[0],n.offsetY=e[1])},setContext:function(e){this.super.setContext(e),e?(this._component.adapter=this.publicThis,this._component.parent=this._parent_reference):(this._component.adapter=null,this._component.parent=null)},setPosition:function(e,t){this.super.setPosition(e,t),this.updateBoundingBox()},setSize:function(e,t){this.super.setSize(e,t),this.updateBoundingBox()},getDraw:function(){return this._draw}}}})}),define("oven/library/container/interactionContainer",["oven/3rdparty/sys-jscore/main","oven/library/container/vislet","oven/unvetted/contracts/events","oven/library/math/geometry2d/point2d","oven/library/collections/stack","oven/library/container/baseCompatibility/fromBaseComponent","oven/library/container/baseCompatibility/fromInteraction","oven/unvetted/library/interaction","oven/unvetted/library/utility/algorithm"],function(e,t,n,i,r,o,a,s,l){function u(t){return e.Class.isInstanceOf(a,t)||e.Class.isInstanceOf(o,t)&&t.isInteractive}var c;return c=e.Class.define(t,{init:function(e,t){var o,a=this;this.initSuper(e,t,void 0,!1),this._sharedContext=e,this._activeInteraction=null,this._hits=[[],[]],this._hitsIdx=0,this._tmpPoint1=i.create(),this._tmpPoint2=i.create(),this._tmpStack=r.create(!0),o={notify:function(e){return e.isSignal===!0?a.signalEvent(e):e.type===n.INTERACTION_START||e.type===n.INTERACTION_CAPTURE||e.type===n.INTERACTION_END?a.interactionEvent(e):e.isMouseEvent?a.processMouseEvent(e):void 0}},e.getEventManager().register(o,50,n.BASEEVENTS_GROUP)},"private":{visitAdaptedInteractive:function(e){return t.Visit(this,t.VisitDirections.DepthFirst,function(t){u(t)&&e(t)},this._tmpStack),!0},signalEvent:function(e){return this.visitAdaptedInteractive(function(t){t.adapted.notify(e)}),!0},mouseHits:function(e){var n=this._tmpPoint1,i=[];return n[0]=e.x,n[1]=e.y,t.VisitIntersectingPoint(this,t.VisitDirections.DepthFirst,n,function(e){u(e)&&i.push(e)},this._tmpStack),i},mouseEvent:function(e,n){var i,r,o;if(this._activeInteraction&&(i=this._activeInteraction.notify(e),this._activeInteraction&&this._activeInteraction.state===s.INACTIVE&&(this._activeInteraction=null),i))return!0;if(!this._activeInteraction)for(n.sort(function(e,n){return t.LessThanZ(e,n)?1:-1}),r=0,o=n.length;o>r;++r)if(i=n[r].adapted.notify(e))return!0;return!1},mouseEnterLeave:function(e,t){var i,r,o,a;i=this._hits[this._hitsIdx%2],r=this._hits[(this._hitsIdx+1)%2]=t,r.sort(function(e,t){return e.uid<t.uid?-1:e.uid>t.uid?1:0}),o=l.view(i),a=l.view(r),l.set_difference(o,a,function(t){t.adapted.notify(n.createMouseEvent(n.MOUSE_LEAVE,e.x,e.y,0,t.adapted,e.originalEvent))},function(e,t){return e.uid<t.uid}),l.set_difference(a,o,function(t){t.adapted.notify(n.createMouseEvent(n.MOUSE_ENTER,e.x,e.y,0,t.adapted,e.originalEvent))},function(e,t){return e.uid<t.uid}),++this._hitsIdx},processMouseEvent:function(e){var t,n;return t=this.mouseHits(e),n=this.mouseEvent(e,t),this.mouseEnterLeave(e,t),n},hasInteraction:function(e){var t=!1;return this.visitAdaptedInteractive(function(n){t=t||n.adapted===e}),t},interactionEvent:function(e){if(e.type===n.INTERACTION_START)return this.hasInteraction(e.interaction)?!0:this.processMouseEvent(e);if(e.type===n.INTERACTION_CAPTURE)this._activeInteraction=e.interaction;else{if(e.type!==n.INTERACTION_END||!this._activeInteraction)return!1;this._activeInteraction=null}return!0}}})}),define("oven/vislets/series/seriesVislet",["oven/3rdparty/sys-jscore/main","oven/library/container/vislet","oven/framework/config/schema/configSchemaBuilder","oven/framework/data/schema/dataSchemaBuilder","oven/vislets/series/seriesVisletDefs","oven/vislets/series/seriesVisletConfig","oven/vislets/series/seriesVisletDataContract","oven/components/series/signals","oven/library/container/gridLayout","oven/library/container/gridLayoutContainer","oven/unvetted/library/utility/algorithm","oven/unvetted/contracts/events","oven/unvetted/library/utility/uuid","oven/library/plot/linearMapper","oven/library/plot/collapseMapper","oven/library/plot/cartesianMapper2","oven/library/plot/affine2dMapper","oven/components/plot/plotDefs","oven/components/plot/space2","oven/library/plot/instancerMapper1","oven/library/plot/instancerMapper2","oven/library/container/adhocLayoutContainer","oven/library/container/boxLayoutContainer","oven/library/container/zedLayoutContainer","oven/components/plot/plotAreaConfig","oven/components/plot/plotArea","oven/components/plot/intervalGradientsConfig","oven/components/plot/intervalGradients","oven/components/plot/axisDefs","oven/components/plot/label","oven/components/plot/numericAxisConfig","oven/components/plot/numericAxis","oven/components/plot/timeseriesAxisConfig","oven/components/plot/timeseriesAxis","oven/components/plot/customAxisConfig","oven/components/plot/customAxis","oven/components/legend/legend","oven/components/legend/legendConfig","oven/components/series/seriesComponent","oven/components/series/line","oven/components/series/bars","oven/components/series/ohlcBars","oven/components/series/ohlcCandles","oven/components/plot/referenceLine","oven/components/plot/plotAreaNavigationInteractions","oven/components/plot/axisNavigationInteractions","oven/unvetted/kernel/kernelUtil","oven/library/math/interval","oven/library/math/algebra/mat3d","oven/library/math/aabox","oven/unvetted/library/utility/configDataAdapterObserver","oven/framework/data/view/dataViewAccessor","oven/unvetted/library/math/dataTransformers/subsetDataTransformer","oven/library/container/interactionContainer","oven/components/plot/box","oven/library/math/view2d"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p,g,m,v,y,b,_,x,w,C,T,E,S,k,A,M,N,D,P,I,O,R,L,B,F,j,H,V,z,$,U,W,q,G,X,Y,K,J,Q,Z,et,tt){function nt(e,t,n,i){return n+2*i}function it(e,t,n,i){var o,a,s,l,c,d,h,g,m,v,y,b=new u,_=[0,0],x=[0,0];if(!t||""===t)return null;if(o=e.getConfigManager().getConfig(t),!o)return null;switch(d=o.showTitle,d&&(m=nt(o.title,o.titleFontFamily,o.titleFontSize,o.titlePadding)),i){case r.AxisPositions.Top:c=A.Alignments.Bottom,_=[0,0],g=0,x=d?[1,0]:[0,0],b.addColumn(1,u.SizeModes.Relative),d&&b.addRow(m,u.SizeModes.Absolute),b.addRow(1,u.SizeModes.Remainder);break;case r.AxisPositions.Bottom:c=A.Alignments.Top,_=[1,0],g=0,x=[0,0],b.addColumn(1,u.SizeModes.Relative),b.addRow(1,u.SizeModes.Remainder),d&&b.addRow(m,u.SizeModes.Absolute);break;case r.AxisPositions.Left:c=A.Alignments.Right,_=[0,0],g=Math.PI/-2,x=d?[0,1]:[0,0],b.addRow(1,u.SizeModes.Relative),d&&b.addColumn(m,u.SizeModes.Absolute),b.addColumn(1,u.SizeModes.Remainder);break;case r.AxisPositions.Right:c=A.Alignments.Left,_=[0,1],g=Math.PI/2,x=[0,0],b.addRow(1,u.SizeModes.Relative),b.addColumn(1,u.SizeModes.Remainder),d&&b.addColumn(m,u.SizeModes.Absolute)}return e.getConfigManager().updateConfig(t,{index:n,align:c}),a=t.split(":")[0],v=o.bound,"NumericAxis"===a?(s=new f(1,0),l=new D(e,void 0,void 0,t)):"TimeseriesAxis"===a?(s=new p([[0,1]]),l=new I(e,void 0,void 0,t),y={dataObserverAdapterModified:function(){},dataObserverDataModified:function(e,t,n){var i,r,o,a,l,u,c;if(i=[],n)for(r=n.getDataView(),o=J.create(r),a=0,l=o.length;l>a;++a)u=o.rows(a),c=[1*u.Value1,1*u.Value2],i.push(c);s.setIntervals(i)}},l.addDataObserver(y),y.dataObserverDataModified(l,o.intervalsDataAdapterId,e.getDataManager().getDataAdapter(o.intervalsDataAdapterId))):"CustomAxis"===a&&(s=new f(1,0),l=new R(e,void 0,void 0,t)),b.addContents(x[0],x[1],1,1,l),d&&(h=new M(e),h.text=o.title,h.fontFamily=o.titleFontFamily,h.fontSize=o.titleFontSize,h.orientation=g,b.addContents(_[0],_[1],1,1,h)),{mapper:s,component:l,container:b,bound:v}}var rt,ot,at,st;return ot=e.Class.define({init:function(e,n,i){function r(){""!==c._config.plotAreaConfigId?(c._plotArea=new E(e,void 0,c._config.plotAreaConfigId),c._plotArea.space=c.__space):c._plotArea=null}function o(){c._config.intervalGradients?(c._intervalGradientsConfigId=S.ConfigNames.IntervalsComponent+":"+h.generate(),e.getConfigManager().addConfig(c._intervalGradientsConfigId,S.getConfigSchema().validateConfigSet(S.ConfigNames.IntervalsComponent,{dataAdapterId:a.intervalsDataAdapterId,index:0},!0)),c._intervalGradients=new k(e,void 0,void 0,c._intervalGradientsConfigId),c._intervalGradients.space=c.__space):c._intervalGradients=null}var a,s,l,c=this;this._sharedContext=e,s=e.getEventManager(),this.id=n,this._configId=n,this._config=e.getConfigManager().getConfig(n),this._vislet=i;var d=new g(i.independentAxisMapper,new f(1,0)),p=i.getModelWorldTransform(),m=i.getWorldViewTransform();d.addChild(p),p.addChild(m),this.__space=new y(d,p,m),this._dataContainer=new C,this._dataOverlay=new t(e,this.id+"_overlay",void 0,!0),c._dataOverlay.ownCanvas.setClear(!0),this._dependentAxisContainers=[new u,new u],this._dependentAxisContainers[0].layout.setUniformRows(1),this._dependentAxisContainers[1].layout.setUniformRows(1),this._dependentAxisCounts=[0,0],r(),a=e.getConfigManager().getConfig(this._config.independentAxisConfigId),o(),this._borders=l=new et(e),l.border=[{color:this._config.borderColor,width:this._config.borderWidth},0,0,0],l.backgroundColor="",this._seriesGroups={},this._seriesGroupsCount=0,this._dataDomain=[G.createEmpty(),G.createEmpty()]},"public":{id:{value:"",writable:!0},position:{get:function(){return this._config.position}},size:{get:function(){return this._config.size}},layout:function(e,t,n,i,r,o){this._plotArea&&e.addContents(n,i,1,1,this._plotArea),this._intervalGradients&&e.addContents(n,i,1,1,this._intervalGradients),e.addContents(n,i,1,1,this._dataContainer),e.addContents(n,i,1,1,this._dataOverlay),this._borders.border_top=t>0?{color:this._config.borderColor,width:this._config.borderWidth}:0,e.addContents(n,i,1,1,this._borders),e.addContents(n,r,1,1,this._dependentAxisContainers[0]),e.addContents(n,o,1,1,this._dependentAxisContainers[1])},unlayout:function(e){this._plotArea&&e.removeContents(this._plotArea),this._intervalGradients&&e.removeContents(this._intervalGradients),e.removeContents(this._dataContainer),e.removeContents(this._dataOverlay),e.removeContents(this._borders),e.removeContents(this._dependentAxisContainers[0]),e.removeContents(this._dependentAxisContainers[1])},dependentAxisCounts:{get:function(){return this._dependentAxisCounts}},maybeAddSeriesGroup:function(e,t){var n,i;return e in this._seriesGroups?n=this._seriesGroups[e]:(n=this._seriesGroups[e]={object:new at(this._sharedContext,this._vislet,this,e,t,[this._config.dependentAxisPadding0,this._config.dependentAxisPadding1]),position:t},++this._seriesGroupsCount,i=this._dependentAxisCounts[t]++,this._dependentAxisContainers[t].layout.setUniformColumns(this._dependentAxisCounts[t]),n.object.layout(this._dataContainer,this._dependentAxisContainers[t],i)),1===this._seriesGroupsCount&&(this._plotArea.space=n.object.space),n},maybeRemoveSeriesGroup:function(e){var t,n;t=this._seriesGroups[e],t&&0===t.object.seriesCount&&(n=t.position,t.object.unlayout(this._dataContainer,this._dependentAxisContainers[n]),this._dependentAxisContainers[n].layout.setUniformColumns(this._dependentAxisCounts[n]),--this._dependentAxisCounts[n],delete this._seriesGroups[e],--this._seriesGroupsCount)},addSeries:function(e,t,n){var i=this.maybeAddSeriesGroup(e,t);i.object.addSeries(n,this._dataContainer)},removeSeries:function(e,t){var n;n=this._seriesGroups[e],n&&(n.object.removeSeries(t,this._dataContainer),this.maybeRemoveSeriesGroup(e))},addInteraction:function(e,t,n,i){var r;e?(r=this.maybeAddSeriesGroup(e,t),i.space=r.object.space):i.space=this.__space,this._dataOverlay.addContents(i)},removeInteraction:function(e,t,n){this._dataOverlay.removeContents(n),n.space=null,e&&this.maybeRemoveSeriesGroup(e)},dataDomain:{get:function(){var e,t,n=this._dataDomain[0],i=this._dataDomain[1];G.initEmpty(n),G.initEmpty(i);for(e in this._seriesGroups)t=this._seriesGroups[e].object.dataDomain,G.hull(n,n,t[0]),G.hull(i,i,t[1]);return this._dataDomain}},maintainDependentAxisView:function(){var e;for(e in this._seriesGroups)this._seriesGroups[e].object.maintainDependentAxisView()}}}),st={},st[o.ConfigNames.LineSeries]=j,st[o.ConfigNames.BarsSeries]=H,st[o.ConfigNames.OHLCBarsSeries]=V,st[o.ConfigNames.OHLCCandlesSeries]=z,st[o.ConfigNames.IntervalGradients]=k,st[o.ConfigNames.ReferenceLine]=$,at=e.Class.define({init:function(e,t,n,i,r,o){var a,s=this;this._sharedContext=e,this.id=i,a=it(e,i,1,r),this.__dependentAxisMapper=a.mapper,this.__dependentAxisBound=a.bound;var l=new g(t.independentAxisMapper,this.__dependentAxisMapper),u=t.getModelWorldTransform(),c=t.getWorldViewTransform(),d=new m;this.__dependentAxisNavigation=d,l.addChild(u),u.addChild(c),c.addChild(d),this.__space=new y(l,u,d),this._dependentAxis=a.component,this._dependentAxis.space=this.__space,this._dependentAxisContainer=a.container,this._dependentAxisPadding=o,this._seriesComponents={},this._seriesComponentsCount=0,this._dataDomainDirty=!0,this._dataDomain=[G.createEmpty(),G.createEmpty()],this.__seriesObserver={dataObserverAdapterModified:function(){s._dataDomainDirty=!0,t.maintainView()},dataObserverDataModified:function(){s._dataDomainDirty=!0,t.maintainView()}}},"private":{createSeriesComponent:function(e){var t,n=e.split(":"),i=n[0],r=n[1];return t=new st[i](this._sharedContext,r,void 0,e),t.space=this.__space,t},createLegendComponent:function(e){var t,n=e.split(":"),i=(n[0],n[1]),r="Legend:"+i,o=B.getConfigSchema().validateConfigSet("Legend",{rowTemplates:{"default":{cellTemplates:[{swatch:{}},{text:{alignment:B.Alignment.Left}},{number:{alignment:B.Alignment.Radix}}]}},sections:[{rows:[{cells:[{value:{color:"#FF0000"}},{value:{text:"Close Price"}},{value:{number:177.6}}]}]}]},!0);return this._sharedContext.getConfigManager().addConfig(r,o),t=new L(this._sharedContext,r,void 0,r)}},"public":{id:{value:"",writable:!0},space:{get:function(){return this.__space}},layout:function(e,t,n){var i,r;for(i in this._seriesComponents)r=this._seriesComponents[i],e.addContents(r.container,r.order);t.addContents(0,n,1,1,this._dependentAxisContainer)},unlayout:function(e,t){var n,i;for(n in this._seriesComponents)i=this._seriesComponents[n],e.removeContents(i.container);t.removeContents(this._dependentAxisContainer)},addSeries:function(t,n){var i,r,o,a;if(t in this._seriesComponents)throw new Error("Series "+t+" is already in series group "+this.id);r=this.createSeriesComponent(t);var s=!1;s&&(o=this.createLegendComponent(t)),a=new x,a.addContents(r,!0),s&&(a.addContents(o),a.setContentTop(o,10),a.setContentLeft(o,10)),i=this._sharedContext.getConfigManager().getConfig(t),n.addContents(a,i.order),this._seriesComponents[t]={order:i.order,component:r,container:a},++this._seriesComponentsCount,e.Class.isInstanceOf(F,r)&&r.addDataObserver(this.__seriesObserver),this._dataDomainDirty=!0,this.maintainDependentAxisView()},removeSeries:function(t,n){var i;if(i=this._seriesComponents[t],!i)throw new Error("Series "+t+" is not in series group "+this.id);n.removeContents(i.container),delete this._seriesComponents[t],--this._seriesComponentsCount,e.Class.isInstanceOf(F,i.component)&&i.component.removeDataObserver(this.__seriesObserver),this._dataDomainDirty=!0,this.maintainDependentAxisView()},seriesCount:{get:function(){return this._seriesComponentsCount}},dataDomain:{get:function(){var t,n,i,r;if(this._dataDomainDirty){t=this._dataDomain[0],n=this._dataDomain[1],G.initEmpty(t),G.initEmpty(n);for(i in this._seriesComponents)r=this._seriesComponents[i].component,e.Class.isInstanceOf(F,r)&&(G.hull(t,t,r.dataDomain[0]),G.hull(n,n,r.dataDomain[1]));this._dataDomainDirty=!1}return this._dataDomain}},maintainDependentAxisView:function(){var e,t,n;n=X.initIdentity(X.create());var i=[this.__dependentAxisBound.min,this.__dependentAxisBound.max];if(e=this.dataDomain[0],t=this.dataDomain[1],G.hull(i,i,t),!G.empty(i)){var r=[e[0],i[0]],o=[e[1],i[1]],a=this.__space.modelWorldTransform.forward,s=Y.initEnvelope(Y.createEmpty(),[a(r,r),a(o,o)]);n=tt.initViewportView(n,[0,s[1],1,s[3]])}n=X.affineMul(n,n,[1,0,0,0,1-(this._dependentAxisPadding[0]+this._dependentAxisPadding[1]),0,0,this._dependentAxisPadding[0],1]),this.__dependentAxisNavigation.matrix=n}}}),rt=e.Class.define(t,{init:function(e,t,n){function i(){return{bindAxis:function(){return this},notify:function(e){return e.type===d.RESET_VIEW?(s.maintainView(),!0):void 0}}}var r,o,a,s=this;this.initSuper(e,t,void 0,!1),this._config=e.getConfigManager().getConfig(n),r=new Z(e),this._container=o=new u,this._dataRow=void 0,this._dataColumn=void 0,this._dependentAxisColumn0=void 0,this._dependentAxisColumn1=void 0,this._independentAxisRow=void 0,this._panels={},this._panelCount=0,this._series={},this._seriesCount=0,this._dependentAxisCounts=[0,0],this._interactions={},this._interactionsCount=0,this.setRows([]),this.setColumns(),a=it(e,this._config.independentAxisConfigId,0,this._config.independentAxisPosition),this.__independentAxisMapper=a.mapper,this.__independentAxisBound=a.bound;var l=new g(this.__independentAxisMapper,new f(1,0));this.__modelWorldTransform=new m([1,0,0,0,-1,0,0,1,1]),this.__modelWorldTransformInstancer=new _(this.__modelWorldTransform);var c=this.__modelWorldTransformInstancer.getInstance();this.__independentAxisNavigation=new m,this.__independentAxisNavigationInstancer=new _(this.__independentAxisNavigation);var h=this.__independentAxisNavigationInstancer.getInstance();l.addChild(c),c.addChild(h),this.__space=new y(l,c,h),this._independentAxis=a.component,this._independentAxis.space=this.__space,this._independentAxisContainer=a.container,this._dataDomainDirty=!0,this._dataDomain=[G.createEmpty(),G.createEmpty()],this._independentAxis.addDataObserver({dataObserverAdapterModified:function(){s._dataDomainDirty=!0,s.maintainView()},dataObserverDataModified:function(){s._dataDomainDirty=!0,s.maintainView()}}),this.maintainView(),this.addContents(r),r.addContents(o),this._resetBehavior=i(),this.layout()},"public":{addPanel:function(e){if(e in this._panels)throw new Error("Panel "+e+" has already been added to vislet "+this.id);this.unlayout(),this._panels[e]=new ot(this.sharedContext,e,this),++this._panelCount,this.layout()},removePanel:function(e){if(!(e in this._panels))throw new Error("Panel "+e+" has not been added to vislet "+this.id);this.unlayout(),delete this._panels[e],--this._panelCount,this.layout()},addSeries:function(e,t){var n=t.panelId,i=t.dependentAxisConfigId;if(e in this._series)throw new Error("Series "+e+" has already been added to vislet "+this.id);if(!(n in this._panels))throw new Error("Panel "+n+" does not exist");this._panels[n].addSeries(i,t.dependentAxisPosition,e),this._series[e]={panelId:n,dependentAxisConfigId:i},++this._seriesCount,this.updateDependentAxisColumns(),this.maintainView()},removeSeries:function(e){var t;if(!(e in this._series))throw new Error("Series "+e+" has not been added to vislet "+this.id);t=this._series[e],this._panels[t.panelId].removeSeries(t.dependentAxisConfigId,e),delete this._series[e],--this._seriesCount,this.updateDependentAxisColumns(),this.maintainView()},addInteraction:function(e,t,n){var i=t.panelId,r=t.dependentAxisConfigId||"";if(e in this._interactions)throw new Error("Interaction "+e+" has already been added to vislet "+this.id);if(!(i in this._panels))throw new Error("Panel "+i+" does not exist");this._panels[i].addInteraction(r,t.dependentAxisPosition,e,n),this._interactions[e]={panelId:i,dependentAxisConfigId:r,interaction:n},++this._interactionsCount,this.updateDependentAxisColumns()},removeInteraction:function(e){var t;if(!(e in this._interactions))throw new Error("Series "+e+" has not been added to vislet "+this.id);t=this._interactions[e],this._panels[t.panelId].removeInteraction(t.dependentAxisConfigId,e,t.interaction),delete this._interactions[e],--this._interactionsCount,this.updateDependentAxisColumns()},dataDomain:{get:function(){var e,t,n,i;e=this._dataDomain[0],t=this._dataDomain[1],G.initEmpty(e),G.initEmpty(t);for(n in this._panels)i=this._panels[n].dataDomain,G.hull(e,e,i[0]),G.hull(t,t,i[1]);return this._dataDomainDirty=!1,this._dataDomain}},independentAxisMapper:{get:function(){return this.__independentAxisMapper}},getModelWorldTransform:function(){return this.__modelWorldTransformInstancer.getInstance()},getWorldViewTransform:function(){return this.__independentAxisNavigationInstancer.getInstance()},space:{get:function(){return this.__space}},maintainIndependentAxisView:function(){var e,t;if(t=X.initIdentity(X.create()),e=[this.__independentAxisBound.min,this.__independentAxisBound.max],G.hull(e,e,this._independentAxis.dataDomain),G.hull(e,e,this.dataDomain[0]),!G.empty(e)){var n=[e[0],0],i=[e[1],1],r=this.__space.modelWorldTransform.forward,o=Y.initEnvelope(Y.createEmpty(),[r(n,n),r(i,i)]);t=tt.initViewportView(X.initIdentity(X.create()),[o[0],0,o[2],1])}t=X.affineMul(t,t,[1-(this._config.independentAxisPadding0+this._config.independentAxisPadding1),0,0,0,1,0,this._config.independentAxisPadding0,0,1]),this.__independentAxisNavigation.matrix=t},maintainView:function(){var e;this.maintainIndependentAxisView();for(e in this._panels)this._panels[e].maintainDependentAxisView()}},"private":{layout:function(){var e,t=this,n=[],i=[];this._panelCount>0?(i=[],Object.getOwnPropertyNames(this._panels).forEach(function(e){n.push(t._panels[e])}),n.sort(function(e,t){return e.position<t.position?-1:e.position>t.position?1:0}),n.forEach(function(e){i.push(e.size)})):i=[1],this.setRows(i),e=0,n.forEach(function(n){n.layout(t._container,e,t._dataRow+e,t._dataColumn,t._dependentAxisColumn0,t._dependentAxisColumn1,!1),++e}),this._independentAxis&&this._container.addContents(this._independentAxisRow,this._dataColumn,1,1,this._independentAxisContainer)},unlayout:function(){var e=this;this._independentAxis&&this._container.removeContents(this._independentAxisContainer),Object.getOwnPropertyNames(this._panels).forEach(function(t){e._panels[t].unlayout(e._container,!1)})},updateDependentAxisColumns:function(){var e=this,t=this._dependentAxisCounts;t[0]=t[1]=0,Object.getOwnPropertyNames(this._panels).forEach(function(n){var i=e._panels[n].dependentAxisCounts;t[0]=Math.max(t[0],i[0]),t[1]=Math.max(t[1],i[1])}),this.setColumns()}},"protected":{setColumns:function(){var e=[];this._dependentAxisColumn0=e.length,e.push({sizeMode:l.SizeModes.Absolute,width:this._config.dependentAxisSize*this._dependentAxisCounts[0]}),this._dataColumn=e.length,e.push({sizeMode:l.SizeModes.Remainder}),this._dependentAxisColumn1=e.length,e.push({sizeMode:l.SizeModes.Absolute,width:this._config.dependentAxisSize*this._dependentAxisCounts[1]}),this._container.layout.setColumns(e)},setRows:function(e){function t(){a._independentAxisRow=s.length,s.push({sizeMode:l.SizeModes.Absolute,height:a._config.independentAxisSize})}function n(){for(a._dataRow=s.length,o=0,e.forEach(function(e){o+=e}),i=0;u>i;++i)s.push({sizeMode:l.SizeModes.Relative,height:e[i]/o})}var i,o,a=this,s=[],u=e.length;this._config.independentAxisPosition===r.AxisPositions.Top?(t(),n()):(n(),t()),this._container.layout.setRows(s)}}})}),define("oven/components/plot/plotRangeSliderInteraction",["oven/3rdparty/sys-jscore/main","oven/unvetted/library/utility/idServer","oven/library/container/baseCompatibility/fromInteraction","oven/library/math/geometry2d/point2d","oven/library/math/interval","oven/unvetted/contracts/events","oven/unvetted/contracts/platform"],function(e,t,n,i,r,o,a){var s,l;t.create("rangeSlider"),l={Idle:1,Inside:2,Inside0:3,Inside1:4,Active:5,Active0:6,Active1:7};var u={Idle:[0,0],Active:[1,1],Active0:[1,0],Active1:[0,1]};return s=e.Class.define(n,{init:function(e){var t,n,s=this,c=l.Idle,d=[0,100],h=r.createEmpty(),f=0,p=u.Idle,g=[0,0];t=e.getEventManager(),n={notify:function(e){function n(){g[0]=e.x,g[1]=e.y,i.transform(g,g,s.containerFromWorldTransform),y=Math.min(Math.max(g[0],0),s.size[0])}function m(e,t){var n,i,o=s.size[0];r.initEnvelope(d,[e,t]),n=d[0]<0,i=d[1]>o,n&&i?(d[0]=0,d[1]=o):n?(d[1]=d[1]-d[0],d[0]=0):i&&(d[0]=o-(d[1]-d[0]),d[1]=o),s._delegate&&s._delegate.plotRangeSliderMove(s.publicThis,d)}var v=e.type,y=0,b=0,_=s._handleSizeHalf;if(c===l.Idle)v===o.MOUSE_MOVE&&(n(),r.contains(d,y)&&(c=l.Inside,s.context.pushCursor(a.CURSOR_MOVE)));else if(c===l.Inside)if(n(),v===o.MOUSE_MOVE)r.contains(d,y)||(c=l.Idle,s.context.popCursor());else{if(v===o.MOUSE_DOWN)return Math.abs(y-d[0])<_?(c=l.Active0,p=u.Active0):Math.abs(d[1]-y)<_?(c=l.Active1,p=u.Active1):(c=l.Active,p=u.Active),r.initCopy(h,d),f=y,t.notify(o.createInteractionEvent(o.INTERACTION_CAPTURE,this,e.source,e)),s._delegate&&s._delegate.plotRangeSliderBegin(s.publicThis,d),!0;v===o.MOUSE_LEAVE&&(c=l.Idle,s.context.popCursor())}else if(c===l.Active||c===l.Active0||c===l.Active1){if(v===o.MOUSE_MOVE)return n(),b=y-f,m(h[0]+p[0]*b,h[1]+p[1]*b),!0;if(v===o.MOUSE_UP)return c=l.Inside,t.notify(o.createInteractionEvent(o.INTERACTION_END,this,e.source,e)),s._delegate&&s._delegate.plotRangeSliderEnd(s.publicThis,d),!0}return!1}},this.initSuper(e,n),this._delegate=null,this._pixel_range=d,this._handleSizeHalf=25},"public":{delegate:{set:function(e){this._delegate=e},get:function(){return this._delegate}},pixel_range:{set:function(e){this._pixel_range[0]=e[0],this._pixel_range[1]=e[1]},get:function(){return this._pixel_range}},handle_size:{set:function(e){this._handleSizeHalf=e/2},get:function(){return 2*this._handleSizeHalf}}}})}),define("oven/components/series/rangeSlider",["oven/3rdparty/sys-jscore/main","oven/components/plot/plotContainer","oven/library/container/boxLayoutContainer","oven/components/plot/plotRangeSliderInteraction","oven/components/plot/plotDefs","oven/components/series/signals","oven/library/math/geometry2d/point2d","oven/library/math/interval","oven/unvetted/contracts/events","oven/library/plot/delegator2","oven/library/container/component","oven/unvetted/kernel/kernelDraw","oven/unvetted/kernel/kernelUtil"],function(e,t,n,i,r,o,a,s,l,u,c,d){var h,f;return f=e.Class.define(c,{init:function(e,t){var n,i=this,r=t,o=[[0,0],[0,0]];this.initSuper(e),this._pixel_range=n=[0,0],this._draw=function(){var e=i.canvas.context(),t=i.size,s=r.fillColor,l=r.handleColor,u=r.handleSize/2;d.setContext(e),d.canvas.save(),i.drawClip(),i.transformComponentToCanvasRasterEdge(o[0],a.init(o[0],0,0)),i.transformComponentToCanvasRasterEdge(o[1],a.init(o[1],t[0],t[1])),d.setFillStyle(s),d.drawQuad(o[0][0],o[0][1],o[0][0]+n[0],o[1][1],!0,!1,!1),d.drawQuad(o[0][0]+n[1],o[0][1],o[1][0],o[1][1],!0,!1,!1),o[0][0]+=n[0],o[1][0]-=t[0]-n[1],d.setFillStyle(l),d.drawQuad(o[0][0],o[0][1],o[0][0]+u,o[1][1],!0,!1,!1),d.setFillStyle(l),d.drawQuad(o[1][0]-u,o[0][1],o[1][0],o[1][1],!0,!1,!1),d.canvas.restore()}},"public":{pixel_range:{set:function(e){this._pixel_range[0]=e[0],this._pixel_range[1]=e[1],this.dirty()},get:function(){return this._pixel_range}}},virtual:{override:{getDraw:function(){return this._draw}}}}),h=e.Class.define(t,{init:function(e,t){function u(){_._component.dirty(),_._interaction.handle_size=h.handleSize}function c(){y[0]=h.range.min,y[1]=h.range.max,_._maintainPixelRange(),h.signalOnSet&&m.notify(o.createRangeSliderSignal(o.RANGE_SLIDER_SET,null,"",_.id,[y[0],y[1]],_.space.visibleDomain[0],[b[0],b[1]],[0,_.size[0]]))}var d,h,p,g,m,v,y,b,_=this,x=[0,0];this.initSuper(t,null,void 0),d=t,h=e.getConfigManager().getConfig(d),m=e.getEventManager(),this.coordinateSystem=r.Spaces.Data,this._boxContainer=new n,this.addChild(this._boxContainer),this._component=g=new f(e,h),this._boxContainer.addContents(g),this._interaction=p=new i(e,this.id+"_interaction"),this._boxContainer.addContents(p),y=[h.range.min,h.range.max],b=s.createEmpty(),this._maintainPixelRange=function(){var e;e=s.intersection(s.createEmpty(),y,_.space.visibleDomain[0]),_.toContainer(x,a.init(x,e[0],0)),b[0]=x[0],_.toContainer(x,a.init(x,e[1],0)),b[1]=x[0],_._component.pixel_range=b,_._interaction.pixel_range=b},p.delegate={plotRangeSliderBegin:function(){h.signalOnBeginEnd&&m.notify(o.createRangeSliderSignal(o.RANGE_SLIDER_BEGIN,null,"",_.id,[y[0],y[1]],_.space.visibleDomain[0],[b[0],b[1]],[0,_.size[0]]))},plotRangeSliderMove:function(e,t){s.initCopy(b,t),g.pixel_range=b,_.fromContainer(x,a.init(x,b[0],0)),y[0]=x[0],_.fromContainer(x,a.init(x,b[1],0)),y[1]=x[0],h.signalOnMove&&m.notify(o.createRangeSliderSignal(o.RANGE_SLIDER_MOVE,null,"",_.id,[y[0],y[1]],_.space.visibleDomain[0],[b[0],b[1]],[0,_.size[0]]))},plotRangeSliderEnd:function(){h.signalOnBeginEnd&&m.notify(o.createRangeSliderSignal(o.RANGE_SLIDER_END,null,"",_.id,[y[0],y[1]],_.space.visibleDomain[0],[b[0],b[1]],[0,_.size[0]]))}},v={notify:function(e){var t=!1,n=!1,i=!1;return e.group===l.PROPERTYEVENT_GROUP&&e.type===l.PROPERTY_UPDATE&&e.events.forEach(function(e){e.configId===d&&(t=t||!0,"range"in e.properties?i=!0:n=!0)}),n&&u(),i&&c(),t}},e.getEventManager().register(v,0,l.PROPERTYEVENT_GROUP)},virtual:{override:{setSize:function(e,t){this.super.setSize(e,t),this._boxContainer.setSize(e,t)},updateView:function(){this.super.updateView(),this._maintainPixelRange()},updateWindow:function(){this.super.updateWindow(),this._maintainPixelRange()}}}})}),define("oven/components/plot/plotTrackerInteraction",["oven/3rdparty/sys-jscore/main","oven/unvetted/library/utility/idServer","oven/components/plot/plotInteraction","oven/library/math/geometry2d/point2d","oven/unvetted/contracts/events","oven/unvetted/contracts/platform"],function(e,t,n,i,r,o){var a,s,l=t.create("plotTracker");return s={Idle:0,Active:1},a=e.Class.define(n,{init:function(e,t){var n,a,u=this,c=s.Idle,d=i.create(),h=[0,0],f=[0,0];n={notify:function(e){function t(){h[0]=e.x,h[1]=e.y,i.transform(d,h,u.containerFromWorldTransform),u.fromContainer(f,d)}var n=e.type;return c===s.Idle?n===r.MOUSE_MOVE?(t(),c=s.Active,u.context.pushCursor(o.CURSOR_NONE),u._delegate&&u._delegate.plotTrackerEnter(u.publicThis,f)):n===r.MOUSE_DOWN?(t(),c=s.Active,u.context.pushCursor(o.CURSOR_NONE),u._delegate&&u._delegate.plotTrackerDown(u.publicThis,f)):n===r.MOUSE_DOUBLECLICK&&(t(),c=s.Active,u.context.pushCursor(o.CURSOR_NONE),u._delegate&&u._delegate.plotTrackerDoubleClick(u.publicThis,f)):c===s.Active&&(n===r.MOUSE_MOVE?(t(),u._delegate&&u._delegate.plotTrackerMove(u.publicThis,f)):n===r.MOUSE_UP?(t(),u._delegate&&u._delegate.plotTrackerUp(u.publicThis,f)):n===r.MOUSE_LEAVE&&(t(),c=s.Idle,u.context.popCursor(),u._delegate&&u._delegate.plotTrackerLeave(u.publicThis,f))),!1}},this.initSuper(e,l.create(t),n),this._delegate=null,this._position=f,this._setPosition=a=function(e,t){i.init(f,e,t),u.toContainer(d,f),u._delegate&&u._delegate.plotTrackerSet(u.publicThis,f)
}},"public":{delegate:{set:function(e){this._delegate=e},get:function(){return this._delegate}},position:{set:function(e){this._setPosition(e[0],e[1])},get:function(){return this._position}}},virtual:{override:{updateView:function(){this.super.updateView(),this._setPosition(this._position[0],this._position[1])},updateWindow:function(){this.super.updateWindow(),this._setPosition(this._position[0],this._position[1])}}}})}),define("oven/components/series/tracker",["oven/3rdparty/sys-jscore/main","oven/library/container/boxLayoutContainer","oven/components/plot/plotTrackerInteraction","oven/components/plot/referenceLine","oven/components/plot/plotDefs","oven/components/series/signals","oven/library/math/geometry2d/point2d","oven/unvetted/contracts/events"],function(e,t,n,i,r,o,a,s){var l;return l=e.Class.define(t,{init:function(e,t){function l(e){f.toContainer(y,e),a.transform(b,y,f.containerToWorldTransform)}function u(){p.index=h.axes,p.lineColor=h.lineColor,p.lineWidth=h.lineWidth}function c(e){void 0!==e.position0&&void 0!==e.position1?f.position=[e.position0,e.position1]:void 0!==e.position0?f.position=[e.position0,f.position[1]]:void 0!==e.position1&&(f.position=[f.position[0],e.position1])}var d,h,f,p,g,m,v=this,y=[0,0],b=[0,0];this.initSuper(t,null,void 0),d=t,h=e.getConfigManager().getConfig(d),g=e.getEventManager(),this._space=null,this._coordinateSystem=r.Spaces.Data,this._line=p=new i(e,this.id+"_line"),p.visible=!1,this.addContents(p),this._interaction=f=new n(e,this.id+"_interaction"),this.addContents(f),p.coordinateSystem=r.Spaces.Data,f.coordinateSystem=r.Spaces.Data,f.delegate={plotTrackerSet:function(e,t){p.position=t},plotTrackerEnter:function(e,t){p.position=t,p.visible=!0,h.signalOnEnterLeave&&(l(t),g.notify(o.createTrackerSignal(o.TRACKER_ENTER,null,"",v.id,[t[0],t[1]],[b[0],b[1]])))},plotTrackerMove:function(e,t){p.position=t,h.signalOnMove&&(l(t),g.notify(o.createTrackerSignal(o.TRACKER_MOVE,null,"",v.id,[t[0],t[1]],[b[0],b[1]])))},plotTrackerDown:function(e,t){p.position=t,h.signalOnDownUp&&(l(t),g.notify(o.createTrackerSignal(o.TRACKER_DOWN,null,"",v.id,[t[0],t[1]],[b[0],b[1]])))},plotTrackerUp:function(e,t){p.position=t,h.signalOnDownUp&&(l(t),g.notify(o.createTrackerSignal(o.TRACKER_UP,null,"",v.id,[t[0],t[1]],[b[0],b[1]])))},plotTrackerDoubleClick:function(e,t){p.position=t,h.signalOnDoubleClick&&(l(t),g.notify(o.createTrackerSignal(o.TRACKER_DOUBLE_CLICK,null,"",v.id,[t[0],t[1]],[b[0],b[1]])))},plotTrackerLeave:function(e,t){p.position=t,p.visible=!1,h.signalOnEnterLeave&&(l(t),g.notify(o.createTrackerSignal(o.TRACKER_LEAVE,null,"",v.id,[t[0],t[1]],[b[0],b[1]])))}},m={notify:function(e){var t=!1,n=!1;return e.group===s.PROPERTYEVENT_GROUP&&e.type===s.PROPERTY_UPDATE&&e.events.forEach(function(e){e.configId===d&&(c(e.properties),t=t||!0)}),n&&u(),t}},e.getEventManager().register(m,0,s.PROPERTYEVENT_GROUP),u(),c(h)},"public":{space:{set:function(e){this._space=e,this._line.space=this._space,this._interaction.space=this._space},get:function(){return this._space}},coordinateSystem:{set:function(e){this._coordinateSystem=e,this._line.coordinateSystem=this._coordinateSystem,this._interaction.coordinateSystem=this._coordinateSystem},get:function(){return this._coordinateSystem}}}})}),define("oven/visualizations/series/seriesVisualization",["oven/3rdparty/sys-jscore/main","oven/library/container/visualization","oven/framework/config/schema/configSchemaBuilder","oven/framework/data/schema/dataSchemaBuilder","oven/library/container/gridLayout","oven/library/container/gridLayoutContainer","oven/visualizations/series/seriesVisualizationConfig","oven/vislets/series/seriesVislet","oven/vislets/series/seriesVisletConfig","oven/vislets/series/seriesVisletDataContract","oven/components/series/signals","oven/unvetted/contracts/events","oven/unvetted/library/utility/algorithm","oven/unvetted/library/utility/configCollectionObserver","oven/unvetted/library/utility/uuid","oven/components/series/rangeSlider","oven/components/series/tracker"],function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,p,g,m){var v;return v=e.Class.define(t,{init:function(e){function t(e){var t,n;return t=l.ConfigNames.SeriesVislet+":"+p.generate(),r.sharedContext.getConfigManager().addConfig(t,l.getConfigSchema().validateConfigSet(l.ConfigNames.SeriesVislet,{independentAxisConfigId:e,independentAxisPosition:r._config.independentAxisPosition,independentAxisPadding0:r._config.independentAxisPadding0,independentAxisPadding1:r._config.independentAxisPadding1,independentAxisSize:r._config.independentAxisSize,dependentAxisSize:r._config.dependentAxisSize},!0)),n=new s(r.sharedContext,void 0,t)}function n(t,n){var i,o=n;return i={members:{},count:0,observer:f.create(e,t,{add:function(e,n){var a,s,l;if(e in i.members)throw new Error(t+" "+e+" already exists");if(a=r._panels[n.panelId],!a)throw new Error("Panel "+n.panelId+" not found");if(s=r._vislets[a.independentAxisConfigId],!s)throw new Error("Vislet "+a.independentAxisConfigId+" not found");return l=o.add(s,a,e,n),i.members[e]={config:n,value:l},++i.count,!0},update:function(e,t){return o.update(e,t,i.members[e].data)},remove:function(e){var n,a,s;if(n=i.members[e].config,!n)throw new Error(t+" "+e+" does not exist");if(a=r._panels[n.panelId],!a)throw new Error("Panel "+n.panelId+" does not exist");if(s=r._vislets[a.independentAxisConfigId],!s)throw new Error("Vislet "+a.independentAxisConfigId+" does not exist");return o.remove(s,a,e,n,i.members[e].data),delete i.members[e],--i.count,!0}}),init:function(){i.observer.init()}}}var i,r=this;this.initSuper(e,"SeriesVisualization"),this._config=null,this._container=null,this._vislet=null,this._vislets={},this._visletCount=0,this._panels={},this._panelCount=0,this._panelsObserver=f.create(e,"Panel",{add:function(e,n){var i;if(e in r._panels)throw new Error("Panel "+e+" already exists");return r._panels[e]=n,++r._panelCount,i=r._vislets[n.independentAxisConfigId],i||(r.unlayout(),i=r._vislets[n.independentAxisConfigId]=t(n.independentAxisConfigId),++r._visletCount,r.layout()),i.addPanel(e,n),!0},update:function(){return!0},remove:function(e){var t,n;if(t=r._panels[e],!t)throw new Error("Panel "+e+" does not exist");if(n=r._vislets[t.independentAxisConfigId],!n)throw new Error("Vislet "+t.independentAxisConfigId+" does not exist");return n.removePanel(e),delete r._panels[e],--r._panelCount,!0}}),i={add:function(e,t,n,i){return e.addSeries(n,i),null},update:function(){},remove:function(e,t,n){e.removeSeries(n)}},this._lineSeriesObserver=n("LineSeries",i),this._barsSeriesObserver=n("BarsSeries",i),this._ohlcBarsSeriesObserver=n("OHLCBarsSeries",i),this._ohlcCandlesSeriesObserver=n("OHLCCandlesSeries",i),this._intervalGradientsObserver=n("IntervalGradients",i),this._referenceLineObserver=n("ReferenceLine",i),this._rangeSliders=n("SeriesRangeSlider",{add:function(t,n,i,r){var o=new g(e,i);return t.addInteraction(i,r,o),o},update:function(){},remove:function(e,t,n){e.removeInteraction(n)}}),this._trackers=n("SeriesTracker",{add:function(t,n,i,r){var o=new m(e,i);return t.addInteraction(i,r,o),o},update:function(){},remove:function(e,t,n){e.removeInteraction(n)}})},statics:{configContract:function(){return a},dataContract:function(){return u}},"private":{layout:function(){var e,t,n,i,o,a,s,l,u=this;this._container.layout.setUniformColumns(1),i={},l=0;for(e in this._panels)t=this._panels[e],n=t.independentAxisConfigId,s=i[n],s?(s.position=Math.min(s.position,t.position),s.size+=t.size):s=i[n]={vislet:this._vislets[n],position:t.position,size:t.size},l+=t.size;o=[];for(n in i)o.push(i[n]);o.sort(function(e,t){return e.position<t.position?-1:e.position>t.position?1:0}),a=[],o.forEach(function(e){a.push({sizeMode:r.SizeModes.Relative,height:e.size/l})}),this._container.layout.setRows(a),o.forEach(function(e,t){u._container.addContents(t,0,1,1,e.vislet)})},unlayout:function(){var e;for(e in this._vislets)this._container.removeContents(this._vislets[e])}},virtual:{override:{initialPaint:function(e,t){var n,i=this;this.preInitialPaint(),this._config=this.sharedContext.getConfigManager().getConfig("SeriesVisualization"),this._container=new o,this.addContents(this._container),this.layout(),this._panelsObserver.init(),this._lineSeriesObserver.init(),this._barsSeriesObserver.init(),this._ohlcBarsSeriesObserver.init(),this._ohlcCandlesSeriesObserver.init(),this._intervalGradientsObserver.init(),this._referenceLineObserver.init(),this._rangeSliders.init(),this._trackers.init(),n={notify:function(e){var t=!1;return e.group===d.BASEEVENTS_GROUP&&e.isSignal&&(e.type===c.RANGE_SLIDER_SET||e.type===c.RANGE_SLIDER_BEGIN||e.type===c.RANGE_SLIDER_END||e.type===c.RANGE_SLIDER_MOVE?(i.signalFire(e.type,{panelId:e.panelId,range:e.range,extrema:e.extrema,range_pixels:e.range_pixels,extrema_pixels:e.extrema_pixels}),t=!0):(e.type===c.TRACKER_ENTER||e.type===c.TRACKER_LEAVE||e.type===c.TRACKER_MOVE||e.type===c.TRACKER_DOWN||e.type===c.TRACKER_UP||e.type===c.TRACKER_DOUBLE_CLICK)&&(i.signalFire(e.type,{panelId:e.panelId,position:e.position,position_pixels:e.position_pixels}),t=!0)),t}},this.sharedContext.getEventManager().register(n,0,d.BASEEVENTS_GROUP),this.postInitialPaint(e,t)}}}})}),define("manifest.js",["oven/visualizations/visualizationHost","oven/unvetted/kernel/kernelUtil","oven/visualizations/multiLevelPie/multiLevelPieVisualization","oven/visualizations/series/seriesVisualization","oven/unvetted/library/axes/labelFormatter","oven/unvetted/kernel/web/numberFormatImpl"],function(e,t,n,i,r,o){function a(t,n){return void 0===c.name&&(c.name=e.createVisualizationHostBuilder(n)),c.name}function s(e,t){function n(){return a(e,t)}return n}var l,u=1,c={};return l={Version:u,getMultiLevelPie:s("MultiLevelPie",n),getSeries:s("Series",i),KernelUtil:t,LabelFormatter:r,NumberFormatter:o}}),requirejs("manifest.js")}(),Chart={Base:{TimeSeries:{Renderer:{}}},Overlay:{TimeSeries:{}},Util:{},DEBUG:!1};Chart.Util.logger=function(){"use strict";var e,t=["log","debug","info","warn","error","assert"];return Chart.DEBUG=window.location.search.indexOf("debug_chart")>=0,Chart.DEBUG?(e=window.console,$.each(t,function(t,n){void 0===e[n]&&(e[n]=e.info||$.noop)}),window.Oven&&(window.Oven.KernelUtil.log.setWarn(!0),window.Oven.KernelUtil.log.setError(!0))):(e={},$.each(t,function(t,n){e[n]=$.noop})),e}(),function(){"use strict";Chart.Util.mask=function(e,t,n,i){var r=e[t];e[t]=n,i(),e[t]=r}}(),Chart.Util.lower_bound=function(e,t,n){"use strict";for(var i,r,o=e.length,a=0;o>0;)i=Math.floor(o/2),r=a+i,e[r][t]<n?(a=r+1,o-=i+1):o=i;return a},function(){"use strict";function e(e,n){var i;for(i=0;i<n.length;++i)if(e>=n[i].hour)return t.debug(e,n[i]),n[i]}var t=Chart.Util.logger;Chart.Util.DateFormat=function(){};var n=[{hour:8784,strftime:"%Y",oven:"%YYYY$04i"},{hour:744,strftime:"%b",oven:"%monthAbbrev$s"},{hour:24,strftime:"%b %e",oven:"%monthAbbrev$s %DD$02i"},{hour:1,strftime:"%l%P",oven:"%hh$i:%mm$02i"},{hour:0,strftime:"%l:%M%P",oven:"%hh$i:%mm$02i"}],i=[{hour:168,strftime:"%m/%d/%Y",oven:"%monthAbbrev$s %DD$02i"},{hour:24,strftime:"%I%P",oven:"%hh$i:%mm$02i"},{hour:0,strftime:"%I:%M%P",oven:"%hh$i:%mm$02i"}];Chart.Util.DateFormat.point_format=function(t){return e(t/3600/1e3,i).strftime},Chart.Util.DateFormat.label_format=function(t){return e(t/3600/1e3,n).strftime},Chart.Util.DateFormat.oven_point_format=function(t){return e(t/3600/1e3,i).oven},Chart.Util.DateFormat.oven_label_format=function(t){return e(t/3600/1e3,n).oven},Chart.Util.DateFormat.format=function(e,t){return Highcharts.dateFormat(e,t)}}(),function(){"use strict";var e=Math.pow(2,31)-1;Chart.Util.Timestamp={convert_points_to_ms:function(t){var n;if(t.length>0&&t[0][0]<=e)for(n=0;n<t.length;++n)t[n][0]*=1e3;return t},convert_sessions_to_ms:function(t){var n;if(t.length>0&&t[0][0]<=e)for(n=0;n<t.length;++n)t[n][0]*=1e3,t[n][1]*=1e3;return t}}}(),function(){"use strict";var e=Chart.Util.logger;Chart.Util.OrderedHash=function(){this._map=void 0,this._length=void 0,this._first=void 0,this._last=void 0,this.clear()},Chart.Util.OrderedHash.prototype.length=function(){return this._length},Chart.Util.OrderedHash.prototype.get=function(e){return this._map[e]&&this._map[e].obj},Chart.Util.OrderedHash.prototype.exist=function(e){return void 0!==this._map[e]},Chart.Util.OrderedHash.prototype.first=function(){return this._first&&this._first.obj},Chart.Util.OrderedHash.prototype.each=function(e){var t;for(t=this._first;t;t=t.next)e(t.obj,t.obj.id)},Chart.Util.OrderedHash.prototype.find_by=function(e){var t;for(t=this._first;t;t=t.next)if(e(t.obj,t.obj.id))return t.obj},Chart.Util.OrderedHash.prototype.add=function(t){return e.assert(void 0===this._map[t.id]),e.assert(void 0===this._last||void 0===this._last.next),this._map[t.id]={obj:t,next:void 0,prev:this._last},void 0===this._first?this._first=this._map[t.id]:this._last.next=this._map[t.id],this._last=this._map[t.id],++this._length,t},Chart.Util.OrderedHash.prototype.remove=function(t){e.assert(void 0!==this._map[t]),t===this._first.obj.id&&(this._first=this._first.next),t===this._last.obj.id&&(this._last=this._last.prev),this._map[t].prev&&(this._map[t].prev.next=this._map[t].next),this._map[t].next&&(this._map[t].next.prev=this._map[t].prev),delete this._map[t],--this._length},Chart.Util.OrderedHash.prototype.clear=function(){this._map={},this._first=void 0,this._last=void 0,this._length=0}}(),function(){"use strict";var e=1;Chart.Overlay.Base=function(e){this.class_name=e,this._drawn=!1},Chart.Overlay.Base.prototype.drawn=function(){return this._drawn},Chart.Overlay.Base.prototype.draw=function(){var e=!1;return this.drawn()&&(e=this.do_update.apply(this,arguments)),e===!1&&this.drawn()&&this.clear(),e=this.do_draw.apply(this,arguments),this._drawn=!0,e},Chart.Overlay.Base.prototype.clear=function(){this.do_clear(),this._drawn=!1},Chart.Overlay.Base.prototype.destroy=function(){this.do_destroy()},Chart.Overlay.Base.prototype.do_update=function(){return!1},Chart.Overlay.Base.prototype.do_clear=function(){this.do_destroy()},Chart.Overlay.Base.prototype.do_destroy=function(){},Chart.Overlay.create_overlay=function(t,n){var i=function(){Chart.Overlay.Base.call(this,arguments[0]),this.type=i.TYPE,this.id=["overlay",this.type,++e].join("/"),n.apply(this,Array.prototype.slice.call(arguments,1))};return i.TYPE=t,i.prototype=$.extend({},Chart.Overlay.Base.prototype),i}}(),function(){"use strict";Chart.Overlay.Operations={add_overlay:function(e){return void 0===this._overlays&&(this._overlays={}),this._overlays[e.id]=e,e},remove_overlay:function(e){void 0===this._overlays&&(this._overlays={}),delete this._overlays[e]},each_overlay:function(e){$.each(this._overlays||{},function(t,n){e(n,t)})}}}(),function(){"use strict";var e=Chart.Overlay.TimeSeries,t=/class=['"]([^'" ]+)+['"]/g;e.Text=Chart.Overlay.create_overlay("text",function(){this.html=void 0,this.background=void 0,this._offset={top:void 0,right:void 0,bottom:void 0,left:void 0},this._element=void 0,this._link_elements=[],this._state={html:void 0},this._event=$({})}),e.Text.prototype.offset=function(e,t,n,i){this._offset.top=e,this._offset.right=t,this._offset.bottom=n,this._offset.left=i},e.Text.prototype.do_clear=function(){this._link_elements.length>0&&this._link_elements.off("mousedown"),void 0!==this._element&&this._element.destroy(),this._state.html=void 0},e.Text.prototype.do_destroy=function(){this.do_clear()},e.Text.prototype.do_draw=function(e){var t=e._chart.theme.text(this.class_name);(void 0===this._offset.top)+(void 0===this._offset.right)+(void 0===this._offset.bottom)+(void 0===this._offset.left)>2&&(this._offset=$.extend({},t.offset)),this.html&&t.font.size>0&&this._draw_text(e,t)},e.Text.prototype.on_link_click=function(e){this._event.on("link_click",e)},e.Text.prototype.on_close_click=function(e){this._event.on("close_click",e)},e.Text.prototype._text_bounding_box=function(e,t){var n=e.draw_text(t,this._html_with_css,0,0),i=n.getBBox();return n.destroy(),i},e.Text.prototype._arrow_direction=function(e){if("center"===e.align){if("top"===e.valign)return"bottom";if("bottom"===e.valign)return"top"}else if("middle"===e.valign){if("left"===e.align)return"right";if("right"===e.align)return"left"}},e.Text.prototype._draw_text=function(e,t){this._add_css(e._chart.theme);var n=this,i=t.padding,r=this._text_bounding_box(e,t),o={width:i.left+r.width+i.right,height:i.top+r.height+i.bottom},a={width:0,height:0},s=this._arrow_direction(t),l="top"===s||"bottom"===s;(t.arrow.base>0||t.arrow.height>0)&&(l?(a.width=t.arrow.base||o.width,a.height=t.arrow.height):(a.width=t.arrow.height,a.height=t.arrow.base||o.height));var u;l?(u=e._chart.coordinate(this._offset,o.width,o.height+a.height,t.align,t.valign),u.overflow.top>0&&"top"===t.valign&&(t.valign="bottom",u=e._chart.coordinate(this._offset,o.width,o.height+a.height,t.align,t.valign),s=this._arrow_direction(t))):u=e._chart.coordinate(this._offset,o.width+a.width,o.height,t.align,t.valign),this._element=e.draw_group(t.z_index).on("click",function(e){$.Event(e).stopPropagation()}),o.x=u.x+("left"===s?a.width:0),o.y=u.y+("top"===s?a.height:0),e.draw_rect($.extend({},t,{background:this.background}),o.x,o.y,o.width,o.height,this._element);var c=e.draw_text(t,this._html_with_css,o.x+i.left,o.y+i.top-r.y,this._element);if(this._link_elements=$("a, tspan[onclick]",c.element),this._link_elements.mousedown(function(){var t=$(this).text(),i=$(this).attr("href")||$(this).attr("onclick").replace(/^location\.href="(.+)"$/,"$1");n._event.trigger("link_click",[t,i]),e._chart.trigger("link_click",[n,t,i])}),t.toggle.enabled&&e.draw_image({z_index:t.z_index,cursor:"pointer"},Chart.Base.Theme.AssetPrefix+t.toggle.close.url,o.x+o.width-t.toggle.close.width,o.y,t.toggle.close.width,t.toggle.close.height,this._element).on("click",function(e){n._event.trigger("close_click"),$.Event(e).stopPropagation()}),a.width>0&&a.height>0){var d,h,f;switch(s){case"bottom":u=e._chart.coordinate(this._offset,a.width,a.height,"center","top"),d={x:u.x,y:u.y-1},h={x:d.x+a.width,y:d.y},f={x:(d.x+h.x)/2,y:d.y+a.height};break;case"top":u=e._chart.coordinate(this._offset,a.width,a.height,"center","bottom"),d={x:u.x,y:u.y+a.height},h={x:d.x+a.width,y:d.y},f={x:(d.x+h.x)/2,y:d.y-a.height};break;case"left":u=e._chart.coordinate(this._offset,a.width,a.height,"right","middle"),d={x:u.x+a.width,y:u.y},h={x:d.x,y:d.y+a.height},f={x:d.x-a.width,y:(d.y+h.y)/2};break;case"right":u=this._chart.coordinate(this._offset,a.width,a.height,"left","middle"),d={x:u.x+1,y:u.y},h={x:d.x,y:d.y+a.height},f={x:d.x+a.width,y:(d.y+h.y)/2}}e.draw_shape($.extend({},t,{background:this.background}),["M",d.x,d.y,"L",h.x,h.y,f.x,f.y,"Z"],this._element)}this._state.html=this.html},e.Text.prototype._add_css=function(e){var n,i,r,o;for(this._html_with_css=this.html;null!==(n=t.exec(this.html));)i=$.trim(n[1]),o="",e.has_text(i)&&(r=e.text(i),o='style="'+["font-size:"+r.font.size+"px","color:"+r.font.color,"font-weight:"+r.font.weight,"letter-spacing:"+r.font.letter_spacing+"px","opacity:"+r.font.opacity].join(";")+'"'),this._html_with_css=this._html_with_css.replace(n[0],o)}}(),function(){"use strict";var e=Chart.Overlay.TimeSeries;e.AnnotatedLine=Chart.Overlay.create_overlay("line",function(){this.x1=this.x2=this.y1=this.y2=void 0,this.html=void 0,this.color=void 0,this._line=void 0,this._text=new e.Text(this.class_name),this._state={x1:void 0,x2:void 0,y1:void 0,y2:void 0}}),e.AnnotatedLine.prototype.do_draw=function(e){if(void 0!==this.x1&&void 0!==this.x2&&void 0!==this.y1&&void 0!==this.y2&&void 0!==this.html){var t=e._chart.theme.text(this.class_name);this._line=e.draw_line($.extend({},t.line,{color:this.color||t.background,z_index:t.z_index}),this.x1,this.y1,this.x2,this.y2);var n=e.plotbox();this._text.offset(this.y2-n.y,0/0,0/0,this.x2-n.x-1),this._text.html=this.html,this._text.background=this.color,this._text.draw(e)}},e.AnnotatedLine.prototype.destroy=function(){this._line&&(this._line.destroy(),this._line=void 0),this._text&&this._text.destroy()},e.HorizontalLine=function(){this.y=void 0,e.AnnotatedLine.apply(this,arguments)},e.HorizontalLine.TYPE="hline",e.HorizontalLine.prototype=$.extend({},e.AnnotatedLine.prototype),e.HorizontalLine.prototype.do_draw=function(t,n){var i;void 0!==this.y&&(i=t.plotbox(),this.y1=this.y2=t.y_value_to_position(n.id,this.y),this.x1=i.x,this.x2=i.x+i.width,e.AnnotatedLine.prototype.do_draw.call(this,t))},e.SimpleHorizontalLine=function(){Chart.Overlay.create_overlay("simple_hline",function(){this.y=void 0}).apply(this,arguments)},e.SimpleHorizontalLine.prototype=$.extend({},Chart.Overlay.Base.prototype),e.SimpleHorizontalLine.prototype.destroy=function(){this._line&&(this._line.destroy(),this._line=void 0)},e.SimpleHorizontalLine.prototype.do_draw=function(e,t){var n;void 0!==this.y&&(n=e._chart.theme.text(this.class_name),n=$.extend({},n.line,{z_index:n.z_index}),this._line=e.draw_horizontal_line(n,this.y,t))},e.VerticalLine=function(){e.AnnotatedLine.apply(this,arguments),this.x=void 0},e.HorizontalLine.TYPE="vline",e.VerticalLine.prototype=$.extend({},e.AnnotatedLine.prototype),e.VerticalLine.prototype.do_draw=function(t){var n;void 0!==this.x&&(n=t.plotbox(),this.x1=this.x2=t.x_value_to_position(this.x),this.y1=n.y,this.y2=n.y+n.height,e.AnnotatedLine.prototype.do_draw.call(this,t))}}(),function(){"use strict";var e=Chart.Overlay.TimeSeries,t=Chart.Util.logger;e.Marker=Chart.Overlay.create_overlay("marker",function(){var t=this;this.x=void 0,this.html=void 0,this._text=new e.Text(this.class_name),this._text.on_close_click(function(){t.reset()}),this._toggler=void 0,this._state={show_toggler:!0,renderer:void 0,x:void 0,y:void 0,theme:void 0},this._event=$({})}),e.Marker.prototype.on_link_click=function(e){this._text.on_link_click(e)},e.Marker.prototype.on_close_click=function(e){this._text.on_close_click(e)},e.Marker.prototype.on_toggle_click=function(e){this._event.on("toggle_click",e)},e.Marker.prototype.reset=function(){this._state.show_toggler||(this._text.clear(),this._draw_toggler())},e.Marker.prototype.do_destroy=function(){this._toggler&&(this._toggler.destroy(),this._toggler=void 0)},e.Marker.prototype.do_draw=function(e,n,i){if(e.x_value_in_gap(i.id,this.x))t.error("not drawing out-of-range marker: ",this.x,new Date(this.x)),this.destroy();else{var r=e.plotbox();this._state.renderer=e,this._state.theme=e._chart.theme.text(this.class_name),this._state.x=e.x_value_to_position(this.x)-r.x,this._state.y=e.y_value_to_position(n.id,i.points.interpolate_by_x(this.x))-r.y,this._state.show_toggler?this._draw_toggler():this._draw_text()}},e.Marker.prototype._draw_toggler=function(){var e=this,t=this._state.renderer._chart.coordinate({top:this._state.y,left:this._state.x},this._state.theme.toggle.toggler.width,this._state.theme.toggle.toggler.height,"center","top");this._toggler=this._state.renderer.draw_image($.extend({},this._state.theme,{zIndex:this._state.theme.z_index-1,cursor:this.html?"pointer":"default"}),Chart.Base.Theme.AssetPrefix+this._state.theme.toggle.toggler.url,t.x,t.y,this._state.theme.toggle.toggler.width,this._state.theme.toggle.toggler.height).on("click",function(t){e.html.match(/^https?:\/\//)?window.location.href=e.html:e.html&&(e._state.renderer._chart.trigger("chart_click"),e._toggler.destroy(),e._draw_text(),e._event.trigger("toggle_click")),$.Event(t).stopPropagation()}),this._state.show_toggler=!0},e.Marker.prototype._draw_text=function(){this._text.offset(this._state.y,0/0,0/0,this._state.x,0/0),this._text.html=this.html,this._text.draw(this._state.renderer),this._state.show_toggler=!1}}(),function(){"use strict";Chart.Base.TimeSeries.OvenCrossLine=function(){},$.extend(Chart.Base.TimeSeries.OvenCrossLine.prototype,Chart.Overlay.Base.prototype),Chart.Base.TimeSeries.OvenCrossLine.prototype.do_draw=function(){}}(),function(){"use strict";var e=Chart.Overlay.TimeSeries;e.Tooltip={},e.Tooltip.Formatter=Chart.Overlay.create_overlay("tooltip-format",function(e){this.points=void 0,this._formatter=e}),e.Tooltip.Formatter.prototype.do_draw=function(){return this._formatter.call(null,this.points)},e.Tooltip.CrossLine=Chart.Overlay.create_overlay("tooltip-crossline",function(){this.points=void 0,this._vline=void 0,this._hlines={}}),e.Tooltip.CrossLine.prototype.do_draw=function(t){var n=this;return $.each(this.points,function(i,r){this._hlines={};var o=new e.HorizontalLine(n.class_name+"-y");o.y=r.point[1],o.html=r.y_axis.format(r.point[1]),o.color=t._chart.state.series_colors[r.series.id],n._hlines[r.series.id]=o,o.draw(t,r.y_axis),void 0===n._vline&&(n._vline=new e.VerticalLine(n.class_name+"-x"),n._vline.x=r.point[0],n._vline.html=t._chart.x.format(r.point[0]),n._vline.draw(t))}),!1},e.Tooltip.CrossLine.prototype.do_destroy=function(){$.each(this._hlines,function(e,t){t.destroy()}),this._hlines={},this._vline&&(this._vline.destroy(),this._vline=void 0)}}(),function(){"use strict";Chart.SeriesType={BASE:"base",CANDLE:"candle",COLUMN:"column",LINE:"line",OHLC:"ohlc"},Chart.StudyType={VOLUME:"volume",MACD:"macd",RSI:"rsi",BOLLINGER:"bollinger",PRICE_SMA:"price-sma",VOLUME_SMA:"volume-sma",PRICE_EMA:"price-ema",VOLUME_EMA:"volume-ema"},Chart.Renderer={},Chart.X_AXIS_ID="__X_AXIS_ID__"}(),function(){"use strict";Chart.Base.Theme=function(){this.font_family='"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',this.resize_animation=!0,this.resize_delay=200,this._text={},this._defaults={text:void 0}},Chart.Base.Theme.AssetPrefix="/",Chart.Base.Theme.prototype={text:function(e){return this._merge(this._defaults.text,this._text[e])},set_text_default:function(e){this._defaults.text=this._merge(this._defaults.text,e)},set_text:function(e,t){this._text[e]=this._merge(this._text[e],t)},has_text:function(e){return void 0!==this._text[e]},create_font:function(e){return this._merge({size:11,letter_spacing:0,color:"#333",weight:"normal",opacity:1},e)},highchart_font:function(e){return{color:e.color,fontSize:e.size+"px",fontWeight:e.weight,fontFamily:this.font_family,letterSpacing:e.letter_spacing+"px",opacity:e.opacity}},extend:function(e){var t=$.extend(!0,{},this);return e.call(t),t},_merge:function(e,t){return $.extend(!0,{},e,t)}}}(),function(){"use strict";var e=Chart.Util.logger,t="/";Chart.Renderer.HIGHCHARTS="highcharts",Chart.Base.TimeSeries.Renderer.Highcharts=function(e){var t=this;this._chart=e,this._measured_sizes=void 0,this._highchart=void 0,this._series_session_offset={},this.clear(),this._chart.theme.tooltip.persist||this._chart.container.mouseleave(function(){var e=t._chart.tooltip;e&&t._highchart&&(e.clear(),t._chart.trigger("tooltip_update"),t._highchart.tooltip&&(t._highchart.tooltip.isHidden=!1,t._highchart.tooltip.hide()))})},$.extend(Chart.Base.TimeSeries.Renderer.Highcharts.prototype,{plotbox:function(){return this._highchart.plotBox},chartbox:function(){return{x:0,y:0,width:this._highchart.chartWidth,height:this._highchart.chartHeight}},total_y_height:function(){var e=this._measured_sizes.plotarea.height;return e-=this._chart.x_inside_plotarea()?this._measured_sizes.x_axis_height+this._chart.theme.axis.x.margin.top+this._chart.theme.axis.x.margin.bottom:2},x_value_to_position:function(e){var t=this._chart.session_id_by_x(e);return void 0!==t?this._highchart.xAxis[t].toPixels(e):void 0},y_value_to_position:function(e,t){return this._highchart.get(e).toPixels(t)},x_value_in_gap:function(e,t){var n,i=!0,r=this._chart.session_id_by_x(t);return void 0!==r&&(n=this._highchart_series(e,r),i=t<n.data[0].x||t>n.data[n.data.length-1].x),i}}),$.extend(Chart.Base.TimeSeries.Renderer.Highcharts.prototype,{draw:function(t){var n=this;e.assert(void 0===this._highchart);var i=this._highchart_options();delete i.chart.events,e.debug($.extend(!0,{},i)),i.chart.animation=!1,this._chart.container.highcharts(i,function(){n._highchart=this,n._measure(),0===n._chart.x.categories.length&&n._set_x_format(),i=n._highchart_options(),e.log($.extend(!0,{},i)),n._highchart.destroy(),n._highchart=void 0,n._chart.container.highcharts(i,function(){n._highchart=this,t.call(void 0)})})},resize:function(){1===this._chart.state.sessions.length?this._highchart.setSize(this._chart.state.width,this._chart.state.height,this._chart.theme.resize_animation):this._chart.draw()},clear:function(){this._reset_measurement(),this._highchart&&(this._highchart.destroy(),this._highchart=void 0)}}),$.extend(Chart.Base.TimeSeries.Renderer.Highcharts.prototype,{draw_group:function(e,t){var n=this._highchart.renderer.g();return n.attr({zIndex:e}),n.add(t)},draw_rect:function(e,t,n,i,r,o){var a=this._highchart.renderer.rect(t,n,i,r,0);return a.attr({fill:e.background}),a.css({opacity:e.opacity}),a.add(o)},draw_line:function(e,t,n,i,r,o){var a=this._highchart.renderer.path(["M",t,n,"L",i,r]);return a.attr({"stroke-width":e.width,dashstyle:e.style,stroke:e.color,zIndex:e.z_index}),a.add(o)},draw_horizontal_line:function(e,t,n){var i,r,o,a,s=this.plotbox();return r=a=this.y_value_to_position(n.id,t),i=s.x,o=s.x+s.width,this.draw_line(e,i,r,o,a)},draw_shape:function(e,t,n){var i=this._highchart.renderer.path(t);return i.attr({fill:e.background}),i.css({opacity:e.opacity}),i.add(n)},draw_text:function(t,n,i,r,o){var a,s=this._chart.theme.highchart_font(t.font),l=t.max_width,u=this.chartbox().width-t.padding.left-t.padding.right;return e.assert(!isNaN(i)&&!isNaN(r)),1>=l&&(l=Math.round(this.chartbox().width*l)),s.width=Math.min(l,u),a=this._highchart.renderer.text(n,i,r),a.css(s),a.add(o)},draw_image:function(e,t,n,i,r,o,a){var s=this._highchart.renderer.image(t,n,i,r,o);return s.attr({zIndex:e.z_index}),s.css({cursor:e.cursor}),s.add(a)}}),$.extend(Chart.Base.TimeSeries.Renderer.Highcharts.prototype,{_highchart_series:function(e,n){var i=[e,n].join(t);return this._highchart.get(i)},_set_x_format:function(){var e=0,t=this._chart.state.session_total;$.each(this._highchart.xAxis,function(t,n){e+=$.map(n.ticks,function(){return 1}).length}),this._chart.x.set_format(Chart.Util.DateFormat.point_format(t),Chart.Util.DateFormat.label_format(t/e))},_highchart_options:function(){var e=this,t=this._chart.theme,n={title:{text:null},credits:{enabled:!1},tooltip:{enabled:void 0!==this._chart.tooltip,shared:!1,style:t.highchart_font(t.tooltip.font)},legend:{enabled:!1}};n.tooltip.formatter=function(){return e._chart.draw_tooltip(this.x)},n.chart={alignTicks:!0,reflow:!1,backgroundColor:t.background,plotBorderWidth:t.plotarea.border.width,plotBorderColor:t.plotarea.border.color,plotBackgroundColor:t.plotarea.background,spacingTop:t.margin.top,spacingRight:t.margin.right,spacingBottom:t.margin.bottom,spacingLeft:t.margin.left,events:{redraw:function(){e._chart.trigger("redraw")},click:function(){e._chart.trigger("chart_click")}}};var i={};return n.yAxis=[],n.series=[],this._highchart_panel_options(i,n.yAxis,n.series),n.xAxis=this._highchart_x_axis_options(i),n.plotOptions={column:{grouping:!t.plot.column.allow_overlapping}},n},_highchart_series_option:function(e,t){var n=this;t.points.clear_changes();var i=this._chart.theme.series(t.type,t.class_name),r={type:t.type,yAxis:e.id,dataLabels:{enabled:i.label.enabled,formatter:function(){return e.format(this.y)},style:this._chart.theme.highchart_font(i.label.font)},marker:{enabled:i.marker.enabled,symbol:"circle"},events:{click:function(){n._chart.trigger("series_click",t)}},color:this._chart.state.series_colors[t.id],shadow:i.shadow,enableMouseTracking:i.tracking};switch("auto"!==i.label.vertical_align&&(r.dataLabels.verticalAlign=i.label.vertical_align),r.type){case Chart.SeriesType.LINE:r.lineWidth=i.width,r.dashStyle=i.style;break;case Chart.SeriesType.COLUMN:r.borderWidth=i.border.width,r.minPointLength=i.min_height,r.pointPadding=i.point_padding,r.groupPadding=i.group_padding}return r},_highchart_axis_options:function(e){return{gridLineWidth:e.grid_line.width,gridLineColor:e.grid_line.color,gridLineDashStyle:e.grid_line.style,lineWidth:e.axis_line.width,lineColor:e.axis_line.color,tickLength:e.tick.length,tickColor:e.tick.color,labels:{style:this._chart.theme.highchart_font(e.label.font)}}},_highchart_x_axis_options:function(e){var t,n,i=this,r=[],o=this._chart.theme.axis.x,a=$.extend(!0,{type:"datetime",minPadding:0,maxPadding:0,offset:0,labels:{formatter:function(){return i._chart.x.format_axis(this.value,this.isFirst)}}},e),s=this._measured_sizes.plotarea.width/this._chart.state.session_total,l=this._measured_sizes.plotarea.left;for(n=0;n<this._chart.state.sessions.length;++n){t=this._chart.state.sessions[n];var u=Math.round((t.max-t.min)*s),c=$.extend(!0,i._highchart_axis_options(o),a,{id:"x-axis-"+n,left:l,width:u,min:t.min,max:t.max});l+=u,r.push(c),n>0&&(c.plotLines=[{color:o.session_line.color,width:o.session_line.width,value:c.min+Math.ceil((c.max-c.min)/c.width),dashStyle:o.session_line.style}])}return 1===r.length&&(delete r[0].left,delete r[0].width),r
},_highchart_panel_options:function(n,i,r){var o=this;n.opposite=this._chart.theme.panel_below_x===this._chart.panels.first().id;var a=this._measured_sizes.plotarea.top,s=this.total_y_height(),l=o._chart.state;this._chart.panels.each(function(u,c){o._chart.x_inside_plotarea()&&c===o._chart.theme.panel_below_x&&(n.offset=-(o._measured_sizes.plotarea.height+o._measured_sizes.plotarea.top-o._chart.theme.axis.x.margin.top-a),a+=o._measured_sizes.x_axis_height+o._chart.theme.axis.x.margin.top+o._chart.theme.axis.x.margin.bottom);var d=Math.round(l.panel_heights[c]*s);u.ys.each(function(n){n.is_empty()||(i.push(o._highchart_y_axis_options(n,a,d)),n.series.each(function(i){if(!i.points.is_empty()){var a,s,u,c=o._highchart_series_option(n,i),d=0;for(a=0;a<l.sessions.length;++a)s=i.points.points_between(l.sessions[a].min,l.sessions[a].max),e.debug(i.id," ",s.length," points between ",l.sessions[a].min,l.sessions[a].max),s.length>0&&(u=$.extend(!0,{id:[i.id,a].join(t),xAxis:"x-axis-"+a},c),u.data=s,r.push(u),o._series_session_offset[u.id]=d,d+=s.length)}}))}),a+=d})},_highchart_y_axis_options:function(t,n,i){var r=this._chart.theme.y(t.id),o=this._chart.state,a=this.total_y_height(),s=$.extend(!0,this._highchart_axis_options(r),{id:t.id,title:{text:null},opposite:r.right,offset:0,top:n,height:i,labels:{enabled:r.label.enabled,align:r.right?"left":"right",formatter:function(){return t.format(this.value)}},plotLines:[],minPadding:0,maxPadding:0,min:o.y_extremes[t.id].min,max:o.y_extremes[t.id].max});r.enforce_range&&(s.startOnTick=!1,s.endOnTick=!1);var l=s.max-s.min,u=r.margin.top>=1?r.margin.top:r.margin.top*a;return u>0&&(s.max+=l/(s.height/u-1)),o.y_extremes[t.id].max<=0&&s.max>0&&(s.max=0),u=r.margin.bottom>=1?r.margin.bottom:r.margin.bottom*a,u>0&&(s.min-=l/(s.height/u-1)),o.y_extremes[t.id].min>=0&&s.min<0&&(s.min=0),e.assert(s.top>=0&&s.height>0,"y-axis offset is negative"),r.border.top.width>0&&(s.plotLines.push({value:s.max,color:r.border.top.color,width:r.border.top.width}),s.max+=r.border.top.width*l/s.height),r.border.bottom.width>0&&(s.plotLines.push({value:s.min,color:r.border.bottom.color,width:r.border.bottom.width}),s.min-=r.border.bottom.width*l/s.height),s}}),$.extend(Chart.Base.TimeSeries.Renderer.Highcharts.prototype,{_reset_measurement:function(){this._measured_sizes={x_axis_height:10,plotarea:{height:this._chart.state.height,width:this._chart.state.width,top:this._chart.theme.margin.top,left:this._chart.theme.margin.left}}},_measure:function(){var t=this._get_bbox(this._highchart.xAxis[0].labelGroup.element),n=this._get_bbox(this._highchart.xAxis[0].axisGroup.element);this._measured_sizes.x_axis_height=Math.max(t.y+t.height,n.y+n.height)-(n.y>0?Math.min(t.y,n.y):t.y),this._measured_sizes.plotarea={height:this._highchart.plotBox.height,width:this._highchart.plotBox.width,top:this._highchart.plotBox.y,left:this._highchart.plotBox.x},e.debug($.extend(!0,{},this._measured_sizes))},_get_bbox:function(e){if(Highcharts.vml){var t=$(e),n=t.offset(),i=this._chart.container.offset(),r={x:n.left-i.left,y:n.top-i.top,height:Math.max(t.height(),t.children().height()),width:t.width()};return r}return e.getBBox()}})}(),function(){"use strict";function e(e){return o[e]+"Series"}function t(e){var t=this;this._container=e,this._oven=Oven.getSeries().createVisualizationHost(e[0]),this._calls=[],$.each(this._oven,function(e,n){t[e]=function(){t._calls.push({method:e,args:Array.prototype.slice.call(arguments,0)}),r.debug(e,Array.prototype.slice.call(arguments,0)),n.apply(t._oven,arguments)}})}function n(e){var t=l[e];return void 0===t&&(t=l.dash),t}function i(e,t,n){var i=!1,r=e[t];return r?r[n]&&(i=!0):(r={},e[t]=r),r[n]=!0,i}var r=Chart.Util.logger,o={};o[Chart.SeriesType.LINE]="Line",o[Chart.SeriesType.COLUMN]="Bars",o[Chart.SeriesType.OHLC]="OHLCBars",o[Chart.SeriesType.CANDLE]="OHLCCandles";var a="x-sessions",s=function(){};s.prototype.destroy=function(){},t.prototype.dump_html=function(){function e(e,t){return[e,"(",$.map(t,function(e){return JSON.stringify(e)}).join(","),");"].join("")}var t=["<!-- BEGIN OVEN CALL DUMP -->",['<div id="container" style="width: ',this._container.width(),"px; ","height: ",this._container.height(),'px"',"></div>"].join(""),'<script type="text/javascript" src="../lib/require.js"></script>','<script type="text/javascript">',e("require.config",[{paths:{oven:"../lib/oven/source/oven"}}]),'require(["oven/visualizations/visualizations", "oven/unvetted/kernel/kernelUtil"], function(Oven, KernelUtil){',"KernelUtil.log.setTrace(true);","KernelUtil.log.setWarn(true);","KernelUtil.log.setError(true);",'var oven = Oven.getSeries().createVisualizationHost(document.getElementById("container"));'];return $.each(this._calls,function(n,i){t.push(e("oven."+i.method,i.args))}),t.push("});"),t.push("</script>"),t.push("<!-- END OVEN CALL DUMP -->"),t.join("\n")},Chart.Renderer.OVEN="oven",Chart.Base.TimeSeries.Renderer.Oven=function(e){this._chart=e,this._oven=void 0,this._configs={},this._data={},this._referenceLineId=0},$.extend(Chart.Base.TimeSeries.Renderer.Oven.prototype,{plotbox:function(){return{x:0,y:0,width:this._chart.state.width,height:this._chart.state.height}},chartbox:function(){return this.plotbox()},total_y_height:function(){return this.plotbox().height},x_value_to_position:function(){return 0},y_value_to_position:function(){},x_value_in_gap:function(e,t){return void 0!==this._chart.session_id_by_x(t)}}),$.extend(Chart.Base.TimeSeries.Renderer.Oven.prototype,{draw:function(e){var n=!1;void 0===this._oven&&(this._oven=Chart.DEBUG?new t(this._chart.container):Oven.getSeries().createVisualizationHost(this._chart.container[0]),n=!0),this._oven_remove_stale_objects(),this._oven_set_plotarea(),this._oven_set_panels(),n&&this._oven.initialPaint(),e()},resize:function(){},clear:function(){this._oven},destroy:function(){this._oven&&(this._chart.container.empty(),this._oven=void 0)}});var l={dash:[4,3],dot:[1,3],longdash:[8,3],solid:[1,0]};$.extend(Chart.Base.TimeSeries.Renderer.Oven.prototype,{draw_group:function(e,t){return new s(e,t)},draw_rect:function(e,t,n,i,r,o){return new s(e,t,n,i,r,o)},draw_line:function(e,t,n,i,r,o){return new s(e,t,n,i,r,o)},draw_horizontal_line:function(e,t,i){var r=this,o=this._chart.panels.find_by(function(e){return e.ys.exist(i.id)});return++this._referenceLineId,this._oven_config_set("ReferenceLine",this._referenceLineId,{panelId:"Panel:"+o.id,dependentAxisConfigId:"NumericAxis:"+i.id,index:1,position1:t,lineColor:e.color,lineDash:n(e.style),lineWidth:e.width,order:e.z_index}),{destroy:function(e){return function(){r._oven_config_remove("ReferenceLine",e)}}(this._referenceLineId)}},draw_shape:function(e,t,n){return new s(e,t,n)},draw_text:function(e,t,n,i,r){return new s(e,t,n,i,r)},draw_image:function(e,t,n,i,r,o,a){return new s(e,t,n,i,r,o,a)}}),$.extend(Chart.Base.TimeSeries.Renderer.Oven.prototype,{_oven_id:function(e,t){return e+(t?":"+t:"")},_oven_config_set:function(e,t,n){var r=this._oven_id(e,t);i(this._configs,e,t)?this._oven.updateConfig(r,n):this._oven.addConfig(r,n)},_oven_config_remove:function(e,t){this._configs[e]&&this._configs[e][t]&&(delete this._configs[e][t],this._oven.removeConfig(e,t))},_oven_data_set:function(e,t){void 0===this._data[e]?(this._data[e]=!0,this._oven.addDataSource("jsTable",e,t)):this._oven.updateDataSource(e,t)},_oven_data_remove:function(e){this._data[e]&&(delete this._data[e],this._oven.removeDataSource(e))},_oven_remove_stale_objects:function(){var t=this,n={};this._chart.panels.each(function(t){t.ys.each(function(t){t.series.each(function(t){t.points.is_empty()||i(n,e(t.type),t.id)}),t.is_empty()||i(n,"NumericAxis",t.id)}),t.is_empty()||i(n,"Panel",t.id)});var r=[];for(var a in o)o.hasOwnProperty(a)&&r.push(e(a));r=r.concat(["ReferenceLine","SeriesTracker","NumericAxis","Panel"]),$.each(r,function(e,i){t._configs[i]&&$.each(t._configs[i],function(e){n[i]&&n[i][e]||(t._oven_config_remove(i,e),t._oven_data_remove(e))})})},_oven_set_plotarea:function(){var e=this._chart.theme,t=this._chart.panels.first().ys.first(),n=e.y(t.id),i=18e5,o=this._chart.state.session_total/(this._chart.state.width/60);o=i*Math.ceil(o/i,10),r.debug("Label x axis every "+o/i/2+" hours. "+"About "+this._chart.state.width/(this._chart.state.session_total/o)+" pixels per tick."),this._chart.container.css({background:e.background,padding:[e.margin.top,e.margin.right,e.margin.bottom,e.margin.left].join("px ")+"px"}),this._oven_config_set("SeriesVisualization",void 0,{independentAxisConfigId:"TimeseriesAxis:independentAxis",independentAxisPadding1:0,independentAxisPosition:t.id===e.panel_below_x?"Top":"Bottom",dependentAxisSize:80}),this._oven_config_set("PlotArea","plotArea1",{backgroundColor0:e.plotarea.background,backgroundColor1:e.plotarea.background,independentAxisGridLinesMode:e.axis.x.grid_line.width>0?"DataInterval":"None",independentAxisGridLinesParameter:o,dependentAxisGridLinesMode:n.grid_line.width>0?"NiceNumeric":"None",dependentAxisGridLinesParameter:Math.round(this.total_y_height()/50)});var s=this._oven_set_sessions(),l=s.labelFormat,u=s.isIntraday;this._oven_config_set("TimeseriesAxis","independentAxis",{backgroundColor:e.background,intervalsDataAdapterId:a,intervalsLabelFormat:l,majorTicksMode:"DataInterval",majorTickLength:10,majorTicksParameter:o,majorTicksLabelFormat:Chart.Util.DateFormat.oven_label_format(o),minorTicksMode:"none",showTitle:!1,timezone:{offset:u?Chart.Base.TimeSeries.Theme.UTC_OFFSET:0},borderColor:e.axis.x.axis_line.color,borderWidth:e.axis.x.axis_line.width,foregroundColor:e.axis.x.label.font.color,labelFontFamily:e.font_family,labelFontSize:e.axis.x.label.font.size,majorTicksAppearance:{line:{length:e.axis.x.tick.length,width:1,offset:4}},intervalsTicksAppearance:{line:{length:e.axis.x.session_line.height,width:e.axis.x.session_line.width,offset:-12}}})},_oven_set_sessions:function(){var e,t,n,i,o=[],s=[0,0,0],l=5184e5;if(1!==this._chart.state.sessions.length&&r.warn("OVEN renderer can only handle 1 session"),t=new Date(this._chart.state.x_extremes.min),n=new Date(this._chart.state.x_extremes.max),n.getFullYear()-t.getFullYear()>0?s[0]=1:n.getMonth()-t.getMonth()?s[1]=1:n.getDate()-t.getDate()&&(s[2]=1),0===s[0]+s[1]+s[2])i=.01*(this._chart.state.sessions[0].max-this._chart.state.sessions[0].min),o=[[this._chart.state.sessions[0].min-i,this._chart.state.sessions[0].max+i]],e=1728e5;else{for(;n>t;)o.push([t.getTime(),void 0]),t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0),t.setUTCMilliseconds(0),t.setUTCFullYear(t.getUTCFullYear()+s[0]),t.setUTCMonth(s[0]>0?0:t.getUTCMonth()+s[1]),t.setUTCDate(s[0]+s[1]>0?1:t.getUTCDate()+s[2]),o[o.length-1][1]=t.getTime()-1,t.setTime(t.getTime());o[o.length-1][1]=n.getTime(),i=.01*(o[o.length-1][1]-o[0][0]),o[0][0]-=i,o[o.length-1][1]+=i,e=1e3*86400*2*(365*s[0]+31*s[1]+s[2])}this._oven_data_set(a,{type:"IntervalSeries",mapping:[["Value1","DOUBLE",0],["Value2","DOUBLE",1]],data:o});var u=6;return{isIntraday:l>n-t,labelFormat:Chart.Util.DateFormat.oven_label_format(e*u)}},_oven_set_panels:function(){var e=this,t=0,n=!0;this._chart.panels.each(function(i){var r=0,o=0;if(!i.is_empty()){var a=e._chart.theme.y(i.ys.first().id);i.ys.each(function(t){t.is_empty()||(r=Math.max(r,e._chart.theme.y(t.id).margin.top),o=Math.max(o,e._chart.theme.y(t.id).margin.bottom))}),e._oven_config_set("Panel",i.id,{plotAreaConfigId:"PlotArea:plotArea1",intervalGradients:!1,independentAxisConfigId:"TimeseriesAxis:independentAxis",size:e._chart.state.panel_heights[i.id],position:++t,borderColor:a.border.bottom.color,borderWidth:a.border.bottom.width,dependentAxisPadding0:r,dependentAxisPadding1:o});var s=!0;i.ys.each(function(t){if(!t.is_empty()&&(e._oven_set_y(i,t),n&&s&&e._chart.tooltip)){n=s=!1,e._oven_config_set("SeriesTracker",i.id,{panelId:"Panel:"+i.id,dependentAxisConfigId:"NumericAxis:"+t.id,dependentAxisPosition:e._chart.theme.y(t.id).right?"Right":"Left",enable:!0,signalOnMove:!0});var r,o=150,a=e._chart,l=null;e._oven.signalConnect("tracker_move",function(e){r=e.position[0],null===l&&(l=setTimeout(function(){a.draw_tooltip(r),l=null},o))})}})}})},_oven_set_y:function(e,t){var n=this,i=this._chart.theme.y(t.id),r=t.extremes(),o=r.min===r.max?1.01:1;n._oven_config_set("NumericAxis",t.id,{foregroundColor:i.label.font.color,labelFontFamily:this._chart.theme.font_family,labelFontSize:i.label.font.size,backgroundColor:this._chart.theme.background,majorTicksMode:"NiceNumeric",borderWidth:i.axis_line.width,borderColor:i.axis_line.color,majorTicksLabelFormat:t.oven_format_string(),minorTicksMode:"None",boundaryLabel0:!1,showTitle:!1,majorTicksAppearance:{line:{length:i.tick.length,width:1,offset:4}},bound:{min:r.min,max:r.max*o}});var a=0;t.series.each(function(i){i.points.is_empty()||(n._oven_set_series(e,t,i,a),++a)})},_oven_set_series:function(t,n,i,o){var a,s,l,u,c;switch(u=this._chart.theme.y(n.id),c=this._chart.theme.series(i.type,i.class_name),s={data:i.points.points()},l={dataAdapterId:i.id,panelId:"Panel:"+t.id,dependentAxisConfigId:"NumericAxis:"+n.id,dependentAxisPosition:u.right?"Right":"Left",lineWidth:c.width,highlightWidth:3,enableInteractions:!1,order:o},i.type){case Chart.SeriesType.COLUMN:s.type="Series",s.mapping=[["IndependentValue","DOUBLE",0],["DependentValue","DOUBLE",1]],l.lineColor=l.fillColor=this._chart.state.series_colors[i.id];var d=864e5,h=3e5;l.barAlign=.5,l.barWidthAndSpacingMode="percentofdata",l.barSpacing=this._chart.state.x_extremes.max-this._chart.state.x_extremes.min>d?d:h;break;case Chart.SeriesType.LINE:s.type="Series",s.mapping=[["IndependentValue","DOUBLE",0],["DependentValue","DOUBLE",1]],l.lineColor=this._chart.state.series_colors[i.id];break;case Chart.SeriesType.CANDLE:case Chart.SeriesType.OHLC:i.type===Chart.SeriesType.CANDLE&&(l.lineWidth=c.candle_width),s.type="OHLCSeries",s.mapping=[["IndependentValue","DOUBLE",0],["Open","DOUBLE",1],["High","DOUBLE",2],["Low","DOUBLE",3],["Close","DOUBLE",4]],l.gainColor=c.gain_color,l.lossColor=c.loss_color,l.color=c.neutral_color;break;default:r.error("unsupported series type: "+i.type)}this._oven_data_set(i.id,s),a=e(i.type),this._oven_config_set(a,i.id,l)}})}(),function(){"use strict";var e=Chart.Util.logger;Chart.Base.TimeSeries.XAxis=function(){this.categories=[],this._sessions=[],this._axis_format="%Y",this._point_format="%Y",this._state={last_tick_label:void 0}},Chart.Base.TimeSeries.XAxis.prototype.add_session=function(t,n){e.assert(void 0!==t),e.assert(void 0!==n),e.assert(n>=t),this._sessions.push({begin:t,end:n})},Chart.Base.TimeSeries.XAxis.prototype.clear_sessions=function(){this._sessions=[]},Chart.Base.TimeSeries.XAxis.prototype.sessions=function(){var e,t,n,i=[];if(0===this._sessions.length)i.push({});else for(this._sessions.sort(function(e,t){return e.begin-t.begin}),i.push(this._sessions[0]),t=i[0],e=1;e<this._sessions.length;++e)n=this._sessions[e],t.end>=n.begin?t.end=Math.max(t.end,n.end):(t=n,i.push(t));return i},Chart.Base.TimeSeries.XAxis.prototype.format=function(e){return this.categories.length>0?this.categories[e]:(e+=Chart.Base.TimeSeries.Theme.UTC_OFFSET,Highcharts.dateFormat(this._point_format,e))},Chart.Base.TimeSeries.XAxis.prototype.format_axis=function(e,t){if(this.categories.length>0)return this.categories[e];e+=Chart.Base.TimeSeries.Theme.UTC_OFFSET;var n=Highcharts.dateFormat(this._axis_format,e);return"%b"===this._axis_format&&"Jan"===n?n=Highcharts.dateFormat("%Y",e):this._axis_format.indexOf("%l")>=0&&(t||"12am"===n||"12:00am"===n)&&(n=Highcharts.dateFormat("%m/%d",e)),t||n!==this._state.last_tick_label||(n=null),this._state.last_tick_label=n,n},Chart.Base.TimeSeries.XAxis.prototype.set_format=function(t,n){e.assert(0===this.categories.length),this._axis_format=n,this._point_format=t}}(),function(){"use strict";Chart.Base.TimeSeries.YAxis=function(e){this.id=e,this.series=new Chart.Util.OrderedHash,this.precision=0,this.multiplier=1,this.suffix="",this.thousands_separator=","},$.extend(Chart.Base.TimeSeries.YAxis.prototype,Chart.Overlay.Operations),Chart.Base.TimeSeries.YAxis.prototype.is_empty=function(){return void 0===this.series.find_by(function(e){return!e.points.is_empty()})},Chart.Base.TimeSeries.YAxis.prototype.extremes=function(){var e=Number.MAX_VALUE,t=-Number.MAX_VALUE;return this.series.each(function(n){var i=n.points.y_extremes();e=Math.min(e,i.min),t=Math.max(t,i.max)}),this.each_overlay(function(n){void 0!==n.y&&(e=Math.min(e,n.y),t=Math.max(t,n.y))}),{min:e,max:t}},Chart.Base.TimeSeries.YAxis.prototype.oven_format_string=function(){var e="nck|d"+this.precision+"."+this.precision;return this.percentage&&(e="{"+e+"}%"),e},Chart.Base.TimeSeries.YAxis.prototype.format=function(e){var t;return t=void 0===e?"---":Highcharts.numberFormat(e*this.multiplier,this.precision,".",this.thousands_separator)+this.suffix}}(),function(){"use strict";Chart.Base.TimeSeries.Panel=function(e){this.id=e,this.ys=new Chart.Util.OrderedHash},Chart.Base.TimeSeries.Panel.prototype.is_empty=function(){return void 0===this.ys.find_by(function(e){return!e.is_empty()})}}(),function(){"use strict";var e=0;Chart.Base.TimeSeries.Series=function(t,n,i){void 0===i?(this.id="series-"+e,++e):this.id=i,this.type=t,this.class_name=n,this.points=new Chart.Base.TimeSeries.DataPoints([])},$.extend(Chart.Base.TimeSeries.Series.prototype,Chart.Overlay.Operations)}(),function(){"use strict";function e(e){return $.extend(!0,[],e)}function t(e){this._pivot=void 0,this.points=e,this._original_points=this.points}var n=Chart.Util.logger;t.prototype={unset_pivot:function(){void 0!==this._pivot&&(this.points=this._original_points,this._pivot=void 0)},set_pivot:function(e){e=this._determine_pivot(e),e!==this._pivot&&(void 0===this._pivot&&(this._original_points=this.points),this._pivot=e,this.points=this._convert_to_relative_changes(this._original_points,this._pivot))},append:function(e){this._original_points=this._original_points.concat(e),this.points=void 0===this._pivot?this._original_points:this.points.concat(this._convert_to_relative_changes(e,this._pivot)),n.assert(this._original_points.length===this.points.length)},shift:function(e){this._original_points=this._original_points.slice(e),this.points=void 0===this._pivot?this._original_points:this.points.slice(e),n.assert(this._original_points.length===this.points.length)},_determine_pivot:function(e){if(0!==e&&void 0!==e)return e;for(var t=0;t<this._original_points.length&&0===this._original_points[t][1];)++t;return t<this._original_points.length?this._original_points[0][1]:void 0},_convert_to_relative_changes:function(t,n){var i=0;for(t=e(t),i=0;i<t.length;++i)t[i][1]=100*((t[i][1]-n)/n);return t}},Chart.Base.TimeSeries.DataPoints=function(n){this._values=new t(e(n)),this._changes={shift:0,appends:new t([])}},Chart.Base.TimeSeries.DataPoints.prototype.points=function(){return this._values.points},Chart.Base.TimeSeries.DataPoints.prototype.original_points=function(){return this._values._original_points},Chart.Base.TimeSeries.DataPoints.prototype.points_between=function(e,t){n.assert(t>=e);var i,r,o=this.points(),a=[];for(r=Math.min(this.lower_bound_by_x(t),o.length-1);r>=0&&o[r][0]>t;)--r;return r>=0&&(i=this.lower_bound_by_x(e),i<o.length&&(a=o.slice(i,r+1))),a},Chart.Base.TimeSeries.DataPoints.prototype.get=function(e){return{x:this.points()[e][0],y:this.points()[e][1]}},Chart.Base.TimeSeries.DataPoints.prototype.first=function(){return this.get(0)},Chart.Base.TimeSeries.DataPoints.prototype.last=function(){return this.get(this.points().length-1)},Chart.Base.TimeSeries.DataPoints.prototype.is_empty=function(){return 0===this.points().length},Chart.Base.TimeSeries.DataPoints.prototype.clear_changes=function(){this._changes.shift=0,this._changes.appends.shift(this._changes.appends.points.length)},Chart.Base.TimeSeries.DataPoints.prototype.changes=function(){return{shift:this._changes.shift,appends:this._changes.appends.points}},Chart.Base.TimeSeries.DataPoints.prototype.append=function(t){t=e(t),this._values.append(t),this._changes.appends.append(t)},Chart.Base.TimeSeries.DataPoints.prototype.shift=function(e){e>this.points().length&&(n.error("Trying to shift "+this.points().length+" points by "+e),e=this.points().length),this._values.shift(e),this._changes.shift+=e},Chart.Base.TimeSeries.DataPoints.prototype.replace=function(e){this.shift(this.points().length),this.append(e)},Chart.Base.TimeSeries.DataPoints.prototype.set_pivot=function(e){this._values.set_pivot(e),this._changes.appends.set_pivot(e)},Chart.Base.TimeSeries.DataPoints.prototype.unset_pivot=function(){this._values.unset_pivot(),this._changes.appends.unset_pivot()},Chart.Base.TimeSeries.DataPoints.prototype.x_extremes=function(){return{min:this.first().x,max:this.last().x}},Chart.Base.TimeSeries.DataPoints.prototype.y_extremes=function(){var e,t=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(e=0;e<this.points().length;++e)t=Math.min(t,this.points()[e][1]),n=Math.max(n,this.points()[e][1]);return{min:t,max:n}},Chart.Base.TimeSeries.DataPoints.prototype.find_index_by_x=function(e){var t=this.points(),n=this.lower_bound_by_x(e);return n<t.length&&t[n][0]===e?n:void 0},Chart.Base.TimeSeries.DataPoints.prototype.lower_bound_by_x=function(e){return Chart.Util.lower_bound(this.points(),0,e)},Chart.Base.TimeSeries.DataPoints.prototype.interpolate_by_x=function(e){var t,n,i,r=this.points();return 1===r.length?r[0][1]:(n=this.lower_bound_by_x(e),n=Math.min(n,r.length-1),r[n][0]===e?r[n][1]:(n=Math.max(n,1),t=n-1,i=(r[n][1]-r[t][1])/(r[n][0]-r[t][0]),r[t][1]+i*(e-r[t][0])))},Chart.Base.TimeSeries.DataPoints.prototype.find_index_nearest_x=function(e){var t=this.points();if(0===t.length)return void 0;var n=this.lower_bound_by_x(e);if(n===t.length)return n-1;if(0===n)return 0;var i=t[n],r=i[0]-e,o=t[n-1],a=e-o[0];return a>r?n:n-1}}(),function(){"use strict";var e=Chart.Util.logger;Chart.Base.TimeSeries.TimeSeriesChart=function(e,t){var n=this;switch(this.container=$(e),this.theme=t,this.x=new Chart.Base.TimeSeries.XAxis,this.panels=new Chart.Util.OrderedHash,this.tooltip=void 0,this.state={sessions:void 0,session_total:void 0,x_extremes:void 0,y_extremes:void 0,panel_ranges:void 0,panel_range_total:void 0,panel_heights:void 0,series_colors:void 0,width:this.container.width(),height:this.container.height()},t.renderer){case Chart.Renderer.HIGHCHARTS:this.renderer=new Chart.Base.TimeSeries.Renderer.Highcharts(this);break;case Chart.Renderer.OVEN:this.renderer=new Chart.Base.TimeSeries.Renderer.Oven(this),t.tooltip.enabled&&(this.tooltip=new Chart.Base.TimeSeries.OvenCrossLine)}this._drawn=!1,this._resize_timer=void 0,this._resize_handler=function(){n._resize_timer&&window.clearTimeout(n._resize_timer),n._resize_timer=window.setTimeout(function(){n.resize()},t.resize_delay)},$(window).on("resize",this._resize_handler),this._event=$({}),this._event.on("redraw",function(){n.draw_overlays()}),this._event.on("chart_click",function(){n.reset_markers()})},$.extend(Chart.Base.TimeSeries.TimeSeriesChart.prototype,Chart.Overlay.Operations),Chart.Base.TimeSeries.TimeSeriesChart.export_methods=function(t,n){t=t.prototype,n=(n||[]).concat($.grep(["resize","on_draw","on_link_click","add_overlay","remove_overlay","destroy","series_color"],function(e){return void 0===t[e]})),$.each(n,function(n,i){e.assert(void 0===t[i]),t[i]=function(){return Chart.Base.TimeSeries.TimeSeriesChart.prototype[i].apply(this._chart,arguments)}})},Chart.Base.TimeSeries.TimeSeriesChart.prototype.coordinate=function(e,t,n,i,r){var o=this.renderer.plotbox(),a={x:0,y:0},s={x:Math.floor(this.container.width()-t),y:Math.floor(this.container.height()-n)},l={x:o.x+e.left,y:o.y+e.top,overflow:{top:0,right:0,bottom:0,left:0}};switch(isNaN(l.x)&&(l.x=o.x+o.width-e.right),isNaN(l.y)&&(l.y=o.y+o.height-e.bottom),i){case"left":l.x-=t;break;case"center":l.x-=t/2;break;case"right":}switch(r){case"top":l.y-=n;break;case"middle":l.y-=n/2;break;case"bottom":}return l.x=Math.round(l.x),l.y=Math.round(l.y),l.x>s.x?(l.overflow.right=l.x-s.x,l.x=s.x):l.x<a.x&&(l.overflow.left=a.x-l.x,l.x=a.x),l.y>s.y?(l.overflow.bottom=l.y-s.y,l.y=s.y):l.y<a.y&&(l.overflow.top=a.y-l.y,l.y=a.y),l},Chart.Base.TimeSeries.TimeSeriesChart.prototype.series_color=function(e){return this.state.series_colors[e]},Chart.Base.TimeSeries.TimeSeriesChart.prototype.points_by_x=function(e){var t={};return this.panels.each(function(n){n.ys.each(function(n){n.series.each(function(i){var r=i.points.find_index_nearest_x(e);void 0!==r&&(t[i.id]={series:i,y_axis:n,point:i.points.points()[r],original_point:i.points.original_points()[r]})})})}),t},Chart.Base.TimeSeries.TimeSeriesChart.prototype.session_id_by_x=function(t){var n,i,r=this.state.sessions;for(n=0;n<r.length;++n)if(i=r[n],t>=i.min&&t<=i.max)return n;e.warn("x=",t," does not belong to any session.")},Chart.Base.TimeSeries.TimeSeriesChart.prototype.x_inside_plotarea=function(){var e=this,t=[0,0],n=0;return void 0!==this.theme.panel_below_x&&this.theme.panel_below_x!==this.panels.first().id&&this.panels.each(function(i,r){r===e.theme.panel_below_x&&++n,i.is_empty()||++t[n]}),t[0]>0&&t[1]>0},Chart.Base.TimeSeries.TimeSeriesChart.prototype.drawn=function(){return this._drawn},Chart.Base.TimeSeries.TimeSeriesChart.prototype.draw=function(){var t=this;return this.container.is(":visible")&&0!==this.container.width()&&0!==this.container.height()?(this.clear(),this.state.width=this.container.width(),this.state.height=this.container.height(),this._set_y_extremes(),this._set_x_extremes(),this._set_panel_heights(),this._set_sessions(),this._set_series_colors(),this.renderer.draw(function(){t._drawn=!0,void 0!==t._tooltip_x_value_set&&t.draw_tooltip(t._tooltip_x_value_set),t.draw_overlays(),t._event.trigger("draw")}),void 0):(e.warn("Trying to render chart with invisible container."),void 0)},Chart.Base.TimeSeries.TimeSeriesChart.prototype.clear=function(){this.destroy_overlays(),this.renderer.clear()},Chart.Base.TimeSeries.TimeSeriesChart.prototype.destroy=function(){this.clear(),this._resize_timer&&window.clearTimeout(this._resize_timer),$(window).off("resize",this._resize_handler)},Chart.Base.TimeSeries.TimeSeriesChart.prototype.resize=function(){this.drawn()?(this.state.width!==this.container.width()||this.state.height!==this.container.height())&&(this.state.width=this.container.width(),this.state.height=this.container.height(),this.renderer.resize()):this.draw()},Chart.Base.TimeSeries.TimeSeriesChart.prototype.destroy_overlays=function(){this.each_overlay(function(e){e.destroy()}),this.panels.each(function(e){e.ys.each(function(e){e.each_overlay(function(e){e.destroy()}),e.series.each(function(e){e.each_overlay(function(e){e.destroy()})})})})},Chart.Base.TimeSeries.TimeSeriesChart.prototype.draw_overlays=function(){var e=this.renderer;this.each_overlay(function(t){t.draw(e)}),this.panels.each(function(t){t.ys.each(function(t){t.is_empty()||(t.each_overlay(function(n){n.draw(e,t)}),t.series.each(function(n){n.points.is_empty()||n.each_overlay(function(i){i.draw(e,t,n)})}))})})},Chart.Base.TimeSeries.TimeSeriesChart.prototype.reset_markers=function(){this.panels.each(function(e){e.ys.each(function(e){e.series.each(function(e){e.points.is_empty()||e.each_overlay(function(e){e.type===Chart.Overlay.TimeSeries.Marker.TYPE&&e.reset()})})})})},Chart.Base.TimeSeries.TimeSeriesChart.prototype.unset_tooltip=function(){this._tooltip_x_value_set=void 0},Chart.Base.TimeSeries.TimeSeriesChart.prototype.set_tooltip=function(e){this.drawn()?this.draw_tooltip(e):this._tooltip_x_value_set=e},Chart.Base.TimeSeries.TimeSeriesChart.prototype.draw_tooltip=function(e){var t,n;return this.tooltip&&this.drawn()&&(n=this.points_by_x(e),this.tooltip.points=n,t=this.tooltip.draw(this.renderer),this.trigger("tooltip_update",[n,t])),t},Chart.Base.TimeSeries.TimeSeriesChart.prototype.trigger=function(){this._event.trigger.apply(this._event,arguments)},Chart.Base.TimeSeries.TimeSeriesChart.prototype.on_tooltip_update=function(e){this._event.on("tooltip_update",e)},Chart.Base.TimeSeries.TimeSeriesChart.prototype.off_tooltip_update=function(e){this._event.off("tooltip_update",e)},Chart.Base.TimeSeries.TimeSeriesChart.prototype.on_draw=function(e){this._event.on("draw",e)},Chart.Base.TimeSeries.TimeSeriesChart.prototype.on_link_click=function(e){this._event.on("link_click",e)},Chart.Base.TimeSeries.TimeSeriesChart.prototype._set_sessions=function(){var t,n,i,r=this.x.sessions(),o=this.state.x_extremes;if(this.state.sessions=[],this.state.session_total=0,1===r.length)this.state.sessions.push({min:r[0].begin,max:r[0].end}),void 0===this.state.sessions[0].min&&(this.state.sessions[0].min=o.min),void 0===this.state.sessions[0].max&&(this.state.sessions[0].max=o.max),this.state.session_total=this.state.sessions[0].max-this.state.sessions[0].min;else{for(n=0;n<r.length&&r[n].end<o.min;)++n;for(e.assert(n<r.length),i=n;i+1<r.length&&r[i+1].begin<o.max;)++i;for(t=n;i>=t;++t)this.state.sessions.push({min:r[t].begin,max:r[t].end}),this.state.session_total+=r[t].end-r[t].begin}},Chart.Base.TimeSeries.TimeSeriesChart.prototype._set_x_extremes=function(){var e=[],t=[];this.panels.each(function(n){n.ys.each(function(n){n.series.each(function(n){if(!n.points.is_empty()){var i=n.points.x_extremes();e.push(i.min),t.push(i.max)}})})}),this.state.x_extremes={min:Math.min.apply(null,e),max:Math.max.apply(null,t)}},Chart.Base.TimeSeries.TimeSeriesChart.prototype._set_y_extremes=function(){var e=this;this.state.y_extremes={},this.state.panel_ranges={},this.state.panel_range_total=0,this.panels.each(function(t,n){e.state.panel_ranges[n]=0,t.ys.each(function(t,i){if(!t.is_empty()){var r,o=e.theme.y(i);(void 0===o.range.min||void 0===o.range.max)&&(r=t.extremes()),e.state.y_extremes[i]={min:void 0===o.range.min?r.min:o.range.min,max:void 0===o.range.max?r.max:o.range.max},e.state.panel_ranges[n]=Math.max(e.state.panel_ranges[n],e.state.y_extremes[i].max-e.state.y_extremes[i].min,.01)}})})},Chart.Base.TimeSeries.TimeSeriesChart.prototype._set_panel_heights=function(){var t,n=this,i=0,r=1;if(n.state.panel_heights={},this.panels.each(function(e,t){var o=n.theme.panel(t);n.state.panel_ranges[t]>0&&(void 0===o.height?i+=n.state.panel_ranges[t]:(n.state.panel_heights[t]=o.height,r-=n.state.panel_heights[t]))}),0===i&&0!==r)0>r?(t=1/(-r+1),this.panels.each(function(e,i){n.state.panel_heights[i]*=t})):(t=r/(1-r),this.panels.each(function(e,i){n.state.panel_heights[i]*=1+t}));else{var o=this.renderer.total_y_height();t=r/i,this.panels.each(function(a,s){var l=n.theme.panel(s);if(void 0===n.state.panel_heights[s]&&void 0!==l.min_height&&n.state.panel_ranges[s]>0){var u=l.min_height;u>1&&(u/=o),t*n.state.panel_ranges[s]<u&&(e.debug("Set panel "+s+" to min: "+u),n.state.panel_heights[s]=u,r-=n.state.panel_heights[s],i-=n.state.panel_ranges[s])}}),t=r/i,this.panels.each(function(e,i){void 0===n.state.panel_heights[i]&&(n.state.panel_heights[i]=t*n.state.panel_ranges[i])})}},Chart.Base.TimeSeries.TimeSeriesChart.prototype._set_series_colors=function(){var e=this,t=this.theme.series_colors;e.state.series_colors={},this.panels.each(function(n){var i=0;n.ys.each(function(n){n.series.each(function(n){var r=e.theme.series(n.type,n.class_name);void 0===r.color?(e.state.series_colors[n.id]=t[i],i=(i+1)%t.length):e.state.series_colors[n.id]=r.color})})})}}(),function(){"use strict";var e=Chart.Base.Theme;Chart.Base.TimeSeries.Theme={},Chart.Base.TimeSeries.Theme=function(){e.call(this),this.axis={_y:{}},this._panel={},this.panel_below_x=void 0,this._series={candle:{},column:{},line:{},ohlc:{}},this._defaults=$.extend(!0,{},{panel:{height:void 0,min_height:void 0,left:[],right:["fallback"]},y:void 0,series:{base:void 0,line:void 0,column:void 0}}),this.renderer=Chart.Renderer.HIGHCHARTS},Chart.Base.TimeSeries.Theme.prototype=$.extend({},e.prototype),Chart.Base.TimeSeries.Theme.UTC_OFFSET=0,Chart.Base.TimeSeries.Theme.prototype.y=function(e){return this._merge(this._defaults.y,this.axis._y[e])},Chart.Base.TimeSeries.Theme.prototype.set_y_default=function(e){this._defaults.y=this._merge(this._defaults.y,e)},Chart.Base.TimeSeries.Theme.prototype.set_y=function(e,t){this.axis._y[e]=this._merge(this.axis._y[e],t)},Chart.Base.TimeSeries.Theme.prototype.panel=function(e){return this._merge(this._defaults.panel,this._panel[e])},Chart.Base.TimeSeries.Theme.prototype.set_panel_default=function(e){this._defaults.panel=this._merge(this._defaults.panel,e)},Chart.Base.TimeSeries.Theme.prototype.set_panel=function(e,t){this._panel[e]=this._merge(this._panel[e],t)},Chart.Base.TimeSeries.Theme.prototype.series=function(e,t){return this._merge(this._merge(this._defaults.series.base,this._defaults.series[e]),this._series[e][t])},Chart.Base.TimeSeries.Theme.prototype.set_series_default=function(e,t){this._defaults.series[e]=this._merge(this._defaults.series[e],t)},Chart.Base.TimeSeries.Theme.prototype.set_series=function(e,t,n){this._series[e][t]=this._merge(this._series[e][t],n)
},Chart.Base.TimeSeries.Theme.Black=(new Chart.Base.TimeSeries.Theme).extend(function(){var e={width:1,color:"rgb(64, 64, 64)",style:"Solid"},t={grid_line:e,axis_line:{color:"#c0d0e0",width:0},tick:{color:"#c0d0e0"},label:{font:this.create_font({color:"#6D869F"})}};this.series_colors=["#0b6dff","#9933cc","#f13147","#28aade","#67bf3c","#d62e92","#ff8200","#edcf21","#cccccc"],this.background="rgb(51, 51, 51)",this.margin={top:10,right:20,bottom:10,left:20},this.plotarea={border:{width:1,color:"rgb(64, 64, 64)"},background:"rgb(31, 31, 31)"},this.plot={column:{allow_overlapping:!0}},this.tooltip={enabled:!1,persist:!1,font:this.create_font()},this.axis.x=this._merge(t,{tick:{length:5},axis_line:{width:1},margin:{top:5,bottom:5},session_line:{color:"red",height:1,style:"longdash",width:1}}),this.set_y_default(this._merge(t,{range:{min:void 0,max:void 0},right:!1,enforce_range:!0,border:{top:{color:"#535859",width:0},bottom:{color:"#535859",width:0}},margin:{top:.1,bottom:.05},label:{enabled:!0}})),this.set_series_default(Chart.SeriesType.BASE,{color:void 0,label:{enabled:!1,font:this.create_font(),vertical_align:"auto"},marker:{enabled:!1},shadow:!0,tracking:!1}),this.set_series_default(Chart.SeriesType.LINE,{style:"Solid",width:1}),this.set_series_default(Chart.SeriesType.COLUMN,{min_height:3,border:{width:0},group_padding:.2,point_padding:.1}),this.set_text_default({offset:{top:void 0,right:void 0,bottom:void 0,left:void 0},max_width:1,align:"right",valign:"bottom",padding:{top:10,right:10,bottom:10,left:10},border:{width:1,color:"rgb(31, 31, 31)"},font:this.create_font(),line:{color:void 0,style:"Solid",width:1},background:"#fff",toggle:{enabled:!1,toggler:{url:"/image/marker.png",width:28,height:34},close:{url:"/image/x-button.png",width:10,height:10}},arrow:{base:0,height:0},z_index:10,opacity:.8}),this.set_series("line","comparison",{color:null,tracking:!0}),this.set_text("interactive",{toggle:{enabled:!0},arrow:{base:16,height:24},align:"center",valign:"top",z_index:12}),this.set_text("tooltip-x",{font:{color:"#fff"},padding:{top:3,right:3,bottom:3,left:3},align:"center",valign:"bottom",opacity:.8}),this.set_text("tooltip-y",{font:{color:"#fff"},padding:{top:3,right:3,bottom:3,left:3},arrow:{base:void 0,height:12},align:"right",valign:"middle",opacity:.8});var n={font:{color:"#fff"},background:"rgb(225, 144, 3)",padding:{top:3,right:3,bottom:3,left:3},color:"#fff",align:"left",valign:"top",z_index:8};this.set_text("prev-close",n),this.set_text("prev-close-outside",this._merge(n,{arrow:{base:void 0,height:12},align:"right",valign:"middle"}));var i={offset:{top:0,left:0},padding:{top:0,left:0,right:0,bottom:0},border:{width:0},background:this.plotarea.background,opacity:0,z_index:0};this.set_text("watermark",this._merge(i,{font:{size:72,weight:"bolder"}})),this.set_text("copyright",this._merge(i,{font:{color:"#ffffff"}}))})}(),function(e){"use strict";e.NODE_ID_SEPARATOR="//",e.Node=function(t,n,i){this.label=n,this.weight=0,this.weightPercent=0,this.weightChange=0,this.weightChangePercent=0,this.rootWeightPercent=0,this.parent=t,this.id=(null===t?"":t.id+e.NODE_ID_SEPARATOR)+n,this.data="undefined"!=typeof i?i:null,this.children={}},Chart.HierarchicalPieNode,e.Node.prototype.numChildren=function(){var e=0;return this.forEachChild(function(){e+=1}),e},e.Node.prototype.forEachChild=function(e){for(var t in this.children)if(this.children.hasOwnProperty(t)&&!1===e.call(this,this.children[t]))break},e.Node.prototype.findChildWithLabel=function(e){return this.children.hasOwnProperty(e)?this.children[e]:null},e.Node.prototype.addChild=function(e){this.children[e.label]=e},e.Node.prototype.findWithId=function(e){var t=null;return e===this.id?t=this:0===e.search(this.id)&&this.forEachChild(function(n){return t=n.findWithId(e),t?!1:void 0}),t},e.Node.prototype.calculateWeight=function(){var e;this.numChildren()>0&&(this.weight=0,this.weightChange=0,this.forEachChild(function(e){e.calculateWeight(),this.weight+=e.weight,this.weightChange+=e.weightChange}),this.forEachChild(function(e){e.weightPercent=100*(e.weight/this.weight)})),e=this.weight-this.weightChange,this.weightChangePercent=0===e?0:100*(this.weightChange/e)},e.Node.prototype.calculateRootWeightPercent=function(e){this.rootWeightPercent=100*(this.weight/e),this.forEachChild(function(t){t.calculateRootWeightPercent(e)})},e.Node.prototype.addToTable=function(e,t,n){var i=[];i[t.ID]=this.id,i[t.PARENT_ID]=null===this.parent?"":this.parent.id,i[t.LABEL]=this.label,i[t.LEVEL]=n,i[t.WEIGHT]=this.rootWeightPercent,i[t.PERCENT_CHANGE]=this.weightChangePercent,e.push(i),this.forEachChild(function(i){i.addToTable(e,t,n+1)})}}(Chart.Base.HierarchicalPie=Chart.Base.HierarchicalPie||{}),function(e){"use strict";e.Dataset=function(t,n){this.hierarchyLevels=n,this.root=new e.Node(null,t),this.root.weightPercent=100},e.Dataset.prototype.addObject=function(t){function n(e,t){return"function"==typeof e[t]?e[t].call(e):e[t]}for(var i,r,o,a=this.root,s=0,l=this.hierarchyLevels.length;l>s;)i=this.hierarchyLevels[s],r=n(t,i),o=a.findChildWithLabel(r),o||(o=new e.Node(a,r,t.data(i)),a.addChild(o)),a=o,o=null,s+=1;a.weight=n(t,"weight"),a.weightChange=n(t,"weightChange")},e.Dataset.prototype.finalize=function(){this.root.calculateWeight(),this.root.calculateRootWeightPercent(this.root.weight)},e.Dataset.prototype.findObjectById=function(e){return this.root.findWithId(e)},e.Dataset.prototype.toTable=function(e){var t=[];return this.root.addToTable(t,e,1),t}}(Chart.Base.HierarchicalPie=Chart.Base.HierarchicalPie||{}),function(){"use strict";var e,t;Chart.HierarchicalPie=function(t,n,i,r){this.drawn=!1,this.container=i,this.dataset=new Chart.Base.HierarchicalPie.Dataset(t,n),this.builder=Oven.getMultiLevelPie(),this.host=this.builder.createVisualizationHost(i),this.host.addConfig("MultiLevelPie",$.extend(e(this.builder.getConfigContract()),r))},t={ID:0,PARENT_ID:1,LABEL:2,LEVEL:3,WEIGHT:4,PERCENT_CHANGE:5},Chart.HierarchicalPie.prototype.onRootChange=function(e){var t=this;this.host.signalConnect("newRootNode",function(n){t.currentRoot.id!==n.sliceId&&(t.currentRoot=t.dataset.findObjectById(n.sliceId),e(n.sliceId))})},Chart.HierarchicalPie.prototype.addObject=function(e){this.dataset.addObject(e)},Chart.HierarchicalPie.prototype.draw=function(){this.dataset.finalize();var e,n,i,r,o=this.dataset.toTable(t);this.currentRoot=this.dataset.root,this.drawn?this.host.updateDataSource("data",{data:o}):(e=this.builder.getDataContract(),n="jsTable",i="data",r=[[e.FieldNames.ID,e.FieldTypes.STRING,t.ID],[e.FieldNames.PARENT_ID,e.FieldTypes.STRING,t.PARENT_ID],[e.FieldNames.NAME,e.FieldTypes.STRING,t.LABEL],[e.FieldNames.LEVEL,e.FieldTypes.INTEGER,t.LEVEL],[e.FieldNames.SIZE,e.FieldTypes.DOUBLE,t.WEIGHT],[e.FieldNames.COLOR,e.FieldTypes.DOUBLE,t.PERCENT_CHANGE]],this.host.addDataSource(n,i,{type:e.SeriesTypes.HierPieData,mapping:r,data:o}),this.host.initialPaint(),this.drawn=!0)},Chart.HierarchicalPie.prototype.is_on_root=function(){return this.currentRoot===this.dataset.root},Chart.HierarchicalPie.prototype.set_root=function(e){this.host.setRootNode(e)},Chart.HierarchicalPie.prototype.go_up=function(){this.is_on_root()||this.set_root(this.currentRoot.parent)},e=function(){return $.extend({},{showDebuggingVisuals:!1},{numVisibleLevels:2,showColorRamp:!1,drawPieCrust:!1,allowLeafDrillDown:!0,fontFamily:"Arial,Helvetica,sans-serif",fontSize:12,colorRampType:4},{useInnerLabels:!1,useOuterLabels:!0,maxRadiusScale:.9},{rootNodeRadiusScale:1.1,rootNodeTint:.2},{},{rootBorderThickness:1.5,childBorderThickness:.5},{backgroundGradientEndColor:"white",backgroundGradientStartColor:"white",rootBorderColor:"white",childBorderColor:"white",selectionHilightBorderColor:"white",outerLabelHighlightColor:"white",outerLabelFontColor:"#333",tooltipFontColor:"black",tooltipBackgroundColor:"#f1f1f1"})}}(),function(){"use strict";function e(e,t){var i=e.panels.add(new n.Panel(t)),r=i.ys.add(new n.YAxis(t)),o=r.series.add(new n.Series(Chart.SeriesType.COLUMN,t));return r.multiplier=.001,r.precision=2,r.suffix="%",{panel:i,y:r,series:o}}function t(e,t){return e[1]===t[1]?e[0]>t[0]?1:e[0]<t[0]?1:0:t[1]-e[1]}var n=Chart.Base.TimeSeries;Chart.CurrencyWatch=function(t,i){this._chart=new n.TimeSeriesChart(t,i),this._positive=e(this._chart,"positive"),this._negative=e(this._chart,"negative")},n.TimeSeriesChart.export_methods(Chart.CurrencyWatch),Chart.CurrencyWatch.Theme={Black:n.Theme.Black.extend(function(){$.extend(!0,this.plotarea,{background:"rgb(51, 51, 51)",border:{width:0}}),$.extend(!0,this.axis.x,{grid_line:{width:0},axis_line:{width:0},tick:{length:0},margin:{top:0,bottom:0}}),this.margin.top=20,this.margin.bottom=20,this.set_y_default({label:{enabled:!1},grid_line:{width:0},enforce_range:!0}),this.set_y("positive",{border:{bottom:{width:2}},margin:{top:20,bottom:0},range:{min:0}}),this.set_y("negative",{border:{top:{width:2}},margin:{top:0,bottom:20},range:{max:0}}),this.set_panel_default({min_height:25,right:[]}),this.panel_below_x="negative",this.set_series_default(Chart.SeriesType.COLUMN,{label:{enabled:!0,font:{color:"#fff"}},group_padding:0}),this.set_series(Chart.SeriesType.COLUMN,"positive",{color:"rgb(0, 255, 0)",label:{vertical_align:"bottom"}}),this.set_series(Chart.SeriesType.COLUMN,"negative",{color:"rgb(255, 0, 0)",label:{vertical_align:"top"}})})},Chart.CurrencyWatch.prototype.set_data=function(e){var n=[],i=[],r=$.map(e,function(e,t){return[[t,1e3*100*e]]});r.sort(t),$.each(r,function(e){this[1]>=0?n.push([e,this[1]]):i.push([e,this[1]])}),this._chart.x.categories=$.map(r,function(e){return e[0]}),this._positive.series.points.replace(n),this._negative.series.points.replace(i)},Chart.CurrencyWatch.prototype.redraw=function(){this._chart.draw()}}(),function(){"use strict";var e=Chart.Base.TimeSeries;Chart.IncomeStatement=function(t,n){var i=this;this._chart=new e.TimeSeriesChart(t,n);var r=this._chart.panels.add(new e.Panel("main")),o={value:r.ys.add(new e.YAxis("value")),percent:r.ys.add(new e.YAxis("percent"))};o.percent.suffix="%",this._series={revenue:o.value.series.add(new e.Series(Chart.SeriesType.COLUMN,"revenue")),income:o.value.series.add(new e.Series(Chart.SeriesType.COLUMN,"income")),margin:o.percent.series.add(new e.Series(Chart.SeriesType.LINE,"margin"))},this._chart.tooltip=new Chart.Overlay.TimeSeries.Tooltip.Formatter("tooltip",function(e){var t="",n=e[i._series.revenue.id];return t+="Revenue (M):"+o.value.format(n.point[1])+"<br/>",n=e[i._series.income.id],t+="Net Income (M): "+o.value.format(n.point[1])+"<br/>",n=e[i._series.margin.id],t+="Profit Margin (%): "+o.percent.format(n.point[1])+"<br/>"})},e.TimeSeriesChart.export_methods(Chart.IncomeStatement),Chart.IncomeStatement.Theme={},Chart.IncomeStatement.Theme.Black=e.Theme.Black.extend(function(){this.set_series_default(Chart.SeriesType.BASE,{tracking:!0}),this.set_series(Chart.SeriesType.COLUMN,"income",{color:"#46505a"}),this.set_series(Chart.SeriesType.COLUMN,"revenue",{color:"#1875c3"}),this.set_y_default({enforce_range:!1}),this.set_y("percent",{right:!0}),this.plot.column.allow_overlapping=!1}),Chart.IncomeStatement.prototype.set_data=function(e){var t=$.map(e,function(e,t){return t}).sort(),n=[],i=[],r=[];this._chart.x.categories=$.map(t,function(t,o){return n.push([o,e[t].income]),i.push([o,e[t].revenue]),r.push([o,100*e[t].margin]),Chart.Util.DateFormat.format("%b %Y",parseInt(t,10))}),this._series.revenue.points.replace(i),this._series.income.points.replace(n),this._series.margin.points.replace(r)},Chart.IncomeStatement.prototype.redraw=function(){this._chart.draw()}}(),function(){"use strict";var e=Chart.Base.TimeSeries,t=Chart.Overlay.TimeSeries,n=Chart.Util.logger;Chart.PriceVolume=function(n,i){var r=this;this._legend_container=$('<div class="legend">').appendTo(n),this._chart=new e.TimeSeriesChart($('<div class="chart">').appendTo(n),i),this._chart.tooltip=new t.Tooltip.CrossLine("tooltip"),this._chart.on_tooltip_update(function(e,t){r._update_legend_multiple(t)}),this._chart.on_draw(function(){r._update_legend_multiple()}),this._price={},this._price.panel=this._chart.panels.add(new e.Panel("price")),this._price.y=this._price.panel.ys.add(new e.YAxis("price")),this._price.series=[],this._price.prev_close=this._price.y.add_overlay(new t.HorizontalLine("prev-close")),this._volume={},this._volume.panel=this._chart.panels.add(new e.Panel("volume")),this._volume.y=this._volume.panel.ys.add(new e.YAxis("volume")),this._volume.y.precision=0,this._volume.series=void 0,this._legend={positive:this._chart.add_overlay(new t.Text("legend-positive")),negative:this._chart.add_overlay(new t.Text("legend-negative"))},this._chart.theme.legend_as_watermark&&(this._watermark=this._chart.add_overlay(new t.Text("watermark"))),this._chart.theme.copyright&&(this._copyright=this._chart.add_overlay(new t.Text("copyright"))),this._data={},this._data_len=0},e.TimeSeriesChart.export_methods(Chart.PriceVolume,["set_tooltip","unset_tooltip"]),Chart.PriceVolume.Theme={},/**
     * A preconfigured black colored theme.
     * Three y-axis can be configured, 'price', 'percent' and 'volume'.
     * 'price' and 'percent' are in the same panel; 'volume' is in
     * its own panel.
     * @type {Chart.Base.TimeSeries.Theme.Black}
     *
     * @prop {boolean} show_legendhide/show a built legend
     *       uses 'legend-positive', 'legend-negative' and
     *       'watermark' text theme.
     * @prop {boolean} legend_as_watermark if true, use watermark for
     *       legend instead of the default legend box.
     * @prop {string} copyright copyright text. set to empty string
     *       to disable. Use 'copyright' text theme.
     **/
Chart.PriceVolume.Theme.Black=e.Theme.Black.extend(function(){this.show_legend=!0,this.legend_as_watermark=!1,this.copyright="",this.margin.bottom=20,this.tooltip.enabled=!0,this.set_series_default(Chart.SeriesType.BASE,{tracking:!0}),this.set_y_default({right:!0}),this.set_y("volume",{border:{top:{width:3}},range:{min:0}}),this.set_panel("price",{height:.8}),this.set_panel("volume",{height:.2}),this.panel_below_x="volume";var e={offset:{top:0,left:0},background:"#66a133",font:{color:"#000",size:12},align:"right",valign:"bottom"};this.set_text("legend-positive",e),this.set_text("legend-negative",$.extend(!0,{},e,{font:{color:"#fff"},background:"#b20910"}))}),Chart.PriceVolume.Theme.BlackQuote=Chart.PriceVolume.Theme.Black.extend(function(){this.legend_as_watermark=!0,this.copyright="Bloomberg",this.background="black",this.margin.bottom=20,$.extend(!0,this.plotarea,{border:{color:"black"},background:"black"});var e={grid_line:{style:"Dot"}};this.set_y_default(e),$.extend(!0,this.axis.x,e,{margin:{top:0,bottom:0}})}),Chart.PriceVolume.prototype.add_event=function(e,i,r){n.debug(r,new Date(i));var o=this._data[e].series.price;n.assert(void 0!==o);var a=o.add_overlay(new t.Marker("interactive"));return a.html=r,a.x=i,this._chart.drawn()&&a.draw(this._chart.renderer,this._price.y,o),a},Chart.PriceVolume.prototype.remove_event=function(e,t){var i=this._data[e].series.price;n.assert(void 0!==i),i.remove_overlay(t)},Chart.PriceVolume.prototype.set_data=function(t,i,r,o,a){return void 0===this._data[t]&&this.unset_data(t),0===i.length?(n.warn("Ignore set_data("+t+") with empty data points"),void 0):(++this._data_len,void 0===a&&(a={}),void 0===a.sessions&&(a.sessions=[[i[0][0],i[i.length-1][0]]]),this._data[t]={precision:r,prices:new e.DataPoints(i),volumes:new e.DataPoints(o),sessions:a.sessions,previous_close:a.previous_close,link:a.link,line_style:void 0===a.line_style?Chart.SeriesType.LINE:a.line_style,series:{}},void 0)},Chart.PriceVolume.prototype.unset_data=function(e){void 0!==this._data[e]&&(--this._data_len,n.assert(this._data_len>=0),delete this._data[e])},Chart.PriceVolume.prototype.clear_data=function(){var e=this;$.each(this._data,function(t){e.unset_data(t)})},Chart.PriceVolume.prototype.redraw=function(){var e=this;this._data_len>=1&&(this._chart.panels.get("price").ys.get("price").series.clear(),this._chart.panels.get("volume").ys.get("volume").series.clear(),this._chart.x.clear_sessions(),$.each(this._data,function(t,n){$.each(n.sessions||[],function(){e._chart.x.add_session(this[0],this[1])})}),1===this._data_len?(this._set_normal_view(),e._update_legend_single(this._names()[0])):this._set_comparison_view(),this._chart.draw())},Chart.PriceVolume.prototype._set_comparison_view=function(){var t=this;this._price.prev_close.y=void 0,$.each(this._data,function(n,i){var r=i.previous_close;void 0===r&&(r=i.prices.first().y);var o=new e.Series(Chart.SeriesType.LINE,"price");t._price.y.series.add(o),o.points=i.prices,o.points.set_pivot(r),t._price.y.precision=2,t._price.y.suffix="%",i.series.price=o})},Chart.PriceVolume.prototype._set_normal_view=function(){var t,n,i=this._names()[0],r=this._data[i],o=this._price.y;t=new e.Series(Chart.SeriesType.LINE,"price"),this._price.y.series.add(t),t.points=r.prices,t.points.unset_pivot(),this._price.y.precision=r.precision,this._price.y.suffix="",r.series.price=t,n=new e.Series(Chart.SeriesType.COLUMN,"volume"),this._volume.y.series.add(n),n.points=r.volumes,r.series.volume=this._volume.series,this._price.prev_close.y=void 0,t.points.last().x-t.points.first().x<=864e5&&(this._price.prev_close.y=r.previous_close,this._price.prev_close.html=o.format(r.previous_close))},Chart.PriceVolume.prototype._clear_legend=function(){this._chart.theme.legend_as_watermark?(this._watermark.html=void 0,this._watermark.destroy()):(this._legend.positive.html=void 0,this._legend.negative.html=void 0,this._legend.positive.destroy(),this._legend.negative.destroy()),this._legend_container.empty()},Chart.PriceVolume.prototype._update_legend_single=function(e){if(this._chart.theme.show_legend)if(this._clear_legend(),this._chart.theme.legend_as_watermark)this._watermark.html=e;else{var t=this._data[e],n=t.series.price,i=n.points.last(),r=0,o="<div>";o+=void 0===t.link?'<span class="legend-name">'+e+"</span>":'<a class="legend-name" href="'+t.link+'">'+e+"</a>",o+="<br/>",o+='<span class="legend-price">'+this._price.y.format(i.y)+"</span><br/>",void 0!==t.previous_close?0!==t.previous_close&&(r=i.y-t.previous_close,o+='<span class="legend-change-value">'+this._price.y.format(r)+"</span>",o+='<span class="legend-change-spacer"> </span>',o+='<span class="legend-change-percent">'+(100*(r/t.previous_close)).toFixed(2)+"%</span>"):o+='<span class="legend-date">'+Chart.Util.DateFormat.format("%m/%d/%Y",i.x)+"</span>",o+="</div>",r>=0?this._legend.positive.html=o:this._legend.negative.html=o}},Chart.PriceVolume.prototype._update_legend_multiple=function(e){var t=this;if(this._chart.theme.show_legend){var n=$("<ol/>");this._data_len>1&&(this._clear_legend(),$.each(this._data,function(i,r){var o,a=r.series.price,s=$("<li/>");void 0===e?o=r.prices.last().y:void 0!==e[a.id]&&(o=e[a.id].y);var l={"class":"name",text:i,css:{"background-color":t._chart.series_color(a.id),color:"#fff"}};void 0===r.link?s.append($("<span/>",l)):s.append($("<a/>",l).attr("href",r.link)),s.append($("<span/>",{"class":"value",text:t._price.y.format(o),css:{color:"#fff"}})),n.append(s)}),this._legend_container.append(n))}},Chart.PriceVolume.prototype._names=function(){return $.map(this._data,function(e,t){return t})}}(),function(){"use strict";var e=Chart.Base.TimeSeries,t=1;Chart.Interactive=function(t,n){this._chart=new e.TimeSeriesChart(t,n),this._main_panel=this._chart.panels.add(new e.Panel("main")),this._main_y=this._main_panel.ys.add(new e.YAxis("main")),this._volume_panel=this._chart.panels.add(new e.Panel(Chart.StudyType.VOLUME)),this._volume_y=this._volume_panel.ys.add(new e.YAxis(Chart.StudyType.VOLUME)),this.securities=new Chart.Util.OrderedHash,this._studies=new Chart.Util.OrderedHash,this._previous_close_overlay_id=void 0},e.TimeSeriesChart.export_methods(Chart.Interactive,["on_tooltip_update","off_tooltip_update","set_tooltip"]),Chart.Interactive.Security=function(t,n){this.id=t,this.name=n,this.prices=new e.DataPoints([]),this.price_precision=0,this.series=void 0,this.sessions=[],this.line_type=Chart.SeriesType.LINE},Chart.Interactive.Theme={},Chart.Interactive.Theme.Black=e.Theme.Black.extend(function(){this.renderer=Chart.Renderer.OVEN,this.background="black",this.plotarea.border.color="black",this.plotarea.background="black",this.margin.bottom=20,this.font_family='"Helvetica Neue", Helvetica, Arial, sans-serif';var e={color:"#777777",size:14};$.extend(!0,this.axis.x,{label:{font:e},margin:{top:0,bottom:0},grid_line:{width:0}}),this.set_series_default(Chart.SeriesType.BASE,{tracking:!1}),this.set_y_default({label:{font:e},grid_line:{style:"Dot"},right:!0,margin:{top:.2,bottom:.1}}),this.set_y(Chart.StudyType.VOLUME,{margin:{top:.15,bottom:0}}),this.set_panel_default({height:.25}),this.set_panel("main",{height:1}),this.panel_below_x=void 0;var t={gain_color:"#67BF3C",loss_color:"#F13147"};this.set_series_default(Chart.SeriesType.CANDLE,$.extend(!0,{},t,{candle_width:1})),this.set_series_default(Chart.SeriesType.OHLC,t),this.set_series(Chart.SeriesType.COLUMN,Chart.StudyType.VOLUME,{color:"#777777"}),this.set_text("prev-close",{line:{color:"#FF8200",style:"dash",width:1},z_index:100})}),Chart.Interactive.prototype.series_color=function(e){return this._chart.series_color(e)},Chart.Interactive._register_study=function(e,t){Chart.Interactive.prototype[e]=t},Chart.Interactive.prototype.redraw=function(){var t=this;this._main_y.precision=0,this._chart.x.clear_sessions(),this.securities.each(function(n){if(!n.prices.is_empty()){var i=n.series;void 0===i?(i=new e.Series(n.line_type,"price",n.id),t._main_y.series.add(i),n.series=i):i.type=n.line_type,i.points=n.prices,$.each(n.sessions,function(e,n){t._chart.x.add_session(n[0],n[1])}),t._main_y.precision=Math.max(t._main_y.precision,n.price_precision)}}),this._studies.each(function(e){t[e.type](e)}),this._chart.draw()},Chart.Interactive._register_study(Chart.StudyType.VOLUME,function(t){if(0===t.series.length){var n=new e.Series(Chart.SeriesType.COLUMN,t.type,t.id);t.series=[this._volume_y.series.add(n)]}t.series[0].points.replace(t.points)}),Chart.Interactive._register_study(Chart.StudyType.RSI,function(t){if(0===t.series.length){var n=this._add_panel_with_y(t.id),i=n.series.add(new e.Series(Chart.SeriesType.LINE,t.type,t.id));t.series=[i]}t.series[0].points.replace(t.points)}),Chart.Interactive._register_study(Chart.StudyType.MACD,function(t){var n,i,r,o,a=[],s=[],l=[];if(0===t.series.length){var u=this._add_panel_with_y(t.id);t.series=[u.series.add(new e.Series(Chart.SeriesType.COLUMN,[t.type,"difference"].join("-"),[t.id,"difference"].join("-"))),u.series.add(new e.Series(Chart.SeriesType.LINE,[t.type,"macd"].join("-"),[t.id,"macd"].join("-"))),u.series.add(new e.Series(Chart.SeriesType.LINE,[t.type,"signal"].join("-"),[t.id,"signal"].join("-")))]}for(n=0,o=t.points.length;o>n;++n)i=t.points[n],r=i[0],a.push([r,i[1]]),s.push([r,i[2]]),l.push([r,i[1]-i[2]]);t.series[0].points.replace(l),t.series[1].points.replace(a),t.series[2].points.replace(s)}),Chart.Interactive._register_study(Chart.StudyType.BOLLINGER,function(t){if(0===t.series.length){var n=this._main_y.series;t.series=[n.add(new e.Series(Chart.SeriesType.LINE,[t.type,"upper"].join("-"),[t.id,"upper"].join("-"))),n.add(new e.Series(Chart.SeriesType.LINE,[t.type,"middle"].join("-"),[t.id,"middle"].join("-"))),n.add(new e.Series(Chart.SeriesType.LINE,[t.type,"lower"].join("-"),[t.id,"lower"].join("-")))]}for(var i,r,o=t.points,a=[],s=[],l=[],u=0,c=o.length;c>u;++u)i=o[u],r=i[0],l.push([r,i[1]]),s.push([r,i[2]]),a.push([r,i[3]]);t.series[0].points.replace(l),t.series[1].points.replace(s),t.series[2].points.replace(a)}),Chart.Interactive._register_study(Chart.StudyType.PRICE_SMA,function(e){this._draw_ma(e,this._main_y.series)}),Chart.Interactive._register_study(Chart.StudyType.VOLUME_SMA,function(e){this._draw_ma(e,this._volume_y.series)}),Chart.Interactive._register_study(Chart.StudyType.PRICE_EMA,function(e){this._draw_ma(e,this._main_y.series)}),Chart.Interactive._register_study(Chart.StudyType.VOLUME_EMA,function(e){this._draw_ma(e,this._volume_y.series)}),Chart.Interactive.prototype._draw_ma=function(t,n){if(0===t.series.length){var i=n.add(new e.Series(Chart.SeriesType.LINE,t.type,t.id));t.series=[i]}t.series[0].points.replace(t.points)},Chart.Interactive.prototype.remove_study=function(e){for(var t=this._studies.get(e),n=t.series,i=0,r=n.length;r>i;++i)n[i].points.replace([]);this._studies.remove(e),this._chart.panels.exist(e)&&this._chart.panels.remove(e)},Chart.Interactive.prototype.update_study=function(e,t){this._studies.get(e).points=t},Chart.Interactive.prototype.add_study=function(e,n){var i=["study",e,t].join("-");return++t,this._studies.add({id:i,type:e,points:n,series:[]}),i},Chart.Interactive.prototype._add_panel_with_y=function(t){var n,i;return n=this._chart.panels.get(t),n||(n=this._chart.panels.add(new e.Panel(t))),i=n.ys.get(t),i||(i=n.ys.add(new e.YAxis(t))),i},Chart.Interactive.prototype.set_percentage_mode=function(e){this._main_y.percentage=e},Chart.Interactive.prototype.set_previous_close=function(e){if(void 0!==this._previous_close_overlay_id&&(this._main_y.remove_overlay(this._previous_close_overlay_id),this._previous_close_overlay_id=void 0),null!==e&&void 0!==e){var t=this._main_y.add_overlay(new Chart.Overlay.TimeSeries.SimpleHorizontalLine("prev-close"));this._previous_close_overlay_id=t.id,t.y=e}}}(),function(){!function(){var e;return e=window.BcomServerVars||{},window.ChartConfig={utc_offset:e.utcOffset,assets:{story_marker:e.chartStoryMarker,close:e.chartCloseButton}}}()}.call(this),Chart.Base.Theme.AssetPrefix="",Chart.PriceVolume.Theme.BCom=Chart.PriceVolume.Theme.Black.extend(function(){var e="#46505A",t="#87919b",n={font:{color:"white"}};this.background="black",this.font_family="Arial,Helvetica,sans-serif",this.utc_offset=ChartConfig.utc_offset,this.margin={top:0,bottom:10,right:15,left:0},this.plotarea.background="black",this.set_series_default("line",{width:3,color:"#187AC7"}),this.set_series_default("column",{color:"#187AC7"}),this.set_text_default({toggle:{toggler:{url:ChartConfig.assets.story_marker,width:30,height:43},close:{url:ChartConfig.assets.close,width:10,height:10}}}),this.set_text("legend-positive",n),this.set_text("legend-negative",n),this.set_text("prev-close",{font:{size:0},line:{color:"#ff9b04",style:"dot"}}),this.set_text("tooltip",{font:{color:"black"},background:"white"}),this.set_text("footer-text",{font:{color:t,size:10,weight:"bold"},align:"right",valign:"bottom",offset:{bottom:-15,left:-10},background:this.background,padding:{left:0,bottom:0}}),this.set_text("link",{font:{color:"#003399"}}),this.axis.x.grid_line.width=0,this.axis.x.tick.color=e,this.axis.x.label.font.color=t,this.axis.x.axis_line.color=e,this.set_y_default({grid_line:{color:"#1E262E"},axis_line:{color:e},label:{font:{color:t}}})}),Chart.PriceVolume.Theme.BComSnapshot=Chart.PriceVolume.Theme.BCom.extend(function(){this.show_legend=!1,this.tooltip.persist=!0,this.margin.bottom=30}),Chart.PriceVolume.Theme.BComMMN=Chart.PriceVolume.Theme.BCom.extend(function(){this.show_legend=!1,this.margin.left=15,this.margin.right=30,this.margin.top=5,this.axis.x.session_line.color="white"}),Chart.PriceVolume.Theme.Article=Chart.PriceVolume.Theme.BCom.extend(function(){var e={padding:{top:12,bottom:12,left:12,right:12},font:{color:"#fff"},opacity:.6};this.margin.top=0,this.margin.bottom=45,this.show_legend=!0,this.set_text("footer-text",{font:{size:12},offset:{left:10}}),this.set_text("interactive",{font:{size:14},opacity:1}),this.set_text("link",{font:{weight:"bold",size:14}}),this.set_text("datetime",{font:{size:12}}),this.set_text("legend-positive",e),this.set_text("legend-negative",e),this.set_text("legend-name",$.extend(!0,{},e,{font:{size:20}})),this.set_text("legend-price",$.extend(!0,{},e,{font:{size:20,weight:"bold"}})),this.set_text("legend-change-spacer",{font:{letter_spacing:12}}),this.show_legend=!1}),Chart.CurrencyWatch.Theme.BCom=Chart.CurrencyWatch.Theme.Black.extend(function(){this.font_family="Arial,Helvetica,sans-serif",this.background="none",this.plotarea.background="none",this.margin.top=0,this.margin.right=0,this.margin.bottom=10,this.margin.left=0,this.axis.x.margin.top=0,this.axis.x.margin.bottom=5,this.axis.x.label.font.color="#fff",this.axis.x.label.font.size=14,this.axis.x.label.font.weight="bold",this.set_y("positive",{border:{bottom:{color:"#46505a",width:3}}}),this.set_y("negative",{border:{top:{color:"#46505a",width:3}}}),this.set_series_default("column",{label:{font:{color:"#fff",size:12,weight:"bold"}},shadow:!1,point_padding:.15}),this.set_series("column","positive",{color:"#408c00"}),this.set_series("column","negative",{color:"#950000"})}),Chart.IncomeStatement.Theme.Bcom=Chart.IncomeStatement.Theme.Black.extend(function(){this.set_series(Chart.SeriesType.COLUMN,"income",{color:"#46505A"}),this.set_series(Chart.SeriesType.COLUMN,"revenue",{color:"#1777C3"}),this.set_series(Chart.SeriesType.LINE,"margin",{color:"#FF9700",width:2}),this.set_y("value",{margin:{top:0}}),this.set_y("percent",{margin:{top:0}}),this.background="#000",this.plotarea.background="#000",this.plotarea.border=0,this.resize_animation=!1,this.axis.x.label.font.color="#fff",this.axis.x.grid_line.width=0,this.resize_delay=0}),function(){}.call(this);