(function(ao){var aN="ad-service-client";var aF="view-guid-meta";var ar="content";var ah="vguid";var ak="companion_ad",O="leader_plus_top",S="leader_top",aM="omnibar_top",d="nav_logo_top",ad="skin_top";var G="skin-yes",ap="skin-no",ab="has-ads",U="has-nav-sponsor",Z="has-omnibar",aG="mapped-ad-blank",Q="skinadaptive";var A="-wrap";var aE="data-ad-event";var aR=true,am,E=[],at,ax,F=ao.siteAdsLogger||[],t=ao.document,Y=false,l,a=false,aw="page_load",aa,aC=aw,aP={};var u=function(aT){return W(aT+A)};var h=function(){var aT,aW,aX,aY=ad,aV=W(aY),aZ=u(aY),a1,a0,aU=false;if(!!aZ){a1=aZ.previousElementSibling;a0=aZ.nextElementSibling}aT=S;aW=W(aT);if(!aW){aT=O;aW=W(aT)}aX=u(aT);if(!!aZ&&!!aX&&((a0===aX)||(a1===aX))){aU=true}return{skinDiv:aV,skinDivWrap:aZ,skinNextSibling:a0,leaderDiv:aW,leaderDivWrap:aX,isAdjacent:aU}};var f=(function(){var aT=false;return function(){if(true===aT){return}var aX=X();if(true===aX.rendered[ad]){var aY=h(),aV=aY.leaderDivWrap,aU=aY.skinDivWrap,aW=aY.skinNextSibling,aZ;F.push("Processing skin render");if(!!aU){aZ=aU.parentElement}if(!!aZ&&!!aV&&false===aY.isAdjacent){F.push("Move leader after skin");i(aY.leaderDiv);aZ.insertBefore(aV,aW)}aT=true}if(!!aX.adSkinId&&aX.loaded.length===1){F.push("Skin loaded, refresh remaining ads");P();aH()}}})();var ai=(function(){var aU=false,aT="mpu_top";return function(){var aX=X();if(true===aU){return}if(false===aX.rendered[aT]){var aW=u(aT),a0=aW.parentElement,aY,aV,aZ;a0=aW.parentElement;if(!!a0&&!!a0.tagName&&"li"===a0.tagName.toLowerCase()){aY=a0.parentElement}if(!!aY&&!!aY.getAttribute){aV=aY.getAttribute("data-no-ads-class");aZ=aY.getAttribute("data-has-ads-class");o(aY,aZ,false);o(aY,aV,true);aY.removeChild(a0)}aU=true}}})();var b=function(){ai()};var r=function(aT){return(aT.indexOf("skin")>=0)};var T=function(aV,aT){var aU=u(aV);if(!!aU){o(aU,aG,aT)}};var j=function(aV,aU){var aT=aB(),aX,aW;if(!!aV){F.push("skinless");o(aT,ap,true);o(aT,G,false);if(!!aa){aX=aa}}else{o(aT,G,true);o(aT,ap,false);if(!aU||"null"===aU){aU=Q}if(aU!==aa){aX=aa;aa=aW=aU}F.push("skinned: "+aU)}if(!!aX){o(aT,aX,false)}if(!!aW){F.push("Setting skin type to "+aW);o(aT,aW,true)}f()};var H="page-event-ad-settings",aL=function(){var aU=ao.jQuery,aT=[];if(!!aU){aU("."+H).each(function(){var aV=aU(this),aW=null;if(aV.length>0){try{aW=aU.parseJSON(aV.attr("content"))}catch(aX){aW=null}}if(null!==aW){aT.push(aW)}})}return aT};var ac=false;var N=function(aU,aT,aV){if(!aT||!aV){return}aC=aT;ac=true};var s=function(){var aT=ao.jQuery;if(!!aT){aT(t).on({update_page_event:function(aV,aU){N(aV,aU,aC!==aU)},render_page_event:N,on_page_event:function(aV,aU){if(!aU){return}aH(aU)},remove_page_event:function(aV,aU){if(!aU){return}z(aU);aC=R}})}};var W=function(aT){return t.getElementById(aT)};var aB=function(){if(!l){l=t.body}return l};var C=function(aT){try{return ao.JSON.parse(aT)}catch(aU){return null}};var aK=function(aV,aT,aU){try{return ao.JSON.stringify(aV,aT,aU)}catch(aW){return null}};var o=function(a0,aZ,aU){var aT=a0.className,aY=" "+aZ,aV,aX=0,aW=0;if((aU===true)&&(aS(a0,aZ)===false)){if(aT.length>0){aV=aT+aY}else{aV=aZ}}else{if((aU===false)&&(aS(a0,aZ)===true)){if(aT.length>0){aX=aT.indexOf(aY);if(aX===-1){aX=aT.indexOf(aZ)}aW=aX+aZ.length+1;aV=aT.substr(0,aX)+aT.substr(aW)}}}if(aV!==undefined){a0.className=aV}};var aS=function(aW,aV){var aT=aW.className,aU=false;if(!!aT){aU=(aT.indexOf(aV)>=0)}return aU};var aD=[],R=aw;var ay=function(){var aV=W(aF),aU=ar,aT;try{if(!!aV&&aV.hasAttribute(aU)){aT=aV.getAttribute(aU)}}catch(aW){}return aT};var n=function(aU){var aT="ad-settings";if(!!aU&&aU!==R){aT=aU+"-"+aT}return W(aT)};var B=function(aU){var aT="content",aX=aD[aU],aW,aV;aU=aU||aC||R;if(aX===undefined){aW=n(aU);if(!aW){aX=null}else{if(aW.hasAttribute(aT)){aT=aW.getAttribute(aT);aX=C(aT);aV=location.href.match(/#.*ftag=([^&#]*)/);if(aV){aX.target_params["ftag"]=aV[1]}}else{aX=null}}aD[aU]=aX}return aX};var av=function(aT,aU){if(!!aT&&!!aU){aD[aT]=aU}};var p=function(a1,aW){var aX=X(),a0=a1.divId,aY=a1.isBlank,aZ=a1.isSkin,a2=a1.skinType,aV=aB(),aU=false,aT="";if(true===aW){aT="Ad render detected > "}else{aT="Callback from creative > "}F.push(aT+"renderAdCallback: "+aK(a1));if(!a0&&true===aZ){a0=ad}aX.rendered[a0]=!aY;aX.loaded.push(a0);if(!!aY){T(a0,true);if(!!aZ){j(true)}}else{T(a0,false);if(!!aZ){j(false,a2)}switch(a0){case d:F.push("Nav logo ad exists");aU=U;break;case aM:F.push("Omnibar ad exists");aU=Z;break}if(aU){o(aV,aU,true)}o(aV,ab,true)}b()};ao.renderAdCallback=p;var D=function(aW,aV){var aT,aU;if(!aW||!aW.setTargeting||!aV){return}for(aT in aV){if(aV.hasOwnProperty(aT)){aU='("'+aT+'", "'+aV[aT]+'")';try{aW.setTargeting(aT,aV[aT].toString());F.push("-> setTargeting"+aU)}catch(aX){F.push("error","setTargeting failed for "+aU+". Please make sure targeting key and value are strings.")}}}};var aI=function(aU,aZ,aY){var a0,aX,aT,aV,aW={adId:aZ};if(aR){aV=W(aZ);if(!aV){F.push("IGNORE slot ["+aZ+"]: adDiv not found");return false}aW.adDiv=aV;if(aV.hasAttribute(aE)){aT=aV.getAttribute(aE)}}if(!aT){aT=aw}aW.adEvent=aT;if(!!aY.outOfPage){F.push("DEFINE out of page slot ["+aZ+"]");a0=am.defineOutOfPageSlot(aU,aZ).addService(ax)}else{F.push("DEFINE slot ["+aZ+"] with sizes "+aK(aY.size));a0=am.defineSlot(aU,aY.size,aZ);if(ak===aZ){F.push("-> Adding companionAds service");a0.addService(am.companionAds())}a0.addService(ax);aX=aY.target;if(!!aX){F.push("-> Set slot ["+aZ+"] targeting:");D(a0,aX)}}aW.adSlot=a0;I(aW);return true};var c=function(aV){var a1=B(aV),aZ=B(),aU=a1.unit_name||aZ.unit_name,a0=a1.page_event_name,aX,aY,aT="Defining ads for ",aW=false;if(!!a0){aT+="["+a0+"] page event with "}aY=a1.mapped_units;if(!!aY){F.push(aT+"unitName: ["+aU+"]");for(aX in aY){if(aY.hasOwnProperty(aX)){aW=aI(aU,aX,aY[aX],a0)||aW}}return aW}return false};var V=function(){var aW=aL(),aX,aT,aV,aU=false;if(!!aW&&0<aW.length){for(aV=0;aV<aW.length;aV++){aX=aW[aV];aT=aX.page_event_name;if(!!aT){av(aT,aX);aU=c(aT)||aU}}}if(true===aU){s()}return aU};var aj=function(aT){var aW=B(aT),aV=aW.target_params,aU=ay();if(!!aV){if(!!aU){aV.vguid=aU}F.push("SET PAGE LEVEL TARGETING:");D(ax,aV)}else{F.push("There are no page targeting key/value pairs")}};var ae=function(){var aV=B(),aT=!!aV.disable_initial_load,aU=false;ax=am.pubads();aU=c()||aU;if(true===aR){aU=V()||aU}if(false===aU){F.push("No ads on the page. Quitting.");return}aj();if(aV.enable_collapse_empty_divs){F.push("Enable collapse empty divs");ax.collapseEmptyDivs(true)}if(true===aV.single_request){F.push("Enable single request");ax.enableSingleRequest()}if(false===aR){F.push("Enable sync rendering");ax.enableSyncRendering()}if(true===aT){F.push("Disable initial load");ax.disableInitialLoad()}F.push("Enable services");am.enableServices();if(true===aR&&true===aT){F.push("Refresh Ads");aH()}K()};var I=function(aV){var aU=aV.adId,aT=aV.adEvent,aW;if(!aP[aT]){aP[aT]={adSkinId:null,adIds:[],map:{},loadDetected:{},rendered:{},loaded:[],pending:[]}}delete aV.adId;aP[aT].map[aU]=aV;if(!!aR&&r(aU)){aW=h();if(true===aW.isAdjacent){aP[aT].adIds.push(aU)}else{F.push("Skin is not adjacent to leader");aP[aT].adSkinId=aU}}else{aP[aT].adIds.push(aU)}};var X=function(aT){if(!aT){aT=aC}return aP[aT]};var k=function(aT){var aU=X(aT),aV=aU.adSkinId,aW;if(!!aV&&undefined===aU.rendered[aV]){aW=[aV]}if(!aW){aW=aU.adIds.slice(0)}return aW};var aJ=function(aU){var aW=X(aU),aX=k(aU),aT=[],aV;for(aV=0;aV<aX.length;aV++){aT.push(aW.map[aX[aV]].adDiv)}return aT};var v=function(aU){var aW=X(aU),aX=k(aU),aT=[],aV;for(aV=0;aV<aX.length;aV++){aT.push(aW.map[aX[aV]].adSlot)}return aT};var aO=2500,aQ=200,ag=0,M=30000,aq=false,al=false,x=false,an=null,g=null,q=null,aA=0,J=function(aT){var aU=X(aT),aX=aU.adSkinId,aW=aU.loaded.length,aV=false;if(!!aX){if(aW>1){aV=true}}else{if(aW>0){aV=true}}if(true===aV){aU.rendered={};aU.loadDetected={};aU.loaded=[];aU.pending=[]}},w=function(){var aU=new Date(),a3=aU.getTime(),aX=X(),aV=aJ(),a0=aV.length,a6=[],aW,aT,a2,a4,aY,a1=false,a5=false,aZ=0;x=true;if(null===an){J();ag=aO;if(!!aX.adSkinId){if(0===aX.loaded.length){ag=aQ}}aA=0;an=a3;g=a3+M;al=false;m();return}aW=aX.rendered;aT=aX.loadDetected;F.push("Checking for blank ads ("+(++aA)+")");while(aZ<a0){a2=aV.shift();a4=a2.id;a5=false;a1=r(a4);if(undefined===aW[a4]){if(undefined===aT[a4]){if(0<a2.innerHTML.indexOf("iframe")){F.push("Ad load detected for ["+a4+"]");aT[a4]=1}a6.push(a4)}else{F.push("Checking if ["+a4+"] loaded as blank");if("none"===a2.style.display){aY=true}else{aY=false}if(false===a1){a5={divId:a4,isBlank:aY};if(true===a1){a5.isSkin=true}}else{F.push("Relying on skin to fire renderAdCallback")}if(false!==a5){p(a5,true)}}}aZ++}aX.pending=a6;if(0===a6.length){F.push("Auto detect has verified all display ads.");al=true}else{F.push("Ads not verified yet:\n",a6.join(", "))}if((false===al)&&a3>=g){if(0<a6.length){F.push("Polling reached time limit ("+M+" milliseconds) before we verified all ads.")}al=true}if(true===al){P()}else{m(true)}},P=function(){if(null!==an){F.push("Stop polling for blank display ads");an=null;clearTimeout(q);q=null;x=false}},m=function(aT){F.push("Check for blank ads "+(aT?"again ":"")+"in "+ag+" milliseconds");q=setTimeout(w,ag)};var e=function(aT){F.push("DISPLAY ["+aT+"] ad");am.cmd.push(function(){am.display(aT)})};var i=function(aT){if(!!aT){if(0<aT.innerHTML.indexOf("iframe")){F.push("RESET adDiv ["+aT.id+"]");aT.style.display="";aT.innerHTML=""}}};var z=function(aU){var aT=aJ(aU),aV,aW;if(!aT||aT.length<1){return}for(aW=0;aW<aT.length;aW++){aV=aT[aW];i(aV)}};var y=function(){var aT=ay(),aU={};aU[ah]=aT;F.push("UPDATE PAGE LEVEL TARGETING:");D(ax,aU)};var aH=function(aT){am.cmd.push(function(){var aV=k(aT),aU=v(aT);z(aT);if(ac){y()}F.push("REFRESH ad slots: ["+aV.join(", ")+"]");ax.refresh(aU);if(false===x){w()}})};var au=function(){at=ao.displayAdCmd||[];ao.displayAdCmd=at};var K=function(){var aU=B();au();if(at.length>0){for(var aT=0;aT<at.length;aT++){e(at[aT])}}at={};at.push=function(aV){e(aV)};if(true===aR&&false===aU.disable_initial_load&&false===x){w()}ao.displayAdCmd=at};var af=function(){var aT=B();if(!aT){return}F.push("Initialize "+(aR?"a":"")+"synchronous ads "+(Y?"on document ready ":"")+"with settings:\n",aT);am.cmd.push(ae)};var az=function(){var aX=B(),aT="script",aV,aW="https:",aU=document.createElement(aT),aZ=aW===document.location.protocol,aY;if(!!aX){aV=aX.script}else{F.push("!!!ERROR: Unable to get settings!!!")}if(a===true){F.push("Ad script already loaded!");return}if(!!aV){aV=(aZ?aW:"http:")+aX.script;if(aR===true){F.push("Lazy loading ad script");aU.id=aN;aU.async=true;aU.type="text/javascript";aU.src=aV;aY=document.getElementsByTagName(aT)[0];aY.parentNode.insertBefore(aU,aY);a=true}}};var L=function(){if(false===a){az()}af();if(E.length>0){for(var aT=0;aT<E.length;aT++){am.cmd.push(E[aT])}}};(function(){var aT=W(aN),aU=B();aR=aU.deferred;if(!!aT){a=true}am=ao.googletag||{};am.cmd=am.cmd||[];if(!!am.cmd&&!!am.cmd.length&&am.cmd.length>0){E=am.cmd;am.cmd=[]}ao.googletag=am;if(aR===true){var aV=ao.jQuery;if(!!aV){aV(t).ready(function(){Y=true;L()})}else{L()}}else{af()}})()})(this);